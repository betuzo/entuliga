/*!
 * jQuery JavaScript Library v1.11.0
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-01-23T21:02Z
 */

/*!
 * Sizzle CSS Selector Engine v1.10.16
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-01-13
 */

//     Underscore.js 1.8.3
//     http://underscorejs.org
//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

/**
* @license
* MarionetteJS (Backbone.Marionette)
* ----------------------------------
* v3.5.1
*
* Copyright (c)2017 Derick Bailey, Muted Solutions, LLC.
* Distributed under MIT license
*
* http://marionettejs.com
*/

// Backbone.Validation v0.11.5
//
// Copyright (c) 2011-2015 Thomas Pedersen
// Distributed under MIT License
//
// Documentation and full license available at:
// http://thedersen.com/projects/backbone-validation

/*!
 * jQuery Cookie Plugin v1.4.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */

/**
 * @license RequireJS text 2.0.12 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/*!
 * JavaScript Cookie v2.2.0
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */

/*!
 * Bootstrap v3.3.1 (http://getbootstrap.com)
 * Copyright 2011-2017 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */

/* ========================================================================
 * Bootstrap: transition.js v3.3.1
 * http://getbootstrap.com/javascript/#transitions
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: alert.js v3.3.1
 * http://getbootstrap.com/javascript/#alerts
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: button.js v3.3.1
 * http://getbootstrap.com/javascript/#buttons
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: carousel.js v3.3.1
 * http://getbootstrap.com/javascript/#carousel
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: collapse.js v3.3.1
 * http://getbootstrap.com/javascript/#collapse
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: dropdown.js v3.3.1
 * http://getbootstrap.com/javascript/#dropdowns
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: modal.js v3.3.1
 * http://getbootstrap.com/javascript/#modals
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: tooltip.js v3.3.1
 * http://getbootstrap.com/javascript/#tooltip
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: popover.js v3.3.1
 * http://getbootstrap.com/javascript/#popovers
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: scrollspy.js v3.3.1
 * http://getbootstrap.com/javascript/#scrollspy
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: tab.js v3.3.1
 * http://getbootstrap.com/javascript/#tabs
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: affix.js v3.3.1
 * http://getbootstrap.com/javascript/#affix
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/*!
 * Bootstrap-select v1.6.4 (http://silviomoreto.github.io/bootstrap-select)
 *
 * Copyright 2013-2015 bootstrap-select
 * Licensed under MIT (https://github.com/silviomoreto/bootstrap-select/blob/master/LICENSE)
 */

/*
 * Date Format 1.2.3
 * (c) 2007-2009 Steven Levithan <stevenlevithan.com>
 * MIT license
 *
 * Includes enhancements by Scott Trenda <scott.trenda.net>
 * and Kris Kowal <cixar.com/~kris.kowal/>
 *
 * Accepts a date, a mask, or a date and a mask.
 * Returns a formatted version of the given date.
 * The date defaults to the current date/time.
 * The mask defaults to dateFormat.masks.default.
 */

/* =========================================================
 * bootstrap-datetimepicker.js
 * =========================================================
 * Copyright 2012 Stefan Petre
 *
 * Improvements by Andrew Rowls
 * Improvements by Sébastien Malot
 * Improvements by Yun Lai
 * Improvements by Kenneth Henderick
 * Improvements by CuGBabyBeaR
 * Improvements by Christian Vaas
 *
 * Project URL : http://www.malot.fr/bootstrap-datetimepicker
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */

/*!
 * typeahead.js 0.11.1
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT
 */

if(function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function i(t){var e=t.length,i=ot.type(t);return"function"!==i&&!ot.isWindow(t)&&(!(1!==t.nodeType||!e)||("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t))}function n(t,e,i){if(ot.isFunction(e))return ot.grep(t,function(t,n){return!!e.call(t,n,t)!==i});if(e.nodeType)return ot.grep(t,function(t){return t===e!==i});if("string"==typeof e){if(ut.test(e))return ot.filter(e,t,i);e=ot.filter(e,t)}return ot.grep(t,function(t){return ot.inArray(t,e)>=0!==i})}function o(t,e){do{t=t[e]}while(t&&1!==t.nodeType);return t}function s(t){var e=yt[t]={};return ot.each(t.match(bt)||[],function(t,i){e[i]=!0}),e}function r(){ft.addEventListener?(ft.removeEventListener("DOMContentLoaded",a,!1),t.removeEventListener("load",a,!1)):(ft.detachEvent("onreadystatechange",a),t.detachEvent("onload",a))}function a(){(ft.addEventListener||"load"===event.type||"complete"===ft.readyState)&&(r(),ot.ready())}function l(t,e,i){if(void 0===i&&1===t.nodeType){var n="data-"+e.replace(Tt,"-$1").toLowerCase();if("string"==typeof(i=t.getAttribute(n))){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:_t.test(i)?ot.parseJSON(i):i)}catch(t){}ot.data(t,e,i)}else i=void 0}return i}function c(t){var e;for(e in t)if(("data"!==e||!ot.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function h(t,e,i,n){if(ot.acceptData(t)){var o,s,r=ot.expando,a=t.nodeType,l=a?ot.cache:t,c=a?t[r]:t[r]&&r;if(c&&l[c]&&(n||l[c].data)||void 0!==i||"string"!=typeof e)return c||(c=a?t[r]=X.pop()||ot.guid++:r),l[c]||(l[c]=a?{}:{toJSON:ot.noop}),"object"!=typeof e&&"function"!=typeof e||(n?l[c]=ot.extend(l[c],e):l[c].data=ot.extend(l[c].data,e)),s=l[c],n||(s.data||(s.data={}),s=s.data),void 0!==i&&(s[ot.camelCase(e)]=i),"string"==typeof e?null==(o=s[e])&&(o=s[ot.camelCase(e)]):o=s,o}}function d(t,e,i){if(ot.acceptData(t)){var n,o,s=t.nodeType,r=s?ot.cache:t,a=s?t[ot.expando]:ot.expando;if(r[a]){if(e&&(n=i?r[a]:r[a].data)){ot.isArray(e)?e=e.concat(ot.map(e,ot.camelCase)):e in n?e=[e]:(e=ot.camelCase(e),e=e in n?[e]:e.split(" ")),o=e.length;for(;o--;)delete n[e[o]];if(i?!c(n):!ot.isEmptyObject(n))return}(i||(delete r[a].data,c(r[a])))&&(s?ot.cleanData([t],!0):nt.deleteExpando||r!=r.window?delete r[a]:r[a]=null)}}}function u(){return!0}function p(){return!1}function f(){try{return ft.activeElement}catch(t){}}function g(t){var e=Pt.split("|"),i=t.createDocumentFragment();if(i.createElement)for(;e.length;)i.createElement(e.pop());return i}function v(t,e){var i,n,o=0,s=typeof t.getElementsByTagName!==Ct?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!==Ct?t.querySelectorAll(e||"*"):void 0;if(!s)for(s=[],i=t.childNodes||t;null!=(n=i[o]);o++)!e||ot.nodeName(n,e)?s.push(n):ot.merge(s,v(n,e));return void 0===e||e&&ot.nodeName(t,e)?ot.merge([t],s):s}function m(t){Ot.test(t.type)&&(t.defaultChecked=t.checked)}function b(t,e){return ot.nodeName(t,"table")&&ot.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function y(t){return t.type=(null!==ot.find.attr(t,"type"))+"/"+t.type,t}function w(t){var e=Wt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function x(t,e){for(var i,n=0;null!=(i=t[n]);n++)ot._data(i,"globalEval",!e||ot._data(e[n],"globalEval"))}function C(t,e){if(1===e.nodeType&&ot.hasData(t)){var i,n,o,s=ot._data(t),r=ot._data(e,s),a=s.events;if(a){delete r.handle,r.events={};for(i in a)for(n=0,o=a[i].length;n<o;n++)ot.event.add(e,i,a[i][n])}r.data&&(r.data=ot.extend({},r.data))}}function _(t,e){var i,n,o;if(1===e.nodeType){if(i=e.nodeName.toLowerCase(),!nt.noCloneEvent&&e[ot.expando]){o=ot._data(e);for(n in o.events)ot.removeEvent(e,n,o.handle);e.removeAttribute(ot.expando)}"script"===i&&e.text!==t.text?(y(e).text=t.text,w(e)):"object"===i?(e.parentNode&&(e.outerHTML=t.outerHTML),nt.html5Clone&&t.innerHTML&&!ot.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===i&&Ot.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===i?e.defaultSelected=e.selected=t.defaultSelected:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}}function T(e,i){var n=ot(i.createElement(e)).appendTo(i.body),o=t.getDefaultComputedStyle?t.getDefaultComputedStyle(n[0]).display:ot.css(n[0],"display");return n.detach(),o}function S(t){var e=ft,i=Qt[t];return i||(i=T(t,e),"none"!==i&&i||(Kt=(Kt||ot("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=(Kt[0].contentWindow||Kt[0].contentDocument).document,e.write(),e.close(),i=T(t,e),Kt.detach()),Qt[t]=i),i}function k(t,e){return{get:function(){var i=t();if(null!=i)return i?void delete this.get:(this.get=e).apply(this,arguments)}}}function E(t,e){if(e in t)return e;for(var i=e.charAt(0).toUpperCase()+e.slice(1),n=e,o=de.length;o--;)if((e=de[o]+i)in t)return e;return n}function A(t,e){for(var i,n,o,s=[],r=0,a=t.length;r<a;r++)n=t[r],n.style&&(s[r]=ot._data(n,"olddisplay"),i=n.style.display,e?(s[r]||"none"!==i||(n.style.display=""),""===n.style.display&&Et(n)&&(s[r]=ot._data(n,"olddisplay",S(n.nodeName)))):s[r]||(o=Et(n),(i&&"none"!==i||!o)&&ot._data(n,"olddisplay",o?i:ot.css(n,"display"))));for(r=0;r<a;r++)n=t[r],n.style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?s[r]||"":"none"));return t}function O(t,e,i){var n=ae.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function D(t,e,i,n,o){for(var s=i===(n?"border":"content")?4:"width"===e?1:0,r=0;s<4;s+=2)"margin"===i&&(r+=ot.css(t,i+kt[s],!0,o)),n?("content"===i&&(r-=ot.css(t,"padding"+kt[s],!0,o)),"margin"!==i&&(r-=ot.css(t,"border"+kt[s]+"Width",!0,o))):(r+=ot.css(t,"padding"+kt[s],!0,o),"padding"!==i&&(r+=ot.css(t,"border"+kt[s]+"Width",!0,o)));return r}function j(t,e,i){var n=!0,o="width"===e?t.offsetWidth:t.offsetHeight,s=Zt(t),r=nt.boxSizing()&&"border-box"===ot.css(t,"boxSizing",!1,s);if(o<=0||null==o){if(o=te(t,e,s),(o<0||null==o)&&(o=t.style[e]),ie.test(o))return o;n=r&&(nt.boxSizingReliable()||o===t.style[e]),o=parseFloat(o)||0}return o+D(t,e,i||(r?"border":"content"),n,s)+"px"}function M(t,e,i,n,o){return new M.prototype.init(t,e,i,n,o)}function I(){return setTimeout(function(){ue=void 0}),ue=ot.now()}function V(t,e){var i,n={height:t},o=0;for(e=e?1:0;o<4;o+=2-e)i=kt[o],n["margin"+i]=n["padding"+i]=t;return e&&(n.opacity=n.width=t),n}function P(t,e,i){for(var n,o=(be[e]||[]).concat(be["*"]),s=0,r=o.length;s<r;s++)if(n=o[s].call(i,e,t))return n}function L(t,e,i){var n,o,s,r,a,l,c,h,d=this,u={},p=t.style,f=t.nodeType&&Et(t),g=ot._data(t,"fxshow");i.queue||(a=ot._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,ot.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],c=ot.css(t,"display"),h=S(t.nodeName),"none"===c&&(c=h),"inline"===c&&"none"===ot.css(t,"float")&&(nt.inlineBlockNeedsLayout&&"inline"!==h?p.zoom=1:p.display="inline-block")),i.overflow&&(p.overflow="hidden",nt.shrinkWrapBlocks()||d.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(n in e)if(o=e[n],fe.exec(o)){if(delete e[n],s=s||"toggle"===o,o===(f?"hide":"show")){if("show"!==o||!g||void 0===g[n])continue;f=!0}u[n]=g&&g[n]||ot.style(t,n)}if(!ot.isEmptyObject(u)){g?"hidden"in g&&(f=g.hidden):g=ot._data(t,"fxshow",{}),s&&(g.hidden=!f),f?ot(t).show():d.done(function(){ot(t).hide()}),d.done(function(){var e;ot._removeData(t,"fxshow");for(e in u)ot.style(t,e,u[e])});for(n in u)r=P(f?g[n]:0,n,d),n in g||(g[n]=r.start,f&&(r.end=r.start,r.start="width"===n||"height"===n?1:0))}}function R(t,e){var i,n,o,s,r;for(i in t)if(n=ot.camelCase(i),o=e[n],s=t[i],ot.isArray(s)&&(o=s[1],s=t[i]=s[0]),i!==n&&(t[n]=s,delete t[i]),(r=ot.cssHooks[n])&&"expand"in r){s=r.expand(s),delete t[n];for(i in s)i in t||(t[i]=s[i],e[i]=o)}else e[n]=o}function F(t,e,i){var n,o,s=0,r=me.length,a=ot.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=ue||I(),i=Math.max(0,c.startTime+c.duration-e),n=i/c.duration||0,s=1-n,r=0,l=c.tweens.length;r<l;r++)c.tweens[r].run(s);return a.notifyWith(t,[c,s,i]),s<1&&l?i:(a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:ot.extend({},e),opts:ot.extend(!0,{specialEasing:{}},i),originalProperties:e,originalOptions:i,startTime:ue||I(),duration:i.duration,tweens:[],createTween:function(e,i){var n=ot.Tween(t,c.opts,e,i,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var i=0,n=e?c.tweens.length:0;if(o)return this;for(o=!0;i<n;i++)c.tweens[i].run(1);return e?a.resolveWith(t,[c,e]):a.rejectWith(t,[c,e]),this}}),h=c.props;for(R(h,c.opts.specialEasing);s<r;s++)if(n=me[s].call(c,t,h,c.opts))return n;return ot.map(h,P,c),ot.isFunction(c.opts.start)&&c.opts.start.call(t,c),ot.fx.timer(ot.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function q(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,o=0,s=e.toLowerCase().match(bt)||[];if(ot.isFunction(i))for(;n=s[o++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function N(t,e,i,n){function o(a){var l;return s[a]=!0,ot.each(t[a]||[],function(t,a){var c=a(e,i,n);return"string"!=typeof c||r||s[c]?r?!(l=c):void 0:(e.dataTypes.unshift(c),o(c),!1)}),l}var s={},r=t===$e;return o(e.dataTypes[0])||!s["*"]&&o("*")}function B(t,e){var i,n,o=ot.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((o[n]?t:i||(i={}))[n]=e[n]);return i&&ot.extend(!0,t,i),t}function $(t,e,i){for(var n,o,s,r,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===o&&(o=t.mimeType||e.getResponseHeader("Content-Type"));if(o)for(r in a)if(a[r]&&a[r].test(o)){l.unshift(r);break}if(l[0]in i)s=l[0];else{for(r in i){if(!l[0]||t.converters[r+" "+l[0]]){s=r;break}n||(n=r)}s=s||n}if(s)return s!==l[0]&&l.unshift(s),i[s]}function z(t,e,i,n){var o,s,r,a,l,c={},h=t.dataTypes.slice();if(h[1])for(r in t.converters)c[r.toLowerCase()]=t.converters[r];for(s=h.shift();s;)if(t.responseFields[s]&&(i[t.responseFields[s]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=s,s=h.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(r=c[l+" "+s]||c["* "+s]))for(o in c)if(a=o.split(" "),a[1]===s&&(r=c[l+" "+a[0]]||c["* "+a[0]])){!0===r?r=c[o]:!0!==c[o]&&(s=a[0],h.unshift(a[1]));break}if(!0!==r)if(r&&t.throws)e=r(e);else try{e=r(e)}catch(t){return{state:"parsererror",error:r?t:"No conversion from "+l+" to "+s}}}return{state:"success",data:e}}function U(t,e,i,n){var o;if(ot.isArray(e))ot.each(e,function(e,o){i||He.test(t)?n(t,o):U(t+"["+("object"==typeof o?e:"")+"]",o,i,n)});else if(i||"object"!==ot.type(e))n(t,e);else for(o in e)U(t+"["+o+"]",e[o],i,n)}function H(){try{return new t.XMLHttpRequest}catch(t){}}function W(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function J(t){return ot.isWindow(t)?t:9===t.nodeType&&(t.defaultView||t.parentWindow)}var X=[],G=X.slice,Y=X.concat,K=X.push,Q=X.indexOf,Z={},tt=Z.toString,et=Z.hasOwnProperty,it="".trim,nt={},ot=function(t,e){return new ot.fn.init(t,e)},st=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rt=/^-ms-/,at=/-([\da-z])/gi,lt=function(t,e){return e.toUpperCase()};ot.fn=ot.prototype={jquery:"1.11.0",constructor:ot,selector:"",length:0,toArray:function(){return G.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:G.call(this)},pushStack:function(t){var e=ot.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return ot.each(this,t,e)},map:function(t){return this.pushStack(ot.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(G.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(i>=0&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:K,sort:X.sort,splice:X.splice},ot.extend=ot.fn.extend=function(){var t,e,i,n,o,s,r=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof r&&(c=r,r=arguments[a]||{},a++),"object"==typeof r||ot.isFunction(r)||(r={}),a===l&&(r=this,a--);a<l;a++)if(null!=(o=arguments[a]))for(n in o)t=r[n],i=o[n],r!==i&&(c&&i&&(ot.isPlainObject(i)||(e=ot.isArray(i)))?(e?(e=!1,s=t&&ot.isArray(t)?t:[]):s=t&&ot.isPlainObject(t)?t:{},r[n]=ot.extend(c,s,i)):void 0!==i&&(r[n]=i));return r},ot.extend({expando:"jQuery"+("1.11.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===ot.type(t)},isArray:Array.isArray||function(t){return"array"===ot.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return t-parseFloat(t)>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==ot.type(t)||t.nodeType||ot.isWindow(t))return!1;try{if(t.constructor&&!et.call(t,"constructor")&&!et.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}if(nt.ownLast)for(e in t)return et.call(t,e);for(e in t);return void 0===e||et.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?Z[tt.call(t)]||"object":typeof t},globalEval:function(e){e&&ot.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(rt,"ms-").replace(at,lt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var o=0,s=t.length,r=i(t);if(n){if(r)for(;o<s&&!1!==e.apply(t[o],n);o++);else for(o in t)if(!1===e.apply(t[o],n))break}else if(r)for(;o<s&&!1!==e.call(t[o],o,t[o]);o++);else for(o in t)if(!1===e.call(t[o],o,t[o]))break;return t},trim:it&&!it.call("\ufeff ")?function(t){return null==t?"":it.call(t)}:function(t){return null==t?"":(t+"").replace(st,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?ot.merge(n,"string"==typeof t?[t]:t):K.call(n,t)),n},inArray:function(t,e,i){var n;if(e){if(Q)return Q.call(e,t,i);for(n=e.length,i=i?i<0?Math.max(0,n+i):i:0;i<n;i++)if(i in e&&e[i]===t)return i}return-1},merge:function(t,e){for(var i=+e.length,n=0,o=t.length;n<i;)t[o++]=e[n++];if(i!==i)for(;void 0!==e[n];)t[o++]=e[n++];return t.length=o,t},grep:function(t,e,i){for(var n=[],o=0,s=t.length,r=!i;o<s;o++)!e(t[o],o)!==r&&n.push(t[o]);return n},map:function(t,e,n){var o,s=0,r=t.length,a=i(t),l=[];if(a)for(;s<r;s++)null!=(o=e(t[s],s,n))&&l.push(o);else for(s in t)null!=(o=e(t[s],s,n))&&l.push(o);return Y.apply([],l)},guid:1,proxy:function(t,e){var i,n,o;if("string"==typeof e&&(o=t[e],e=t,t=o),ot.isFunction(t))return i=G.call(arguments,2),n=function(){return t.apply(e||this,i.concat(G.call(arguments)))},n.guid=t.guid=t.guid||ot.guid++,n},now:function(){return+new Date},support:nt}),ot.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Z["[object "+e+"]"]=e.toLowerCase()});var ct=function(t){function e(t,e,i,n){var o,s,r,a,c,u,p,f,g,v;if((e?e.ownerDocument||e:F)!==D&&O(e),e=e||D,i=i||[],!t||"string"!=typeof t)return i;if(1!==(a=e.nodeType)&&9!==a)return[];if(M&&!n){if(o=vt.exec(t))if(r=o[1]){if(9===a){if(!(s=e.getElementById(r))||!s.parentNode)return i;if(s.id===r)return i.push(s),i}else if(e.ownerDocument&&(s=e.ownerDocument.getElementById(r))&&L(e,s)&&s.id===r)return i.push(s),i}else{if(o[2])return K.apply(i,e.getElementsByTagName(t)),i;if((r=o[3])&&x.getElementsByClassName&&e.getElementsByClassName)return K.apply(i,e.getElementsByClassName(r)),i}if(x.qsa&&(!I||!I.test(t))){if(f=p=R,g=e,v=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(u=h(t),(p=e.getAttribute("id"))?f=p.replace(bt,"\\$&"):e.setAttribute("id",f),f="[id='"+f+"'] ",c=u.length;c--;)u[c]=f+d(u[c]);g=mt.test(t)&&l(e.parentNode)||e,v=u.join(",")}if(v)try{return K.apply(i,g.querySelectorAll(v)),i}catch(t){}finally{p||e.removeAttribute("id")}}}return y(t.replace(rt,"$1"),e,i,n)}function i(){function t(i,n){return e.push(i+" ")>C.cacheLength&&delete t[e.shift()],t[i+" "]=n}var e=[];return t}function n(t){return t[R]=!0,t}function o(t){var e=D.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function s(t,e){for(var i=t.split("|"),n=t.length;n--;)C.attrHandle[i[n]]=e}function r(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||W)-(~t.sourceIndex||W);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function a(t){return n(function(e){return e=+e,n(function(i,n){for(var o,s=t([],i.length,e),r=s.length;r--;)i[o=s[r]]&&(i[o]=!(n[o]=i[o]))})})}function l(t){return t&&typeof t.getElementsByTagName!==H&&t}function c(){}function h(t,i){var n,o,s,r,a,l,c,h=$[t+" "];if(h)return i?0:h.slice(0);for(a=t,l=[],c=C.preFilter;a;){n&&!(o=at.exec(a))||(o&&(a=a.slice(o[0].length)||a),l.push(s=[])),n=!1,(o=lt.exec(a))&&(n=o.shift(),s.push({value:n,type:o[0].replace(rt," ")}),a=a.slice(n.length));for(r in C.filter)!(o=ut[r].exec(a))||c[r]&&!(o=c[r](o))||(n=o.shift(),s.push({value:n,type:r,matches:o}),a=a.slice(n.length));if(!n)break}return i?a.length:a?e.error(t):$(t,l).slice(0)}function d(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function u(t,e,i){var n=e.dir,o=i&&"parentNode"===n,s=N++;return e.first?function(e,i,s){for(;e=e[n];)if(1===e.nodeType||o)return t(e,i,s)}:function(e,i,r){var a,l,c=[q,s];if(r){for(;e=e[n];)if((1===e.nodeType||o)&&t(e,i,r))return!0}else for(;e=e[n];)if(1===e.nodeType||o){if(l=e[R]||(e[R]={}),(a=l[n])&&a[0]===q&&a[1]===s)return c[2]=a[2];if(l[n]=c,c[2]=t(e,i,r))return!0}}}function p(t){return t.length>1?function(e,i,n){for(var o=t.length;o--;)if(!t[o](e,i,n))return!1;return!0}:t[0]}function f(t,e,i,n,o){for(var s,r=[],a=0,l=t.length,c=null!=e;a<l;a++)(s=t[a])&&(i&&!i(s,n,o)||(r.push(s),c&&e.push(a)));return r}function g(t,e,i,o,s,r){return o&&!o[R]&&(o=g(o)),s&&!s[R]&&(s=g(s,r)),n(function(n,r,a,l){var c,h,d,u=[],p=[],g=r.length,v=n||b(e||"*",a.nodeType?[a]:a,[]),m=!t||!n&&e?v:f(v,u,t,a,l),y=i?s||(n?t:g||o)?[]:r:m;if(i&&i(m,y,a,l),o)for(c=f(y,p),o(c,[],a,l),h=c.length;h--;)(d=c[h])&&(y[p[h]]=!(m[p[h]]=d));if(n){if(s||t){if(s){for(c=[],h=y.length;h--;)(d=y[h])&&c.push(m[h]=d);s(null,y=[],c,l)}for(h=y.length;h--;)(d=y[h])&&(c=s?Z.call(n,d):u[h])>-1&&(n[c]=!(r[c]=d))}}else y=f(y===r?y.splice(g,y.length):y),s?s(null,r,y,l):K.apply(r,y)})}function v(t){for(var e,i,n,o=t.length,s=C.relative[t[0].type],r=s||C.relative[" "],a=s?1:0,l=u(function(t){return t===e},r,!0),c=u(function(t){return Z.call(e,t)>-1},r,!0),h=[function(t,i,n){return!s&&(n||i!==k)||((e=i).nodeType?l(t,i,n):c(t,i,n))}];a<o;a++)if(i=C.relative[t[a].type])h=[u(p(h),i)];else{if(i=C.filter[t[a].type].apply(null,t[a].matches),i[R]){for(n=++a;n<o&&!C.relative[t[n].type];n++);return g(a>1&&p(h),a>1&&d(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(rt,"$1"),i,a<n&&v(t.slice(a,n)),n<o&&v(t=t.slice(n)),n<o&&d(t))}h.push(i)}return p(h)}function m(t,i){var o=i.length>0,s=t.length>0,r=function(n,r,a,l,c){var h,d,u,p=0,g="0",v=n&&[],m=[],b=k,y=n||s&&C.find.TAG("*",c),w=q+=null==b?1:Math.random()||.1,x=y.length;for(c&&(k=r!==D&&r);g!==x&&null!=(h=y[g]);g++){if(s&&h){for(d=0;u=t[d++];)if(u(h,r,a)){l.push(h);break}c&&(q=w)}o&&((h=!u&&h)&&p--,n&&v.push(h))}if(p+=g,o&&g!==p){for(d=0;u=i[d++];)u(v,m,r,a);if(n){if(p>0)for(;g--;)v[g]||m[g]||(m[g]=G.call(l));m=f(m)}K.apply(l,m),c&&!n&&m.length>0&&p+i.length>1&&e.uniqueSort(l)}return c&&(q=w,k=b),v};return o?n(r):r}function b(t,i,n){for(var o=0,s=i.length;o<s;o++)e(t,i[o],n);return n}function y(t,e,i,n){var o,s,r,a,c,u=h(t);if(!n&&1===u.length){if(s=u[0]=u[0].slice(0),s.length>2&&"ID"===(r=s[0]).type&&x.getById&&9===e.nodeType&&M&&C.relative[s[1].type]){if(!(e=(C.find.ID(r.matches[0].replace(yt,wt),e)||[])[0]))return i;t=t.slice(s.shift().value.length)}for(o=ut.needsContext.test(t)?0:s.length;o--&&(r=s[o],!C.relative[a=r.type]);)if((c=C.find[a])&&(n=c(r.matches[0].replace(yt,wt),mt.test(s[0].type)&&l(e.parentNode)||e))){if(s.splice(o,1),!(t=n.length&&d(s)))return K.apply(i,n),i;break}}return S(t,u)(n,e,!M,i,mt.test(t)&&l(e.parentNode)||e),i}var w,x,C,_,T,S,k,E,A,O,D,j,M,I,V,P,L,R="sizzle"+-new Date,F=t.document,q=0,N=0,B=i(),$=i(),z=i(),U=function(t,e){return t===e&&(A=!0),0},H="undefined",W=1<<31,J={}.hasOwnProperty,X=[],G=X.pop,Y=X.push,K=X.push,Q=X.slice,Z=X.indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(this[e]===t)return e;return-1},tt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",et="[\\x20\\t\\r\\n\\f]",it="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",nt=it.replace("w","w#"),ot="\\["+et+"*("+it+")"+et+"*(?:([*^$|!~]?=)"+et+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+nt+")|)|)"+et+"*\\]",st=":("+it+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ot.replace(3,8)+")*)|.*)\\)|)",rt=new RegExp("^"+et+"+|((?:^|[^\\\\])(?:\\\\.)*)"+et+"+$","g"),at=new RegExp("^"+et+"*,"+et+"*"),lt=new RegExp("^"+et+"*([>+~]|"+et+")"+et+"*"),ct=new RegExp("="+et+"*([^\\]'\"]*?)"+et+"*\\]","g"),ht=new RegExp(st),dt=new RegExp("^"+nt+"$"),ut={ID:new RegExp("^#("+it+")"),CLASS:new RegExp("^\\.("+it+")"),TAG:new RegExp("^("+it.replace("w","w*")+")"),ATTR:new RegExp("^"+ot),PSEUDO:new RegExp("^"+st),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+et+"*(even|odd|(([+-]|)(\\d*)n|)"+et+"*(?:([+-]|)"+et+"*(\\d+)|))"+et+"*\\)|)","i"),bool:new RegExp("^(?:"+tt+")$","i"),needsContext:new RegExp("^"+et+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+et+"*((?:-\\d)?\\d*)"+et+"*\\)|)(?=[^-]|$)","i")},pt=/^(?:input|select|textarea|button)$/i,ft=/^h\d$/i,gt=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,mt=/[+~]/,bt=/'|\\/g,yt=new RegExp("\\\\([\\da-f]{1,6}"+et+"?|("+et+")|.)","ig"),wt=function(t,e,i){var n="0x"+e-65536;return n!==n||i?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{K.apply(X=Q.call(F.childNodes),F.childNodes),X[F.childNodes.length].nodeType}catch(t){K={apply:X.length?function(t,e){Y.apply(t,Q.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}x=e.support={},T=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},O=e.setDocument=function(t){var e,i=t?t.ownerDocument||t:F,n=i.defaultView;return i!==D&&9===i.nodeType&&i.documentElement?(D=i,j=i.documentElement,M=!T(i),n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",function(){O()},!1):n.attachEvent&&n.attachEvent("onunload",function(){O()})),x.attributes=o(function(t){return t.className="i",!t.getAttribute("className")}),x.getElementsByTagName=o(function(t){return t.appendChild(i.createComment("")),!t.getElementsByTagName("*").length}),x.getElementsByClassName=gt.test(i.getElementsByClassName)&&o(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),x.getById=o(function(t){return j.appendChild(t).id=R,!i.getElementsByName||!i.getElementsByName(R).length}),x.getById?(C.find.ID=function(t,e){if(typeof e.getElementById!==H&&M){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}},C.filter.ID=function(t){var e=t.replace(yt,wt);return function(t){return t.getAttribute("id")===e}}):(delete C.find.ID,C.filter.ID=function(t){var e=t.replace(yt,wt);return function(t){var i=typeof t.getAttributeNode!==H&&t.getAttributeNode("id");return i&&i.value===e}}),C.find.TAG=x.getElementsByTagName?function(t,e){if(typeof e.getElementsByTagName!==H)return e.getElementsByTagName(t)}:function(t,e){var i,n=[],o=0,s=e.getElementsByTagName(t);if("*"===t){for(;i=s[o++];)1===i.nodeType&&n.push(i);return n}return s},C.find.CLASS=x.getElementsByClassName&&function(t,e){if(typeof e.getElementsByClassName!==H&&M)return e.getElementsByClassName(t)},V=[],I=[],(x.qsa=gt.test(i.querySelectorAll))&&(o(function(t){t.innerHTML="<select t=''><option selected=''></option></select>",t.querySelectorAll("[t^='']").length&&I.push("[*^$]="+et+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||I.push("\\["+et+"*(?:value|"+tt+")"),t.querySelectorAll(":checked").length||I.push(":checked")}),o(function(t){var e=i.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&I.push("name"+et+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||I.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),I.push(",.*:")})),(x.matchesSelector=gt.test(P=j.webkitMatchesSelector||j.mozMatchesSelector||j.oMatchesSelector||j.msMatchesSelector))&&o(function(t){x.disconnectedMatch=P.call(t,"div"),P.call(t,"[s!='']:x"),V.push("!=",st)}),I=I.length&&new RegExp(I.join("|")),V=V.length&&new RegExp(V.join("|")),e=gt.test(j.compareDocumentPosition),L=e||gt.test(j.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},U=e?function(t,e){if(t===e)return A=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!x.sortDetached&&e.compareDocumentPosition(t)===n?t===i||t.ownerDocument===F&&L(F,t)?-1:e===i||e.ownerDocument===F&&L(F,e)?1:E?Z.call(E,t)-Z.call(E,e):0:4&n?-1:1)}:function(t,e){if(t===e)return A=!0,0;var n,o=0,s=t.parentNode,a=e.parentNode,l=[t],c=[e];if(!s||!a)return t===i?-1:e===i?1:s?-1:a?1:E?Z.call(E,t)-Z.call(E,e):0;if(s===a)return r(t,e);for(n=t;n=n.parentNode;)l.unshift(n);for(n=e;n=n.parentNode;)c.unshift(n);for(;l[o]===c[o];)o++;return o?r(l[o],c[o]):l[o]===F?-1:c[o]===F?1:0},i):D},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==D&&O(t),i=i.replace(ct,"='$1']"),x.matchesSelector&&M&&(!V||!V.test(i))&&(!I||!I.test(i)))try{var n=P.call(t,i);if(n||x.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return e(i,D,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==D&&O(t),L(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==D&&O(t);var i=C.attrHandle[e.toLowerCase()],n=i&&J.call(C.attrHandle,e.toLowerCase())?i(t,e,!M):void 0;return void 0!==n?n:x.attributes||!M?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],n=0,o=0;if(A=!x.detectDuplicates,E=!x.sortStable&&t.slice(0),t.sort(U),A){for(;e=t[o++];)e===t[o]&&(n=i.push(o));for(;n--;)t.splice(i[n],1)}return E=null,t},_=e.getText=function(t){var e,i="",n=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=_(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[n++];)i+=_(e);return i},C=e.selectors={cacheLength:50,createPseudo:n,match:ut,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(yt,wt),t[3]=(t[4]||t[5]||"").replace(yt,wt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[5]&&t[2];return ut.CHILD.test(t[0])?null:(t[3]&&void 0!==t[4]?t[2]=t[4]:i&&ht.test(i)&&(e=h(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(yt,wt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=B[t+" "];return e||(e=new RegExp("(^|"+et+")"+t+"("+et+"|$)"))&&B(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==H&&t.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(o){var s=e.attr(o,t);return null==s?"!="===i:!i||(s+="","="===i?s===n:"!="===i?s!==n:"^="===i?n&&0===s.indexOf(n):"*="===i?n&&s.indexOf(n)>-1:"$="===i?n&&s.slice(-n.length)===n:"~="===i?(" "+s+" ").indexOf(n)>-1:"|="===i&&(s===n||s.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,i,n,o){var s="nth"!==t.slice(0,3),r="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===o?function(t){return!!t.parentNode}:function(e,i,l){var c,h,d,u,p,f,g=s!==r?"nextSibling":"previousSibling",v=e.parentNode,m=a&&e.nodeName.toLowerCase(),b=!l&&!a;if(v){if(s){for(;g;){for(d=e;d=d[g];)if(a?d.nodeName.toLowerCase()===m:1===d.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[r?v.firstChild:v.lastChild],r&&b){for(h=v[R]||(v[R]={}),c=h[t]||[],p=c[0]===q&&c[1],u=c[0]===q&&c[2],d=p&&v.childNodes[p];d=++p&&d&&d[g]||(u=p=0)||f.pop();)if(1===d.nodeType&&++u&&d===e){h[t]=[q,p,u];break}}else if(b&&(c=(e[R]||(e[R]={}))[t])&&c[0]===q)u=c[1];else for(;(d=++p&&d&&d[g]||(u=p=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==m:1!==d.nodeType)||!++u||(b&&((d[R]||(d[R]={}))[t]=[q,u]),d!==e)););return(u-=o)===n||u%n==0&&u/n>=0}}},PSEUDO:function(t,i){var o,s=C.pseudos[t]||C.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return s[R]?s(i):s.length>1?(o=[t,t,"",i],C.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,o=s(t,i),r=o.length;r--;)n=Z.call(t,o[r]),t[n]=!(e[n]=o[r])}):function(t){return s(t,0,o)}):s}},pseudos:{not:n(function(t){var e=[],i=[],o=S(t.replace(rt,"$1"));return o[R]?n(function(t,e,i,n){for(var s,r=o(t,null,n,[]),a=t.length;a--;)(s=r[a])&&(t[a]=!(e[a]=s))}):function(t,n,s){return e[0]=t,o(e,null,s,i),!i.pop()}}),has:n(function(t){return function(i){return e(t,i).length>0}}),contains:n(function(t){return function(e){return(e.textContent||e.innerText||_(e)).indexOf(t)>-1}}),lang:n(function(t){return dt.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(yt,wt).toLowerCase(),function(e){var i;do{if(i=M?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(i=i.toLowerCase())===t||0===i.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===j},focus:function(t){return t===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!C.pseudos.empty(t)},header:function(t){return ft.test(t.nodeName)},input:function(t){return pt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:a(function(){return[0]}),last:a(function(t,e){return[e-1]}),eq:a(function(t,e,i){return[i<0?i+e:i]}),even:a(function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t}),odd:a(function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t}),lt:a(function(t,e,i){for(var n=i<0?i+e:i;--n>=0;)t.push(n);return t}),gt:a(function(t,e,i){
for(var n=i<0?i+e:i;++n<e;)t.push(n);return t})}},C.pseudos.nth=C.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[w]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(w);for(w in{submit:!0,reset:!0})C.pseudos[w]=function(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}(w);return c.prototype=C.filters=C.pseudos,C.setFilters=new c,S=e.compile=function(t,e){var i,n=[],o=[],s=z[t+" "];if(!s){for(e||(e=h(t)),i=e.length;i--;)s=v(e[i]),s[R]?n.push(s):o.push(s);s=z(t,m(o,n))}return s},x.sortStable=R.split("").sort(U).join("")===R,x.detectDuplicates=!!A,O(),x.sortDetached=o(function(t){return 1&t.compareDocumentPosition(D.createElement("div"))}),o(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||s("type|href|height|width",function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),x.attributes&&o(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||s("value",function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),o(function(t){return null==t.getAttribute("disabled")})||s(tt,function(t,e,i){var n;if(!i)return!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(t);ot.find=ct,ot.expr=ct.selectors,ot.expr[":"]=ot.expr.pseudos,ot.unique=ct.uniqueSort,ot.text=ct.getText,ot.isXMLDoc=ct.isXML,ot.contains=ct.contains;var ht=ot.expr.match.needsContext,dt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ut=/^.[^:#\[\.,]*$/;ot.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?ot.find.matchesSelector(n,t)?[n]:[]:ot.find.matches(t,ot.grep(e,function(t){return 1===t.nodeType}))},ot.fn.extend({find:function(t){var e,i=[],n=this,o=n.length;if("string"!=typeof t)return this.pushStack(ot(t).filter(function(){for(e=0;e<o;e++)if(ot.contains(n[e],this))return!0}));for(e=0;e<o;e++)ot.find(t,n[e],i);return i=this.pushStack(o>1?ot.unique(i):i),i.selector=this.selector?this.selector+" "+t:t,i},filter:function(t){return this.pushStack(n(this,t||[],!1))},not:function(t){return this.pushStack(n(this,t||[],!0))},is:function(t){return!!n(this,"string"==typeof t&&ht.test(t)?ot(t):t||[],!1).length}});var pt,ft=t.document,gt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(ot.fn.init=function(t,e){var i,n;if(!t)return this;if("string"==typeof t){if(!(i="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:gt.exec(t))||!i[1]&&e)return!e||e.jquery?(e||pt).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof ot?e[0]:e,ot.merge(this,ot.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:ft,!0)),dt.test(i[1])&&ot.isPlainObject(e))for(i in e)ot.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}if((n=ft.getElementById(i[2]))&&n.parentNode){if(n.id!==i[2])return pt.find(t);this.length=1,this[0]=n}return this.context=ft,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):ot.isFunction(t)?void 0!==pt.ready?pt.ready(t):t(ot):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),ot.makeArray(t,this))}).prototype=ot.fn,pt=ot(ft);var vt=/^(?:parents|prev(?:Until|All))/,mt={children:!0,contents:!0,next:!0,prev:!0};ot.extend({dir:function(t,e,i){for(var n=[],o=t[e];o&&9!==o.nodeType&&(void 0===i||1!==o.nodeType||!ot(o).is(i));)1===o.nodeType&&n.push(o),o=o[e];return n},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}}),ot.fn.extend({has:function(t){var e,i=ot(t,this),n=i.length;return this.filter(function(){for(e=0;e<n;e++)if(ot.contains(this,i[e]))return!0})},closest:function(t,e){for(var i,n=0,o=this.length,s=[],r=ht.test(t)||"string"!=typeof t?ot(t,e||this.context):0;n<o;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(r?r.index(i)>-1:1===i.nodeType&&ot.find.matchesSelector(i,t))){s.push(i);break}return this.pushStack(s.length>1?ot.unique(s):s)},index:function(t){return t?"string"==typeof t?ot.inArray(this[0],ot(t)):ot.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(ot.unique(ot.merge(this.get(),ot(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),ot.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return ot.dir(t,"parentNode")},parentsUntil:function(t,e,i){return ot.dir(t,"parentNode",i)},next:function(t){return o(t,"nextSibling")},prev:function(t){return o(t,"previousSibling")},nextAll:function(t){return ot.dir(t,"nextSibling")},prevAll:function(t){return ot.dir(t,"previousSibling")},nextUntil:function(t,e,i){return ot.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return ot.dir(t,"previousSibling",i)},siblings:function(t){return ot.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return ot.sibling(t.firstChild)},contents:function(t){return ot.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:ot.merge([],t.childNodes)}},function(t,e){ot.fn[t]=function(i,n){var o=ot.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(o=ot.filter(n,o)),this.length>1&&(mt[t]||(o=ot.unique(o)),vt.test(t)&&(o=o.reverse())),this.pushStack(o)}});var bt=/\S+/g,yt={};ot.Callbacks=function(t){t="string"==typeof t?yt[t]||s(t):ot.extend({},t);var e,i,n,o,r,a,l=[],c=!t.once&&[],h=function(s){for(i=t.memory&&s,n=!0,r=a||0,a=0,o=l.length,e=!0;l&&r<o;r++)if(!1===l[r].apply(s[0],s[1])&&t.stopOnFalse){i=!1;break}e=!1,l&&(c?c.length&&h(c.shift()):i?l=[]:d.disable())},d={add:function(){if(l){var n=l.length;!function e(i){ot.each(i,function(i,n){var o=ot.type(n);"function"===o?t.unique&&d.has(n)||l.push(n):n&&n.length&&"string"!==o&&e(n)})}(arguments),e?o=l.length:i&&(a=n,h(i))}return this},remove:function(){return l&&ot.each(arguments,function(t,i){for(var n;(n=ot.inArray(i,l,n))>-1;)l.splice(n,1),e&&(n<=o&&o--,n<=r&&r--)}),this},has:function(t){return t?ot.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],o=0,this},disable:function(){return l=c=i=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,i||d.disable(),this},locked:function(){return!c},fireWith:function(t,i){return!l||n&&!c||(i=i||[],i=[t,i.slice?i.slice():i],e?c.push(i):h(i)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!n}};return d},ot.extend({Deferred:function(t){var e=[["resolve","done",ot.Callbacks("once memory"),"resolved"],["reject","fail",ot.Callbacks("once memory"),"rejected"],["notify","progress",ot.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return ot.Deferred(function(i){ot.each(e,function(e,s){var r=ot.isFunction(t[e])&&t[e];o[s[1]](function(){var t=r&&r.apply(this,arguments);t&&ot.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[s[0]+"With"](this===n?i.promise():this,r?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?ot.extend(t,n):n}},o={};return n.pipe=n.then,ot.each(e,function(t,s){var r=s[2],a=s[3];n[s[1]]=r.add,a&&r.add(function(){i=a},e[1^t][2].disable,e[2][2].lock),o[s[0]]=function(){return o[s[0]+"With"](this===o?n:this,arguments),this},o[s[0]+"With"]=r.fireWith}),n.promise(o),t&&t.call(o,o),o},when:function(t){var e,i,n,o=0,s=G.call(arguments),r=s.length,a=1!==r||t&&ot.isFunction(t.promise)?r:0,l=1===a?t:ot.Deferred(),c=function(t,i,n){return function(o){i[t]=this,n[t]=arguments.length>1?G.call(arguments):o,n===e?l.notifyWith(i,n):--a||l.resolveWith(i,n)}};if(r>1)for(e=new Array(r),i=new Array(r),n=new Array(r);o<r;o++)s[o]&&ot.isFunction(s[o].promise)?s[o].promise().done(c(o,n,s)).fail(l.reject).progress(c(o,i,e)):--a;return a||l.resolveWith(n,s),l.promise()}});var wt;ot.fn.ready=function(t){return ot.ready.promise().done(t),this},ot.extend({isReady:!1,readyWait:1,holdReady:function(t){t?ot.readyWait++:ot.ready(!0)},ready:function(t){if(!0===t?!--ot.readyWait:!ot.isReady){if(!ft.body)return setTimeout(ot.ready);ot.isReady=!0,!0!==t&&--ot.readyWait>0||(wt.resolveWith(ft,[ot]),ot.fn.trigger&&ot(ft).trigger("ready").off("ready"))}}}),ot.ready.promise=function(e){if(!wt)if(wt=ot.Deferred(),"complete"===ft.readyState)setTimeout(ot.ready);else if(ft.addEventListener)ft.addEventListener("DOMContentLoaded",a,!1),t.addEventListener("load",a,!1);else{ft.attachEvent("onreadystatechange",a),t.attachEvent("onload",a);var i=!1;try{i=null==t.frameElement&&ft.documentElement}catch(t){}i&&i.doScroll&&function t(){if(!ot.isReady){try{i.doScroll("left")}catch(e){return setTimeout(t,50)}r(),ot.ready()}}()}return wt.promise(e)};var xt,Ct="undefined";for(xt in ot(nt))break;nt.ownLast="0"!==xt,nt.inlineBlockNeedsLayout=!1,ot(function(){var t,e,i=ft.getElementsByTagName("body")[0];i&&(t=ft.createElement("div"),t.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",e=ft.createElement("div"),i.appendChild(t).appendChild(e),typeof e.style.zoom!==Ct&&(e.style.cssText="border:0;margin:0;width:1px;padding:1px;display:inline;zoom:1",(nt.inlineBlockNeedsLayout=3===e.offsetWidth)&&(i.style.zoom=1)),i.removeChild(t),t=e=null)}),function(){var t=ft.createElement("div");if(null==nt.deleteExpando){nt.deleteExpando=!0;try{delete t.test}catch(t){nt.deleteExpando=!1}}t=null}(),ot.acceptData=function(t){var e=ot.noData[(t.nodeName+" ").toLowerCase()],i=+t.nodeType||1;return(1===i||9===i)&&(!e||!0!==e&&t.getAttribute("classid")===e)};var _t=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Tt=/([A-Z])/g;ot.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return!!(t=t.nodeType?ot.cache[t[ot.expando]]:t[ot.expando])&&!c(t)},data:function(t,e,i){return h(t,e,i)},removeData:function(t,e){return d(t,e)},_data:function(t,e,i){return h(t,e,i,!0)},_removeData:function(t,e){return d(t,e,!0)}}),ot.fn.extend({data:function(t,e){var i,n,o,s=this[0],r=s&&s.attributes;if(void 0===t){if(this.length&&(o=ot.data(s),1===s.nodeType&&!ot._data(s,"parsedAttrs"))){for(i=r.length;i--;)n=r[i].name,0===n.indexOf("data-")&&(n=ot.camelCase(n.slice(5)),l(s,n,o[n]));ot._data(s,"parsedAttrs",!0)}return o}return"object"==typeof t?this.each(function(){ot.data(this,t)}):arguments.length>1?this.each(function(){ot.data(this,t,e)}):s?l(s,t,ot.data(s,t)):void 0},removeData:function(t){return this.each(function(){ot.removeData(this,t)})}}),ot.extend({queue:function(t,e,i){var n;if(t)return e=(e||"fx")+"queue",n=ot._data(t,e),i&&(!n||ot.isArray(i)?n=ot._data(t,e,ot.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){e=e||"fx";var i=ot.queue(t,e),n=i.length,o=i.shift(),s=ot._queueHooks(t,e),r=function(){ot.dequeue(t,e)};"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===e&&i.unshift("inprogress"),delete s.stop,o.call(t,r,s)),!n&&s&&s.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return ot._data(t,i)||ot._data(t,i,{empty:ot.Callbacks("once memory").add(function(){ot._removeData(t,e+"queue"),ot._removeData(t,i)})})}}),ot.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?ot.queue(this[0],t):void 0===e?this:this.each(function(){var i=ot.queue(this,t,e);ot._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&ot.dequeue(this,t)})},dequeue:function(t){return this.each(function(){ot.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,o=ot.Deferred(),s=this,r=this.length,a=function(){--n||o.resolveWith(s,[s])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";r--;)(i=ot._data(s[r],t+"queueHooks"))&&i.empty&&(n++,i.empty.add(a));return a(),o.promise(e)}});var St=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,kt=["Top","Right","Bottom","Left"],Et=function(t,e){return t=e||t,"none"===ot.css(t,"display")||!ot.contains(t.ownerDocument,t)},At=ot.access=function(t,e,i,n,o,s,r){var a=0,l=t.length,c=null==i;if("object"===ot.type(i)){o=!0;for(a in i)ot.access(t,e,a,i[a],!0,s,r)}else if(void 0!==n&&(o=!0,ot.isFunction(n)||(r=!0),c&&(r?(e.call(t,n),e=null):(c=e,e=function(t,e,i){return c.call(ot(t),i)})),e))for(;a<l;a++)e(t[a],i,r?n:n.call(t[a],a,e(t[a],i)));return o?t:c?e.call(t):l?e(t[0],i):s},Ot=/^(?:checkbox|radio)$/i;!function(){var t=ft.createDocumentFragment(),e=ft.createElement("div"),i=ft.createElement("input");if(e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a>",nt.leadingWhitespace=3===e.firstChild.nodeType,nt.tbody=!e.getElementsByTagName("tbody").length,nt.htmlSerialize=!!e.getElementsByTagName("link").length,nt.html5Clone="<:nav></:nav>"!==ft.createElement("nav").cloneNode(!0).outerHTML,i.type="checkbox",i.checked=!0,t.appendChild(i),nt.appendChecked=i.checked,e.innerHTML="<textarea>x</textarea>",nt.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,t.appendChild(e),e.innerHTML="<input type='radio' checked='checked' name='t'/>",nt.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,nt.noCloneEvent=!0,e.attachEvent&&(e.attachEvent("onclick",function(){nt.noCloneEvent=!1}),e.cloneNode(!0).click()),null==nt.deleteExpando){nt.deleteExpando=!0;try{delete e.test}catch(t){nt.deleteExpando=!1}}t=e=i=null}(),function(){var e,i,n=ft.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})i="on"+e,(nt[e+"Bubbles"]=i in t)||(n.setAttribute(i,"t"),nt[e+"Bubbles"]=!1===n.attributes[i].expando);n=null}();var Dt=/^(?:input|select|textarea)$/i,jt=/^key/,Mt=/^(?:mouse|contextmenu)|click/,It=/^(?:focusinfocus|focusoutblur)$/,Vt=/^([^.]*)(?:\.(.+)|)$/;ot.event={global:{},add:function(t,e,i,n,o){var s,r,a,l,c,h,d,u,p,f,g,v=ot._data(t);if(v){for(i.handler&&(l=i,i=l.handler,o=l.selector),i.guid||(i.guid=ot.guid++),(r=v.events)||(r=v.events={}),(h=v.handle)||(h=v.handle=function(t){return typeof ot===Ct||t&&ot.event.triggered===t.type?void 0:ot.event.dispatch.apply(h.elem,arguments)},h.elem=t),e=(e||"").match(bt)||[""],a=e.length;a--;)s=Vt.exec(e[a])||[],p=g=s[1],f=(s[2]||"").split(".").sort(),p&&(c=ot.event.special[p]||{},p=(o?c.delegateType:c.bindType)||p,c=ot.event.special[p]||{},d=ot.extend({type:p,origType:g,data:n,handler:i,guid:i.guid,selector:o,needsContext:o&&ot.expr.match.needsContext.test(o),namespace:f.join(".")},l),(u=r[p])||(u=r[p]=[],u.delegateCount=0,c.setup&&!1!==c.setup.call(t,n,f,h)||(t.addEventListener?t.addEventListener(p,h,!1):t.attachEvent&&t.attachEvent("on"+p,h))),c.add&&(c.add.call(t,d),d.handler.guid||(d.handler.guid=i.guid)),o?u.splice(u.delegateCount++,0,d):u.push(d),ot.event.global[p]=!0);t=null}},remove:function(t,e,i,n,o){var s,r,a,l,c,h,d,u,p,f,g,v=ot.hasData(t)&&ot._data(t);if(v&&(h=v.events)){for(e=(e||"").match(bt)||[""],c=e.length;c--;)if(a=Vt.exec(e[c])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p){for(d=ot.event.special[p]||{},p=(n?d.delegateType:d.bindType)||p,u=h[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=s=u.length;s--;)r=u[s],!o&&g!==r.origType||i&&i.guid!==r.guid||a&&!a.test(r.namespace)||n&&n!==r.selector&&("**"!==n||!r.selector)||(u.splice(s,1),r.selector&&u.delegateCount--,d.remove&&d.remove.call(t,r));l&&!u.length&&(d.teardown&&!1!==d.teardown.call(t,f,v.handle)||ot.removeEvent(t,p,v.handle),delete h[p])}else for(p in h)ot.event.remove(t,p+e[c],i,n,!0);ot.isEmptyObject(h)&&(delete v.handle,ot._removeData(t,"events"))}},trigger:function(e,i,n,o){var s,r,a,l,c,h,d,u=[n||ft],p=et.call(e,"type")?e.type:e,f=et.call(e,"namespace")?e.namespace.split("."):[];if(a=h=n=n||ft,3!==n.nodeType&&8!==n.nodeType&&!It.test(p+ot.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),r=p.indexOf(":")<0&&"on"+p,e=e[ot.expando]?e:new ot.Event(p,"object"==typeof e&&e),e.isTrigger=o?2:3,e.namespace=f.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:ot.makeArray(i,[e]),c=ot.event.special[p]||{},o||!c.trigger||!1!==c.trigger.apply(n,i))){if(!o&&!c.noBubble&&!ot.isWindow(n)){for(l=c.delegateType||p,It.test(l+p)||(a=a.parentNode);a;a=a.parentNode)u.push(a),h=a;h===(n.ownerDocument||ft)&&u.push(h.defaultView||h.parentWindow||t)}for(d=0;(a=u[d++])&&!e.isPropagationStopped();)e.type=d>1?l:c.bindType||p,s=(ot._data(a,"events")||{})[e.type]&&ot._data(a,"handle"),s&&s.apply(a,i),(s=r&&a[r])&&s.apply&&ot.acceptData(a)&&(e.result=s.apply(a,i),!1===e.result&&e.preventDefault());if(e.type=p,!o&&!e.isDefaultPrevented()&&(!c._default||!1===c._default.apply(u.pop(),i))&&ot.acceptData(n)&&r&&n[p]&&!ot.isWindow(n)){h=n[r],h&&(n[r]=null),ot.event.triggered=p;try{n[p]()}catch(t){}ot.event.triggered=void 0,h&&(n[r]=h)}return e.result}},dispatch:function(t){t=ot.event.fix(t);var e,i,n,o,s,r=[],a=G.call(arguments),l=(ot._data(this,"events")||{})[t.type]||[],c=ot.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,t)){for(r=ot.event.handlers.call(this,t,l),e=0;(o=r[e++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,s=0;(n=o.handlers[s++])&&!t.isImmediatePropagationStopped();)t.namespace_re&&!t.namespace_re.test(n.namespace)||(t.handleObj=n,t.data=n.data,void 0!==(i=((ot.event.special[n.origType]||{}).handle||n.handler).apply(o.elem,a))&&!1===(t.result=i)&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,o,s,r=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==t.type)){for(o=[],s=0;s<a;s++)n=e[s],i=n.selector+" ",void 0===o[i]&&(o[i]=n.needsContext?ot(i,this).index(l)>=0:ot.find(i,this,null,[l]).length),o[i]&&o.push(n);o.length&&r.push({elem:l,handlers:o})}return a<e.length&&r.push({elem:this,handlers:e.slice(a)}),r},fix:function(t){if(t[ot.expando])return t;var e,i,n,o=t.type,s=t,r=this.fixHooks[o];for(r||(this.fixHooks[o]=r=Mt.test(o)?this.mouseHooks:jt.test(o)?this.keyHooks:{}),n=r.props?this.props.concat(r.props):this.props,t=new ot.Event(s),e=n.length;e--;)i=n[e],t[i]=s[i];return t.target||(t.target=s.srcElement||ft),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,r.filter?r.filter(t,s):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,o,s=e.button,r=e.fromElement;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||ft,o=n.documentElement,i=n.body,t.pageX=e.clientX+(o&&o.scrollLeft||i&&i.scrollLeft||0)-(o&&o.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(o&&o.scrollTop||i&&i.scrollTop||0)-(o&&o.clientTop||i&&i.clientTop||0)),!t.relatedTarget&&r&&(t.relatedTarget=r===t.target?e.toElement:r),t.which||void 0===s||(t.which=1&s?1:2&s?3:4&s?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==f()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){if(this===f()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(ot.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(t){return ot.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i,n){var o=ot.extend(new ot.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?ot.event.trigger(o,null,e):ot.event.dispatch.call(e,o),o.isDefaultPrevented()&&i.preventDefault()}},ot.removeEvent=ft.removeEventListener?function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)}:function(t,e,i){var n="on"+e;t.detachEvent&&(typeof t[n]===Ct&&(t[n]=null),t.detachEvent(n,i))},ot.Event=function(t,e){if(!(this instanceof ot.Event))return new ot.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&(!1===t.returnValue||t.getPreventDefault&&t.getPreventDefault())?u:p):this.type=t,e&&ot.extend(this,e),this.timeStamp=t&&t.timeStamp||ot.now(),this[ot.expando]=!0},ot.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=u,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=u,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=u,this.stopPropagation()}},ot.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){ot.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,o=t.relatedTarget,s=t.handleObj;return o&&(o===n||ot.contains(n,o))||(t.type=s.origType,i=s.handler.apply(this,arguments),t.type=e),i}}}),nt.submitBubbles||(ot.event.special.submit={setup:function(){if(ot.nodeName(this,"form"))return!1;ot.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,i=ot.nodeName(e,"input")||ot.nodeName(e,"button")?e.form:void 0;i&&!ot._data(i,"submitBubbles")&&(ot.event.add(i,"submit._submit",function(t){t._submit_bubble=!0}),ot._data(i,"submitBubbles",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&ot.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){if(ot.nodeName(this,"form"))return!1;ot.event.remove(this,"._submit")}}),nt.changeBubbles||(ot.event.special.change={setup:function(){if(Dt.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(ot.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),ot.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),ot.event.simulate("change",this,t,!0)})),!1;ot.event.add(this,"beforeactivate._change",function(t){var e=t.target;Dt.test(e.nodeName)&&!ot._data(e,"changeBubbles")&&(ot.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||ot.event.simulate("change",this.parentNode,t,!0)}),ot._data(e,"changeBubbles",!0))})},handle:function(t){var e=t.target;if(this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type)return t.handleObj.handler.apply(this,arguments)},teardown:function(){return ot.event.remove(this,"._change"),!Dt.test(this.nodeName)}}),nt.focusinBubbles||ot.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){ot.event.simulate(e,t.target,ot.event.fix(t),!0)};ot.event.special[e]={setup:function(){var n=this.ownerDocument||this,o=ot._data(n,e);o||n.addEventListener(t,i,!0),ot._data(n,e,(o||0)+1)},teardown:function(){var n=this.ownerDocument||this,o=ot._data(n,e)-1;o?ot._data(n,e,o):(n.removeEventListener(t,i,!0),ot._removeData(n,e))}}}),ot.fn.extend({on:function(t,e,i,n,o){var s,r;if("object"==typeof t){"string"!=typeof e&&(i=i||e,e=void 0);for(s in t)this.on(s,e,i,t[s],o);return this}if(null==i&&null==n?(n=e,i=e=void 0):null==n&&("string"==typeof e?(n=i,i=void 0):(n=i,i=e,e=void 0)),!1===n)n=p;else if(!n)return this;return 1===o&&(r=n,n=function(t){return ot().off(t),r.apply(this,arguments)},n.guid=r.guid||(r.guid=ot.guid++)),this.each(function(){ot.event.add(this,t,n,i,e)})},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,e,i){var n,o;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,ot(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(o in t)this.off(o,e,t[o]);return this}return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=p),this.each(function(){ot.event.remove(this,t,i,e)})},trigger:function(t,e){return this.each(function(){ot.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];if(i)return ot.event.trigger(t,e,i,!0)}});var Pt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Lt=/ jQuery\d+="(?:null|\d+)"/g,Rt=new RegExp("<(?:"+Pt+")[\\s/>]","i"),Ft=/^\s+/,qt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Nt=/<([\w:]+)/,Bt=/<tbody/i,$t=/<|&#?\w+;/,zt=/<(?:script|style|link)/i,Ut=/checked\s*(?:[^=]|=\s*.checked.)/i,Ht=/^$|\/(?:java|ecma)script/i,Wt=/^true\/(.*)/,Jt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Xt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:nt.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Gt=g(ft),Yt=Gt.appendChild(ft.createElement("div"));Xt.optgroup=Xt.option,Xt.tbody=Xt.tfoot=Xt.colgroup=Xt.caption=Xt.thead,Xt.th=Xt.td,ot.extend({clone:function(t,e,i){var n,o,s,r,a,l=ot.contains(t.ownerDocument,t);if(nt.html5Clone||ot.isXMLDoc(t)||!Rt.test("<"+t.nodeName+">")?s=t.cloneNode(!0):(Yt.innerHTML=t.outerHTML,Yt.removeChild(s=Yt.firstChild)),!(nt.noCloneEvent&&nt.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||ot.isXMLDoc(t)))for(n=v(s),a=v(t),r=0;null!=(o=a[r]);++r)n[r]&&_(o,n[r]);if(e)if(i)for(a=a||v(t),n=n||v(s),r=0;null!=(o=a[r]);r++)C(o,n[r]);else C(t,s);return n=v(s,"script"),n.length>0&&x(n,!l&&v(t,"script")),n=a=o=null,s},buildFragment:function(t,e,i,n){for(var o,s,r,a,l,c,h,d=t.length,u=g(e),p=[],f=0;f<d;f++)if((s=t[f])||0===s)if("object"===ot.type(s))ot.merge(p,s.nodeType?[s]:s);else if($t.test(s)){for(a=a||u.appendChild(e.createElement("div")),l=(Nt.exec(s)||["",""])[1].toLowerCase(),h=Xt[l]||Xt._default,a.innerHTML=h[1]+s.replace(qt,"<$1></$2>")+h[2],o=h[0];o--;)a=a.lastChild;if(!nt.leadingWhitespace&&Ft.test(s)&&p.push(e.createTextNode(Ft.exec(s)[0])),!nt.tbody)for(s="table"!==l||Bt.test(s)?"<table>"!==h[1]||Bt.test(s)?0:a:a.firstChild,o=s&&s.childNodes.length;o--;)ot.nodeName(c=s.childNodes[o],"tbody")&&!c.childNodes.length&&s.removeChild(c);for(ot.merge(p,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=u.lastChild}else p.push(e.createTextNode(s));for(a&&u.removeChild(a),nt.appendChecked||ot.grep(v(p,"input"),m),f=0;s=p[f++];)if((!n||-1===ot.inArray(s,n))&&(r=ot.contains(s.ownerDocument,s),a=v(u.appendChild(s),"script"),r&&x(a),i))for(o=0;s=a[o++];)Ht.test(s.type||"")&&i.push(s);return a=null,u},cleanData:function(t,e){for(var i,n,o,s,r=0,a=ot.expando,l=ot.cache,c=nt.deleteExpando,h=ot.event.special;null!=(i=t[r]);r++)if((e||ot.acceptData(i))&&(o=i[a],s=o&&l[o])){if(s.events)for(n in s.events)h[n]?ot.event.remove(i,n):ot.removeEvent(i,n,s.handle);l[o]&&(delete l[o],c?delete i[a]:typeof i.removeAttribute!==Ct?i.removeAttribute(a):i[a]=null,X.push(o))}}}),ot.fn.extend({text:function(t){return At(this,function(t){return void 0===t?ot.text(this):this.empty().append((this[0]&&this[0].ownerDocument||ft).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){b(this,t).appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=b(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var i,n=t?ot.filter(t,this):this,o=0;null!=(i=n[o]);o++)e||1!==i.nodeType||ot.cleanData(v(i)),i.parentNode&&(e&&ot.contains(i.ownerDocument,i)&&x(v(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&ot.cleanData(v(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&ot.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return ot.clone(this,t,e)})},html:function(t){return At(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(Lt,""):void 0;if("string"==typeof t&&!zt.test(t)&&(nt.htmlSerialize||!Rt.test(t))&&(nt.leadingWhitespace||!Ft.test(t))&&!Xt[(Nt.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(qt,"<$1></$2>");try{for(;i<n;i++)e=this[i]||{},1===e.nodeType&&(ot.cleanData(v(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,ot.cleanData(v(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=Y.apply([],t);var i,n,o,s,r,a,l=0,c=this.length,h=this,d=c-1,u=t[0],p=ot.isFunction(u);if(p||c>1&&"string"==typeof u&&!nt.checkClone&&Ut.test(u))return this.each(function(i){var n=h.eq(i);p&&(t[0]=u.call(this,i,n.html())),n.domManip(t,e)});if(c&&(a=ot.buildFragment(t,this[0].ownerDocument,!1,this),i=a.firstChild,1===a.childNodes.length&&(a=i),i)){for(s=ot.map(v(a,"script"),y),o=s.length;l<c;l++)n=a,l!==d&&(n=ot.clone(n,!0,!0),o&&ot.merge(s,v(n,"script"))),e.call(this[l],n,l);if(o)for(r=s[s.length-1].ownerDocument,ot.map(s,w),l=0;l<o;l++)n=s[l],Ht.test(n.type||"")&&!ot._data(n,"globalEval")&&ot.contains(r,n)&&(n.src?ot._evalUrl&&ot._evalUrl(n.src):ot.globalEval((n.text||n.textContent||n.innerHTML||"").replace(Jt,"")));a=i=null}return this}}),ot.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){ot.fn[t]=function(t){for(var i,n=0,o=[],s=ot(t),r=s.length-1;n<=r;n++)i=n===r?this:this.clone(!0),ot(s[n])[e](i),K.apply(o,i.get());return this.pushStack(o)}});var Kt,Qt={};!function(){var t,e,i=ft.createElement("div");i.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",t=i.getElementsByTagName("a")[0],t.style.cssText="float:left;opacity:.5",nt.opacity=/^0.5/.test(t.style.opacity),nt.cssFloat=!!t.style.cssFloat,i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",nt.clearCloneStyle="content-box"===i.style.backgroundClip,t=i=null,nt.shrinkWrapBlocks=function(){var t,i,n;if(null==e){if(!(t=ft.getElementsByTagName("body")[0]))return;"border:0;width:0;height:0;position:absolute;top:0;left:-9999px",i=ft.createElement("div"),n=ft.createElement("div"),t.appendChild(i).appendChild(n),e=!1,typeof n.style.zoom!==Ct&&(n.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0;width:1px;padding:1px;zoom:1",n.innerHTML="<div></div>",n.firstChild.style.width="5px",e=3!==n.offsetWidth),t.removeChild(i),t=i=n=null}return e}}();var Zt,te,ee=/^margin/,ie=new RegExp("^("+St+")(?!px)[a-z%]+$","i"),ne=/^(top|right|bottom|left)$/;t.getComputedStyle?(Zt=function(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)},te=function(t,e,i){var n,o,s,r,a=t.style;return i=i||Zt(t),r=i?i.getPropertyValue(e)||i[e]:void 0,i&&(""!==r||ot.contains(t.ownerDocument,t)||(r=ot.style(t,e)),ie.test(r)&&ee.test(e)&&(n=a.width,o=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=i.width,a.width=n,a.minWidth=o,a.maxWidth=s)),void 0===r?r:r+""}):ft.documentElement.currentStyle&&(Zt=function(t){return t.currentStyle},
te=function(t,e,i){var n,o,s,r,a=t.style;return i=i||Zt(t),r=i?i[e]:void 0,null==r&&a&&a[e]&&(r=a[e]),ie.test(r)&&!ne.test(e)&&(n=a.left,o=t.runtimeStyle,s=o&&o.left,s&&(o.left=t.currentStyle.left),a.left="fontSize"===e?"1em":r,r=a.pixelLeft+"px",a.left=n,s&&(o.left=s)),void 0===r?r:r+""||"auto"}),function(){function e(){var e,i,n=ft.getElementsByTagName("body")[0];n&&(e=ft.createElement("div"),i=ft.createElement("div"),e.style.cssText=c,n.appendChild(e).appendChild(i),i.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;display:block;padding:1px;border:1px;width:4px;margin-top:1%;top:1%",ot.swap(n,null!=n.style.zoom?{zoom:1}:{},function(){o=4===i.offsetWidth}),s=!0,r=!1,a=!0,t.getComputedStyle&&(r="1%"!==(t.getComputedStyle(i,null)||{}).top,s="4px"===(t.getComputedStyle(i,null)||{width:"4px"}).width),n.removeChild(e),i=n=null)}var i,n,o,s,r,a,l=ft.createElement("div"),c="border:0;width:0;height:0;position:absolute;top:0;left:-9999px";l.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=l.getElementsByTagName("a")[0],i.style.cssText="float:left;opacity:.5",nt.opacity=/^0.5/.test(i.style.opacity),nt.cssFloat=!!i.style.cssFloat,l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",nt.clearCloneStyle="content-box"===l.style.backgroundClip,i=l=null,ot.extend(nt,{reliableHiddenOffsets:function(){if(null!=n)return n;var t,e,i,o=ft.createElement("div"),s=ft.getElementsByTagName("body")[0];if(s)return o.setAttribute("className","t"),o.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",t=ft.createElement("div"),t.style.cssText=c,s.appendChild(t).appendChild(o),o.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=o.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",i=0===e[0].offsetHeight,e[0].style.display="",e[1].style.display="none",n=i&&0===e[0].offsetHeight,s.removeChild(t),o=s=null,n},boxSizing:function(){return null==o&&e(),o},boxSizingReliable:function(){return null==s&&e(),s},pixelPosition:function(){return null==r&&e(),r},reliableMarginRight:function(){var e,i,n,o;if(null==a&&t.getComputedStyle){if(!(e=ft.getElementsByTagName("body")[0]))return;i=ft.createElement("div"),n=ft.createElement("div"),i.style.cssText=c,e.appendChild(i).appendChild(n),o=n.appendChild(ft.createElement("div")),o.style.cssText=n.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0",o.style.marginRight=o.style.width="0",n.style.width="1px",a=!parseFloat((t.getComputedStyle(o,null)||{}).marginRight),e.removeChild(i)}return a}})}(),ot.swap=function(t,e,i,n){var o,s,r={};for(s in e)r[s]=t.style[s],t.style[s]=e[s];o=i.apply(t,n||[]);for(s in e)t.style[s]=r[s];return o};var oe=/alpha\([^)]*\)/i,se=/opacity\s*=\s*([^)]*)/,re=/^(none|table(?!-c[ea]).+)/,ae=new RegExp("^("+St+")(.*)$","i"),le=new RegExp("^([+-])=("+St+")","i"),ce={position:"absolute",visibility:"hidden",display:"block"},he={letterSpacing:0,fontWeight:400},de=["Webkit","O","Moz","ms"];ot.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=te(t,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:nt.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,s,r,a=ot.camelCase(e),l=t.style;if(e=ot.cssProps[a]||(ot.cssProps[a]=E(l,a)),r=ot.cssHooks[e]||ot.cssHooks[a],void 0===i)return r&&"get"in r&&void 0!==(o=r.get(t,!1,n))?o:l[e];if(s=typeof i,"string"===s&&(o=le.exec(i))&&(i=(o[1]+1)*o[2]+parseFloat(ot.css(t,e)),s="number"),null!=i&&i===i&&("number"!==s||ot.cssNumber[a]||(i+="px"),nt.clearCloneStyle||""!==i||0!==e.indexOf("background")||(l[e]="inherit"),!(r&&"set"in r&&void 0===(i=r.set(t,i,n)))))try{l[e]="",l[e]=i}catch(t){}}},css:function(t,e,i,n){var o,s,r,a=ot.camelCase(e);return e=ot.cssProps[a]||(ot.cssProps[a]=E(t.style,a)),r=ot.cssHooks[e]||ot.cssHooks[a],r&&"get"in r&&(s=r.get(t,!0,i)),void 0===s&&(s=te(t,e,n)),"normal"===s&&e in he&&(s=he[e]),""===i||i?(o=parseFloat(s),!0===i||ot.isNumeric(o)?o||0:s):s}}),ot.each(["height","width"],function(t,e){ot.cssHooks[e]={get:function(t,i,n){if(i)return 0===t.offsetWidth&&re.test(ot.css(t,"display"))?ot.swap(t,ce,function(){return j(t,e,n)}):j(t,e,n)},set:function(t,i,n){var o=n&&Zt(t);return O(t,i,n?D(t,e,n,nt.boxSizing()&&"border-box"===ot.css(t,"boxSizing",!1,o),o):0)}}}),nt.opacity||(ot.cssHooks.opacity={get:function(t,e){return se.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var i=t.style,n=t.currentStyle,o=ot.isNumeric(e)?"alpha(opacity="+100*e+")":"",s=n&&n.filter||i.filter||"";i.zoom=1,(e>=1||""===e)&&""===ot.trim(s.replace(oe,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===e||n&&!n.filter)||(i.filter=oe.test(s)?s.replace(oe,o):s+" "+o)}}),ot.cssHooks.marginRight=k(nt.reliableMarginRight,function(t,e){if(e)return ot.swap(t,{display:"inline-block"},te,[t,"marginRight"])}),ot.each({margin:"",padding:"",border:"Width"},function(t,e){ot.cssHooks[t+e]={expand:function(i){for(var n=0,o={},s="string"==typeof i?i.split(" "):[i];n<4;n++)o[t+kt[n]+e]=s[n]||s[n-2]||s[0];return o}},ee.test(t)||(ot.cssHooks[t+e].set=O)}),ot.fn.extend({css:function(t,e){return At(this,function(t,e,i){var n,o,s={},r=0;if(ot.isArray(e)){for(n=Zt(t),o=e.length;r<o;r++)s[e[r]]=ot.css(t,e[r],!1,n);return s}return void 0!==i?ot.style(t,e,i):ot.css(t,e)},t,e,arguments.length>1)},show:function(){return A(this,!0)},hide:function(){return A(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Et(this)?ot(this).show():ot(this).hide()})}}),ot.Tween=M,M.prototype={constructor:M,init:function(t,e,i,n,o,s){this.elem=t,this.prop=i,this.easing=o||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=s||(ot.cssNumber[i]?"":"px")},cur:function(){var t=M.propHooks[this.prop];return t&&t.get?t.get(this):M.propHooks._default.get(this)},run:function(t){var e,i=M.propHooks[this.prop];return this.options.duration?this.pos=e=ot.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):M.propHooks._default.set(this),this}},M.prototype.init.prototype=M.prototype,M.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=ot.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){ot.fx.step[t.prop]?ot.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[ot.cssProps[t.prop]]||ot.cssHooks[t.prop])?ot.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},M.propHooks.scrollTop=M.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},ot.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},ot.fx=M.prototype.init,ot.fx.step={};var ue,pe,fe=/^(?:toggle|show|hide)$/,ge=new RegExp("^(?:([+-])=|)("+St+")([a-z%]*)$","i"),ve=/queueHooks$/,me=[L],be={"*":[function(t,e){var i=this.createTween(t,e),n=i.cur(),o=ge.exec(e),s=o&&o[3]||(ot.cssNumber[t]?"":"px"),r=(ot.cssNumber[t]||"px"!==s&&+n)&&ge.exec(ot.css(i.elem,t)),a=1,l=20;if(r&&r[3]!==s){s=s||r[3],o=o||[],r=+n||1;do{a=a||".5",r/=a,ot.style(i.elem,t,r+s)}while(a!==(a=i.cur()/n)&&1!==a&&--l)}return o&&(r=i.start=+r||+n||0,i.unit=s,i.end=o[1]?r+(o[1]+1)*o[2]:+o[2]),i}]};ot.Animation=ot.extend(F,{tweener:function(t,e){ot.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var i,n=0,o=t.length;n<o;n++)i=t[n],be[i]=be[i]||[],be[i].unshift(e)},prefilter:function(t,e){e?me.unshift(t):me.push(t)}}),ot.speed=function(t,e,i){var n=t&&"object"==typeof t?ot.extend({},t):{complete:i||!i&&e||ot.isFunction(t)&&t,duration:t,easing:i&&e||e&&!ot.isFunction(e)&&e};return n.duration=ot.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in ot.fx.speeds?ot.fx.speeds[n.duration]:ot.fx.speeds._default,null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){ot.isFunction(n.old)&&n.old.call(this),n.queue&&ot.dequeue(this,n.queue)},n},ot.fn.extend({fadeTo:function(t,e,i,n){return this.filter(Et).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var o=ot.isEmptyObject(t),s=ot.speed(e,i,n),r=function(){var e=F(this,ot.extend({},t),s);(o||ot._data(this,"finish"))&&e.stop(!0)};return r.finish=r,o||!1===s.queue?this.each(r):this.queue(s.queue,r)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,o=null!=t&&t+"queueHooks",s=ot.timers,r=ot._data(this);if(o)r[o]&&r[o].stop&&n(r[o]);else for(o in r)r[o]&&r[o].stop&&ve.test(o)&&n(r[o]);for(o=s.length;o--;)s[o].elem!==this||null!=t&&s[o].queue!==t||(s[o].anim.stop(i),e=!1,s.splice(o,1));!e&&i||ot.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,i=ot._data(this),n=i[t+"queue"],o=i[t+"queueHooks"],s=ot.timers,r=n?n.length:0;for(i.finish=!0,ot.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=s.length;e--;)s[e].elem===this&&s[e].queue===t&&(s[e].anim.stop(!0),s.splice(e,1));for(e=0;e<r;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),ot.each(["toggle","show","hide"],function(t,e){var i=ot.fn[e];ot.fn[e]=function(t,n,o){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(V(e,!0),t,n,o)}}),ot.each({slideDown:V("show"),slideUp:V("hide"),slideToggle:V("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){ot.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),ot.timers=[],ot.fx.tick=function(){var t,e=ot.timers,i=0;for(ue=ot.now();i<e.length;i++)(t=e[i])()||e[i]!==t||e.splice(i--,1);e.length||ot.fx.stop(),ue=void 0},ot.fx.timer=function(t){ot.timers.push(t),t()?ot.fx.start():ot.timers.pop()},ot.fx.interval=13,ot.fx.start=function(){pe||(pe=setInterval(ot.fx.tick,ot.fx.interval))},ot.fx.stop=function(){clearInterval(pe),pe=null},ot.fx.speeds={slow:600,fast:200,_default:400},ot.fn.delay=function(t,e){return t=ot.fx?ot.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var n=setTimeout(e,t);i.stop=function(){clearTimeout(n)}})},function(){var t,e,i,n,o=ft.createElement("div");o.setAttribute("className","t"),o.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",t=o.getElementsByTagName("a")[0],i=ft.createElement("select"),n=i.appendChild(ft.createElement("option")),e=o.getElementsByTagName("input")[0],t.style.cssText="top:1px",nt.getSetAttribute="t"!==o.className,nt.style=/top/.test(t.getAttribute("style")),nt.hrefNormalized="/a"===t.getAttribute("href"),nt.checkOn=!!e.value,nt.optSelected=n.selected,nt.enctype=!!ft.createElement("form").enctype,i.disabled=!0,nt.optDisabled=!n.disabled,e=ft.createElement("input"),e.setAttribute("value",""),nt.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),nt.radioValue="t"===e.value,t=e=i=n=o=null}();var ye=/\r/g;ot.fn.extend({val:function(t){var e,i,n,o=this[0];{if(arguments.length)return n=ot.isFunction(t),this.each(function(i){var o;1===this.nodeType&&(o=n?t.call(this,i,ot(this).val()):t,null==o?o="":"number"==typeof o?o+="":ot.isArray(o)&&(o=ot.map(o,function(t){return null==t?"":t+""})),(e=ot.valHooks[this.type]||ot.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,o,"value")||(this.value=o))});if(o)return(e=ot.valHooks[o.type]||ot.valHooks[o.nodeName.toLowerCase()])&&"get"in e&&void 0!==(i=e.get(o,"value"))?i:(i=o.value,"string"==typeof i?i.replace(ye,""):null==i?"":i)}}}),ot.extend({valHooks:{option:{get:function(t){var e=ot.find.attr(t,"value");return null!=e?e:ot.text(t)}},select:{get:function(t){for(var e,i,n=t.options,o=t.selectedIndex,s="select-one"===t.type||o<0,r=s?null:[],a=s?o+1:n.length,l=o<0?a:s?o:0;l<a;l++)if(i=n[l],(i.selected||l===o)&&(nt.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!ot.nodeName(i.parentNode,"optgroup"))){if(e=ot(i).val(),s)return e;r.push(e)}return r},set:function(t,e){for(var i,n,o=t.options,s=ot.makeArray(e),r=o.length;r--;)if(n=o[r],ot.inArray(ot.valHooks.option.get(n),s)>=0)try{n.selected=i=!0}catch(t){n.scrollHeight}else n.selected=!1;return i||(t.selectedIndex=-1),o}}}}),ot.each(["radio","checkbox"],function(){ot.valHooks[this]={set:function(t,e){if(ot.isArray(e))return t.checked=ot.inArray(ot(t).val(),e)>=0}},nt.checkOn||(ot.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var we,xe,Ce=ot.expr.attrHandle,_e=/^(?:checked|selected)$/i,Te=nt.getSetAttribute,Se=nt.input;ot.fn.extend({attr:function(t,e){return At(this,ot.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){ot.removeAttr(this,t)})}}),ot.extend({attr:function(t,e,i){var n,o,s=t.nodeType;if(t&&3!==s&&8!==s&&2!==s)return typeof t.getAttribute===Ct?ot.prop(t,e,i):(1===s&&ot.isXMLDoc(t)||(e=e.toLowerCase(),n=ot.attrHooks[e]||(ot.expr.match.bool.test(e)?xe:we)),void 0===i?n&&"get"in n&&null!==(o=n.get(t,e))?o:(o=ot.find.attr(t,e),null==o?void 0:o):null!==i?n&&"set"in n&&void 0!==(o=n.set(t,i,e))?o:(t.setAttribute(e,i+""),i):void ot.removeAttr(t,e))},removeAttr:function(t,e){var i,n,o=0,s=e&&e.match(bt);if(s&&1===t.nodeType)for(;i=s[o++];)n=ot.propFix[i]||i,ot.expr.match.bool.test(i)?Se&&Te||!_e.test(i)?t[n]=!1:t[ot.camelCase("default-"+i)]=t[n]=!1:ot.attr(t,i,""),t.removeAttribute(Te?i:n)},attrHooks:{type:{set:function(t,e){if(!nt.radioValue&&"radio"===e&&ot.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}}}),xe={set:function(t,e,i){return!1===e?ot.removeAttr(t,i):Se&&Te||!_e.test(i)?t.setAttribute(!Te&&ot.propFix[i]||i,i):t[ot.camelCase("default-"+i)]=t[i]=!0,i}},ot.each(ot.expr.match.bool.source.match(/\w+/g),function(t,e){var i=Ce[e]||ot.find.attr;Ce[e]=Se&&Te||!_e.test(e)?function(t,e,n){var o,s;return n||(s=Ce[e],Ce[e]=o,o=null!=i(t,e,n)?e.toLowerCase():null,Ce[e]=s),o}:function(t,e,i){if(!i)return t[ot.camelCase("default-"+e)]?e.toLowerCase():null}}),Se&&Te||(ot.attrHooks.value={set:function(t,e,i){if(!ot.nodeName(t,"input"))return we&&we.set(t,e,i);t.defaultValue=e}}),Te||(we={set:function(t,e,i){var n=t.getAttributeNode(i);if(n||t.setAttributeNode(n=t.ownerDocument.createAttribute(i)),n.value=e+="","value"===i||e===t.getAttribute(i))return e}},Ce.id=Ce.name=Ce.coords=function(t,e,i){var n;if(!i)return(n=t.getAttributeNode(e))&&""!==n.value?n.value:null},ot.valHooks.button={get:function(t,e){var i=t.getAttributeNode(e);if(i&&i.specified)return i.value},set:we.set},ot.attrHooks.contenteditable={set:function(t,e,i){we.set(t,""!==e&&e,i)}},ot.each(["width","height"],function(t,e){ot.attrHooks[e]={set:function(t,i){if(""===i)return t.setAttribute(e,"auto"),i}}})),nt.style||(ot.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var ke=/^(?:input|select|textarea|button|object)$/i,Ee=/^(?:a|area)$/i;ot.fn.extend({prop:function(t,e){return At(this,ot.prop,t,e,arguments.length>1)},removeProp:function(t){return t=ot.propFix[t]||t,this.each(function(){try{this[t]=void 0,delete this[t]}catch(t){}})}}),ot.extend({propFix:{for:"htmlFor",class:"className"},prop:function(t,e,i){var n,o,s,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return s=1!==r||!ot.isXMLDoc(t),s&&(e=ot.propFix[e]||e,o=ot.propHooks[e]),void 0!==i?o&&"set"in o&&void 0!==(n=o.set(t,i,e))?n:t[e]=i:o&&"get"in o&&null!==(n=o.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=ot.find.attr(t,"tabindex");return e?parseInt(e,10):ke.test(t.nodeName)||Ee.test(t.nodeName)&&t.href?0:-1}}}}),nt.hrefNormalized||ot.each(["href","src"],function(t,e){ot.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),nt.optSelected||(ot.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),ot.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ot.propFix[this.toLowerCase()]=this}),nt.enctype||(ot.propFix.enctype="encoding");var Ae=/[\t\r\n\f]/g;ot.fn.extend({addClass:function(t){var e,i,n,o,s,r,a=0,l=this.length,c="string"==typeof t&&t;if(ot.isFunction(t))return this.each(function(e){ot(this).addClass(t.call(this,e,this.className))});if(c)for(e=(t||"").match(bt)||[];a<l;a++)if(i=this[a],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Ae," "):" ")){for(s=0;o=e[s++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");r=ot.trim(n),i.className!==r&&(i.className=r)}return this},removeClass:function(t){var e,i,n,o,s,r,a=0,l=this.length,c=0===arguments.length||"string"==typeof t&&t;if(ot.isFunction(t))return this.each(function(e){ot(this).removeClass(t.call(this,e,this.className))});if(c)for(e=(t||"").match(bt)||[];a<l;a++)if(i=this[a],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Ae," "):"")){for(s=0;o=e[s++];)for(;n.indexOf(" "+o+" ")>=0;)n=n.replace(" "+o+" "," ");r=t?ot.trim(n):"",i.className!==r&&(i.className=r)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):ot.isFunction(t)?this.each(function(i){ot(this).toggleClass(t.call(this,i,this.className,e),e)}):this.each(function(){if("string"===i)for(var e,n=0,o=ot(this),s=t.match(bt)||[];e=s[n++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else i!==Ct&&"boolean"!==i||(this.className&&ot._data(this,"__className__",this.className),this.className=this.className||!1===t?"":ot._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;i<n;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(Ae," ").indexOf(e)>=0)return!0;return!1}}),ot.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){ot.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),ot.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}});var Oe=ot.now(),De=/\?/,je=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;ot.parseJSON=function(e){if(t.JSON&&t.JSON.parse)return t.JSON.parse(e+"");var i,n=null,o=ot.trim(e+"");return o&&!ot.trim(o.replace(je,function(t,e,o,s){return i&&e&&(n=0),0===n?t:(i=o||e,n+=!s-!o,"")}))?Function("return "+o)():ot.error("Invalid JSON: "+e)},ot.parseXML=function(e){var i,n;if(!e||"string"!=typeof e)return null;try{t.DOMParser?(n=new DOMParser,i=n.parseFromString(e,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(e))}catch(t){i=void 0}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||ot.error("Invalid XML: "+e),i};var Me,Ie,Ve=/#.*$/,Pe=/([?&])_=[^&]*/,Le=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Re=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Fe=/^(?:GET|HEAD)$/,qe=/^\/\//,Ne=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Be={},$e={},ze="*/".concat("*");try{Ie=location.href}catch(t){Ie=ft.createElement("a"),Ie.href="",Ie=Ie.href}Me=Ne.exec(Ie.toLowerCase())||[],ot.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ie,type:"GET",isLocal:Re.test(Me[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ze,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ot.parseJSON,"text xml":ot.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?B(B(t,ot.ajaxSettings),e):B(ot.ajaxSettings,t)},ajaxPrefilter:q(Be),ajaxTransport:q($e),ajax:function(t,e){function i(t,e,i,n){var o,h,m,b,w,C=e;2!==y&&(y=2,a&&clearTimeout(a),c=void 0,r=n||"",x.readyState=t>0?4:0,o=t>=200&&t<300||304===t,i&&(b=$(d,x,i)),b=z(d,b,x,o),o?(d.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(ot.lastModified[s]=w),(w=x.getResponseHeader("etag"))&&(ot.etag[s]=w)),204===t||"HEAD"===d.type?C="nocontent":304===t?C="notmodified":(C=b.state,h=b.data,m=b.error,o=!m)):(m=C,!t&&C||(C="error",t<0&&(t=0))),x.status=t,x.statusText=(e||C)+"",o?f.resolveWith(u,[h,C,x]):f.rejectWith(u,[x,C,m]),x.statusCode(v),v=void 0,l&&p.trigger(o?"ajaxSuccess":"ajaxError",[x,d,o?h:m]),g.fireWith(u,[x,C]),l&&(p.trigger("ajaxComplete",[x,d]),--ot.active||ot.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,o,s,r,a,l,c,h,d=ot.ajaxSetup({},e),u=d.context||d,p=d.context&&(u.nodeType||u.jquery)?ot(u):ot.event,f=ot.Deferred(),g=ot.Callbacks("once memory"),v=d.statusCode||{},m={},b={},y=0,w="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===y){if(!h)for(h={};e=Le.exec(r);)h[e[1].toLowerCase()]=e[2];e=h[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===y?r:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return y||(t=b[i]=b[i]||t,m[t]=e),this},overrideMimeType:function(t){return y||(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(y<2)for(e in t)v[e]=[v[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||w;return c&&c.abort(e),i(0,e),this}};if(f.promise(x).complete=g.add,x.success=x.done,x.error=x.fail,d.url=((t||d.url||Ie)+"").replace(Ve,"").replace(qe,Me[1]+"//"),d.type=e.method||e.type||d.method||d.type,d.dataTypes=ot.trim(d.dataType||"*").toLowerCase().match(bt)||[""],null==d.crossDomain&&(n=Ne.exec(d.url.toLowerCase()),d.crossDomain=!(!n||n[1]===Me[1]&&n[2]===Me[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(Me[3]||("http:"===Me[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=ot.param(d.data,d.traditional)),N(Be,d,e,x),2===y)return x;l=d.global,l&&0==ot.active++&&ot.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Fe.test(d.type),s=d.url,d.hasContent||(d.data&&(s=d.url+=(De.test(s)?"&":"?")+d.data,delete d.data),!1===d.cache&&(d.url=Pe.test(s)?s.replace(Pe,"$1_="+Oe++):s+(De.test(s)?"&":"?")+"_="+Oe++)),d.ifModified&&(ot.lastModified[s]&&x.setRequestHeader("If-Modified-Since",ot.lastModified[s]),ot.etag[s]&&x.setRequestHeader("If-None-Match",ot.etag[s])),(d.data&&d.hasContent&&!1!==d.contentType||e.contentType)&&x.setRequestHeader("Content-Type",d.contentType),x.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+ze+"; q=0.01":""):d.accepts["*"]);for(o in d.headers)x.setRequestHeader(o,d.headers[o]);if(d.beforeSend&&(!1===d.beforeSend.call(u,x,d)||2===y))return x.abort();w="abort";for(o in{success:1,error:1,complete:1})x[o](d[o]);if(c=N($e,d,e,x)){x.readyState=1,l&&p.trigger("ajaxSend",[x,d]),d.async&&d.timeout>0&&(a=setTimeout(function(){x.abort("timeout")},d.timeout));try{y=1,c.send(m,i)}catch(t){if(!(y<2))throw t;i(-1,t)}}else i(-1,"No Transport");return x},getJSON:function(t,e,i){return ot.get(t,e,i,"json")},getScript:function(t,e){return ot.get(t,void 0,e,"script")}}),ot.each(["get","post"],function(t,e){ot[e]=function(t,i,n,o){return ot.isFunction(i)&&(o=o||n,n=i,i=void 0),ot.ajax({url:t,type:e,dataType:o,data:i,success:n})}}),ot.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){ot.fn[e]=function(t){return this.on(e,t)}}),ot._evalUrl=function(t){return ot.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},ot.fn.extend({wrapAll:function(t){if(ot.isFunction(t))return this.each(function(e){ot(this).wrapAll(t.call(this,e))});if(this[0]){var e=ot(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return ot.isFunction(t)?this.each(function(e){ot(this).wrapInner(t.call(this,e))}):this.each(function(){var e=ot(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=ot.isFunction(t);return this.each(function(i){ot(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){ot.nodeName(this,"body")||ot(this).replaceWith(this.childNodes)}).end()}}),ot.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!nt.reliableHiddenOffsets()&&"none"===(t.style&&t.style.display||ot.css(t,"display"))},ot.expr.filters.visible=function(t){return!ot.expr.filters.hidden(t)};var Ue=/%20/g,He=/\[\]$/,We=/\r?\n/g,Je=/^(?:submit|button|image|reset|file)$/i,Xe=/^(?:input|select|textarea|keygen)/i;ot.param=function(t,e){var i,n=[],o=function(t,e){e=ot.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=ot.ajaxSettings&&ot.ajaxSettings.traditional),ot.isArray(t)||t.jquery&&!ot.isPlainObject(t))ot.each(t,function(){o(this.name,this.value)});else for(i in t)U(i,t[i],e,o);return n.join("&").replace(Ue,"+")},ot.fn.extend({serialize:function(){return ot.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=ot.prop(this,"elements");return t?ot.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!ot(this).is(":disabled")&&Xe.test(this.nodeName)&&!Je.test(t)&&(this.checked||!Ot.test(t))}).map(function(t,e){var i=ot(this).val();return null==i?null:ot.isArray(i)?ot.map(i,function(t){return{name:e.name,value:t.replace(We,"\r\n")}}):{name:e.name,value:i.replace(We,"\r\n")}}).get()}}),ot.ajaxSettings.xhr=void 0!==t.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&H()||W()}:H;var Ge=0,Ye={},Ke=ot.ajaxSettings.xhr();t.ActiveXObject&&ot(t).on("unload",function(){for(var t in Ye)Ye[t](void 0,!0)}),nt.cors=!!Ke&&"withCredentials"in Ke,Ke=nt.ajax=!!Ke,Ke&&ot.ajaxTransport(function(t){if(!t.crossDomain||nt.cors){var e;return{send:function(i,n){var o,s=t.xhr(),r=++Ge;if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)s[o]=t.xhrFields[o];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(o in i)void 0!==i[o]&&s.setRequestHeader(o,i[o]+"");s.send(t.hasContent&&t.data||null),e=function(i,o){var a,l,c;if(e&&(o||4===s.readyState))if(delete Ye[r],e=void 0,s.onreadystatechange=ot.noop,o)4!==s.readyState&&s.abort();else{c={},a=s.status,"string"==typeof s.responseText&&(c.text=s.responseText);try{l=s.statusText}catch(t){l=""}a||!t.isLocal||t.crossDomain?1223===a&&(a=204):a=c.text?200:404}c&&n(a,l,c,s.getAllResponseHeaders())},t.async?4===s.readyState?setTimeout(e):s.onreadystatechange=Ye[r]=e:e()},abort:function(){e&&e(void 0,!0)}}}}),ot.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return ot.globalEval(t),t}}}),ot.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),ot.ajaxTransport("script",function(t){if(t.crossDomain){var e,i=ft.head||ot("head")[0]||ft.documentElement;return{send:function(n,o){e=ft.createElement("script"),e.async=!0,t.scriptCharset&&(e.charset=t.scriptCharset),e.src=t.url,e.onload=e.onreadystatechange=function(t,i){(i||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,i||o(200,"success"))},i.insertBefore(e,i.firstChild)},abort:function(){e&&e.onload(void 0,!0)}}}});var Qe=[],Ze=/(=)\?(?=&|$)|\?\?/;ot.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Qe.pop()||ot.expando+"_"+Oe++;return this[t]=!0,t}}),ot.ajaxPrefilter("json jsonp",function(e,i,n){var o,s,r,a=!1!==e.jsonp&&(Ze.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ze.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return o=e.jsonpCallback=ot.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Ze,"$1"+o):!1!==e.jsonp&&(e.url+=(De.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return r||ot.error(o+" was not called"),r[0]},e.dataTypes[0]="json",s=t[o],t[o]=function(){r=arguments},n.always(function(){t[o]=s,e[o]&&(e.jsonpCallback=i.jsonpCallback,Qe.push(o)),r&&ot.isFunction(s)&&s(r[0]),r=s=void 0}),"script"}),ot.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||ft;var n=dt.exec(t),o=!i&&[];return n?[e.createElement(n[1])]:(n=ot.buildFragment([t],e,o),o&&o.length&&ot(o).remove(),ot.merge([],n.childNodes))};var ti=ot.fn.load;ot.fn.load=function(t,e,i){if("string"!=typeof t&&ti)return ti.apply(this,arguments);var n,o,s,r=this,a=t.indexOf(" ");return a>=0&&(n=t.slice(a,t.length),t=t.slice(0,a)),ot.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(s="POST"),r.length>0&&ot.ajax({url:t,type:s,dataType:"html",data:e}).done(function(t){o=arguments,r.html(n?ot("<div>").append(ot.parseHTML(t)).find(n):t)}).complete(i&&function(t,e){r.each(i,o||[t.responseText,e,t])}),this},ot.expr.filters.animated=function(t){return ot.grep(ot.timers,function(e){return t===e.elem}).length};var ei=t.document.documentElement;ot.offset={setOffset:function(t,e,i){var n,o,s,r,a,l,c,h=ot.css(t,"position"),d=ot(t),u={};"static"===h&&(t.style.position="relative"),a=d.offset(),s=ot.css(t,"top"),l=ot.css(t,"left"),c=("absolute"===h||"fixed"===h)&&ot.inArray("auto",[s,l])>-1,c?(n=d.position(),r=n.top,o=n.left):(r=parseFloat(s)||0,o=parseFloat(l)||0),ot.isFunction(e)&&(e=e.call(t,i,a)),null!=e.top&&(u.top=e.top-a.top+r),null!=e.left&&(u.left=e.left-a.left+o),"using"in e?e.using.call(t,u):d.css(u)}},ot.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){ot.offset.setOffset(this,t,e)});var e,i,n={top:0,left:0},o=this[0],s=o&&o.ownerDocument;if(s)return e=s.documentElement,ot.contains(e,o)?(typeof o.getBoundingClientRect!==Ct&&(n=o.getBoundingClientRect()),i=J(s),{top:n.top+(i.pageYOffset||e.scrollTop)-(e.clientTop||0),left:n.left+(i.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):n},position:function(){if(this[0]){var t,e,i={top:0,left:0},n=this[0];return"fixed"===ot.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),ot.nodeName(t[0],"html")||(i=t.offset()),i.top+=ot.css(t[0],"borderTopWidth",!0),i.left+=ot.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-ot.css(n,"marginTop",!0),left:e.left-i.left-ot.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||ei;t&&!ot.nodeName(t,"html")&&"static"===ot.css(t,"position");)t=t.offsetParent;return t||ei})}}),ot.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i=/Y/.test(e);ot.fn[t]=function(n){return At(this,function(t,n,o){var s=J(t);if(void 0===o)return s?e in s?s[e]:s.document.documentElement[n]:t[n];s?s.scrollTo(i?ot(s).scrollLeft():o,i?o:ot(s).scrollTop()):t[n]=o},t,n,arguments.length,null)}}),ot.each(["top","left"],function(t,e){ot.cssHooks[e]=k(nt.pixelPosition,function(t,i){if(i)return i=te(t,e),
ie.test(i)?ot(t).position()[e]+"px":i})}),ot.each({Height:"height",Width:"width"},function(t,e){ot.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){ot.fn[n]=function(n,o){var s=arguments.length&&(i||"boolean"!=typeof n),r=i||(!0===n||!0===o?"margin":"border");return At(this,function(e,i,n){var o;return ot.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===n?ot.css(e,i,r):ot.style(e,i,n,r)},e,s?n:void 0,s,null)}})}),ot.fn.size=function(){return this.length},ot.fn.andSelf=ot.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ot});var ii=t.jQuery,ni=t.$;return ot.noConflict=function(e){return t.$===ot&&(t.$=ni),e&&t.jQuery===ot&&(t.jQuery=ii),ot},typeof e===Ct&&(t.jQuery=t.$=ot),ot}),function(){function t(t){function e(e,i,n,o,s,r){for(;s>=0&&r>s;s+=t){var a=o?o[s]:s;n=i(n,e[a],a,e)}return n}return function(i,n,o,s){n=y(n,s,4);var r=!k(i)&&b.keys(i),a=(r||i).length,l=t>0?0:a-1;return arguments.length<3&&(o=i[r?r[l]:l],l+=t),e(i,n,o,r,l,a)}}function e(t){return function(e,i,n){i=w(i,n);for(var o=S(e),s=t>0?0:o-1;s>=0&&o>s;s+=t)if(i(e[s],s,e))return s;return-1}}function i(t,e,i){return function(n,o,s){var r=0,a=S(n);if("number"==typeof s)t>0?r=s>=0?s:Math.max(s+a,r):a=s>=0?Math.min(s+1,a):s+a+1;else if(i&&s&&a)return s=i(n,o),n[s]===o?s:-1;if(o!==o)return s=e(h.call(n,r,a),b.isNaN),s>=0?s+r:-1;for(s=t>0?r:a-1;s>=0&&a>s;s+=t)if(n[s]===o)return s;return-1}}function n(t,e){var i=j.length,n=t.constructor,o=b.isFunction(n)&&n.prototype||a,s="constructor";for(b.has(t,s)&&!b.contains(e,s)&&e.push(s);i--;)(s=j[i])in t&&t[s]!==o[s]&&!b.contains(e,s)&&e.push(s)}var o=this,s=o._,r=Array.prototype,a=Object.prototype,l=Function.prototype,c=r.push,h=r.slice,d=a.toString,u=a.hasOwnProperty,p=Array.isArray,f=Object.keys,g=l.bind,v=Object.create,m=function(){},b=function(t){return t instanceof b?t:this instanceof b?void(this._wrapped=t):new b(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=b),exports._=b):o._=b,b.VERSION="1.8.3";var y=function(t,e,i){if(void 0===e)return t;switch(null==i?3:i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,o){return t.call(e,i,n,o)};case 4:return function(i,n,o,s){return t.call(e,i,n,o,s)}}return function(){return t.apply(e,arguments)}},w=function(t,e,i){return null==t?b.identity:b.isFunction(t)?y(t,e,i):b.isObject(t)?b.matcher(t):b.property(t)};b.iteratee=function(t,e){return w(t,e,1/0)};var x=function(t,e){return function(i){var n=arguments.length;if(2>n||null==i)return i;for(var o=1;n>o;o++)for(var s=arguments[o],r=t(s),a=r.length,l=0;a>l;l++){var c=r[l];e&&void 0!==i[c]||(i[c]=s[c])}return i}},C=function(t){if(!b.isObject(t))return{};if(v)return v(t);m.prototype=t;var e=new m;return m.prototype=null,e},_=function(t){return function(e){return null==e?void 0:e[t]}},T=Math.pow(2,53)-1,S=_("length"),k=function(t){var e=S(t);return"number"==typeof e&&e>=0&&T>=e};b.each=b.forEach=function(t,e,i){e=y(e,i);var n,o;if(k(t))for(n=0,o=t.length;o>n;n++)e(t[n],n,t);else{var s=b.keys(t);for(n=0,o=s.length;o>n;n++)e(t[s[n]],s[n],t)}return t},b.map=b.collect=function(t,e,i){e=w(e,i);for(var n=!k(t)&&b.keys(t),o=(n||t).length,s=Array(o),r=0;o>r;r++){var a=n?n[r]:r;s[r]=e(t[a],a,t)}return s},b.reduce=b.foldl=b.inject=t(1),b.reduceRight=b.foldr=t(-1),b.find=b.detect=function(t,e,i){var n;return n=k(t)?b.findIndex(t,e,i):b.findKey(t,e,i),void 0!==n&&-1!==n?t[n]:void 0},b.filter=b.select=function(t,e,i){var n=[];return e=w(e,i),b.each(t,function(t,i,o){e(t,i,o)&&n.push(t)}),n},b.reject=function(t,e,i){return b.filter(t,b.negate(w(e)),i)},b.every=b.all=function(t,e,i){e=w(e,i);for(var n=!k(t)&&b.keys(t),o=(n||t).length,s=0;o>s;s++){var r=n?n[s]:s;if(!e(t[r],r,t))return!1}return!0},b.some=b.any=function(t,e,i){e=w(e,i);for(var n=!k(t)&&b.keys(t),o=(n||t).length,s=0;o>s;s++){var r=n?n[s]:s;if(e(t[r],r,t))return!0}return!1},b.contains=b.includes=b.include=function(t,e,i,n){return k(t)||(t=b.values(t)),("number"!=typeof i||n)&&(i=0),b.indexOf(t,e,i)>=0},b.invoke=function(t,e){var i=h.call(arguments,2),n=b.isFunction(e);return b.map(t,function(t){var o=n?e:t[e];return null==o?o:o.apply(t,i)})},b.pluck=function(t,e){return b.map(t,b.property(e))},b.where=function(t,e){return b.filter(t,b.matcher(e))},b.findWhere=function(t,e){return b.find(t,b.matcher(e))},b.max=function(t,e,i){var n,o,s=-1/0,r=-1/0;if(null==e&&null!=t){t=k(t)?t:b.values(t);for(var a=0,l=t.length;l>a;a++)(n=t[a])>s&&(s=n)}else e=w(e,i),b.each(t,function(t,i,n){((o=e(t,i,n))>r||o===-1/0&&s===-1/0)&&(s=t,r=o)});return s},b.min=function(t,e,i){var n,o,s=1/0,r=1/0;if(null==e&&null!=t){t=k(t)?t:b.values(t);for(var a=0,l=t.length;l>a;a++)n=t[a],s>n&&(s=n)}else e=w(e,i),b.each(t,function(t,i,n){o=e(t,i,n),(r>o||1/0===o&&1/0===s)&&(s=t,r=o)});return s},b.shuffle=function(t){for(var e,i=k(t)?t:b.values(t),n=i.length,o=Array(n),s=0;n>s;s++)e=b.random(0,s),e!==s&&(o[s]=o[e]),o[e]=i[s];return o},b.sample=function(t,e,i){return null==e||i?(k(t)||(t=b.values(t)),t[b.random(t.length-1)]):b.shuffle(t).slice(0,Math.max(0,e))},b.sortBy=function(t,e,i){return e=w(e,i),b.pluck(b.map(t,function(t,i,n){return{value:t,index:i,criteria:e(t,i,n)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return t.index-e.index}),"value")};var E=function(t){return function(e,i,n){var o={};return i=w(i,n),b.each(e,function(n,s){var r=i(n,s,e);t(o,n,r)}),o}};b.groupBy=E(function(t,e,i){b.has(t,i)?t[i].push(e):t[i]=[e]}),b.indexBy=E(function(t,e,i){t[i]=e}),b.countBy=E(function(t,e,i){b.has(t,i)?t[i]++:t[i]=1}),b.toArray=function(t){return t?b.isArray(t)?h.call(t):k(t)?b.map(t,b.identity):b.values(t):[]},b.size=function(t){return null==t?0:k(t)?t.length:b.keys(t).length},b.partition=function(t,e,i){e=w(e,i);var n=[],o=[];return b.each(t,function(t,i,s){(e(t,i,s)?n:o).push(t)}),[n,o]},b.first=b.head=b.take=function(t,e,i){return null==t?void 0:null==e||i?t[0]:b.initial(t,t.length-e)},b.initial=function(t,e,i){return h.call(t,0,Math.max(0,t.length-(null==e||i?1:e)))},b.last=function(t,e,i){return null==t?void 0:null==e||i?t[t.length-1]:b.rest(t,Math.max(0,t.length-e))},b.rest=b.tail=b.drop=function(t,e,i){return h.call(t,null==e||i?1:e)},b.compact=function(t){return b.filter(t,b.identity)};var A=function(t,e,i,n){for(var o=[],s=0,r=n||0,a=S(t);a>r;r++){var l=t[r];if(k(l)&&(b.isArray(l)||b.isArguments(l))){e||(l=A(l,e,i));var c=0,h=l.length;for(o.length+=h;h>c;)o[s++]=l[c++]}else i||(o[s++]=l)}return o};b.flatten=function(t,e){return A(t,e,!1)},b.without=function(t){return b.difference(t,h.call(arguments,1))},b.uniq=b.unique=function(t,e,i,n){b.isBoolean(e)||(n=i,i=e,e=!1),null!=i&&(i=w(i,n));for(var o=[],s=[],r=0,a=S(t);a>r;r++){var l=t[r],c=i?i(l,r,t):l;e?(r&&s===c||o.push(l),s=c):i?b.contains(s,c)||(s.push(c),o.push(l)):b.contains(o,l)||o.push(l)}return o},b.union=function(){return b.uniq(A(arguments,!0,!0))},b.intersection=function(t){for(var e=[],i=arguments.length,n=0,o=S(t);o>n;n++){var s=t[n];if(!b.contains(e,s)){for(var r=1;i>r&&b.contains(arguments[r],s);r++);r===i&&e.push(s)}}return e},b.difference=function(t){var e=A(arguments,!0,!0,1);return b.filter(t,function(t){return!b.contains(e,t)})},b.zip=function(){return b.unzip(arguments)},b.unzip=function(t){for(var e=t&&b.max(t,S).length||0,i=Array(e),n=0;e>n;n++)i[n]=b.pluck(t,n);return i},b.object=function(t,e){for(var i={},n=0,o=S(t);o>n;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},b.findIndex=e(1),b.findLastIndex=e(-1),b.sortedIndex=function(t,e,i,n){i=w(i,n,1);for(var o=i(e),s=0,r=S(t);r>s;){var a=Math.floor((s+r)/2);i(t[a])<o?s=a+1:r=a}return s},b.indexOf=i(1,b.findIndex,b.sortedIndex),b.lastIndexOf=i(-1,b.findLastIndex),b.range=function(t,e,i){null==e&&(e=t||0,t=0),i=i||1;for(var n=Math.max(Math.ceil((e-t)/i),0),o=Array(n),s=0;n>s;s++,t+=i)o[s]=t;return o};var O=function(t,e,i,n,o){if(!(n instanceof e))return t.apply(i,o);var s=C(t.prototype),r=t.apply(s,o);return b.isObject(r)?r:s};b.bind=function(t,e){if(g&&t.bind===g)return g.apply(t,h.call(arguments,1));if(!b.isFunction(t))throw new TypeError("Bind must be called on a function");var i=h.call(arguments,2),n=function(){return O(t,n,e,this,i.concat(h.call(arguments)))};return n},b.partial=function(t){var e=h.call(arguments,1),i=function(){for(var n=0,o=e.length,s=Array(o),r=0;o>r;r++)s[r]=e[r]===b?arguments[n++]:e[r];for(;n<arguments.length;)s.push(arguments[n++]);return O(t,i,this,this,s)};return i},b.bindAll=function(t){var e,i,n=arguments.length;if(1>=n)throw new Error("bindAll must be passed function names");for(e=1;n>e;e++)i=arguments[e],t[i]=b.bind(t[i],t);return t},b.memoize=function(t,e){var i=function(n){var o=i.cache,s=""+(e?e.apply(this,arguments):n);return b.has(o,s)||(o[s]=t.apply(this,arguments)),o[s]};return i.cache={},i},b.delay=function(t,e){var i=h.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},b.defer=b.partial(b.delay,b,1),b.throttle=function(t,e,i){var n,o,s,r=null,a=0;i||(i={});var l=function(){a=!1===i.leading?0:b.now(),r=null,s=t.apply(n,o),r||(n=o=null)};return function(){var c=b.now();a||!1!==i.leading||(a=c);var h=e-(c-a);return n=this,o=arguments,0>=h||h>e?(r&&(clearTimeout(r),r=null),a=c,s=t.apply(n,o),r||(n=o=null)):r||!1===i.trailing||(r=setTimeout(l,h)),s}},b.debounce=function(t,e,i){var n,o,s,r,a,l=function(){var c=b.now()-r;e>c&&c>=0?n=setTimeout(l,e-c):(n=null,i||(a=t.apply(s,o),n||(s=o=null)))};return function(){s=this,o=arguments,r=b.now();var c=i&&!n;return n||(n=setTimeout(l,e)),c&&(a=t.apply(s,o),s=o=null),a}},b.wrap=function(t,e){return b.partial(e,t)},b.negate=function(t){return function(){return!t.apply(this,arguments)}},b.compose=function(){var t=arguments,e=t.length-1;return function(){for(var i=e,n=t[e].apply(this,arguments);i--;)n=t[i].call(this,n);return n}},b.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},b.before=function(t,e){var i;return function(){return--t>0&&(i=e.apply(this,arguments)),1>=t&&(e=null),i}},b.once=b.partial(b.before,2);var D=!{toString:null}.propertyIsEnumerable("toString"),j=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];b.keys=function(t){if(!b.isObject(t))return[];if(f)return f(t);var e=[];for(var i in t)b.has(t,i)&&e.push(i);return D&&n(t,e),e},b.allKeys=function(t){if(!b.isObject(t))return[];var e=[];for(var i in t)e.push(i);return D&&n(t,e),e},b.values=function(t){for(var e=b.keys(t),i=e.length,n=Array(i),o=0;i>o;o++)n[o]=t[e[o]];return n},b.mapObject=function(t,e,i){e=w(e,i);for(var n,o=b.keys(t),s=o.length,r={},a=0;s>a;a++)n=o[a],r[n]=e(t[n],n,t);return r},b.pairs=function(t){for(var e=b.keys(t),i=e.length,n=Array(i),o=0;i>o;o++)n[o]=[e[o],t[e[o]]];return n},b.invert=function(t){for(var e={},i=b.keys(t),n=0,o=i.length;o>n;n++)e[t[i[n]]]=i[n];return e},b.functions=b.methods=function(t){var e=[];for(var i in t)b.isFunction(t[i])&&e.push(i);return e.sort()},b.extend=x(b.allKeys),b.extendOwn=b.assign=x(b.keys),b.findKey=function(t,e,i){e=w(e,i);for(var n,o=b.keys(t),s=0,r=o.length;r>s;s++)if(n=o[s],e(t[n],n,t))return n},b.pick=function(t,e,i){var n,o,s={},r=t;if(null==r)return s;b.isFunction(e)?(o=b.allKeys(r),n=y(e,i)):(o=A(arguments,!1,!1,1),n=function(t,e,i){return e in i},r=Object(r));for(var a=0,l=o.length;l>a;a++){var c=o[a],h=r[c];n(h,c,r)&&(s[c]=h)}return s},b.omit=function(t,e,i){if(b.isFunction(e))e=b.negate(e);else{var n=b.map(A(arguments,!1,!1,1),String);e=function(t,e){return!b.contains(n,e)}}return b.pick(t,e,i)},b.defaults=x(b.allKeys,!0),b.create=function(t,e){var i=C(t);return e&&b.extendOwn(i,e),i},b.clone=function(t){return b.isObject(t)?b.isArray(t)?t.slice():b.extend({},t):t},b.tap=function(t,e){return e(t),t},b.isMatch=function(t,e){var i=b.keys(e),n=i.length;if(null==t)return!n;for(var o=Object(t),s=0;n>s;s++){var r=i[s];if(e[r]!==o[r]||!(r in o))return!1}return!0};var M=function(t,e,i,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof b&&(t=t._wrapped),e instanceof b&&(e=e._wrapped);var o=d.call(t);if(o!==d.call(e))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}var s="[object Array]"===o;if(!s){if("object"!=typeof t||"object"!=typeof e)return!1;var r=t.constructor,a=e.constructor;if(r!==a&&!(b.isFunction(r)&&r instanceof r&&b.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}i=i||[],n=n||[];for(var l=i.length;l--;)if(i[l]===t)return n[l]===e;if(i.push(t),n.push(e),s){if((l=t.length)!==e.length)return!1;for(;l--;)if(!M(t[l],e[l],i,n))return!1}else{var c,h=b.keys(t);if(l=h.length,b.keys(e).length!==l)return!1;for(;l--;)if(c=h[l],!b.has(e,c)||!M(t[c],e[c],i,n))return!1}return i.pop(),n.pop(),!0};b.isEqual=function(t,e){return M(t,e)},b.isEmpty=function(t){return null==t||(k(t)&&(b.isArray(t)||b.isString(t)||b.isArguments(t))?0===t.length:0===b.keys(t).length)},b.isElement=function(t){return!(!t||1!==t.nodeType)},b.isArray=p||function(t){return"[object Array]"===d.call(t)},b.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},b.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){b["is"+t]=function(e){return d.call(e)==="[object "+t+"]"}}),b.isArguments(arguments)||(b.isArguments=function(t){return b.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(b.isFunction=function(t){return"function"==typeof t||!1}),b.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},b.isNaN=function(t){return b.isNumber(t)&&t!==+t},b.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===d.call(t)},b.isNull=function(t){return null===t},b.isUndefined=function(t){return void 0===t},b.has=function(t,e){return null!=t&&u.call(t,e)},b.noConflict=function(){return o._=s,this},b.identity=function(t){return t},b.constant=function(t){return function(){return t}},b.noop=function(){},b.property=_,b.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},b.matcher=b.matches=function(t){return t=b.extendOwn({},t),function(e){return b.isMatch(e,t)}},b.times=function(t,e,i){var n=Array(Math.max(0,t));e=y(e,i,1);for(var o=0;t>o;o++)n[o]=e(o);return n},b.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},b.now=Date.now||function(){return(new Date).getTime()};var I={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},V=b.invert(I),P=function(t){var e=function(e){return t[e]},i="(?:"+b.keys(t).join("|")+")",n=RegExp(i),o=RegExp(i,"g");return function(t){return t=null==t?"":""+t,n.test(t)?t.replace(o,e):t}};b.escape=P(I),b.unescape=P(V),b.result=function(t,e,i){var n=null==t?void 0:t[e];return void 0===n&&(n=i),b.isFunction(n)?n.call(t):n};var L=0;b.uniqueId=function(t){var e=++L+"";return t?t+e:e},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var R=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},q=/\\|'|\r|\n|\u2028|\u2029/g,N=function(t){return"\\"+F[t]};b.template=function(t,e,i){!e&&i&&(e=i),e=b.defaults({},e,b.templateSettings);var n=RegExp([(e.escape||R).source,(e.interpolate||R).source,(e.evaluate||R).source].join("|")+"|$","g"),o=0,s="__p+='";t.replace(n,function(e,i,n,r,a){return s+=t.slice(o,a).replace(q,N),o=a+e.length,i?s+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?s+="'+\n((__t=("+n+"))==null?'':__t)+\n'":r&&(s+="';\n"+r+"\n__p+='"),e}),s+="';\n",e.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var r=new Function(e.variable||"obj","_",s)}catch(t){throw t.source=s,t}var a=function(t){return r.call(this,t,b)};return a.source="function("+(e.variable||"obj")+"){\n"+s+"}",a},b.chain=function(t){var e=b(t);return e._chain=!0,e};var B=function(t,e){return t._chain?b(e).chain():e};b.mixin=function(t){b.each(b.functions(t),function(e){var i=b[e]=t[e];b.prototype[e]=function(){var t=[this._wrapped];return c.apply(t,arguments),B(this,i.apply(b,t))}})},b.mixin(b),b.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=r[t];b.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!==t&&"splice"!==t||0!==i.length||delete i[0],B(this,i)}}),b.each(["concat","join","slice"],function(t){var e=r[t];b.prototype[t]=function(){return B(this,e.apply(this._wrapped,arguments))}}),b.prototype.value=function(){return this._wrapped},b.prototype.valueOf=b.prototype.toJSON=b.prototype.value,b.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return b})}.call(this),function(t){var e="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global;if("function"==typeof define&&define.amd)define("backbone",["underscore","jquery","exports"],function(i,n,o){e.Backbone=t(e,o,i,n)});else if("undefined"!=typeof exports){var i,n=require("underscore");try{i=require("jquery")}catch(t){}t(e,exports,n,i)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(function(t,e,i,n){var o=t.Backbone,s=Array.prototype.slice;e.VERSION="1.3.3",e.$=n,e.noConflict=function(){return t.Backbone=o,this},e.emulateHTTP=!1,e.emulateJSON=!1;var r=function(t,e,n){switch(t){case 1:return function(){return i[e](this[n])};case 2:return function(t){return i[e](this[n],t)};case 3:return function(t,o){return i[e](this[n],l(t,this),o)};case 4:return function(t,o,s){return i[e](this[n],l(t,this),o,s)};default:return function(){var t=s.call(arguments);return t.unshift(this[n]),i[e].apply(i,t)}}},a=function(t,e,n){i.each(e,function(e,o){i[o]&&(t.prototype[o]=r(e,o,n))})},l=function(t,e){return i.isFunction(t)?t:i.isObject(t)&&!e._isModel(t)?c(t):i.isString(t)?function(e){return e.get(t)}:t},c=function(t){var e=i.matches(t);return function(t){return e(t.attributes)}},h=e.Events={},d=/\s+/,u=function(t,e,n,o,s){var r,a=0;if(n&&"object"==typeof n){void 0!==o&&"context"in s&&void 0===s.context&&(s.context=o);for(r=i.keys(n);a<r.length;a++)e=u(t,e,r[a],n[r[a]],s)}else if(n&&d.test(n))for(r=n.split(d);a<r.length;a++)e=t(e,r[a],o,s);else e=t(e,n,o,s);return e};h.on=function(t,e,i){return p(this,t,e,i)};var p=function(t,e,i,n,o){if(t._events=u(f,t._events||{},e,i,{context:n,ctx:t,listening:o}),o){(t._listeners||(t._listeners={}))[o.id]=o}return t};h.listenTo=function(t,e,n){if(!t)return this;var o=t._listenId||(t._listenId=i.uniqueId("l")),s=this._listeningTo||(this._listeningTo={}),r=s[o];if(!r){var a=this._listenId||(this._listenId=i.uniqueId("l"));r=s[o]={obj:t,objId:o,id:a,listeningTo:s,count:0}}return p(t,e,n,this,r),this};var f=function(t,e,i,n){if(i){var o=t[e]||(t[e]=[]),s=n.context,r=n.ctx,a=n.listening;a&&a.count++,o.push({callback:i,context:s,ctx:s||r,listening:a})}return t};h.off=function(t,e,i){return this._events?(this._events=u(g,this._events,t,e,{context:i,listeners:this._listeners}),this):this},h.stopListening=function(t,e,n){var o=this._listeningTo;if(!o)return this;for(var s=t?[t._listenId]:i.keys(o),r=0;r<s.length;r++){var a=o[s[r]];if(!a)break;a.obj.off(e,n,this)}return this};var g=function(t,e,n,o){if(t){var s,r=0,a=o.context,l=o.listeners;if(e||n||a){for(var c=e?[e]:i.keys(t);r<c.length;r++){e=c[r];var h=t[e];if(!h)break;for(var d=[],u=0;u<h.length;u++){var p=h[u];n&&n!==p.callback&&n!==p.callback._callback||a&&a!==p.context?d.push(p):(s=p.listening)&&0==--s.count&&(delete l[s.id],delete s.listeningTo[s.objId])}d.length?t[e]=d:delete t[e]}return t}for(var f=i.keys(l);r<f.length;r++)s=l[f[r]],delete l[s.id],delete s.listeningTo[s.objId]}};h.once=function(t,e,n){var o=u(v,{},t,e,i.bind(this.off,this));return"string"==typeof t&&null==n&&(e=void 0),this.on(o,e,n)},h.listenToOnce=function(t,e,n){var o=u(v,{},e,n,i.bind(this.stopListening,this,t));return this.listenTo(t,o)};var v=function(t,e,n,o){if(n){var s=t[e]=i.once(function(){o(e,s),n.apply(this,arguments)});s._callback=n}return t};h.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),i=Array(e),n=0;n<e;n++)i[n]=arguments[n+1];return u(m,this._events,t,void 0,i),this};var m=function(t,e,i,n){if(t){var o=t[e],s=t.all;o&&s&&(s=s.slice()),o&&b(o,n),s&&b(s,[e].concat(n))}return t},b=function(t,e){var i,n=-1,o=t.length,s=e[0],r=e[1],a=e[2];switch(e.length){case 0:for(;++n<o;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<o;)(i=t[n]).callback.call(i.ctx,s);return;case 2:for(;++n<o;)(i=t[n]).callback.call(i.ctx,s,r);return;case 3:for(;++n<o;)(i=t[n]).callback.call(i.ctx,s,r,a);return;default:for(;++n<o;)(i=t[n]).callback.apply(i.ctx,e);return}};h.bind=h.on,h.unbind=h.off,i.extend(e,h);var y=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{});var o=i.result(this,"defaults");n=i.defaults(i.extend({},o,n),o),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(y.prototype,h,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!i.iteratee(t,this)(this.attributes)},set:function(t,e,n){if(null==t)return this;var o;if("object"==typeof t?(o=t,n=e):(o={})[t]=e,n||(n={}),!this._validate(o,n))return!1;var s=n.unset,r=n.silent,a=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=i.clone(this.attributes),this.changed={});var c=this.attributes,h=this.changed,d=this._previousAttributes;for(var u in o)e=o[u],i.isEqual(c[u],e)||a.push(u),i.isEqual(d[u],e)?delete h[u]:h[u]=e,s?delete c[u]:c[u]=e;if(this.idAttribute in o&&(this.id=this.get(this.idAttribute)),!r){a.length&&(this._pending=n);for(var p=0;p<a.length;p++)this.trigger("change:"+a[p],this,c[a[p]],n)}if(l)return this;if(!r)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&i.clone(this.changed);var e=this._changing?this._previousAttributes:this.attributes,n={};for(var o in t){var s=t[o];i.isEqual(e[o],s)||(n[o]=s)}return!!i.size(n)&&n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=i.extend({parse:!0},t);var e=this,n=t.success;return t.success=function(i){var o=t.parse?e.parse(i,t):i;if(!e.set(o,t))return!1;n&&n.call(t.context,e,i,t),e.trigger("sync",e,i,t)},q(this,t),this.sync("read",this,t)},save:function(t,e,n){var o;null==t||"object"==typeof t?(o=t,n=e):(o={})[t]=e,n=i.extend({validate:!0,parse:!0},n);var s=n.wait;if(o&&!s){if(!this.set(o,n))return!1}else if(!this._validate(o,n))return!1;var r=this,a=n.success,l=this.attributes;n.success=function(t){r.attributes=l;var e=n.parse?r.parse(t,n):t;if(s&&(e=i.extend({},o,e)),e&&!r.set(e,n))return!1;a&&a.call(n.context,r,t,n),r.trigger("sync",r,t,n)},q(this,n),o&&s&&(this.attributes=i.extend({},l,o));var c=this.isNew()?"create":n.patch?"patch":"update";"patch"!==c||n.attrs||(n.attrs=o);var h=this.sync(c,this,n);return this.attributes=l,h},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,o=t.wait,s=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(i){o&&s(),n&&n.call(t.context,e,i,t),e.isNew()||e.trigger("sync",e,i,t)};var r=!1;return this.isNew()?i.defer(t.success):(q(this,t),r=this.sync("delete",this,t)),o||s(),r},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||F();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return!n||(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1)}}),a(y,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes");var w=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},x={add:!0,remove:!0,merge:!0},C={add:!0,remove:!1},_=function(t,e,i){i=Math.min(Math.max(i,0),t.length);var n,o=Array(t.length-i),s=e.length;for(n=0;n<o.length;n++)o[n]=t[n+i];for(n=0;n<s;n++)t[n+i]=e[n];for(n=0;n<o.length;n++)t[n+s+i]=o[n]};i.extend(w.prototype,h,{model:y,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,C))},remove:function(t,e){e=i.extend({},e);var n=!i.isArray(t);t=n?[t]:t.slice();var o=this._removeModels(t,e);return!e.silent&&o.length&&(e.changes={added:[],merged:[],removed:o},this.trigger("update",this,e)),n?o[0]:o},set:function(t,e){if(null!=t){e=i.extend({},x,e),e.parse&&!this._isModel(t)&&(t=this.parse(t,e)||[]);var n=!i.isArray(t);t=n?[t]:t.slice();var o=e.at;null!=o&&(o=+o),o>this.length&&(o=this.length),o<0&&(o+=this.length+1);var s,r,a=[],l=[],c=[],h=[],d={},u=e.add,p=e.merge,f=e.remove,g=!1,v=this.comparator&&null==o&&!1!==e.sort,m=i.isString(this.comparator)?this.comparator:null;for(r=0;r<t.length;r++){s=t[r];var b=this.get(s);if(b){if(p&&s!==b){var y=this._isModel(s)?s.attributes:s;e.parse&&(y=b.parse(y,e)),b.set(y,e),c.push(b),v&&!g&&(g=b.hasChanged(m))}d[b.cid]||(d[b.cid]=!0,a.push(b)),t[r]=b}else u&&(s=t[r]=this._prepareModel(s,e))&&(l.push(s),this._addReference(s,e),d[s.cid]=!0,a.push(s))}if(f){for(r=0;r<this.length;r++)s=this.models[r],d[s.cid]||h.push(s);h.length&&this._removeModels(h,e)}var w=!1,C=!v&&u&&f;if(a.length&&C?(w=this.length!==a.length||i.some(this.models,function(t,e){return t!==a[e]}),this.models.length=0,_(this.models,a,0),this.length=this.models.length):l.length&&(v&&(g=!0),_(this.models,l,null==o?this.length:o),this.length=this.models.length),g&&this.sort({silent:!0}),!e.silent){for(r=0;r<l.length;r++)null!=o&&(e.index=o+r),s=l[r],s.trigger("add",s,this,e);(g||w)&&this.trigger("sort",this,e),(l.length||h.length||c.length)&&(e.changes={added:l,removed:h,merged:c},this.trigger("update",this,e))}return n?t[0]:t}},reset:function(t,e){e=e?i.clone(e):{};for(var n=0;n<this.models.length;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return s.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(t.attributes||t)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var n=e.length;return i.isFunction(e)&&(e=i.bind(e,this)),1===n||i.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return this.map(t+"")},fetch:function(t){t=i.extend({parse:!0},t);var e=t.success,n=this;return t.success=function(i){var o=t.reset?"reset":"set";n[o](i,t),e&&e.call(t.context,n,i,t),n.trigger("sync",n,i,t)},q(this,t),this.sync("read",this,t)},create:function(t,e){e=e?i.clone(e):{};var n=e.wait;if(!(t=this._prepareModel(t,e)))return!1;n||this.add(t,e);var o=this,s=e.success;return e.success=function(t,e,i){n&&o.add(t,i),s&&s.call(i.context,t,e,i)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_removeModels:function(t,e){for(var i=[],n=0;n<t.length;n++){var o=this.get(t[n]);if(o){var s=this.indexOf(o);this.models.splice(s,1),this.length--,delete this._byId[o.cid];var r=this.modelId(o.attributes);null!=r&&delete this._byId[r],e.silent||(e.index=s,o.trigger("remove",o,this,e)),i.push(o),this._removeReference(o,e)}}return i},_isModel:function(t){return t instanceof y},_addReference:function(t,e){this._byId[t.cid]=t;var i=this.modelId(t.attributes);null!=i&&(this._byId[i]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var i=this.modelId(t.attributes);null!=i&&delete this._byId[i],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){if(e){if(("add"===t||"remove"===t)&&i!==this)return;if("destroy"===t&&this.remove(e,n),"change"===t){var o=this.modelId(e.previousAttributes()),s=this.modelId(e.attributes);o!==s&&(null!=o&&delete this._byId[o],null!=s&&(this._byId[s]=e))}}this.trigger.apply(this,arguments)}}),a(w,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models");var T=e.View=function(t){this.cid=i.uniqueId("view"),i.extend(this,i.pick(t,k)),this._ensureElement(),this.initialize.apply(this,arguments)},S=/^(\S+)\s*(.*)$/,k=["model","collection","el","id","attributes","className","tagName","events"];i.extend(T.prototype,h,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=i.result(this,"events")),!t)return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[n]),n){var o=e.match(S);this.delegate(o[1],o[2],i.bind(n,this))}}return this},delegate:function(t,e,i){
return this.$el.on(t+".delegateEvents"+this.cid,e,i),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,i){return this.$el.off(t+".delegateEvents"+this.cid,e,i),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"));else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t.class=i.result(this,"className")),this.setElement(this._createElement(i.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,n,o){var s=E[t];i.defaults(o||(o={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var r={type:s,dataType:"json"};if(o.url||(r.url=i.result(n,"url")||F()),null!=o.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(r.contentType="application/json",r.data=JSON.stringify(o.attrs||n.toJSON(o))),o.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),o.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){r.type="POST",o.emulateJSON&&(r.data._method=s);var a=o.beforeSend;o.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",s),a)return a.apply(this,arguments)}}"GET"===r.type||o.emulateJSON||(r.processData=!1);var l=o.error;o.error=function(t,e,i){o.textStatus=e,o.errorThrown=i,l&&l.call(o.context,t,e,i)};var c=o.xhr=e.ajax(i.extend(r,o));return n.trigger("request",n,c,o),c};var E={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var A=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},O=/\((.*?)\)/g,D=/(\(\?)?:\w+/g,j=/\*\w+/g,M=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(A.prototype,h,{initialize:function(){},route:function(t,n,o){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(o=n,n=""),o||(o=this[n]);var s=this;return e.history.route(t,function(i){var r=s._extractParameters(t,i);!1!==s.execute(o,r,n)&&(s.trigger.apply(s,["route:"+n].concat(r)),s.trigger("route",n,r),e.history.trigger("route",s,n,r))}),this},execute:function(t,e,i){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(M,"\\$&").replace(O,"(?:$1)?").replace(D,function(t,e){return e?t:"([^/?]+)"}).replace(j,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var I=e.History=function(){this.handlers=[],this.checkUrl=i.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},V=/^[#\/]|\s+$/g,P=/^\/+|\/+$/g,L=/#.*$/;I.started=!1,i.extend(I.prototype,h,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(V,"")},start:function(t){if(I.started)throw new Error("Backbone.history has already been started");if(I.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(P,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var n=document.body,o=n.insertBefore(this.iframe,n.firstChild).contentWindow;o.document.open(),o.document.close(),o.location.hash="#"+this.fragment}var s=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState?s("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?s("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),I.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return!!this.matchRoot()&&(t=this.fragment=this.getFragment(t),i.some(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0}))},navigate:function(t,e){if(!I.started)return!1;e&&!0!==e||(e={trigger:!!e}),t=this.getFragment(t||"");var i=this.root;""!==t&&"?"!==t.charAt(0)||(i=i.slice(0,-1)||"/");var n=i+t;if(t=this.decodeFragment(t.replace(L,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var o=this.iframe.contentWindow;e.replace||(o.document.open(),o.document.close()),this._updateHash(o.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new I;var R=function(t,e){var n,o=this;return n=t&&i.has(t,"constructor")?t.constructor:function(){return o.apply(this,arguments)},i.extend(n,o,e),n.prototype=i.create(o.prototype,t),n.prototype.constructor=n,n.__super__=o.prototype,n};y.extend=w.extend=A.extend=T.extend=I.extend=R;var F=function(){throw new Error('A "url" property or function must be specified')},q=function(t,e){var i=e.error;e.error=function(n){i&&i.call(e.context,t,n,e),t.trigger("error",t,n,e)}};return e}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("underscore"),require("backbone")):"function"==typeof define&&define.amd?define("backbone.radio",["underscore","backbone"],e):(t.Backbone=t.Backbone||{},t.Backbone.Radio=e(t._,t.Backbone))}(this,function(t,e){"use strict";function i(t,e,i,n){var o=t[e];if(!(i&&i!==o.callback&&i!==o.callback._callback||n&&n!==o.context))return delete t[e],!0}function n(e,n,o,s){e||(e={});for(var r=n?[n]:t.keys(e),a=!1,l=0,c=r.length;l<c;l++)n=r[l],e[n]&&i(e,n,o,s)&&(a=!0);return a}function o(e){return h[e]||(h[e]=t.bind(l.log,l,e))}function s(e){return t.isFunction(e)?e:function(){return e}}t="default"in t?t.default:t,e="default"in e?e.default:e;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},a=e.Radio,l=e.Radio={};l.VERSION="2.0.0",l.noConflict=function(){return e.Radio=a,this},l.DEBUG=!1,l._debugText=function(t,e,i){return t+(i?" on the "+i+" channel":"")+': "'+e+'"'},l.debugLog=function(t,e,i){l.DEBUG&&console&&console.warn&&console.warn(l._debugText(t,e,i))};var c=/\s+/;l._eventsApi=function(e,i,n,o){if(!n)return!1;var s={};if("object"===(void 0===n?"undefined":r(n))){for(var a in n){var l=e[i].apply(e,[a,n[a]].concat(o));c.test(a)?t.extend(s,l):s[a]=l}return s}if(c.test(n)){for(var h=n.split(c),d=0,u=h.length;d<u;d++)s[h[d]]=e[i].apply(e,[h[d]].concat(o));return s}return!1},l._callHandler=function(t,e,i){var n=i[0],o=i[1],s=i[2];switch(i.length){case 0:return t.call(e);case 1:return t.call(e,n);case 2:return t.call(e,n,o);case 3:return t.call(e,n,o,s);default:return t.apply(e,i)}};var h={};t.extend(l,{log:function(e,i){if("undefined"!=typeof console){var n=t.toArray(arguments).slice(2);console.log("["+e+'] "'+i+'"',n)}},tuneIn:function(t){var e=l.channel(t);return e._tunedIn=!0,e.on("all",o(t)),this},tuneOut:function(t){var e=l.channel(t);return e._tunedIn=!1,e.off("all",o(t)),delete h[t],this}}),l.Requests={request:function(e){var i=t.toArray(arguments).slice(1),n=l._eventsApi(this,"request",e,i);if(n)return n;var o=this.channelName,s=this._requests;if(o&&this._tunedIn&&l.log.apply(this,[o,e].concat(i)),s&&(s[e]||s.default)){var r=s[e]||s.default;return i=s[e]?i:arguments,l._callHandler(r.callback,r.context,i)}l.debugLog("An unhandled request was fired",e,o)},reply:function(t,e,i){return l._eventsApi(this,"reply",t,[e,i])?this:(this._requests||(this._requests={}),this._requests[t]&&l.debugLog("A request was overwritten",t,this.channelName),this._requests[t]={callback:s(e),context:i||this},this)},replyOnce:function(e,i,n){if(l._eventsApi(this,"replyOnce",e,[i,n]))return this;var o=this,r=t.once(function(){return o.stopReplying(e),s(i).apply(this,arguments)});return this.reply(e,r,n)},stopReplying:function(t,e,i){return l._eventsApi(this,"stopReplying",t)?this:(t||e||i?n(this._requests,t,e,i)||l.debugLog("Attempted to remove the unregistered request",t,this.channelName):delete this._requests,this)}},l._channels={},l.channel=function(t){if(!t)throw new Error("You must provide a name for the channel.");return l._channels[t]?l._channels[t]:l._channels[t]=new l.Channel(t)},l.Channel=function(t){this.channelName=t},t.extend(l.Channel.prototype,e.Events,l.Requests,{reset:function(){return this.off(),this.stopListening(),this.stopReplying(),this}});var d,u,p=[e.Events,l.Requests];return t.each(p,function(e){t.each(e,function(e,i){l[i]=function(e){return u=t.toArray(arguments).slice(1),d=this.channel(e),d[i].apply(d,u)}})}),l.reset=function(e){var i=e?[this._channels[e]]:this._channels;t.each(i,function(t){t.reset()})},l}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("backbone"),require("underscore"),require("backbone.radio")):"function"==typeof define&&define.amd?define("marionette",["backbone","underscore","backbone.radio"],e):t.Marionette=e(t.Backbone,t._,t.Backbone.Radio)}(this,function(t,e,i){"use strict";function n(t,e,i){return i.toUpperCase()}function o(t){for(var i=arguments.length,n=Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];var s=X(t),r=H.call(this,s),a=void 0;return e.isFunction(r)&&(a=r.apply(this,n)),this.trigger.apply(this,arguments),a}function s(t){for(var i=arguments.length,n=Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return e.isFunction(t.triggerMethod)?t.triggerMethod.apply(t,n):o.apply(t,n)}function r(t,i,n){t._getImmediateChildren&&e.each(t._getImmediateChildren(),function(t){n(t)&&s(t,i,t)})}function a(t){return!t._isAttached}function l(t){return!!a(t)&&(t._isAttached=!0,!0)}function c(t){return t._isAttached}function h(t){return!!c(t)&&(t._isAttached=!1,!0)}function d(t){t._isAttached&&t._isRendered&&s(t,"dom:refresh",t)}function u(t){t._isAttached&&t._isRendered&&s(t,"dom:remove",t)}function p(){r(this,"before:attach",a)}function f(){r(this,"attach",l),d(this)}function g(){r(this,"before:detach",c),u(this)}function v(){r(this,"detach",h)}function m(){u(this)}function b(){d(this)}function y(t){t._areViewEventsMonitored||!1===t.monitorViewEvents||(t._areViewEventsMonitored=!0,t.on({"before:attach":p,attach:f,"before:detach":g,detach:v,"before:render":m,render:b}))}function w(t,i,n,o,s){var r=o.split(/\s+/);r.length>1&&$("Multiple handlers for a single event are deprecated. If needed, use a single handler to call multiple methods."),e.each(r,function(e){var o=t[e];if(!o)throw new Y('Method "'+e+'" was configured as an event handler, but does not exist.');t[s](i,n,o)})}function x(t,i,n,o){if(!e.isObject(n))throw new Y({message:"Bindings must be an object.",url:"marionette.functions.html#marionettebindevents"});e.each(n,function(n,s){if(e.isString(n))return void w(t,i,s,n,o);t[o](i,s,n)})}function C(t,e){return t&&e?(x(this,t,e,"listenTo"),this):this}function _(t,e){return t?e?(x(this,t,e,"stopListening"),this):(this.stopListening(t),this):this}function T(t,i,n,o){if(!e.isObject(n))throw new Y({message:"Bindings must be an object.",url:"marionette.functions.html#marionettebindrequests"});var s=W.call(t,n);i[o](s,t)}function S(t,e){return t&&e?(T(this,t,e,"reply"),this):this}function k(t,e){return t?e?(T(this,t,e,"stopReplying"),this):(t.stopReplying(null,null,this),this):this}function E(t,i){return t.behaviorClass?t.behaviorClass:e.isFunction(t)?t:e.isFunction(Bt.Behaviors.behaviorsLookup)?Bt.Behaviors.behaviorsLookup(t,i)[i]:Bt.Behaviors.behaviorsLookup[i]}function A(t,i){return e.chain(i).map(function(i,n){var o=E(i,n),s=i===o?{}:i,r=new o(s,t);return[r].concat(A(t,e.result(r,"behaviors")))}).flatten().value()}function O(t){return!!lt[t]}function D(t,e){return lt[t]=e}function j(t,i){e.isString(i)&&(i={event:i});var n=i.event,o=!!i.preventDefault;O("triggersPreventDefault")&&(o=!1!==i.preventDefault);var s=!!i.stopPropagation;return O("triggersStopPropagation")&&(s=!1!==i.stopPropagation),function(e){o&&e.preventDefault(),s&&e.stopPropagation(),t.triggerMethod(n,t,e)}}function M(e){return e instanceof t.$?e:t.$(e)}function I(t){return this.prototype.Dom=e.extend({},this.prototype.Dom,t),this}function V(t){t._isRendered||(t.supportsRenderLifecycle||s(t,"before:render",t),t.render(),t.supportsRenderLifecycle||(t._isRendered=!0,s(t,"render",t)))}function P(t){if(t.destroy)return void t.destroy();t.supportsDestroyLifecycle||s(t,"before:destroy",t);var e=t._isAttached&&!t._shouldDisableEvents;e&&s(t,"before:detach",t),t.remove(),e&&(t._isAttached=!1,s(t,"detach",t)),t._isDestroyed=!0,t.supportsDestroyLifecycle||s(t,"destroy",t)}function L(t,i){var n=e.extend({},i);if(e.isString(t))return e.extend(n,{el:t}),R(n);if(e.isFunction(t))return e.extend(n,{regionClass:t}),R(n);if(e.isObject(t))return t.selector&&$("The selector option on a Region definition object is deprecated. Use el to pass a selector string"),e.extend(n,{el:t.selector},t),R(n);throw new Y({message:"Improper region configuration type.",url:"marionette.region.html#region-configuration-types"})}function R(t){return new(0,t.regionClass)(e.omit(t,"regionClass"))}function F(t,e){return e.model&&e.model.get(t)}function q(){throw new Y({message:"You must define where your behaviors are stored.",url:"marionette.behaviors.md#behaviorslookup"})}t=t&&t.hasOwnProperty("default")?t.default:t,e=e&&e.hasOwnProperty("default")?e.default:e,i=i&&i.hasOwnProperty("default")?i.default:i;var N=function(t){return function(e){for(var i=arguments.length,n=Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];return t.apply(e,n)}},B=t.Model.extend,$=function t(i,n){e.isObject(i)&&(i=i.prev+" is going to be removed in the future. Please use "+i.next+" instead."+(i.url?" See: "+i.url:"")),Bt.DEV_MODE&&(void 0!==n&&n||t._cache[i]||(t._warn("Deprecation warning: "+i),t._cache[i]=!0))};$._console="undefined"!=typeof console?console:{},$._warn=function(){return($._console.warn||$._console.log||e.noop).apply($._console,arguments)},$._cache={};var z=function(t){return document.documentElement.contains(t&&t.parentNode)},U=function(t,i){var n=this;t&&e.each(i,function(e){var i=t[e];void 0!==i&&(n[e]=i)})},H=function(t){if(t)return this.options&&void 0!==this.options[t]?this.options[t]:this[t]},W=function(t){var i=this;return e.reduce(t,function(t,n,o){return e.isFunction(n)||(n=i[n]),n&&(t[o]=n),t},{})},J=/(^|:)(\w)/gi,X=e.memoize(function(t){return"on"+t.replace(J,n)}),G=["description","fileName","lineNumber","name","message","number"],Y=B.call(Error,{urlRoot:"http://marionettejs.com/docs/v3.5.1/",constructor:function(t,i){e.isObject(t)?(i=t,t=i.message):i||(i={});var n=Error.call(this,t);e.extend(this,e.pick(n,G),e.pick(i,G)),this.captureStackTrace(),i.url&&(this.url=this.urlRoot+i.url)},captureStackTrace:function(){Error.captureStackTrace&&Error.captureStackTrace(this,Y)},toString:function(){return this.name+": "+this.message+(this.url?" See: "+this.url:"")}});Y.extend=B;var K=function(t){this.options=e.extend({},e.result(this,"options"),t)},Q={normalizeMethods:W,_setOptions:K,mergeOptions:U,getOption:H,bindEvents:C,unbindEvents:_},Z={_initRadio:function(){var t=e.result(this,"channelName");if(t){if(!i)throw new Y({name:"BackboneRadioMissing",message:'The dependency "backbone.radio" is missing.'});var n=this._channel=i.channel(t),o=e.result(this,"radioEvents");this.bindEvents(n,o);var s=e.result(this,"radioRequests");this.bindRequests(n,s),this.on("destroy",this._destroyRadio)}},_destroyRadio:function(){this._channel.stopReplying(null,null,this)},getChannel:function(){return this._channel},bindEvents:C,unbindEvents:_,bindRequests:S,unbindRequests:k},tt=["channelName","radioEvents","radioRequests"],et=function(t){this.hasOwnProperty("options")||this._setOptions(t),this.mergeOptions(t,tt),this._setCid(),this._initRadio(),this.initialize.apply(this,arguments)};et.extend=B,e.extend(et.prototype,t.Events,Q,Z,{cidPrefix:"mno",_isDestroyed:!1,isDestroyed:function(){return this._isDestroyed},initialize:function(){},_setCid:function(){this.cid||(this.cid=e.uniqueId(this.cidPrefix))},destroy:function(){if(this._isDestroyed)return this;for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.triggerMethod.apply(this,["before:destroy",this].concat(e)),this._isDestroyed=!0,this.triggerMethod.apply(this,["destroy",this].concat(e)),this.stopListening(),this},triggerMethod:o});var it=function(t){this.templateId=t};e.extend(it,{templateCaches:{},get:function(t,e){var i=this.templateCaches[t];return i||(i=new it(t),this.templateCaches[t]=i),i.load(e)},clear:function(){for(var t=void 0,e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];var o=i.length;if(o>0)for(t=0;t<o;t++)delete this.templateCaches[i[t]];else this.templateCaches={}}}),e.extend(it.prototype,{load:function(t){if(this.compiledTemplate)return this.compiledTemplate;var e=this.loadTemplate(this.templateId,t);return this.compiledTemplate=this.compileTemplate(e,t),this.compiledTemplate},loadTemplate:function(e,i){var n=t.$(e);if(!n.length)throw new Y({name:"NoTemplateError",message:'Could not find template: "'+e+'"'});return n.html()},compileTemplate:function(t,i){return e.template(t,i)}});var nt=e.invokeMap||e.invoke,ot={_initBehaviors:function(){this._behaviors=this._getBehaviors()},_getBehaviors:function(){var t=e.result(this,"behaviors");return e.isObject(t)?A(this,t):{}},_getBehaviorTriggers:function(){var t=nt(this._behaviors,"getTriggers");return e.reduce(t,function(t,i){return e.extend(t,i)},{})},_getBehaviorEvents:function(){var t=nt(this._behaviors,"getEvents");return e.reduce(t,function(t,i){return e.extend(t,i)},{})},_proxyBehaviorViewProperties:function(){nt(this._behaviors,"proxyViewProperties")},_delegateBehaviorEntityEvents:function(){nt(this._behaviors,"delegateEntityEvents")},_undelegateBehaviorEntityEvents:function(){nt(this._behaviors,"undelegateEntityEvents")},_destroyBehaviors:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];nt.apply(void 0,[this._behaviors,"destroy"].concat(e))},_removeBehavior:function(t){this._isDestroyed||(this.undelegate(".trig"+t.cid+" ."+t.cid),this._behaviors=e.without(this._behaviors,t))},_bindBehaviorUIElements:function(){nt(this._behaviors,"bindUIElements")},_unbindBehaviorUIElements:function(){nt(this._behaviors,"unbindUIElements")},_triggerEventOnBehaviors:function(){for(var t=this._behaviors,e=0,i=t&&t.length;e<i;e++)o.apply(t[e],arguments)}},st={_delegateEntityEvents:function(t,i){var n=e.result(this,"modelEvents");n&&(_.call(this,t,n),C.call(this,t,n));var o=e.result(this,"collectionEvents");o&&(_.call(this,i,o),C.call(this,i,o))},_undelegateEntityEvents:function(t,i){var n=e.result(this,"modelEvents");_.call(this,t,n);var o=e.result(this,"collectionEvents");_.call(this,i,o)}},rt=/^(\S+)\s*(.*)$/,at=function(t,e){var i=t.match(rt);return i[1]+"."+e+" "+i[2]},lt={childViewEventPrefix:!0,triggersStopPropagation:!0,triggersPreventDefault:!0},ct={_getViewTriggers:function(t,i){var n=this;return e.reduce(i,function(e,i,o){return o=at(o,"trig"+n.cid),e[o]=j(t,i),e},{})}},ht=function(t,i){return e.reduce(t,function(t,e,n){return t[dt(n,i)]=e,t},{})},dt=function(t,e){return t.replace(/@ui\.[a-zA-Z-_$0-9]*/g,function(t){return e[t.slice(4)]})},ut=function t(i,n,o){return e.each(i,function(s,r){e.isString(s)?i[r]=dt(s,n):e.isObject(s)&&e.isArray(o)&&(e.extend(s,t(e.pick(s,o),n)),e.each(o,function(t){var i=s[t];e.isString(i)&&(s[t]=dt(i,n))}))}),i},pt={normalizeUIKeys:function(t){var e=this._getUIBindings();return ht(t,e)},normalizeUIString:function(t){var e=this._getUIBindings();return dt(t,e)},normalizeUIValues:function(t,e){var i=this._getUIBindings();return ut(t,i,e)},_getUIBindings:function(){var t=e.result(this,"_uiBindings"),i=e.result(this,"ui");return t||i},_bindUIElements:function(){var t=this;if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var i=e.result(this,"_uiBindings");this._ui={},e.each(i,function(e,i){t._ui[i]=t.$(e)}),this.ui=this._ui}},_unbindUIElements:function(){var t=this;this.ui&&this._uiBindings&&(e.each(this.ui,function(e,i){delete t.ui[i]}),this.ui=this._uiBindings,delete this._uiBindings,delete this._ui)},_getUI:function(t){return this._ui[t]}},ft={createBuffer:function(){return document.createDocumentFragment()},getEl:function(t){return M(t)},findEl:function(t,e){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:M(t)).find(e)},hasEl:function(t,e){return t.contains(e&&e.parentNode)},detachEl:function(t){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:M(t)).detach()},replaceEl:function(t,e){if(t!==e){var i=e.parentNode;i&&i.replaceChild(t,e)}},swapEl:function(t,e){if(t!==e){var i=t.parentNode,n=e.parentNode;if(i&&n){var o=t.nextSibling,s=e.nextSibling;i.insertBefore(e,o),n.insertBefore(t,s)}}},setContents:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:M(t)).html(e)},appendContents:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i._$el,o=void 0===n?M(t):n,s=i._$contents,r=void 0===s?M(e):s;o.append(r)},hasContents:function(t){return!!t&&t.hasChildNodes()},detachContents:function(t){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:M(t)).contents().detach()}},gt={Dom:ft,supportsRenderLifecycle:!0,supportsDestroyLifecycle:!0,_isDestroyed:!1,isDestroyed:function(){return!!this._isDestroyed},_isRendered:!1,isRendered:function(){return!!this._isRendered},_isAttached:!1,isAttached:function(){return!!this._isAttached},delegateEvents:function(i){this._proxyBehaviorViewProperties(),this._buildEventProxies();var n=this._getEvents(i);void 0===i&&(this.events=n);var o=e.extend({},this._getBehaviorEvents(),n,this._getBehaviorTriggers(),this.getTriggers());return t.View.prototype.delegateEvents.call(this,o),this},_getEvents:function(t){var i=t||this.events;return e.isFunction(i)?this.normalizeUIKeys(i.call(this)):this.normalizeUIKeys(i)},getTriggers:function(){if(this.triggers){var t=this.normalizeUIKeys(e.result(this,"triggers"));return this._getViewTriggers(this,t)}},delegateEntityEvents:function(){return this._delegateEntityEvents(this.model,this.collection),this._delegateBehaviorEntityEvents(),this},undelegateEntityEvents:function(){return this._undelegateEntityEvents(this.model,this.collection),this._undelegateBehaviorEntityEvents(),this},destroy:function(){if(this._isDestroyed)return this;for(var t=this._isAttached&&!this._shouldDisableEvents,e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return this.triggerMethod.apply(this,["before:destroy",this].concat(i)),t&&this.triggerMethod("before:detach",this),this.unbindUIElements(),this._removeElement(),t&&(this._isAttached=!1,this.triggerMethod("detach",this)),this._removeChildren(),this._isDestroyed=!0,this._isRendered=!1,this._destroyBehaviors.apply(this,i),this.triggerMethod.apply(this,["destroy",this].concat(i)),this.stopListening(),this},_removeElement:function(){this.$el.off().removeData(),this.Dom.detachEl(this.el,this.$el)},bindUIElements:function(){return this._bindUIElements(),this._bindBehaviorUIElements(),this},unbindUIElements:function(){return this._unbindUIElements(),this._unbindBehaviorUIElements(),this},getUI:function(t){return this._getUI(t)},childViewEventPrefix:function(){return!!O("childViewEventPrefix")&&"childview"},triggerMethod:function(){var t=o.apply(this,arguments);return this._triggerEventOnBehaviors.apply(this,arguments),t},_buildEventProxies:function(){this._childViewEvents=e.result(this,"childViewEvents"),this._childViewTriggers=e.result(this,"childViewTriggers")},_proxyChildViewEvents:function(t){this.listenTo(t,"all",this._childViewEventHandler)},_childViewEventHandler:function(t){for(var i=this.normalizeMethods(this._childViewEvents),n=arguments.length,o=Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];void 0!==i&&e.isFunction(i[t])&&i[t].apply(this,o);var r=this._childViewTriggers;r&&e.isString(r[t])&&this.triggerMethod.apply(this,[r[t]].concat(o));var a=e.result(this,"childViewEventPrefix");if(!1!==a){var l=a+":"+t;this.triggerMethod.apply(this,[l].concat(o))}}};e.extend(gt,ot,Q,st,ct,pt);var vt=["allowMissingEl","parentEl","replaceElement"],mt=et.extend({Dom:ft,cidPrefix:"mnr",replaceElement:!1,_isReplaced:!1,_isSwappingView:!1,constructor:function(e){if(this._setOptions(e),this.mergeOptions(e,vt),this._initEl=this.el=this.getOption("el"),this.el=this.el instanceof t.$?this.el[0]:this.el,!this.el)throw new Y({name:"NoElError",message:'An "el" must be specified for a region.'});this.$el=this.getEl(this.el),et.call(this,e)},show:function(t,e){if(this._ensureElement(e))return(t=this._getView(t,e))===this.currentView?this:(this._isSwappingView=!!this.currentView,this.triggerMethod("before:show",this,t,e),t._isAttached||this.empty(e),this._setupChildView(t),this.currentView=t,V(t),this._attachView(t,e),this.triggerMethod("show",this,t,e),this._isSwappingView=!1,this)},_setupChildView:function(t){y(t),this._proxyChildViewEvents(t),t.on("destroy",this._empty,this)},_proxyChildViewEvents:function(t){var e=this._parentView;e&&e._proxyChildViewEvents(t)},_shouldDisableMonitoring:function(){return this._parentView&&!1===this._parentView.monitorViewEvents},_attachView:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!t._isAttached&&z(this.el)&&!this._shouldDisableMonitoring(),o=void 0===i.replaceElement?!!e.result(this,"replaceElement"):!!i.replaceElement;n&&s(t,"before:attach",t),o?this._replaceEl(t):this.attachHtml(t),n&&(t._isAttached=!0,s(t,"attach",t))},_ensureElement:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0],this.$el=this.Dom.getEl(this.el)),!this.$el||0===this.$el.length){if(void 0===t.allowMissingEl?!!e.result(this,"allowMissingEl"):!!t.allowMissingEl)return!1;throw new Y('An "el" must exist in DOM for this region '+this.cid)}return!0},_getView:function(e){if(!e)throw new Y({name:"ViewNotValid",message:"The view passed is undefined and therefore invalid. You must pass a view instance to show."});if(e._isDestroyed)throw new Y({name:"ViewDestroyedError",message:'View (cid: "'+e.cid+'") has already been destroyed and cannot be used.'});if(e instanceof t.View)return e;var i=this._getViewOptions(e);return new Ct(i)},_getViewOptions:function(t){return e.isFunction(t)?{template:t}:e.isObject(t)?t:{template:function(){return t}}},getEl:function(t){var i=e.result(this,"parentEl");return i&&e.isString(t)?this.Dom.findEl(i,t):this.Dom.getEl(t)},_replaceEl:function(t){this._restoreEl(),t.on("before:destroy",this._restoreEl,this),this.Dom.replaceEl(t.el,this.el),this._isReplaced=!0},_restoreEl:function(){if(this._isReplaced){var t=this.currentView;t&&(this._detachView(t),this._isReplaced=!1)}},isReplaced:function(){return!!this._isReplaced},isSwappingView:function(){return!!this._isSwappingView},attachHtml:function(t){this.Dom.appendContents(this.el,t.el,{_$el:this.$el,_$contents:t.$el})},empty:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{allowMissingEl:!0},e=this.currentView;if(!e)return this._ensureElement(t)&&this.detachHtml(),this;var i=!t.preventDestroy;return i||$("The preventDestroy option is deprecated. Use Region#detachView"),this._empty(e,i),this},_empty:function(t,e){t.off("destroy",this._empty,this),this.triggerMethod("before:empty",this,t),this._restoreEl(),delete this.currentView,t._isDestroyed||(e?this.removeView(t):this._detachView(t),this._stopChildViewEvents(t)),this.triggerMethod("empty",this,t)},_stopChildViewEvents:function(t){this._parentView&&this._parentView.stopListening(t)},destroyView:function(t){return t._isDestroyed?t:(t._shouldDisableEvents=this._shouldDisableMonitoring(),P(t),t)},removeView:function(t){this.destroyView(t)},detachView:function(){var t=this.currentView;if(t)return this._empty(t),t},_detachView:function(t){var e=t._isAttached&&!this._shouldDisableMonitoring(),i=this._isReplaced;e&&s(t,"before:detach",t),i?this.Dom.replaceEl(this.el,t.el):this.detachHtml(),e&&(t._isAttached=!1,s(t,"detach",t))},detachHtml:function(){this.Dom.detachContents(this.el,this.$el)},hasView:function(){return!!this.currentView},reset:function(t){return this.empty(t),this.$el&&(this.el=this._initEl),delete this.$el,this},destroy:function(t){return this._isDestroyed?this:(this.reset(t),this._name&&this._parentView._removeReferences(this._name),delete this._parentView,delete this._name,et.prototype.destroy.apply(this,arguments))}},{setDomApi:I}),bt=function(t,e){return t instanceof mt?t:L(t,e)},yt={regionClass:mt,_initRegions:function(){this.regions=this.regions||{},this._regions={},this.addRegions(e.result(this,"regions"))},_reInitRegions:function(){nt(this._regions,"reset")},addRegion:function(t,e){var i={};return i[t]=e,this.addRegions(i)[t]},addRegions:function(t){if(!e.isEmpty(t))return t=this.normalizeUIValues(t,["selector","el"]),this.regions=e.extend({},this.regions,t),this._addRegions(t)},_addRegions:function(t){var i=this,n={regionClass:this.regionClass,parentEl:e.partial(e.result,this,"el")};return e.reduce(t,function(t,e,o){return t[o]=bt(e,n),i._addRegion(t[o],o),t},{})},_addRegion:function(t,e){this.triggerMethod("before:add:region",this,e,t),t._parentView=this,t._name=e,this._regions[e]=t,this.triggerMethod("add:region",this,e,t)},removeRegion:function(t){var e=this._regions[t];return this._removeRegion(e,t),e},removeRegions:function(){var t=this._getRegions();return e.each(this._regions,e.bind(this._removeRegion,this)),t},_removeRegion:function(t,e){this.triggerMethod("before:remove:region",this,e,t),
t.destroy(),this.triggerMethod("remove:region",this,e,t)},_removeReferences:function(t){delete this.regions[t],delete this._regions[t]},emptyRegions:function(){var t=this.getRegions();return nt(t,"empty"),t},hasRegion:function(t){return!!this.getRegion(t)},getRegion:function(t){return this._isRendered||this.render(),this._regions[t]},_getRegions:function(){return e.clone(this._regions)},getRegions:function(){return this._isRendered||this.render(),this._getRegions()},showChildView:function(t,e){for(var i=this.getRegion(t),n=arguments.length,o=Array(n>2?n-2:0),s=2;s<n;s++)o[s-2]=arguments[s];return i.show.apply(i,[e].concat(o))},detachChildView:function(t){return this.getRegion(t).detachView()},getChildView:function(t){return this.getRegion(t).currentView}},wt={render:function(t,i){if(!t)throw new Y({name:"TemplateNotFoundError",message:"Cannot render the template since its false, null or undefined."});return(e.isFunction(t)?t:it.get(t))(i)}},xt=["behaviors","childViewEventPrefix","childViewEvents","childViewTriggers","collectionEvents","events","modelEvents","regionClass","regions","template","templateContext","triggers","ui"],Ct=t.View.extend({constructor:function(i){this.render=e.bind(this.render,this),this._setOptions(i),this.mergeOptions(i,xt),y(this),this._initBehaviors(),this._initRegions();var n=Array.prototype.slice.call(arguments);n[0]=this.options,t.View.prototype.constructor.apply(this,n),this.delegateEntityEvents(),this._triggerEventOnBehaviors("initialize",this)},serializeData:function(){return this.model||this.collection?this.model?this.serializeModel():{items:this.serializeCollection()}:{}},serializeModel:function(){return this.model?e.clone(this.model.attributes):{}},serializeCollection:function(){return this.collection?this.collection.map(function(t){return e.clone(t.attributes)}):{}},setElement:function(){return t.View.prototype.setElement.apply(this,arguments),this._isRendered=this.Dom.hasContents(this.el),this._isAttached=z(this.el),this._isRendered&&this.bindUIElements(),this},render:function(){return this._isDestroyed?this:(this.triggerMethod("before:render",this),this._isRendered&&this._reInitRegions(),this._renderTemplate(),this.bindUIElements(),this._isRendered=!0,this.triggerMethod("render",this),this)},_renderTemplate:function(){var t=this.getTemplate();if(!1===t)return void $("template:false is deprecated.  Use _.noop.");var e=this.mixinTemplateContext(this.serializeData()),i=this._renderHtml(t,e);this.attachElContent(i)},_renderHtml:function(t,e){return wt.render(t,e,this)},getTemplate:function(){return this.template},mixinTemplateContext:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.result(this,"templateContext");return e.extend(t,i)},attachElContent:function(t){return this.Dom.setContents(this.el,t,this.$el),this},_removeChildren:function(){this.removeRegions()},_getImmediateChildren:function(){return e.chain(this._getRegions()).map("currentView").compact().value()}},{setRenderer:function(t){return this.prototype._renderHtml=t,this},setDomApi:I});e.extend(Ct.prototype,gt,yt);var _t=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck","reduce","partition"],Tt=function(t,i){e.each(_t,function(n){t[n]=function(){var t=e.result(this,i),o=Array.prototype.slice.call(arguments);return e[n].apply(e,[t].concat(o))}})},St=function(t){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),e.each(t,e.bind(this.add,this))};Tt(St.prototype,"_getViews"),e.extend(St.prototype,{_getViews:function(){return e.values(this._views)},add:function(t,e){return this._add(t,e)._updateLength()},_add:function(t,e){var i=t.cid;return this._views[i]=t,t.model&&(this._indexByModel[t.model.cid]=i),e&&(this._indexByCustom[e]=i),this},findByModel:function(t){return this.findByModelCid(t.cid)},findByModelCid:function(t){var e=this._indexByModel[t];return this.findByCid(e)},findByCustom:function(t){var e=this._indexByCustom[t];return this.findByCid(e)},findByIndex:function(t){return e.values(this._views)[t]},findByCid:function(t){return this._views[t]},remove:function(t){return this._remove(t)._updateLength()},_remove:function(t){var i=t.cid;return t.model&&delete this._indexByModel[t.model.cid],e.some(this._indexByCustom,e.bind(function(t,e){if(t===i)return delete this._indexByCustom[e],!0},this)),delete this._views[i],this},_updateLength:function(){return this.length=e.size(this._views),this}});var kt=["behaviors","childView","childViewEventPrefix","childViewEvents","childViewOptions","childViewTriggers","collectionEvents","events","filter","emptyView","emptyViewOptions","modelEvents","reorderOnSort","sort","triggers","ui","viewComparator"],Et=t.View.extend({sort:!0,constructor:function(i){this.render=e.bind(this.render,this),this._setOptions(i),this.mergeOptions(i,kt),y(this),this._initBehaviors(),this.once("render",this._initialEvents),this._initChildViewStorage(),this._bufferedChildren=[];var n=Array.prototype.slice.call(arguments);n[0]=this.options,t.View.prototype.constructor.apply(this,n),this.delegateEntityEvents(),this._triggerEventOnBehaviors("initialize",this)},_startBuffering:function(){this._isBuffering=!0},_endBuffering:function(){var t=this._isAttached&&!1!==this.monitorViewEvents,i=t?this._getImmediateChildren():[];this._isBuffering=!1,e.each(i,function(t){s(t,"before:attach",t)}),this.attachBuffer(this,this._createBuffer()),e.each(i,function(t){t._isAttached=!0,s(t,"attach",t)}),this._bufferedChildren=[]},_getImmediateChildren:function(){return e.values(this.children._views)},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"update",this._onCollectionUpdate),this.listenTo(this.collection,"reset",this.render),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},_onCollectionAdd:function(t,i,n){var o=void 0!==n.at&&(n.index||i.indexOf(t));(this.filter||!1===o)&&(o=e.indexOf(this._filteredSortedModels(o),t)),this._shouldAddChild(t,o)&&(this._destroyEmptyView(),this._addChild(t,o))},_onCollectionUpdate:function(t,e){var i=e.changes;this._removeChildModels(i.removed)},_removeChildModels:function(t){var e=this._getRemovedViews(t);e.length&&(this.children._updateLength(),this._updateIndices(e,!1),this.isEmpty()&&this._showEmptyView())},_getRemovedViews:function(t){var i=this;return e.reduce(t,function(t,e){var n=e&&i.children.findByModel(e);return!n||n._isDestroyed?t:(i._removeChildView(n),t.push(n),t)},[])},_removeChildView:function(t){this.triggerMethod("before:remove:child",this,t),this.children._remove(t),t._shouldDisableEvents=!1===this.monitorViewEvents,P(t),this.stopListening(t),this.triggerMethod("remove:child",this,t)},setElement:function(){return t.View.prototype.setElement.apply(this,arguments),this._isAttached=z(this.el),this},render:function(){return this._isDestroyed?this:(this.triggerMethod("before:render",this),this._renderChildren(),this._isRendered=!0,this.triggerMethod("render",this),this)},setFilter:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.preventRender,n=this._isRendered&&!this._isDestroyed,o=this.filter!==t;if(n&&o&&!i){var s=this._filteredSortedModels();this.filter=t;var r=this._filteredSortedModels();this._applyModelDeltas(r,s)}else this.filter=t;return this},removeFilter:function(t){return this.setFilter(null,t)},_applyModelDeltas:function(t,i){var n=this,o={};e.each(t,function(t,e){!n.children.findByModel(t)&&n._onCollectionAdd(t,n.collection,{at:e}),o[t.cid]=!0});var s=e.filter(i,function(t){return!o[t.cid]&&n.children.findByModel(t)});this._removeChildModels(s)},reorder:function(){var t=this,i=this.children,n=this._filteredSortedModels();if(!n.length&&this._showingEmptyView)return this;if(e.some(n,function(t){return!i.findByModel(t)}))this.render();else{var o=[],s=e.reduce(this.children._views,function(t,i){var s=e.indexOf(n,i.model);return-1===s?(o.push(i.model),t):(i._index=s,t[s]=i.el,t)},new Array(n.length));this.triggerMethod("before:reorder",this);var r=this.Dom.createBuffer();e.each(s,function(e){t.Dom.appendContents(r,e)}),this._appendReorderedChildren(r),this._removeChildModels(o),this.triggerMethod("reorder",this)}return this},resortView:function(){return this.reorderOnSort?this.reorder():this._renderChildren(),this},_sortViews:function(){var t=this,i=this._filteredSortedModels();e.find(i,function(e,i){var n=t.children.findByModel(e);return!n||n._index!==i})&&this.resortView()},_emptyViewIndex:-1,_appendReorderedChildren:function(t){this.Dom.appendContents(this.el,t,{_$el:this.$el})},_renderChildren:function(){this._isRendered&&(this._destroyEmptyView(),this._destroyChildren());var t=this._filteredSortedModels();this.isEmpty({processedModels:t})?this._showEmptyView():(this.triggerMethod("before:render:children",this),this._startBuffering(),this._showCollection(t),this._endBuffering(),this.triggerMethod("render:children",this))},_createView:function(t,e){var i=this._getChildView(t),n=this._getChildViewOptions(t,e);return this.buildChildView(t,i,n)},_setupChildView:function(t,e){y(t),this._proxyChildViewEvents(t),this.sort&&(t._index=e)},_showCollection:function(t){e.each(t,e.bind(this._addChild,this)),this.children._updateLength()},_filteredSortedModels:function(t){if(!this.collection||!this.collection.length)return[];var e=this.getViewComparator(),i=this.collection.models;if(t=Math.min(Math.max(t,0),i.length-1),e){var n=void 0;t&&(n=i[t],i=i.slice(0,t).concat(i.slice(t+1))),i=this._sortModelsBy(i,e),n&&i.splice(t,0,n)}return i=this._filterModels(i)},getViewComparator:function(){return this.viewComparator},_filterModels:function(t){var i=this;return this.filter&&(t=e.filter(t,function(t,e){return i._shouldAddChild(t,e)})),t},_sortModelsBy:function(t,i){return"string"==typeof i?e.sortBy(t,function(t){return t.get(i)}):1===i.length?e.sortBy(t,e.bind(i,this)):e.clone(t).sort(e.bind(i,this))},_showEmptyView:function(){var i=this._getEmptyView();if(i&&!this._showingEmptyView){this._showingEmptyView=!0;var n=new t.Model,o=this.emptyViewOptions||this.childViewOptions;e.isFunction(o)&&(o=o.call(this,n,this._emptyViewIndex));var s=this.buildChildView(n,i,o);this.triggerMethod("before:render:empty",this,s),this.addChildView(s,0),this.triggerMethod("render:empty",this,s)}},_destroyEmptyView:function(){this._showingEmptyView&&(this.triggerMethod("before:remove:empty",this),this._destroyChildren(),delete this._showingEmptyView,this.triggerMethod("remove:empty",this))},_getEmptyView:function(){var t=this.emptyView;if(t)return this._getView(t)},_getChildView:function(t){var e=this.childView;if(!e)throw new Y({name:"NoChildViewError",message:'A "childView" must be specified'});if(!(e=this._getView(e,t)))throw new Y({name:"InvalidChildViewError",message:'"childView" must be a view class or a function that returns a view class'});return e},_getView:function(i,n){return i.prototype instanceof t.View||i===t.View?i:e.isFunction(i)?i.call(this,n):void 0},_addChild:function(t,e){var i=this._createView(t,e);return this.addChildView(i,e),i},_getChildViewOptions:function(t,i){return e.isFunction(this.childViewOptions)?this.childViewOptions(t,i):this.childViewOptions},addChildView:function(t,e){return this.triggerMethod("before:add:child",this,t),this._setupChildView(t,e),this._isBuffering?this.children._add(t):(this._updateIndices(t,!0),this.children.add(t)),V(t),this._attachView(t,e),this.triggerMethod("add:child",this,t),t},_updateIndices:function(t,i){if(this.sort){if(!i)return void e.each(e.sortBy(this.children._views,"_index"),function(t,e){t._index=e});var n=e.isArray(t)?e.max(t,"_index"):t;e.isObject(n)&&e.each(this.children._views,function(t){t._index>=n._index&&(t._index+=1)})}},_attachView:function(t,e){var i=!t._isAttached&&!this._isBuffering&&this._isAttached&&!1!==this.monitorViewEvents;i&&s(t,"before:attach",t),this.attachHtml(this,t,e),i&&(t._isAttached=!0,s(t,"attach",t))},buildChildView:function(t,i,n){return new i(e.extend({model:t},n))},removeChildView:function(t){return!t||t._isDestroyed?t:(this._removeChildView(t),this.children._updateLength(),this._updateIndices(t,!1),t)},isEmpty:function(t){var i=void 0;return e.result(t,"processedModels")?i=t.processedModels:(i=this.collection?this.collection.models:[],i=this._filterModels(i)),0===i.length},attachBuffer:function(t,e){this.Dom.appendContents(t.el,e,{_$el:t.$el})},_createBuffer:function(){var t=this,i=this.Dom.createBuffer();return e.each(this._bufferedChildren,function(e){t.Dom.appendContents(i,e.el,{_$contents:e.$el})}),i},attachHtml:function(t,e,i){t._isBuffering?t._bufferedChildren.splice(i,0,e):t._insertBefore(e,i)||t._insertAfter(e)},_insertBefore:function(t,i){var n=void 0;return this.sort&&i<this.children.length-1&&(n=e.find(this.children._views,function(t){return t._index===i+1})),!!n&&(this.beforeEl(n.el,t.el),!0)},beforeEl:function(t,e){this.$(t).before(e)},_insertAfter:function(t){this.Dom.appendContents(this.el,t.el,{_$el:this.$el,_$contents:t.$el})},_initChildViewStorage:function(){this.children=new St},_removeChildren:function(){this._destroyChildren()},_destroyChildren:function(t){this.children.length&&(this.triggerMethod("before:destroy:children",this),e.each(this.children._views,e.bind(this._removeChildView,this)),this.children._updateLength(),this.triggerMethod("destroy:children",this))},_shouldAddChild:function(t,i){var n=this.filter;return!e.isFunction(n)||n.call(this,t,i,this.collection)}},{setDomApi:I});e.extend(Et.prototype,gt);var At=function(){this._init()};Tt(At.prototype,"_views"),e.extend(At.prototype,{_init:function(){this._views=[],this._viewsByCid={},this._indexByModel={},this._updateLength()},_add:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._views.length,i=t.cid;this._viewsByCid[i]=t,t.model&&(this._indexByModel[t.model.cid]=i),this._views.splice(e,0,t),this._updateLength()},_sort:function(t,i){return"string"==typeof t?(t=e.partial(F,t),this._sortBy(t)):1===t.length?this._sortBy(e.bind(t,i)):this._views.sort(e.bind(t,i))},_sortBy:function(t){var i=e.sortBy(this._views,t);return this._set(i),i},_set:function(t){this._views.length=0,this._views.push.apply(this._views,t.slice(0)),this._updateLength()},_swap:function(t,e){var i=this.findIndexByView(t),n=this.findIndexByView(e);if(-1!==i&&-1!==n){var o=this._views[i];this._views[i]=this._views[n],this._views[n]=o}},findByModel:function(t){return this.findByModelCid(t.cid)},findByModelCid:function(t){var e=this._indexByModel[t];return this.findByCid(e)},findByIndex:function(t){return this._views[t]},findIndexByView:function(t){return this._views.indexOf(t)},findByCid:function(t){return this._viewsByCid[t]},hasView:function(t){return!!this.findByCid(t.cid)},_remove:function(t){if(this._viewsByCid[t.cid]){t.model&&delete this._indexByModel[t.model.cid],delete this._viewsByCid[t.cid];var e=this.findIndexByView(t);this._views.splice(e,1),this._updateLength()}},_updateLength:function(){this.length=this._views.length}});var Ot=["behaviors","childView","childViewEventPrefix","childViewEvents","childViewOptions","childViewTriggers","collectionEvents","emptyView","emptyViewOptions","events","modelEvents","sortWithCollection","triggers","ui","viewComparator","viewFilter"],Dt=t.View.extend({sortWithCollection:!0,constructor:function(e){this._setOptions(e),this.mergeOptions(e,Ot),y(this),this.once("render",this._initialEvents),this._initChildViewStorage(),this._initBehaviors();var i=Array.prototype.slice.call(arguments);i[0]=this.options,t.View.prototype.constructor.apply(this,i),this.getEmptyRegion(),this.delegateEntityEvents(),this._triggerEventOnBehaviors("initialize",this)},_initChildViewStorage:function(){this.children=new At},getEmptyRegion:function(){return this._emptyRegion&&!this._emptyRegion.isDestroyed()?this._emptyRegion:(this._emptyRegion=new mt({el:this.el,replaceElement:!1}),this._emptyRegion._parentView=this,this._emptyRegion)},_initialEvents:function(){this.listenTo(this.collection,{sort:this._onCollectionSort,reset:this._onCollectionReset,update:this._onCollectionUpdate})},_onCollectionSort:function(t,e){var i=e.add,n=e.merge,o=e.remove;this.sortWithCollection&&!1!==this.viewComparator&&(i||o||n||this.sort())},_onCollectionReset:function(){this.render()},_onCollectionUpdate:function(t,e){var i=e.changes,n=i.removed.length&&this._removeChildModels(i.removed);this._addedViews=i.added.length&&this._addChildModels(i.added),this._detachChildren(n),this._showChildren(),this._removeChildViews(n)},_removeChildModels:function(t){var i=this;return e.reduce(t,function(t,e){var n=i._removeChildModel(e);return n&&t.push(n),t},[])},_removeChildModel:function(t){var e=this.children.findByModel(t);return e&&this._removeChild(e),e},_removeChild:function(t){this.triggerMethod("before:remove:child",this,t),this.children._remove(t),this.triggerMethod("remove:child",this,t)},_addChildModels:function(t){return e.map(t,e.bind(this._addChildModel,this))},_addChildModel:function(t){var e=this._createChildView(t);return this._addChild(e),e},_createChildView:function(t){var e=this._getChildView(t),i=this._getChildViewOptions(t);return this.buildChildView(t,e,i)},_addChild:function(t,e){this.triggerMethod("before:add:child",this,t),this._setupChildView(t),this.children._add(t,e),this.triggerMethod("add:child",this,t)},_getChildView:function(t){var e=this.childView;if(!e)throw new Y({name:"NoChildViewError",message:'A "childView" must be specified'});if(!(e=this._getView(e,t)))throw new Y({name:"InvalidChildViewError",message:'"childView" must be a view class or a function that returns a view class'});return e},_getView:function(i,n){return i.prototype instanceof t.View||i===t.View?i:e.isFunction(i)?i.call(this,n):void 0},_getChildViewOptions:function(t){return e.isFunction(this.childViewOptions)?this.childViewOptions(t):this.childViewOptions},buildChildView:function(t,i,n){return new i(e.extend({model:t},n))},_setupChildView:function(t){y(t),t.on("destroy",this.removeChildView,this),this._proxyChildViewEvents(t)},_getImmediateChildren:function(){return this.children._views},setElement:function(){return t.View.prototype.setElement.apply(this,arguments),this._isAttached=z(this.el),this},render:function(){return this._isDestroyed?this:(this.triggerMethod("before:render",this),this._destroyChildren(),this.children._init(),this.collection&&this._addChildModels(this.collection.models),this._showChildren(),this._isRendered=!0,this.triggerMethod("render",this),this)},sort:function(){return this._isDestroyed?this:this.children.length?(this._showChildren(),this):this},_showChildren:function(){if(this.isEmpty())return void this._showEmptyView();this._sortChildren(),this.filter()},isEmpty:function(t){return t||!this.children.length},_showEmptyView:function(){var t=this._getEmptyView();if(t){var e=this._getEmptyViewOptions();this.getEmptyRegion().show(new t(e))}},_getEmptyView:function(){var t=this.emptyView;if(t)return this._getView(t)},_destroyEmptyView:function(){var t=this.getEmptyRegion();t.hasView()&&t.empty()},_getEmptyViewOptions:function(){var t=this.emptyViewOptions||this.childViewOptions;return e.isFunction(t)?t.call(this):t},_sortChildren:function(){var t=this.getComparator();t&&(delete this._addedViews,this.triggerMethod("before:sort",this),this.children._sort(t,this),this.triggerMethod("sort",this))},setComparator:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.preventRender,n=this.viewComparator!==t,o=n&&!i;return this.viewComparator=t,o&&this.sort(),this},removeComparator:function(t){return this.setComparator(null,t)},getComparator:function(){return this.viewComparator?this.viewComparator:!(!this.sortWithCollection||!1===this.viewComparator||!this.collection)&&this._viewComparator},_viewComparator:function(t){return this.collection.indexOf(t.model)},filter:function(){if(this._isDestroyed)return this;if(!this.children.length)return this;var t=this._filterChildren();return this._renderChildren(t),this},_filterChildren:function(){var t=this,i=this._getFilter(),n=this._addedViews;if(delete this._addedViews,!i)return n||this.children._views;this.triggerMethod("before:filter",this);var o=[],s=[];return e.each(this.children._views,function(e,n,r){(i.call(t,e,n,r)?o:s).push(e)}),this._detachChildren(s),this.triggerMethod("filter",this,o,s),o},_getFilter:function(){var t=this.getFilter();if(!t)return!1;if(e.isFunction(t))return t;if(e.isObject(t)){var i=e.matches(t);return function(t){return i(t.model&&t.model.attributes)}}if(e.isString(t))return function(e){return e.model&&e.model.get(t)};throw new Y({name:"InvalidViewFilterError",message:'"viewFilter" must be a function, predicate object literal, a string indicating a model attribute, or falsy'})},getFilter:function(){return this.viewFilter},setFilter:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.preventRender,n=this.viewFilter!==t,o=n&&!i;return this.viewFilter=t,o&&this.filter(),this},removeFilter:function(t){return this.setFilter(null,t)},_detachChildren:function(t){e.each(t,e.bind(this._detachChildView,this))},_detachChildView:function(t){var e=t._isAttached&&!1!==this.monitorViewEvents;e&&s(t,"before:detach",t),this.detachHtml(t),e&&(t._isAttached=!1,s(t,"detach",t))},detachHtml:function(t){this.Dom.detachEl(t.el,t.$el)},_renderChildren:function(t){if(this.isEmpty(!t.length))return void this._showEmptyView();this._destroyEmptyView(),this.triggerMethod("before:render:children",this,t);var e=this._getBuffer(t);this._attachChildren(e,t),this.triggerMethod("render:children",this,t)},_attachChildren:function(t,i){i=this._isAttached&&!1!==this.monitorViewEvents?i:[],e.each(i,function(t){t._isAttached||s(t,"before:attach",t)}),this.attachHtml(t),e.each(i,function(t){t._isAttached||(t._isAttached=!0,s(t,"attach",t))})},_getBuffer:function(t){var i=this,n=this.Dom.createBuffer();return e.each(t,function(t){V(t),i.Dom.appendContents(n,t.el,{_$contents:t.$el})}),n},attachHtml:function(t){this.Dom.appendContents(this.el,t,{_$el:this.$el})},swapChildViews:function(t,e){if(!this.children.hasView(t)||!this.children.hasView(e))throw new Y({name:"ChildSwapError",message:"Both views must be children of the collection view"});return this.children._swap(t,e),this.Dom.swapEl(t.el,e.el),this.Dom.hasEl(this.el,t.el)!==this.Dom.hasEl(this.el,e.el)&&this.filter(),this},addChildView:function(t,e){return!t||t._isDestroyed?t:((!e||e>=this.children.length)&&(this._addedViews=[t]),this._addChild(t,e),this._showChildren(),t)},detachChildView:function(t){return this.removeChildView(t,{shouldDetach:!0}),t},removeChildView:function(t,e){return t?(this._removeChildView(t,e),this._removeChild(t),this.isEmpty()&&this._showEmptyView(),t):t},_removeChildViews:function(t){e.each(t,e.bind(this._removeChildView,this))},_removeChildView:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.shouldDetach;t.off("destroy",this.removeChildView,this),i?this._detachChildView(t):this._destroyChildView(t),this.stopListening(t)},_destroyChildView:function(t){t._isDestroyed||(t._shouldDisableEvents=!1===this.monitorViewEvents,P(t))},_removeChildren:function(){this._destroyChildren(),this.getEmptyRegion().destroy(),delete this._addedViews},_destroyChildren:function(){this.children&&this.children.length&&(this.triggerMethod("before:destroy:children",this),!1===this.monitorViewEvents&&this.Dom.detachContents(this.el,this.$el),e.each(this.children._views,e.bind(this._removeChildView,this)),this.triggerMethod("destroy:children",this))}},{setDomApi:I});e.extend(Dt.prototype,gt);var jt=["childViewContainer","template","templateContext"],Mt=Et.extend({constructor:function(t){$("CompositeView is deprecated. Convert to View at your earliest convenience"),this.mergeOptions(t,jt),Et.prototype.constructor.apply(this,arguments)},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"update",this._onCollectionUpdate),this.listenTo(this.collection,"reset",this.renderChildren),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},_getChildView:function(t){var e=this.childView;if(!e)return this.constructor;if(!(e=this._getView(e,t)))throw new Y({name:"InvalidChildViewError",message:'"childView" must be a view class or a function that returns a view class'});return e},serializeData:function(){return this.serializeModel()},render:function(){return this._isDestroyed?this:(this._isRendering=!0,this.resetChildViewContainer(),this.triggerMethod("before:render",this),this._renderTemplate(),this.bindUIElements(),this.renderChildren(),this._isRendering=!1,this._isRendered=!0,this.triggerMethod("render",this),this)},renderChildren:function(){(this._isRendered||this._isRendering)&&Et.prototype._renderChildren.call(this)},attachBuffer:function(t,e){var i=this.getChildViewContainer(t);this.Dom.appendContents(i[0],e,{_$el:i})},_insertAfter:function(t){var e=this.getChildViewContainer(this,t);this.Dom.appendContents(e[0],t.el,{_$el:e,_$contents:t.$el})},_appendReorderedChildren:function(t){var e=this.getChildViewContainer(this);this.Dom.appendContents(e[0],t,{_$el:e})},getChildViewContainer:function(t,i){if(t.$childViewContainer)return t.$childViewContainer;var n=void 0;if(t.childViewContainer){var o=e.result(t,"childViewContainer");if(n="@"===o.charAt(0)&&t.ui?t.ui[o.substr(4)]:this.$(o),n.length<=0)throw new Y({name:"ChildViewContainerMissingError",message:'The specified "childViewContainer" was not found: '+t.childViewContainer})}else n=t.$el;return t.$childViewContainer=n,n},resetChildViewContainer:function(){this.$childViewContainer&&(this.$childViewContainer=void 0)}}),It=e.pick(Ct.prototype,"serializeModel","getTemplate","_renderTemplate","_renderHtml","mixinTemplateContext","attachElContent");e.extend(Mt.prototype,It);var Vt=["collectionEvents","events","modelEvents","triggers","ui"],Pt=et.extend({cidPrefix:"mnb",constructor:function(t,i){this.view=i,this.defaults&&$("Behavior defaults are deprecated. For similar functionality set options on the Behavior class."),this.defaults=e.clone(e.result(this,"defaults",{})),this._setOptions(e.extend({},this.defaults,t)),this.mergeOptions(this.options,Vt),this.ui=e.extend({},e.result(this,"ui"),e.result(i,"ui")),et.apply(this,arguments)},$:function(){return this.view.$.apply(this.view,arguments)},destroy:function(){return this.stopListening(),this.view._removeBehavior(this),this},proxyViewProperties:function(){return this.$el=this.view.$el,this.el=this.view.el,this},bindUIElements:function(){return this._bindUIElements(),this},unbindUIElements:function(){return this._unbindUIElements(),this},getUI:function(t){return this._getUI(t)},delegateEntityEvents:function(){return this._delegateEntityEvents(this.view.model,this.view.collection),this},undelegateEntityEvents:function(){return this._undelegateEntityEvents(this.view.model,this.view.collection),this},getEvents:function(){var t=this,i=this.normalizeUIKeys(e.result(this,"events"));return e.reduce(i,function(i,n,o){return e.isFunction(n)||(n=t[n]),n?(o=at(o,t.cid),i[o]=e.bind(n,t),i):i},{})},getTriggers:function(){if(this.triggers){var t=this.normalizeUIKeys(e.result(this,"triggers"));return this._getViewTriggers(this.view,t)}}});e.extend(Pt.prototype,st,ct,pt);var Lt=["region","regionClass"],Rt=et.extend({cidPrefix:"mna",constructor:function(t){this._setOptions(t),this.mergeOptions(t,Lt),this._initRegion(),et.prototype.constructor.apply(this,arguments)},regionClass:mt,_initRegion:function(){var t=this.region;if(t){var e={regionClass:this.regionClass};this._region=bt(t,e)}},getRegion:function(){return this._region},showView:function(t){for(var e=this.getRegion(),i=arguments.length,n=Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];return e.show.apply(e,[t].concat(n))},getView:function(){return this.getRegion().currentView},start:function(t){return this.triggerMethod("before:start",this,t),this.triggerMethod("start",this,t),this}}),Ft=["appRoutes","controller"],qt=t.Router.extend({constructor:function(e){this._setOptions(e),this.mergeOptions(e,Ft),t.Router.apply(this,arguments);var i=this.appRoutes,n=this._getController();this.processAppRoutes(n,i),this.on("route",this._processOnRoute,this)},appRoute:function(t,e){var i=this._getController();return this._addAppRoute(i,t,e),this},_processOnRoute:function(t,i){if(e.isFunction(this.onRoute)){var n=e.invert(this.appRoutes)[t];this.onRoute(t,n,i)}},processAppRoutes:function(t,i){var n=this;if(!i)return this;var o=e.keys(i).reverse();return e.each(o,function(e){n._addAppRoute(t,e,i[e])}),this},_getController:function(){return this.controller},_addAppRoute:function(t,i,n){var o=t[n];if(!o)throw new Y('Method "'+n+'" was not found on the controller');this.route(i,n,e.bind(o,t))},triggerMethod:o});e.extend(qt.prototype,Q);var Nt=t.Marionette,Bt=t.Marionette={};return Bt.noConflict=function(){return t.Marionette=Nt,this},Bt.bindEvents=N(C),Bt.unbindEvents=N(_),Bt.bindRequests=N(S),Bt.unbindRequests=N(k),Bt.mergeOptions=N(U),Bt.getOption=N(H),Bt.normalizeMethods=N(W),Bt.extend=B,Bt.isNodeAttached=z,Bt.deprecate=$,Bt.triggerMethod=N(o),Bt.triggerMethodOn=s,Bt.isEnabled=O,Bt.setEnabled=D,Bt.monitorViewEvents=y,Bt.Behaviors={},Bt.Behaviors.behaviorsLookup=q,Bt.Application=Rt,Bt.AppRouter=qt,Bt.Renderer=wt,Bt.TemplateCache=it,Bt.View=Ct,Bt.CollectionView=Et,Bt.NextCollectionView=Dt,Bt.CompositeView=Mt,Bt.Behavior=Pt,Bt.Region=mt,Bt.Error=Y,Bt.Object=et,Bt.DEV_MODE=!1,Bt.FEATURES=lt,Bt.VERSION="3.5.1",Bt.DomApi=ft,Bt.setDomApi=function(t){Et.setDomApi(t),Mt.setDomApi(t),Dt.setDomApi(t),mt.setDomApi(t),Ct.setDomApi(t)},Bt}),this&&this.Marionette&&(this.Mn=this.Marionette),function(t){"object"==typeof exports?module.exports=t(require("backbone"),require("underscore")):"function"==typeof define&&define.amd&&define("backboneValidation",["backbone","underscore"],t)}(function(t,e){return t.Validation=function(t){"use strict";var e={forceUpdate:!1,selector:"name",labelFormatter:"sentenceCase",valid:Function.prototype,invalid:Function.prototype},i={formatLabel:function(t,i){return l[e.labelFormatter](t,i)},format:function(){var t=Array.prototype.slice.call(arguments);return t.shift().replace(/\{(\d+)\}/g,function(e,i){return void 0!==t[i]?t[i]:e})}},n=function(e,i,o){return i=i||{},o=o||"",t.each(e,function(s,r){e.hasOwnProperty(r)&&(s&&t.isArray(s)?t.forEach(s,function(t,e){n(t,i,o+r+"."+e+"."),i[o+r+"."+e]=t}):s&&"object"==typeof s&&s.constructor===Object&&n(s,i,o+r+"."),i[o+r]=s)}),i},o=function(){var o=function(e,i){return i=i||t.keys(t.result(e,"validation")||{}),t.reduce(i,function(t,e){return t[e]=void 0,t},{})},r=function(e,i){var n=e.attributes;return t.isFunction(n)?n=n(i):t.isString(n)&&t.isFunction(c[n])&&(n=c[n](i)),t.isArray(n)?n:void 0},a=function(e,i){var n=e.validation?t.result(e,"validation")[i]||{}:{};return(t.isFunction(n)||t.isString(n))&&(n={fn:n}),t.isArray(n)||(n=[n]),t.reduce(n,function(e,i){return t.each(t.without(t.keys(i),"msg"),function(t){e.push({fn:h[t],val:i[t],msg:i.msg})}),e},[])},l=function(e,n,o,s){return t.reduce(a(e,n),function(r,a){var l=t.extend({},i,h),c=a.fn.call(l,o,n,a.val,e,s);return!1!==c&&!1!==r&&(c&&!r?t.result(a,"msg")||c:r)},"")},d=function(e,i,n){var o,s={},r=!0,a=t.clone(i);return t.each(n,function(t,i){(o=l(e,i,t,a))&&(s[i]=o,r=!1)}),{invalidAttrs:s,isValid:r}},u=function(e,i){return{preValidate:function(e,i){var n,o=this,s={};return t.isObject(e)?(t.each(e,function(t,e){(n=o.preValidate(e,t))&&(s[e]=n)}),t.isEmpty(s)?void 0:s):l(this,e,i,t.extend({},this.attributes))},isValid:function(o){var s,a,c,h;return o=o||r(i,e),t.isString(o)?a=[o]:t.isArray(o)&&(a=o),a&&(s=n(this.attributes),t.each(this.associatedViews,function(e){t.each(a,function(n){c=l(this,n,s[n],t.extend({},this.attributes)),c?(i.invalid(e,n,c,i.selector),h=h||{},
h[n]=c):i.valid(e,n,i.selector)},this)},this)),!0===o&&(h=this.validate()),h&&this.trigger("invalid",this,h,{validationError:h}),a?!h:!this.validation||this._isValid},validate:function(s,a){var l=this,c=!s,h=t.extend({},i,a),u=o(l,r(i,e)),p=t.extend({},u,l.attributes,s),f=n(p),g=s?n(s):f,v=d(l,p,t.pick(f,t.keys(u)));return l._isValid=v.isValid,t.each(l.associatedViews,function(e){t.each(u,function(t,i){var n=v.invalidAttrs.hasOwnProperty(i),o=g.hasOwnProperty(i);n||h.valid(e,i,h.selector),n&&(o||c)&&h.invalid(e,i,v.invalidAttrs[i],h.selector)})}),t.defer(function(){l.trigger("validated",l._isValid,l,v.invalidAttrs),l.trigger("validated:"+(l._isValid?"valid":"invalid"),l,v.invalidAttrs)}),!h.forceUpdate&&t.intersection(t.keys(v.invalidAttrs),t.keys(g)).length>0?v.invalidAttrs:void 0}}},p=function(e,i,n){i.associatedViews?i.associatedViews.push(e):i.associatedViews=[e],t.extend(i,u(e,n))},f=function(e,i){i&&e.associatedViews&&e.associatedViews.length>1?e.associatedViews=t.without(e.associatedViews,i):(delete e.validate,delete e.preValidate,delete e.isValid,delete e.associatedViews)},g=function(t){p(this.view,t,this.options)},v=function(t){f(t)};return{version:"0.11.3",configure:function(i){t.extend(e,i)},bind:function(i,n){n=t.extend({},e,s,n);var o=n.model||i.model,r=n.collection||i.collection;if(void 0===o&&void 0===r)throw"Before you execute the binding your view must have a model or a collection.\nSee http://thedersen.com/projects/backbone-validation/#using-form-model-validation for more information.";o?p(i,o,n):r&&(r.each(function(t){p(i,t,n)}),r.bind("add",g,{view:i,options:n}),r.bind("remove",v))},unbind:function(e,i){i=t.extend({},i);var n=i.model||e.model,o=i.collection||e.collection;n?f(n,e):o&&(o.each(function(t){f(t,e)}),o.unbind("add",g),o.unbind("remove",v))},mixin:u(null,e)}}(),s=o.callbacks={valid:function(t,e,i){t.$("["+i+'~="'+e+'"]').removeClass("invalid").removeAttr("data-error")},invalid:function(t,e,i,n){t.$("["+n+'~="'+e+'"]').addClass("invalid").attr("data-error",i)}},r=o.patterns={digits:/^\d+$/,number:/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i},a=o.messages={required:"{0} is required",acceptance:"{0} must be accepted",min:"{0} must be greater than or equal to {1}",max:"{0} must be less than or equal to {1}",range:"{0} must be between {1} and {2}",length:"{0} must be {1} characters",minLength:"{0} must be at least {1} characters",maxLength:"{0} must be at most {1} characters",rangeLength:"{0} must be between {1} and {2} characters",oneOf:"{0} must be one of: {1}",equalTo:"{0} must be the same as {1}",digits:"{0} must only contain digits",number:"{0} must be a number",email:"{0} must be a valid email",url:"{0} must be a valid url",inlinePattern:"{0} is invalid"},l=o.labelFormatters={none:function(t){return t},sentenceCase:function(t){return t.replace(/(?:^\w|[A-Z]|\b\w)/g,function(t,e){return 0===e?t.toUpperCase():" "+t.toLowerCase()}).replace(/_/g," ")},label:function(t,e){return e.labels&&e.labels[t]||l.sentenceCase(t,e)}},c=o.attributeLoaders={inputNames:function(t){var e=[];return t&&t.$("form [name]").each(function(){/^(?:input|select|textarea)$/i.test(this.nodeName)&&this.name&&"submit"!==this.type&&-1===e.indexOf(this.name)&&e.push(this.name)}),e}},h=o.validators=function(){var e=String.prototype.trim?function(t){return null===t?"":String.prototype.trim.call(t)}:function(t){var e=/^\s+/,i=/\s+$/;return null===t?"":t.toString().replace(e,"").replace(i,"")},i=function(e){return t.isNumber(e)||t.isString(e)&&e.match(r.number)},n=function(i){return!(t.isNull(i)||t.isUndefined(i)||t.isString(i)&&""===e(i)||t.isArray(i)&&t.isEmpty(i))};return{fn:function(e,i,n,o,s){return t.isString(n)&&(n=o[n]),n.call(o,e,i,s)},required:function(e,i,o,s,r){var l=t.isFunction(o)?o.call(s,e,i,r):o;return!(!l&&!n(e))&&(l&&!n(e)?this.format(a.required,this.formatLabel(i,s)):void 0)},acceptance:function(e,i,n,o){return"true"===e||t.isBoolean(e)&&!1!==e?void 0:this.format(a.acceptance,this.formatLabel(i,o))},min:function(t,e,n,o){return!i(t)||n>t?this.format(a.min,this.formatLabel(e,o),n):void 0},max:function(t,e,n,o){return!i(t)||t>n?this.format(a.max,this.formatLabel(e,o),n):void 0},range:function(t,e,n,o){return!i(t)||t<n[0]||t>n[1]?this.format(a.range,this.formatLabel(e,o),n[0],n[1]):void 0},length:function(e,i,n,o){return t.isString(e)&&e.length===n?void 0:this.format(a.length,this.formatLabel(i,o),n)},minLength:function(e,i,n,o){return!t.isString(e)||e.length<n?this.format(a.minLength,this.formatLabel(i,o),n):void 0},maxLength:function(e,i,n,o){return!t.isString(e)||e.length>n?this.format(a.maxLength,this.formatLabel(i,o),n):void 0},rangeLength:function(e,i,n,o){return!t.isString(e)||e.length<n[0]||e.length>n[1]?this.format(a.rangeLength,this.formatLabel(i,o),n[0],n[1]):void 0},oneOf:function(e,i,n,o){return t.include(n,e)?void 0:this.format(a.oneOf,this.formatLabel(i,o),n.join(", "))},equalTo:function(t,e,i,n,o){return t!==o[i]?this.format(a.equalTo,this.formatLabel(e,n),this.formatLabel(i,n)):void 0},pattern:function(t,e,i,o){return n(t)&&t.toString().match(r[i]||i)?void 0:this.format(a[i]||a.inlinePattern,this.formatLabel(e,o),i)}}}();return t.each(h,function(e,n){h[n]=t.bind(h[n],t.extend({},i,h))}),o}(e),t.Validation}),function(t){"function"==typeof define&&define.amd?define("jquerycookie",["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){function e(t){return a.raw?t:encodeURIComponent(t)}function i(t){return a.raw?t:decodeURIComponent(t)}function n(t){return e(a.json?JSON.stringify(t):String(t))}function o(t){0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return t=decodeURIComponent(t.replace(r," ")),a.json?JSON.parse(t):t}catch(t){}}function s(e,i){var n=a.raw?e:o(e);return t.isFunction(i)?i(n):n}var r=/\+/g,a=t.cookie=function(o,r,l){if(void 0!==r&&!t.isFunction(r)){if(l=t.extend({},a.defaults,l),"number"==typeof l.expires){var c=l.expires,h=l.expires=new Date;h.setTime(+h+864e5*c)}return document.cookie=[e(o),"=",n(r),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var d=o?void 0:{},u=document.cookie?document.cookie.split("; "):[],p=0,f=u.length;p<f;p++){var g=u[p].split("="),v=i(g.shift()),m=g.join("=");if(o&&o===v){d=s(m,r);break}o||void 0===(m=s(m))||(d[v]=m)}return d};a.defaults={},t.removeCookie=function(e,i){return void 0!==t.cookie(e)&&(t.cookie(e,"",t.extend({},i,{expires:-1})),!t.cookie(e))}}),$.fn.serializeObject=function(){"use strict";var t={},e=function(e,i){var n=t[i.name];void 0!==n&&null!==n?$.isArray(n)?n.push(i.value):t[i.name]=[n,i.value]:t[i.name]=i.value};return $.each(this.serializeArray(),e),t},define("jquerySerializeObject",["jquery"],function(){}),define("core/BaseRouter",["underscore","backbone"],function(t,e){return e.Router.extend({before:function(t,e){},after:function(t,e){},route:function(i,n,o){t.isRegExp(i)||(i=this._routeToRegExp(i)),t.isFunction(n)&&(o=n,n=""),o||(o=this[n]);var s=this;return e.history.route(i,function(t){var r=s._extractParameters(i,t);s.before.apply(s,arguments),o&&o.apply(s,r),s.after.apply(s,arguments),s.trigger.apply(s,["route:"+n].concat(r)),s.trigger("route",n,r),e.history.trigger("route",s,n,r)}),this}})}),define("core/BaseView",["underscore","backbone"],function(t,e){return e.View.extend({close:function(){this.childViews&&this.childViews.close(),this.remove()},destroyView:function(){"undefined"!==this.model&&this.model.off(),this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this)},disabledAction:function(t){$(".action-entuliga").prop("disabled",t)}})}),define("models/UserModel",["backbone"],function(t){return t.Model.extend({urlRoot:"user",defaults:{username:"",password:"",passwordConfirm:""},initialize:function(){},validation:{username:[{required:!0,maxLength:50,msg:"El campo es requerido"},{pattern:"email",msg:"Por favor especifique un email correcto....."}],password:{required:!0,pattern:/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{4,8}$/,msg:"El password debe tener por lo menos una letra mayuscula, una minuscula y un numero"},passwordConfirm:{required:!0,equalTo:"password",msg:"El password no coincide"}}})}),define("text",["module"],function(t){"use strict";var e,i,n,o,s,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],a=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,h=c&&location.protocol&&location.protocol.replace(/\:/,""),d=c&&location.hostname,u=c&&(location.port||void 0),p={},f=t.config&&t.config()||{};return e={version:"2.0.12",strip:function(t){if(t){t=t.replace(a,"");var e=t.match(l);e&&(t=e[1])}else t="";return t},jsEscape:function(t){return t.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:f.createXhr||function(){var t,e,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(e=0;e<3;e+=1){i=r[e];try{t=new ActiveXObject(i)}catch(t){}if(t){r=[i];break}}return t},parseName:function(t){var e,i,n,o=!1,s=t.indexOf("."),r=0===t.indexOf("./")||0===t.indexOf("../");return-1!==s&&(!r||s>1)?(e=t.substring(0,s),i=t.substring(s+1,t.length)):e=t,n=i||e,s=n.indexOf("!"),-1!==s&&(o="strip"===n.substring(s+1),n=n.substring(0,s),i?i=n:e=n),{moduleName:e,ext:i,strip:o}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(t,i,n,o){var s,r,a,l=e.xdRegExp.exec(t);return!l||(s=l[2],r=l[3],r=r.split(":"),a=r[1],r=r[0],!(s&&s!==i||r&&r.toLowerCase()!==n.toLowerCase()||(a||r)&&a!==o))},finishLoad:function(t,i,n,o){n=i?e.strip(n):n,f.isBuild&&(p[t]=n),o(n)},load:function(t,i,n,o){if(o&&o.isBuild&&!o.inlineText)return void n();f.isBuild=o&&o.isBuild;var s=e.parseName(t),r=s.moduleName+(s.ext?"."+s.ext:""),a=i.toUrl(r),l=f.useXhr||e.useXhr;if(0===a.indexOf("empty:"))return void n();!c||l(a,h,d,u)?e.get(a,function(i){e.finishLoad(t,s.strip,i,n)},function(t){n.error&&n.error(t)}):i([r],function(t){e.finishLoad(s.moduleName+"."+s.ext,s.strip,t,n)})},write:function(t,i,n,o){if(p.hasOwnProperty(i)){var s=e.jsEscape(p[i]);n.asModule(t+"!"+i,"define(function () { return '"+s+"';});\n")}},writeFile:function(t,i,n,o,s){var r=e.parseName(i),a=r.ext?"."+r.ext:"",l=r.moduleName+a,c=n.toUrl(r.moduleName+a)+".js";e.load(l,n,function(i){var n=function(t){return o(c,t)};n.asModule=function(t,e){return o.asModule(t,c,e)},e.write(t,l,n,s)},s)}},"node"===f.env||!f.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(i=require.nodeRequire("fs"),e.get=function(t,e,n){try{var o=i.readFileSync(t,"utf8");0===o.indexOf("\ufeff")&&(o=o.substring(1)),e(o)}catch(t){n&&n(t)}}):"xhr"===f.env||!f.env&&e.createXhr()?e.get=function(t,i,n,o){var s,r=e.createXhr();if(r.open("GET",t,!0),o)for(s in o)o.hasOwnProperty(s)&&r.setRequestHeader(s.toLowerCase(),o[s]);f.onXhr&&f.onXhr(r,t),r.onreadystatechange=function(e){var o,s;4===r.readyState&&(o=r.status||0,o>399&&o<600?(s=new Error(t+" HTTP status: "+o),s.xhr=r,n&&n(s)):i(r.responseText),f.onXhrComplete&&f.onXhrComplete(r,t))},r.send(null)}:"rhino"===f.env||!f.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?e.get=function(t,e){var i,n,o=new java.io.File(t),s=java.lang.System.getProperty("line.separator"),r=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),"utf-8")),a="";try{for(i=new java.lang.StringBuffer,n=r.readLine(),n&&n.length()&&65279===n.charAt(0)&&(n=n.substring(1)),null!==n&&i.append(n);null!==(n=r.readLine());)i.append(s),i.append(n);a=String(i.toString())}finally{r.close()}e(a)}:("xpconnect"===f.env||!f.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(n=Components.classes,o=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in n,e.get=function(t,e){var i,r,a,l={};s&&(t=t.replace(/\//g,"\\")),a=new FileUtils.File(t);try{i=n["@mozilla.org/network/file-input-stream;1"].createInstance(o.nsIFileInputStream),i.init(a,1,0,!1),r=n["@mozilla.org/intl/converter-input-stream;1"].createInstance(o.nsIConverterInputStream),r.init(i,"utf-8",i.available(),o.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),r.readString(i.available(),l),r.close(),i.close(),e(l.value)}catch(t){throw new Error((a&&a.path||"")+": "+t)}}),e}),define("text!templates/tplLogin.html",[],function(){return'\n<div class="row login-box">\n  <div class="center-box-login">\n    <div class="panel panel-default">\n      <form id="form-login" role="form" class="form-login">\n          <div class="form-login-heading">\n            <h3 class="text-center">Bienvenido a entuliga!</h3>\n          </div>\n          <div class="row">\n              <div class="col-xs-12">\n                  <div class="form-group">\n                      <label>Email</label>\n                      <input class="form-control" placeholder="Email" type="text" name="username" value="<%= username %>">\n                      <p class="help-block"></p>\n                  </div>\n              </div>\n          </div>\n          <div class="row">\n              <div class="col-xs-12">\n                  <div class="form-group">\n                      <label>Password</label>\n                      <input class="form-control" placeholder="Password" type="password" name="password" value="<%= password %>" >\n                      <p class="help-block"></p>\n                  </div>\n              </div>\n          </div>\n          <div class="row">\n              <div class="col-xs-12">\n                  <div class="form-group">\n                      <label>Recordarme</label>\n                      <input id="remember" type="checkbox" value="remember-me" checked="true">\n                      <p class="help-block"></p>\n                  </div>\n              </div>\n          </div>\n          <button type="button" class="btn btn-lg btn-primary btn-block">Login</button>\n      </form>\n\n\n    </div>\n\n\n\n  </div>\n</div>\n'}),define("models/util/ModalGenericModel",["backbone"],function(t){return t.Model.extend({urlRoot:"modal",defaults:{},initialize:function(){}})}),define("text!templates/private/util/tplModalGeneric.html",[],function(){return'<div class="modal fade" id="modal-generic-dialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            \x3c!-- dialog body --\x3e\n            <div class="modal-body">\n                <button type="button" class="close" data-dismiss="modal">&times;</button>\n                <%= message %>\n            </div>\n            \x3c!-- dialog buttons --\x3e\n            <div class="modal-footer">\n                <button id="mg-btn-cancel" data-bb-handler="cancel" type="button" class="btn btn-default"><%= labelCancel %></button>\n                <button id="mg-btn-confirm" data-bb-handler="confirm" type="button" class="btn btn-primary"><%= labelConfirm %></button>\n            </div>\n        </div>\n    </div>\n</div>'}),define("views/private/util/ModalGenericView",["jquery","backbone","core/BaseView","models/util/ModalGenericModel","text!templates/private/util/tplModalGeneric.html"],function(t,e,i,n,o){return i.extend({el:"#modal-generic",template:_.template(o),events:{"click #mg-btn-cancel":"clickCancel","click #mg-btn-confirm":"clickConfirm"},initialize:function(t){this.model=new n,this.callbackCancel=t.callbackCancel,this.callbackConfirm=t.callbackConfirm,void 0===t.type&&(t.type="alert"),void 0===t.message&&(t.message=" "),void 0===t.labelCancel&&(t.labelCancel="Cancel"),void 0===t.labelConfirm&&(t.labelConfirm="OK"),this.model.set({message:t.message,labelCancel:t.labelCancel,labelConfirm:t.labelConfirm}),this.type=t.type,this.render()},render:function(){this.$el.html(this.template(this.model.toJSON())),this.btnCancel=this.$el.find("#mg-btn-cancel"),this.btnConfirm=this.$el.find("#mg-btn-confirm"),"confirm"==this.type?this.btnCancel.show():this.btnCancel.hide(),this.$("#modal-generic-dialog").modal({backdrop:"static",keyboard:!1})},clickCancel:function(t){this.$("#modal-generic-dialog").modal("hide"),"function"==typeof this.callbackCancel&&this.callbackCancel(t),this.undelegateEvents()},clickConfirm:function(t){this.$("#modal-generic-dialog").modal("hide"),"function"==typeof this.callbackConfirm&&this.callbackConfirm(t),this.undelegateEvents()}})}),function(t){var e=!1;if("function"==typeof define&&define.amd&&(define("jscookie",t),e=!0),"object"==typeof exports&&(module.exports=t(),e=!0),!e){var i=window.Cookies,n=window.Cookies=t();n.noConflict=function(){return window.Cookies=i,n}}}(function(){function t(){for(var t=0,e={};t<arguments.length;t++){var i=arguments[t];for(var n in i)e[n]=i[n]}return e}function e(i){function n(e,o,s){var r;if("undefined"!=typeof document){if(arguments.length>1){if(s=t({path:"/"},n.defaults,s),"number"==typeof s.expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*s.expires),s.expires=a}s.expires=s.expires?s.expires.toUTCString():"";try{r=JSON.stringify(o),/^[\{\[]/.test(r)&&(o=r)}catch(t){}o=i.write?i.write(o,e):encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)),e=e.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),e=e.replace(/[\(\)]/g,escape);var l="";for(var c in s)s[c]&&(l+="; "+c,!0!==s[c]&&(l+="="+s[c]));return document.cookie=e+"="+o+l}e||(r={});for(var h=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,u=0;u<h.length;u++){var p=h[u].split("="),f=p.slice(1).join("=");this.json||'"'!==f.charAt(0)||(f=f.slice(1,-1));try{var g=p[0].replace(d,decodeURIComponent);if(f=i.read?i.read(f,g):i(f,g)||f.replace(d,decodeURIComponent),this.json)try{f=JSON.parse(f)}catch(t){}if(e===g){r=f;break}e||(r[g]=f)}catch(t){}}return r}}return n.set=n,n.get=function(t){return n.call(n,t)},n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(e,i){n(e,"",t(i,{expires:-1}))},n.withConverter=e,n}return e(function(){})}),define("Session",["jquery","backbone","views/private/util/ModalGenericView","jscookie"],function(t,e,i,n){var o=e.Model.extend({url:"session/login",defaults:{username:"",password:"",authenticated:!1,user_id:""},initialize:function(){},validation:{username:{required:!0,pattern:"email",msg:"Por favor especifique un email correcto"},password:{required:!0,pattern:/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{4,8}$/,msg:"El password debe tener por lo menos una letra mayuscula, una minuscula y un numero"}},login:function(e,o,s,r){var a=e,l=this;this.save({username:o,password:s},{wait:!0,success:function(e,i){n.set("auth_token",JSON.stringify({username:o,token:e.get("token")})),l.set("authenticated",!0),l.set("username",o),t.ajaxSetup({headers:{"X-Auth-Token":e.get("token")}}),console.log("Successfully saved!"),a()},error:function(t,e){console.log("Error autenthication"),Session.set("authenticated",!1),Session.set("username",""),n.remove("auth_token"),new i({message:"Usuario y/o contraseña incorrecta"})}})},logout:function(e){var i=this,n=e,s=new o;s.save({username:this.get("username"),logout:"logout"},{wait:!0,success:function(e,o){i.clear(),t.ajaxSetup({headers:{"X-Auth-Token":""}}),s.set("username",""),t.removeCookie("auth_token"),console.log("Successfully saved!"),n()},error:function(t,e){console.log(t.toJSON()),console.log("error.responseText")}})}});return new o}),define("views/LoginView",["jquery","core/BaseView","backbone","backboneValidation","jquerySerializeObject","models/UserModel","text!templates/tplLogin.html","Session","app"],function(t,e,i,n,o,s,r,a,l){return e.extend({template:_.template(r),events:{"click .btn.btn-lg.btn-primary.btn-block":"login"},initialize:function(){console.log("initialize login"),console.log(l),this.$el.find(".tip").tooltip(),this.model=new s,Backbone.Validation.bind(this,{valid:function(t,e,i){var n=t.$("[name="+e+"]"),o=n.closest(".form-group");t.model.preValidate(e,n.val())||(o.removeClass("has-error"),o.addClass("has-success"))},invalid:function(t,e,i,n){var o=t.$("[name="+e+"]"),s=o.closest(".form-group");o.popover({content:i,placement:"left"}),o.popover("show"),s.addClass("has-error")}})},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},remove:function(){return Backbone.Validation.unbind(this),Backbone.View.prototype.remove.apply(this,arguments)},login:function(){var e=this.$el.find("#form-login").serializeObject();if(this.model.set(e),this.model.set({passwordConfirm:this.model.get("password")}),this.model.isValid(!0)){var i=this.model.get("username"),n=this.model.get("password"),o=t("#remember").is(":checked");a.login(function(t){Backbone.history.navigate("admin",{trigger:!0}),window.location.reload()},i,n,o)}}})}),define("text!templates/tplSignup.html",[],function(){return'<div class="row signup-wrap">\n  <div class="center-box-login">\n\n    <div class="panel panel-default">\n      <form id="form-user" role="form" class="form-signup">\n        <div class="form-signup-heading">\n          <h3 class="text-center">Bienvenido a entuliga!</h3>\n        </div>\n\n        <div class="row">\n            <div class="col-xs-12">\n                <div class="form-group">\n                    <label>Email</label>\n                    <input class="form-control signup-username" placeholder="Email" type="text" name="username" value="<%= username %>">\n                </div>\n            </div>\n\n        </div>\n        <div class="row">\n            <div class="col-xs-12">\n                <div class="form-group">\n                    <label>Password</label>\n                    <input class="form-control signup-pass" placeholder="Password" type="password" name="password" value="<%= password %>">\n                </div>\n            </div>\n        </div>\n\n        <div class="row">\n            <div class="col-xs-12">\n                <div class="form-group">\n                    <label>Confirm Password</label>\n                    <input class="form-control signup-pass-confirm" placeholder="Confirm Password" type="password" name="passwordConfirm" value="<%= passwordConfirm %>">\n                </div>\n            </div>\n        </div>\n        <button id="btn-ok" type="button" class="btn btn-lg btn-primary btn-block">Registrar</button>\n      </form>\n    </div>\n  </div>\n</div>\n'}),define("views/SignupView",["jquery","core/BaseView","backbone","backboneValidation","jquerySerializeObject","models/UserModel","views/private/util/ModalGenericView","text!templates/tplSignup.html"],function(t,e,i,n,o,s,r,a){return e.extend({template:_.template(a),events:{"click #btn-ok":"signup","focus .signup-username":"showDetailsUsername","focusout .signup-username":"hideDetailsUsername","focus .signup-pass":"showDetailsPass","focusout .signup-pass":"hideDetailsPass","focus .signup-pass-confirm":"showDetailsPassConfirm","focusout .signup-pass-confirm":"hideDetailsPassConfirm"},initialize:function(){this.model=new s,this.model.once("sync",this.saveUserSuccess),this.model.once("error",this.saveUserError),this.$("input[name='username']").focus(),Backbone.Validation.bind(this,{valid:function(t,e,i){var n=t.$("[name="+e+"]"),o=n.closest(".form-group");t.model.preValidate(e,n.val())||(o.removeClass("has-error"),o.addClass("has-success"))},invalid:function(t,e,i,n){var o=t.$("[name="+e+"]"),s=o.closest(".form-group");o.popover({content:i,placement:"left"}),o.popover("show"),s.addClass("has-error")}}),app.that=this},onDomRefresh:function(){this.focusFirstInput()},focusFirstInput:function(){this.$(":input:visible:enabled:first").focus()},render:function(){return this.$("[name=username]").focus(),this.$el.html(this.template(this.model.toJSON())),this},signup:function(){var t=this.$el.find("#form-user").serializeObject();this.model.set(t),this.model.isValid(!0)&&this.model.save()},saveUserSuccess:function(t,e,i){void 0!==app.that&&(new r({message:"Revise su email, para confirmar su registro"}),app.that.destroyView(),delete app.that)},saveUserError:function(t,e,i){new r({message:"Se presento un error al registrar el usuario"})},showDetailsUsername:function(){this.model.preValidate("username",this.$(".signup-username").val()),this.$(".signup-username").popover({content:"Ingresa tu dirección de correo electronico.",placement:"left"}),this.$(".signup-username").popover("show")},hideDetailsUsername:function(){this.$(".signup-username").popover("destroy")},showDetailsPass:function(){this.$(".signup-pass").popover({content:"El password debe tener por lo menos una letra mayuscula, una minuscula y un numero",placement:"left"}),this.$(".signup-pass").popover("show")},hideDetailsPass:function(){this.$(".signup-pass").popover("destroy")},showDetailsPassConfirm:function(){this.$(".signup-pass-confirm").popover({content:"Confirmar password",placement:"left"}),this.$(".signup-pass-confirm").popover("show")},hideDetailsPassConfirm:function(){this.$(".signup-pass-confirm").popover("destroy")}})}),define("session",["jquery","backbone","views/private/util/ModalGenericView","jscookie"],function(t,e,i,n){var o=e.Model.extend({url:"session/login",defaults:{username:"",password:"",authenticated:!1,user_id:""},initialize:function(){},validation:{username:{required:!0,pattern:"email",msg:"Por favor especifique un email correcto"},password:{required:!0,pattern:/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{4,8}$/,msg:"El password debe tener por lo menos una letra mayuscula, una minuscula y un numero"}},login:function(e,o,s,r){var a=e,l=this;this.save({username:o,password:s},{wait:!0,success:function(e,i){n.set("auth_token",JSON.stringify({username:o,token:e.get("token")})),l.set("authenticated",!0),l.set("username",o),t.ajaxSetup({headers:{"X-Auth-Token":e.get("token")}}),console.log("Successfully saved!"),a()},error:function(t,e){console.log("Error autenthication"),Session.set("authenticated",!1),Session.set("username",""),n.remove("auth_token"),new i({message:"Usuario y/o contraseña incorrecta"})}})},logout:function(e){var i=this,n=e,s=new o;s.save({username:this.get("username"),logout:"logout"},{wait:!0,success:function(e,o){i.clear(),t.ajaxSetup({headers:{"X-Auth-Token":""}}),s.set("username",""),t.removeCookie("auth_token"),console.log("Successfully saved!"),n()},error:function(t,e){console.log(t.toJSON()),console.log("error.responseText")}})}});return new o}),define("models/UserTokenModel",["backbone","session"],function(t,e){return t.Model.extend({urlRoot:"usertoken",defaults:{token:"",username:"",tipo:"",fechaVigencia:(new Date).getTime()+5},initialize:function(){},isAuthorized:function(){return Boolean(this.get("token"))},checkAuth:function(t,e){this.set({id:t}),this.set({token:t});var i=e;this.fetch({success:function(t,e){console.log("success token checkout")},error:function(t,e){console.log("error token checkout")}}),i()},validation:{token:{required:!0},username:{required:!0,pattern:"email"},tipo:{required:!0},fechaVigencia:{required:!0}}})}),define("text!templates/tplTokenChangePass.html",[],function(){return'<div class="row">\n    <div class="col-md-12">\n        <form id="form-user" role="form">\n            <p>Especifica tu nuevo password</p>\n            <div class="row">\n                <div class="col-xs-6">\n                    <div class="form-group">\n                        <label>Password</label>\n                        <input class="form-control" placeholder="Password" type="password" name="password" value="<%= password %>">\n                        <p class="help-block"></p>\n                    </div>\n                </div>\n            </div>\n            <div class="row">\n                <div class="col-xs-6">\n                    <div class="form-group">\n                        <label>Confirm Password</label>\n                        <input class="form-control" placeholder="Confirm Password" type="password" name="passwordConfirm" value="<%= passwordConfirm %>">\n                        <p class="help-block"></p>\n                    </div>\n                </div>\n            </div>\n            <div class="row">\n                <div class="modal-footer">\n                    <button id="btn-ok" type="button" class="btn btn-success">Cambiar Password</button>\n                </div>\n            </div>\n        </form>\n    </div>\n</div>'}),define("views/TokenChangePassView",["jquery","core/BaseView","models/UserModel","views/private/util/ModalGenericView","text!templates/tplTokenChangePass.html"],function(t,e,i,n,o){return e.extend({template:_.template(o),events:{"click #btn-ok":"changePass"},initialize:function(t){this.model=new i,this.listenTo(this.model,"sync",this.syncUserToken),this.listenTo(this.model,"error",this.errorUserToken),this.model.set({id:"no-replay@entuliga.com",username:"no-replay@entuliga.com",token:t.token}),Backbone.Validation.bind(this)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},changePass:function(){var t=this.$el.find("#form-user").serializeObject();this.model.set(t),this.model.isValid(!0)&&this.model.save()},syncUserToken:function(){new n({message:"Su password se ha restaurado",callbackConfirm:function(t){Backbone.history.navigate("login",{trigger:!0})}})},errorUserToken:function(t,e){new n({message:e.responseJSON.message})}})}),define("text!templates/tplTokenValidate.html",[],function(){
return'<div class="row">\n    <div class="col-md-12">\n        <div class="jumbotron">\n            <h1>¡Bienvenido a entuliga.com!</h1>\n            <p>Hola <%= username %>, ya estas registrado, puedes utilizar la plataforma.</p>\n        </div>\n    </div>\n</div>'}),define("text!templates/tplTokenInValid.html",[],function(){return'<div class="row">\n    <div class="col-md-12">\n        <div class="jumbotron">\n            <p>Se presento un error en la plataforma: <%= message %></p>\n        </div>\n    </div>\n</div>'}),define("views/TokenValidateView",["jquery","core/BaseView","models/UserTokenModel","views/TokenChangePassView","text!templates/tplTokenValidate.html","text!templates/tplTokenInValid.html"],function(t,e,i,n,o,s){return e.extend({template:_.template(o),templateInValid:_.template(s),events:{"click #btn-ok":"changePass"},initialize:function(t){this.model=new i,this.listenTo(this.model,"sync",this.syncUserToken),this.listenTo(this.model,"error",this.errorUserToken),this.model.set({id:t.token}),this.model.fetch(),Backbone.Validation.bind(this)},render:function(){return this},syncUserToken:function(){"VALID_EMAIL"===this.model.get("tipo")?this.$el.html(this.template(this.model.toJSON())):this.$el.html(this.templateInValid({message:"Token no valido."}))},errorUserToken:function(t,e){this.$el.html(this.templateInValid(e.responseJSON))}})}),define("text!templates/private/perfil/tplPerfilAdmin.html",[],function(){return'<div class="row">\n    <div class="col-md-12">\n      <div class="main-box">\n        <div class="panel panel-primary">\n\n            <div class="panel-heading">\n                <h3 class="panel-title">Perfil de <%= username %></h3>\n            </div>\n            <div class="panel-body">\n                <div class="row">\n                    <div class="col-md-12">\n                        <div class="jumbotron">\n                            <h1>¡Bienvenido a entuliga.com!</h1>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n      </div>\n\n    </div>\n</div>\n'}),define("views/private/perfil/PerfilAdminView",["jquery","backbone","core/BaseView","models/UserModel","views/private/util/ModalGenericView","text!templates/private/perfil/tplPerfilAdmin.html","Session"],function(t,e,i,n,o,s,r){return i.extend({template:_.template(s),events:{},initialize:function(){this.model=new n,this.listenTo(this.model,"sync",this.saveUserSuccess),this.listenTo(this.model,"error",this.saveUserError),this.model.set({id:r.get("username")}),this.model.fetch()},render:function(){return this},saveUserSuccess:function(t,e,i){this.$el.html(this.template(this.model.toJSON()))},saveUserError:function(t,e,i){new o({message:e.responseJSON.message})}})}),define("text!templates/private/tplMainAdminNav.html",[],function(){return'<div class="container">\n    <div class="container-fluid">\n        <div class="navbar-header">\n            <a id="home" class="navbar-brand title-entuliga" href="#">entuliga</a>\n        </div>\n        <div class="collapse navbar-collapse">\n            <ul class="nav navbar-nav menu-liga">\n                <li class=" nav-item-entuliga">\n                    <a href="#admin/perfil">Perfil</a>\n                </li>\n                <li class="nav-item-entuliga">\n                    <a href="#admin/ligas">Ligas</a>\n                </li>\n                <li class="nav-item-entuliga">\n                    <a href="#admin/torneos">Torneos</a>\n                </li>\n                <li class="nav-item-entuliga">\n                    <a href="#admin/equipos">Equipos</a>\n                </li>\n                <li class="nav-item-entuliga">\n                    <a href="#admin/jugadores">Jugadores</a>\n                </li>\n                <li class="nav-item-entuliga">\n                    <a href="#admin/arbitros">Arbitros</a>\n                </li>\n                <li class="nav-item-entuliga">\n                    <a href="#admin/canchas">Canchas</a>\n                </li>\n            </ul>\n            <p class="nav navbar-right">\n                <button id="logout" type="button" class="btn btn-danger navbar-btn">Salir</button>\n            </p>\n        </div>\n    </div>\n</div>\n'}),define("views/private/MainAdminNavView",["jquery","core/BaseView","text!templates/private/tplMainAdminNav.html","Session"],function(t,e,i,n){return e.extend({template:_.template(i),events:{"click #logout":"logout","click #home":"homeAdmin","click li.nav-item-entuliga":"activeMenu"},initialize:function(){this.render()},render:function(){return this.$el.html(this.template()),this},logout:function(){n.logout(function(t){Backbone.history.navigate("",{trigger:!0}),window.location.reload()})},homeAdmin:function(){Backbone.history.navigate("admin",{trigger:!0})},activeMenu:function(e){t(e.target).parent().addClass("active")},destroy_view:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}})}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one("bsTransitionEnd",function(){i=!0});var o=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(o,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.alert");o||i.data("bs.alert",o=new n(this)),"string"==typeof e&&o[e].call(i)})}var i='[data-dismiss="alert"]',n=function(e){t(e).on("click",i,this.close)};n.VERSION="3.3.1",n.TRANSITION_DURATION=150,n.prototype.close=function(e){function i(){r.detach().trigger("closed.bs.alert").remove()}var o=t(this),s=o.attr("data-target");s||(s=o.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,""));var r=t(s);e&&e.preventDefault(),r.length||(r=o.closest(".alert")),r.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(r.removeClass("in"),t.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i())};var o=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=o,this},t(document).on("click.bs.alert.data-api",i,n.prototype.close)}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.button"),s="object"==typeof e&&e;o||n.data("bs.button",o=new i(this,s)),"toggle"==e?o.toggle():e&&o.setState(e)})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.3.1",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",n=this.$element,o=n.is("input")?"val":"html",s=n.data();e+="Text",null==s.resetText&&n.data("resetText",n[o]()),setTimeout(t.proxy(function(){n[o](null==s[e]?this.options[e]:s[e]),"loadingText"==e?(this.isLoading=!0,n.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")&&(i.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&i.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));t&&this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var n=t(i.target);n.hasClass("btn")||(n=n.closest(".btn")),e.call(n,"toggle"),i.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.carousel"),s=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e),r="string"==typeof e?e:s.slide;o||n.data("bs.carousel",o=new i(this,s)),"number"==typeof e?o.to(e):r?o[r]():s.interval&&o.pause().cycle()})}var i=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=this.sliding=this.interval=this.$active=this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};i.VERSION="3.3.1",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.getItemForDirection=function(t,e){var i="prev"==t?-1:1,n=this.getItemIndex(e),o=(n+i)%this.$items.length;return this.$items.eq(o)},i.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",this.$items.eq(t))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){if(!this.sliding)return this.slide("next")},i.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},i.prototype.slide=function(e,n){var o=this.$element.find(".item.active"),s=n||this.getItemForDirection(e,o),r=this.interval,a="next"==e?"left":"right",l="next"==e?"first":"last",c=this;if(!s.length){if(!this.options.wrap)return;s=this.$element.find(".item")[l]()}if(s.hasClass("active"))return this.sliding=!1;var h=s[0],d=t.Event("slide.bs.carousel",{relatedTarget:h,direction:a});if(this.$element.trigger(d),!d.isDefaultPrevented()){if(this.sliding=!0,r&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var u=t(this.$indicators.children()[this.getItemIndex(s)]);u&&u.addClass("active")}var p=t.Event("slid.bs.carousel",{relatedTarget:h,direction:a});return t.support.transition&&this.$element.hasClass("slide")?(s.addClass(e),s[0].offsetWidth,o.addClass(a),s.addClass(a),o.one("bsTransitionEnd",function(){s.removeClass([e,a].join(" ")).addClass("active"),o.removeClass(["active",a].join(" ")),c.sliding=!1,setTimeout(function(){c.$element.trigger(p)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(o.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(p)),r&&this.cycle(),this}};var n=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this};var o=function(i){var n,o=t(this),s=t(o.attr("data-target")||(n=o.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(s.hasClass("carousel")){var r=t.extend({},s.data(),o.data()),a=o.attr("data-slide-to");a&&(r.interval=!1),e.call(s,r),a&&s.data("bs.carousel").to(a),i.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",o).on("click.bs.carousel.data-api","[data-slide-to]",o),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),function(t){"use strict";function e(e){var i,n=e.attr("data-target")||(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return t(n)}function i(e){return this.each(function(){var i=t(this),o=i.data("bs.collapse"),s=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e);!o&&s.toggle&&"show"==e&&(s.toggle=!1),o||i.data("bs.collapse",o=new n(this,s)),"string"==typeof e&&o[e]()})}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.$trigger=t(this.options.trigger).filter('[href="#'+e.id+'"], [data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};n.VERSION="3.3.1",n.TRANSITION_DURATION=350,n.DEFAULTS={toggle:!0,trigger:'[data-toggle="collapse"]'},n.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,o=this.$parent&&this.$parent.find("> .panel").children(".in, .collapsing");if(!(o&&o.length&&(e=o.data("bs.collapse"))&&e.transitioning)){var s=t.Event("show.bs.collapse");if(this.$element.trigger(s),!s.isDefaultPrevented()){o&&o.length&&(i.call(o,"hide"),e||o.data("bs.collapse",null));var r=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[r](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[r](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return a.call(this);var l=t.camelCase(["scroll",r].join("-"));this.$element.one("bsTransitionEnd",t.proxy(a,this)).emulateTransitionEnd(n.TRANSITION_DURATION)[r](this.$element[0][l])}}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!t.support.transition)return o.call(this);this.$element[i](0).one("bsTransitionEnd",t.proxy(o,this)).emulateTransitionEnd(n.TRANSITION_DURATION)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},n.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(i,n){var o=t(n);this.addAriaAndCollapsedClass(e(o),o)},this)).end()},n.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var o=t.fn.collapse;t.fn.collapse=i,t.fn.collapse.Constructor=n,t.fn.collapse.noConflict=function(){return t.fn.collapse=o,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(n){var o=t(this);o.attr("data-target")||n.preventDefault();var s=e(o),r=s.data("bs.collapse"),a=r?"toggle":t.extend({},o.data(),{trigger:this});i.call(s,a)})}(jQuery),function(t){"use strict";function e(e){e&&3===e.which||(t(o).remove(),t(s).each(function(){var n=t(this),o=i(n),s={relatedTarget:this};o.hasClass("open")&&(o.trigger(e=t.Event("hide.bs.dropdown",s)),e.isDefaultPrevented()||(n.attr("aria-expanded","false"),o.removeClass("open").trigger("hidden.bs.dropdown",s)))}))}function i(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&t(i);return n&&n.length?n:e.parent()}function n(e){return this.each(function(){var i=t(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new r(this)),"string"==typeof e&&n[e].call(i)})}var o=".dropdown-backdrop",s='[data-toggle="dropdown"]',r=function(e){t(e).on("click.bs.dropdown",this.toggle)};r.VERSION="3.3.1",r.prototype.toggle=function(n){var o=t(this);if(!o.is(".disabled, :disabled")){var s=i(o),r=s.hasClass("open");if(e(),!r){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var a={relatedTarget:this};if(s.trigger(n=t.Event("show.bs.dropdown",a)),n.isDefaultPrevented())return;o.trigger("focus").attr("aria-expanded","true"),s.toggleClass("open").trigger("shown.bs.dropdown",a)}return!1}},r.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var n=t(this);if(e.preventDefault(),e.stopPropagation(),!n.is(".disabled, :disabled")){var o=i(n),r=o.hasClass("open");if(!r&&27!=e.which||r&&27==e.which)return 27==e.which&&o.find(s).trigger("focus"),n.trigger("click");var a=" li:not(.divider):visible a",l=o.find('[role="menu"]'+a+', [role="listbox"]'+a);if(l.length){var c=l.index(e.target);38==e.which&&c>0&&c--,40==e.which&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var a=t.fn.dropdown;t.fn.dropdown=n,t.fn.dropdown.Constructor=r,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=a,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",s,r.prototype.toggle).on("keydown.bs.dropdown.data-api",s,r.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',r.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',r.prototype.keydown)}(jQuery),function(t){"use strict";function e(e,n){return this.each(function(){var o=t(this),s=o.data("bs.modal"),r=t.extend({},i.DEFAULTS,o.data(),"object"==typeof e&&e);s||o.data("bs.modal",s=new i(this,r)),"string"==typeof e?s[e](n):r.show&&s.show(n)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.1",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var n=this,o=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var o=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.options.backdrop&&n.adjustBackdrop(),n.adjustDialog(),o&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var s=t.Event("shown.bs.modal",{relatedTarget:e});o?n.$element.find(".modal-dialog").one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(i.TRANSITION_DURATION):n.$element.trigger("focus").trigger(s)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var n=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=t.support.transition&&o;if(this.$backdrop=t('<div class="modal-backdrop '+o+'" />').prependTo(this.$element).on("click.dismiss.bs.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;s?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var r=function(){n.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",r).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):r()}else e&&e()},i.prototype.handleUpdate=function(){this.options.backdrop&&this.adjustBackdrop(),this.adjustDialog()},i.prototype.adjustBackdrop=function(){this.$backdrop.css("height",0).css("height",this.$element[0].scrollHeight)},i.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){this.bodyIsOverflowing=document.body.scrollHeight>document.documentElement.clientHeight,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var n=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=t(this),o=n.attr("href"),s=t(n.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),r=s.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(o)&&o},s.data(),n.data());n.is("a")&&i.preventDefault(),s.one("show.bs.modal",function(t){t.isDefaultPrevented()||s.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),e.call(s,r,this)})}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.tooltip"),s="object"==typeof e&&e,r=s&&s.selector;(o||"destroy"!=e)&&(r?(o||n.data("bs.tooltip",o={}),o[r]||(o[r]=new i(this,s))):o||n.data("bs.tooltip",o=new i(this,s)),"string"==typeof e&&o[e]())})}var i=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};i.VERSION="3.3.1",i.TRANSITION_DURATION=150,i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(e,i,n){this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport);for(var o=this.options.trigger.split(" "),s=o.length;s--;){var r=o[s];if("click"==r)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=r){var a="hover"==r?"mouseenter":"focusin",l="hover"==r?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},i.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,n){i[t]!=n&&(e[t]=n)}),e},i.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i&&i.$tip&&i.$tip.is(":visible")?void(i.hoverState="in"):(i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},i.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="out",!i.options.delay||!i.options.delay.hide)return i.hide();i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)},i.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var n=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!n)return;var o=this,s=this.tip(),r=this.getUID(this.type);this.setContent(),s.attr("id",r),this.$element.attr("aria-describedby",r),this.options.animation&&s.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(a);c&&(a=a.replace(l,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element);var h=this.getPosition(),d=s[0].offsetWidth,u=s[0].offsetHeight;if(c){var p=a,f=this.options.container?t(this.options.container):this.$element.parent(),g=this.getPosition(f);a="bottom"==a&&h.bottom+u>g.bottom?"top":"top"==a&&h.top-u<g.top?"bottom":"right"==a&&h.right+d>g.width?"left":"left"==a&&h.left-d<g.left?"right":a,s.removeClass(p).addClass(a)}var v=this.getCalculatedOffset(a,h,d,u);this.applyPlacement(v,a);var m=function(){var t=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==t&&o.leave(o)};t.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",m).emulateTransitionEnd(i.TRANSITION_DURATION):m()}},i.prototype.applyPlacement=function(e,i){var n=this.tip(),o=n[0].offsetWidth,s=n[0].offsetHeight,r=parseInt(n.css("margin-top"),10),a=parseInt(n.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(a)&&(a=0),e.top=e.top+r,e.left=e.left+a,t.offset.setOffset(n[0],t.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),n.addClass("in");var l=n[0].offsetWidth,c=n[0].offsetHeight;"top"==i&&c!=s&&(e.top=e.top+s-c);var h=this.getViewportAdjustedDelta(i,e,l,c);h.left?e.left+=h.left:e.top+=h.top;var d=/top|bottom/.test(i),u=d?2*h.left-o+l:2*h.top-s+c,p=d?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(u,n[0][p],d)},i.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},i.prototype.hide=function(e){function n(){"in"!=o.hoverState&&s.detach(),o.$element.removeAttr("aria-describedby").trigger("hidden.bs."+o.type),e&&e()}var o=this,s=this.tip(),r=t.Event("hide.bs."+this.type);if(this.$element.trigger(r),!r.isDefaultPrevented())return s.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n(),this.hoverState=null,this},i.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(e){e=e||this.$element;var i=e[0],n="BODY"==i.tagName,o=i.getBoundingClientRect();null==o.width&&(o=t.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var s=n?{top:0,left:0}:e.offset(),r={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},a=n?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},o,r,a,s)},i.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},i.prototype.getViewportAdjustedDelta=function(t,e,i,n){var o={top:0,left:0};if(!this.$viewport)return o;var s=this.options.viewport&&this.options.viewport.padding||0,r=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-s-r.scroll,l=e.top+s-r.scroll+n;a<r.top?o.top=r.top-a:l>r.top+r.height&&(o.top=r.top+r.height-l)}else{var c=e.left-s,h=e.left+s+i;c<r.left?o.left=r.left-c:h>r.width&&(o.left=r.left+r.width-h)}return o},i.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},i.prototype.getUID=function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},i.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(e){var i=this;e&&((i=t(e.currentTarget).data("bs."+this.type))||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type)})};var n=t.fn.tooltip;t.fn.tooltip=e,
t.fn.tooltip.Constructor=i,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.popover"),s="object"==typeof e&&e,r=s&&s.selector;(o||"destroy"!=e)&&(r?(o||n.data("bs.popover",o={}),o[r]||(o[r]=new i(this,s))):o||n.data("bs.popover",o=new i(this,s)),"string"==typeof e&&o[e]())})}var i=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.3.1",i.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},i.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var n=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=i,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(jQuery),function(t){"use strict";function e(i,n){var o=t.proxy(this.process,this);this.$body=t("body"),this.$scrollElement=t(t(i).is("body")?window:i),this.options=t.extend({},e.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",o),this.refresh(),this.process()}function i(i){return this.each(function(){var n=t(this),o=n.data("bs.scrollspy"),s="object"==typeof i&&i;o||n.data("bs.scrollspy",o=new e(this,s)),"string"==typeof i&&o[i]()})}e.VERSION="3.3.1",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e="offset",i=0;t.isWindow(this.$scrollElement[0])||(e="position",i=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var n=this;this.$body.find(this.selector).map(function(){var n=t(this),o=n.data("target")||n.attr("href"),s=/^#./.test(o)&&t(o);return s&&s.length&&s.is(":visible")&&[[s[e]().top+i,o]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),o=this.offsets,s=this.targets,r=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=n)return r!=(t=s[s.length-1])&&this.activate(t);if(r&&e<o[0])return this.activeTarget=null,this.clear();for(t=o.length;t--;)r!=s[t]&&e>=o[t]&&(!o[t+1]||e<=o[t+1])&&this.activate(s[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var n=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.tab");o||n.data("bs.tab",o=new i(this)),"string"==typeof e&&o[e]()})}var i=function(e){this.element=t(e)};i.VERSION="3.3.1",i.TRANSITION_DURATION=150,i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),n=e.data("target");if(n||(n=e.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var o=i.find(".active:last a"),s=t.Event("hide.bs.tab",{relatedTarget:e[0]}),r=t.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(s),e.trigger(r),!r.isDefaultPrevented()&&!s.isDefaultPrevented()){var a=t(n);this.activate(e.closest("li"),i),this.activate(a,a.parent(),function(){o.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:o[0]})})}}},i.prototype.activate=function(e,n,o){function s(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),o&&o()}var r=n.find("> .active"),a=o&&t.support.transition&&(r.length&&r.hasClass("fade")||!!n.find("> .fade").length);r.length&&a?r.one("bsTransitionEnd",s).emulateTransitionEnd(i.TRANSITION_DURATION):s(),r.removeClass("in")};var n=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=n,this};var o=function(i){i.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',o).on("click.bs.tab.data-api",'[data-toggle="pill"]',o)}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.affix"),s="object"==typeof e&&e;o||n.data("bs.affix",o=new i(this,s)),"string"==typeof e&&o[e]()})}var i=function(e,n){this.options=t.extend({},i.DEFAULTS,n),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.3.1",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(t,e,i,n){var o=this.$target.scrollTop(),s=this.$element.offset(),r=this.$target.height();if(null!=i&&"top"==this.affixed)return o<i&&"top";if("bottom"==this.affixed)return null!=i?!(o+this.unpin<=s.top)&&"bottom":!(o+r<=t-n)&&"bottom";var a=null==this.affixed,l=a?o:s.top,c=a?r:e;return null!=i&&l<=i?"top":null!=n&&l+c>=t-n&&"bottom"},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),n=this.options.offset,o=n.top,s=n.bottom,r=t("body").height();"object"!=typeof n&&(s=o=n),"function"==typeof o&&(o=n.top(this.$element)),"function"==typeof s&&(s=n.bottom(this.$element));var a=this.getState(r,e,o,s);if(this.affixed!=a){null!=this.unpin&&this.$element.css("top","");var l="affix"+(a?"-"+a:""),c=t.Event(l+".bs.affix");if(this.$element.trigger(c),c.isDefaultPrevented())return;this.affixed=a,this.unpin="bottom"==a?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==a&&this.$element.offset({top:r-e-s})}};var n=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),n=i.data();n.offset=n.offset||{},null!=n.offsetBottom&&(n.offset.bottom=n.offsetBottom),null!=n.offsetTop&&(n.offset.top=n.offsetTop),e.call(i,n)})})}(jQuery),define("bootstrap",["jquery"],function(){}),function(t){"use strict";function e(e){var i=[{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xC7-\xE7]/g,ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}];return t.each(i,function(){e=e.replace(this.re,this.ch)}),e}function i(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i="(?:"+Object.keys(e).join("|")+")",n=new RegExp(i),o=new RegExp(i,"g"),s=null==t?"":""+t;return n.test(s)?s.replace(o,function(t){return e[t]}):s}function n(e,i){var n=arguments,s=e,r=i;[].shift.apply(n);var a,l=this.each(function(){var e=t(this);if(e.is("select")){var i=e.data("selectpicker"),l="object"==typeof s&&s;if(i){if(l)for(var c in l)l.hasOwnProperty(c)&&(i.options[c]=l[c])}else{var h=t.extend({},o.DEFAULTS,t.fn.selectpicker.defaults||{},e.data(),l);e.data("selectpicker",i=new o(this,h,r))}"string"==typeof s&&(a=i[s]instanceof Function?i[s].apply(i,n):i.options[s])}});return void 0!==a?a:l}String.prototype.includes||function(){var t={}.toString,e=function(){try{var t={},e=Object.defineProperty,i=e(t,t,t)&&e}catch(t){}return i}(),i="".indexOf,n=function(e){if(null==this)throw TypeError();var n=String(this);if(e&&"[object RegExp]"==t.call(e))throw TypeError();var o=n.length,s=String(e),r=s.length,a=arguments.length>1?arguments[1]:void 0,l=a?Number(a):0;return l!=l&&(l=0),!(r+Math.min(Math.max(l,0),o)>o)&&-1!=i.call(n,s,l)};e?e(String.prototype,"includes",{value:n,configurable:!0,writable:!0}):String.prototype.includes=n}(),String.prototype.startsWith||function(){var t=function(){try{var t={},e=Object.defineProperty,i=e(t,t,t)&&e}catch(t){}return i}(),e={}.toString,i=function(t){if(null==this)throw TypeError();var i=String(this);if(t&&"[object RegExp]"==e.call(t))throw TypeError();var n=i.length,o=String(t),s=o.length,r=arguments.length>1?arguments[1]:void 0,a=r?Number(r):0;a!=a&&(a=0);var l=Math.min(Math.max(a,0),n);if(s+l>n)return!1;for(var c=-1;++c<s;)if(i.charCodeAt(l+c)!=o.charCodeAt(c))return!1;return!0};t?t(String.prototype,"startsWith",{value:i,configurable:!0,writable:!0}):String.prototype.startsWith=i}(),t.expr[":"].icontains=function(e,i,n){var o=t(e);return(o.data("tokens")||o.text()).toUpperCase().includes(n[3].toUpperCase())},t.expr[":"].ibegins=function(e,i,n){var o=t(e);return(o.data("tokens")||o.text()).toUpperCase().startsWith(n[3].toUpperCase())},t.expr[":"].aicontains=function(e,i,n){var o=t(e),s=(o.data("tokens")||o.data("normalizedText")||o.text()).toUpperCase();return s.includes(s,n[3])},t.expr[":"].aibegins=function(e,i,n){var o=t(e);return(o.data("tokens")||o.data("normalizedText")||o.text()).toUpperCase().startsWith(n[3].toUpperCase())};var o=function(e,i,n){n&&(n.stopPropagation(),n.preventDefault()),this.$element=t(e),this.$newElement=null,this.$button=null,this.$menu=null,this.$lis=null,this.options=i,null===this.options.title&&(this.options.title=this.$element.attr("title")),this.val=o.prototype.val,this.render=o.prototype.render,this.refresh=o.prototype.refresh,this.setStyle=o.prototype.setStyle,this.selectAll=o.prototype.selectAll,this.deselectAll=o.prototype.deselectAll,this.destroy=o.prototype.remove,this.remove=o.prototype.remove,this.show=o.prototype.show,this.hide=o.prototype.hide,this.init()};o.VERSION="1.6.4",o.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(t){return 1==t?"{0} item selected":"{0} items selected"},maxOptionsText:function(t,e){return[1==t?"Limit reached ({n} item max)":"Limit reached ({n} items max)",1==e?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",doneButton:!1,doneButtonText:"Close",multipleSeparator:", ",style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:"glyphicon",tickIcon:"glyphicon-ok",maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1},o.prototype={constructor:o,init:function(){var e=this,i=this.$element.attr("id");this.$element.hide(),this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$newElement=this.createView(),this.$element.after(this.$newElement),this.$button=this.$newElement.children("button"),this.$menu=this.$newElement.children(".dropdown-menu"),this.$searchbox=this.$menu.find("input"),this.options.dropdownAlignRight&&this.$menu.addClass("dropdown-menu-right"),void 0!==i&&(this.$button.attr("data-id",i),t('label[for="'+i+'"]').click(function(t){t.preventDefault(),e.$button.focus()})),this.checkDisabled(),this.clickListener(),this.options.liveSearch&&this.liveSearchListener(),this.render(),this.liHeight(),this.setStyle(),this.setWidth(),this.options.container&&this.selectPosition(),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile()},createDropdown:function(){var e=this.multiple?" show-tick":"",n=this.$element.parent().hasClass("input-group")?" input-group-btn":"",o=this.autofocus?" autofocus":"",s=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"",r=this.options.liveSearch?'<div class="bs-searchbox"><input type="text" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+i(this.options.liveSearchPlaceholder)+'"')+"></div>":"",a=this.multiple&&this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-group-sm btn-block"><button class="actions-btn bs-select-all btn btn-default">'+this.options.selectAllText+'</button><button class="actions-btn bs-deselect-all btn btn-default">'+this.options.deselectAllText+"</button></div></div>":"",l=this.multiple&&this.options.doneButton?'<div class="bs-donebutton"><div class="btn-group btn-block"><button class="btn btn-sm btn-default">'+this.options.doneButtonText+"</button></div></div>":"";return t('<div class="btn-group bootstrap-select'+e+n+'"><button type="button" class="btn dropdown-toggle" data-toggle="dropdown"'+o+'><span class="filter-option pull-left"></span>&nbsp;<span class="caret"></span></button><div class="dropdown-menu open">'+s+r+a+'<ul class="dropdown-menu inner" role="menu"></ul>'+l+"</div></div>")},createView:function(){var t=this.createDropdown(),e=this.createLi();return t.find("ul").append(e),t},reloadLi:function(){this.destroyLi();var t=this.createLi();this.$menu.find("ul").append(t)},destroyLi:function(){this.$menu.find("li").remove()},createLi:function(){var n=this,o=[],s=0,r=function(t,e,i,n){return"<li"+(void 0!==i&""!==i?' class="'+i+'"':"")+(void 0!==e&null!==e?' data-original-index="'+e+'"':"")+(void 0!==n&null!==n?'data-optgroup="'+n+'"':"")+">"+t+"</li>"},a=function(t,o,s,r){return'<a tabindex="0"'+(void 0!==o?' class="'+o+'"':"")+(void 0!==s?' style="'+s+'"':"")+' data-normalized-text="'+e(i(t))+'"'+(void 0!==r||null!==r?' data-tokens="'+r+'"':"")+">"+t+'<span class="'+n.options.iconBase+" "+n.options.tickIcon+' check-mark"></span></a>'};return this.$element.find("option").each(function(e){var i=t(this),l=i.attr("class")||"",c=i.attr("style"),h=i.data("content")?i.data("content"):i.html(),d=i.data("tokens")?i.data("tokens"):null,u=void 0!==i.data("subtext")?'<small class="text-muted">'+i.data("subtext")+"</small>":"",p=void 0!==i.data("icon")?'<span class="'+n.options.iconBase+" "+i.data("icon")+'"></span> ':"",f=i.is(":disabled")||i.parent().is(":disabled");if(""!==p&&f&&(p="<span>"+p+"</span>"),i.data("content")||(h=p+'<span class="text">'+h+u+"</span>"),!n.options.hideDisabled||!f)if(i.parent().is("optgroup")&&!0!==i.data("divider")){if(0===i.index()){s+=1;var g=i.parent().attr("label"),v=void 0!==i.parent().data("subtext")?'<small class="text-muted">'+i.parent().data("subtext")+"</small>":"",m=i.parent().data("icon")?'<span class="'+n.options.iconBase+" "+i.parent().data("icon")+'"></span> ':"";g=m+'<span class="text">'+g+v+"</span>",0!==e&&o.length>0&&o.push(r("",null,"divider",s+"div")),o.push(r(g,null,"dropdown-header",s))}o.push(r(a(h,"opt "+l,c,d),e,"",s))}else!0===i.data("divider")?o.push(r("",e,"divider")):!0===i.data("hidden")?o.push(r(a(h,l,c,d),e,"hidden is-hidden")):(i.prev().is("optgroup")&&o.push(r("",null,"divider",s+"div")),o.push(r(a(h,l,c,d),e)))}),this.multiple||0!==this.$element.find("option:selected").length||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),t(o.join(""))},findLis:function(){return null==this.$lis&&(this.$lis=this.$menu.find("li")),this.$lis},render:function(e){var i=this;!1!==e&&this.$element.find("option").each(function(e){i.setDisabled(e,t(this).is(":disabled")||t(this).parent().is(":disabled")),i.setSelected(e,t(this).is(":selected"))}),this.tabIndex();var n=this.options.hideDisabled?":enabled":"",o=this.$element.find("option:selected"+n).map(function(){var e,n=t(this),o=n.data("icon")&&i.options.showIcon?'<i class="'+i.options.iconBase+" "+n.data("icon")+'"></i> ':"";return e=i.options.showSubtext&&n.data("subtext")&&!i.multiple?' <small class="text-muted">'+n.data("subtext")+"</small>":"",void 0!==n.attr("title")?n.attr("title"):n.data("content")&&i.options.showContent?n.data("content"):o+n.html()+e}).toArray(),s=this.multiple?o.join(this.options.multipleSeparator):o[0];if(this.multiple&&this.options.selectedTextFormat.indexOf("count")>-1){var r=this.options.selectedTextFormat.split(">");if(r.length>1&&o.length>r[1]||1==r.length&&o.length>=2){n=this.options.hideDisabled?", [disabled]":"";var a=this.$element.find("option").not('[data-divider="true"], [data-hidden="true"]'+n).length;s=("function"==typeof this.options.countSelectedText?this.options.countSelectedText(o.length,a):this.options.countSelectedText).replace("{0}",o.length.toString()).replace("{1}",a.toString())}}void 0==this.options.title&&(this.options.title=this.$element.attr("title")),"static"==this.options.selectedTextFormat&&(s=this.options.title),s||(s=void 0!==this.options.title?this.options.title:this.options.noneSelectedText),this.$button.attr("title",t.trim(s.replace(/<[^>]*>?/g,""))),this.$button.children(".filter-option").html(s)},setStyle:function(t,e){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|validate\[.*\]/gi,""));var i=t||this.options.style;"add"==e?this.$button.addClass(i):"remove"==e?this.$button.removeClass(i):(this.$button.removeClass(this.options.style),this.$button.addClass(i))},liHeight:function(){if(!1!==this.options.size){var t=this.$menu.parent().clone().children(".dropdown-toggle").prop("autofocus",!1).end().appendTo("body"),e=t.addClass("open").children(".dropdown-menu"),i=e.find("li").not(".divider, .dropdown-header").filter(":visible").children("a").outerHeight(),n=this.options.header?e.find(".popover-title").outerHeight():0,o=this.options.liveSearch?e.find(".bs-searchbox").outerHeight():0,s=this.options.actionsBox?e.find(".bs-actionsbox").outerHeight():0,r=this.multiple?e.find(".bs-donebutton").outerHeight():0;t.remove(),this.$newElement.data("liHeight",i).data("headerHeight",n).data("searchHeight",o).data("actionsHeight",s).data("doneButtonHeight",r)}},setSize:function(){this.findLis();var e,i,n,o=this,s=this.$menu,r=s.children(".inner"),a=this.$newElement.outerHeight(),l=this.$newElement.data("liHeight"),c=this.$newElement.data("headerHeight"),h=this.$newElement.data("searchHeight"),d=this.$newElement.data("actionsHeight"),u=this.$newElement.data("doneButtonHeight"),p=this.$lis.filter(".divider").outerHeight(!0),f=parseInt(s.css("padding-top"))+parseInt(s.css("padding-bottom"))+parseInt(s.css("border-top-width"))+parseInt(s.css("border-bottom-width")),g=this.options.hideDisabled?".disabled":"",v=t(window),m=f+parseInt(s.css("margin-top"))+parseInt(s.css("margin-bottom"))+2,b=function(){i=o.$newElement.offset().top-v.scrollTop(),n=v.height()-i-a};if(b(),this.options.header&&s.css("padding-top",0),"auto"==this.options.size){var y=function(){var t,a=o.$lis.not(".hidden");b(),e=n-m,o.options.dropupAuto&&o.$newElement.toggleClass("dropup",i>n&&e-m<s.height()),o.$newElement.hasClass("dropup")&&(e=i-m),t=a.length+a.filter(".dropdown-header").length>3?3*l+m-2:0,s.css({"max-height":e+"px",overflow:"hidden","min-height":t+c+h+d+u+"px"}),r.css({"max-height":e-c-h-d-u-f+"px","overflow-y":"auto","min-height":Math.max(t-f,0)+"px"})};y(),this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",y),v.off("resize.getSize scroll.getSize").on("resize.getSize scroll.getSize",y)}else if(this.options.size&&"auto"!=this.options.size&&s.find("li").not(g).length>this.options.size){var w=this.$lis.not(".divider").not(g).children().slice(0,this.options.size).last().parent().index(),x=this.$lis.slice(0,w+1).filter(".divider").length;e=l*this.options.size+x*p+f,o.options.dropupAuto&&this.$newElement.toggleClass("dropup",i>n&&e<s.height()),s.css({"max-height":e+c+h+d+u+"px",overflow:"hidden"}),r.css({"max-height":e-f+"px","overflow-y":"auto"})}},setWidth:function(){if("auto"==this.options.width){this.$menu.css("min-width","0");var t=this.$newElement.clone().appendTo("body"),e=t.children(".dropdown-menu").css("width"),i=t.css("width","auto").children("button").css("width");t.remove(),this.$newElement.css("width",Math.max(parseInt(e),parseInt(i))+"px")}else"fit"==this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width",""));this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){var e,i,n=this,o=t("<div />"),s=function(t){o.addClass(t.attr("class").replace(/form-control/gi,"")).toggleClass("dropup",t.hasClass("dropup")),e=t.offset(),i=t.hasClass("dropup")?0:t[0].offsetHeight,o.css({top:e.top+i,left:e.left,width:t[0].offsetWidth,position:"absolute"})};this.$newElement.on("click",function(){n.isDisabled()||(s(t(this)),o.appendTo(n.options.container),o.toggleClass("open",!t(this).hasClass("open")),o.append(n.$menu))}),t(window).on("resize scroll",function(){s(n.$newElement)}),t("html").on("click",function(e){t(e.target).closest(n.$newElement).length<1&&o.removeClass("open")})},setSelected:function(t,e){this.findLis(),this.$lis.filter('[data-original-index="'+t+'"]').toggleClass("selected",e)},setDisabled:function(t,e){this.findLis(),e?this.$lis.filter('[data-original-index="'+t+'"]').addClass("disabled").children("a").attr("href","#").attr("tabindex",-1):this.$lis.filter('[data-original-index="'+t+'"]').removeClass("disabled").children("a").removeAttr("href").attr("tabindex",0)},isDisabled:function(){return this.$element.is(":disabled")},checkDisabled:function(){var t=this;this.isDisabled()?this.$button.addClass("disabled").attr("tabindex",-1):(this.$button.hasClass("disabled")&&this.$button.removeClass("disabled"),-1!=this.$button.attr("tabindex")||this.$element.data("tabindex")||this.$button.removeAttr("tabindex")),this.$button.click(function(){return!t.isDisabled()})},tabIndex:function(){this.$element.is("[tabindex]")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex")))},clickListener:function(){var e=this;this.$newElement.on("touchstart.dropdown",".dropdown-menu",function(t){t.stopPropagation()}),this.$newElement.on("click",function(){e.setSize(),e.options.liveSearch||e.multiple||setTimeout(function(){e.$menu.find(".selected a").focus()},10)}),this.$menu.on("click","li a",function(i){var n=t(this),o=n.parent().data("originalIndex"),s=e.$element.val(),r=e.$element.prop("selectedIndex");if(e.multiple&&i.stopPropagation(),i.preventDefault(),!e.isDisabled()&&!n.parent().hasClass("disabled")){var a=e.$element.find("option"),l=a.eq(o),c=l.prop("selected"),h=l.parent("optgroup"),d=e.options.maxOptions,u=h.data("maxOptions")||!1;if(e.multiple){if(l.prop("selected",!c),e.setSelected(o,!c),n.blur(),!1!==d||!1!==u){var p=d<a.filter(":selected").length,f=u<h.find("option:selected").length;if(d&&p||u&&f)if(d&&1==d)a.prop("selected",!1),l.prop("selected",!0),e.$menu.find(".selected").removeClass("selected"),e.setSelected(o,!0);else if(u&&1==u){h.find("option:selected").prop("selected",!1),l.prop("selected",!0);var g=n.data("optgroup");e.$menu.find(".selected").has('a[data-optgroup="'+g+'"]').removeClass("selected"),e.setSelected(o,!0)}else{var v="function"==typeof e.options.maxOptionsText?e.options.maxOptionsText(d,u):e.options.maxOptionsText,m=v[0].replace("{n}",d),b=v[1].replace("{n}",u),y=t('<div class="notify"></div>');v[2]&&(m=m.replace("{var}",v[2][d>1?0:1]),b=b.replace("{var}",v[2][u>1?0:1])),l.prop("selected",!1),e.$menu.append(y),d&&p&&(y.append(t("<div>"+m+"</div>")),e.$element.trigger("maxReached.bs.select")),u&&f&&(y.append(t("<div>"+b+"</div>")),e.$element.trigger("maxReachedGrp.bs.select")),setTimeout(function(){e.setSelected(o,!1)},10),y.delay(750).fadeOut(300,function(){t(this).remove()})}}}else a.prop("selected",!1),l.prop("selected",!0),e.$menu.find(".selected").removeClass("selected"),e.setSelected(o,!0);e.multiple?e.options.liveSearch&&e.$searchbox.focus():e.$button.focus(),(s!=e.$element.val()&&e.multiple||r!=e.$element.prop("selectedIndex")&&!e.multiple)&&e.$element.change()}}),this.$menu.on("click","li.disabled a, .popover-title, .popover-title :not(.close)",function(t){t.currentTarget==this&&(t.preventDefault(),t.stopPropagation(),e.options.liveSearch?e.$searchbox.focus():e.$button.focus())}),this.$menu.on("click","li.divider, li.dropdown-header",function(t){t.preventDefault(),t.stopPropagation(),e.options.liveSearch?e.$searchbox.focus():e.$button.focus()}),this.$menu.on("click",".popover-title .close",function(){e.$button.focus()}),this.$searchbox.on("click",function(t){t.stopPropagation()}),this.$menu.on("click",".actions-btn",function(i){e.options.liveSearch?e.$searchbox.focus():e.$button.focus(),i.preventDefault(),i.stopPropagation(),t(this).hasClass("bs-select-all")?e.selectAll():e.deselectAll(),e.$element.change()}),this.$element.change(function(){e.render(!1)})},liveSearchListener:function(){var n=this,o=t('<li class="no-results"></li>');this.$newElement.on("click.dropdown.data-api touchstart.dropdown.data-api",function(){n.$menu.find(".active").removeClass("active"),n.$searchbox.val()&&(n.$searchbox.val(""),n.$lis.not(".is-hidden").removeClass("hidden"),o.parent().length&&o.remove()),n.multiple||n.$menu.find(".selected").addClass("active"),setTimeout(function(){n.$searchbox.focus()},10)}),this.$searchbox.on("click.dropdown.data-api focus.dropdown.data-api touchend.dropdown.data-api",function(t){t.stopPropagation()}),this.$searchbox.on("input propertychange",function(){if(n.$searchbox.val()){var s=n.$lis.not(".is-hidden").removeClass("hidden").children("a");s=s.not(n.options.liveSearchNormalize?":a"+n._searchStyle()+"("+e(n.$searchbox.val())+")":":"+n._searchStyle()+"("+n.$searchbox.val()+")"),s.parent().addClass("hidden"),n.$lis.filter(".dropdown-header").each(function(){var e=t(this),i=e.data("optgroup");0===n.$lis.filter("[data-optgroup="+i+"]").not(e).not(".hidden").length&&(e.addClass("hidden"),n.$lis.filter("[data-optgroup="+i+"div]").addClass("hidden"))});var r=n.$lis.not(".hidden");r.each(function(e){var i=t(this);i.hasClass("divider")&&(i.index()===r.eq(0).index()||i.index()===r.last().index()||r.eq(e+1).hasClass("divider"))&&i.addClass("hidden")}),n.$lis.not(".hidden, .no-results").length?o.parent().length&&o.remove():(o.parent().length&&o.remove(),o.html(n.options.noneResultsText.replace("{0}",'"'+i(n.$searchbox.val())+'"')).show(),n.$menu.append(o))}else n.$lis.not(".is-hidden").removeClass("hidden"),o.parent().length&&o.remove();n.$lis.filter(".active").removeClass("active"),n.$lis.not(".hidden, .divider, .dropdown-header").eq(0).addClass("active").children("a").focus(),t(this).focus()})},_searchStyle:function(){var t="icontains";switch(this.options.liveSearchStyle){case"begins":case"startsWith":t="ibegins"}return t},val:function(t){return void 0!==t?(this.$element.val(t),this.render(),this.$element):this.$element.val()},selectAll:function(){this.findLis(),this.$element.find("option:enabled").not("[data-divider], [data-hidden]").prop("selected",!0),this.$lis.not(".divider, .dropdown-header, .disabled, .hidden").addClass("selected"),this.render(!1)},deselectAll:function(){this.findLis(),this.$element.find("option:enabled").not("[data-divider], [data-hidden]").prop("selected",!1),this.$lis.not(".divider, .dropdown-header, .disabled, .hidden").removeClass("selected"),this.render(!1)},keydown:function(i){var n,o,s,r,a,l,c,h,d,u=t(this),p=u.is("input")?u.parent().parent():u.parent(),f=p.data("this"),g={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};if(f.options.liveSearch&&(p=u.parent().parent()),f.options.container&&(p=f.$menu),n=t("[role=menu] li a",p),d=f.$menu.parent().hasClass("open"),!d&&/([0-9]|[A-z])/.test(String.fromCharCode(i.keyCode))&&(f.options.container?f.$newElement.trigger("click"):(f.setSize(),f.$menu.parent().addClass("open"),d=!0),f.$searchbox.focus()),f.options.liveSearch&&(/(^9$|27)/.test(i.keyCode.toString(10))&&d&&0===f.$menu.find(".active").length&&(i.preventDefault(),f.$menu.parent().removeClass("open"),f.$button.focus()),n=t("[role=menu] li:not(.divider):not(.dropdown-header):visible a",p),u.val()||/(38|40)/.test(i.keyCode.toString(10))||0===n.filter(".active").length&&(n=f.$newElement.find("li a"),n=n.filter(f.options.liveSearchNormalize?":a"+f._searchStyle()+"("+e(g[i.keyCode])+")":":"+f._searchStyle()+"("+g[i.keyCode]+")"))),n.length){if(/(38|40)/.test(i.keyCode.toString(10)))o=n.index(n.filter(":focus")),r=n.parent(":not(.disabled):visible").first().index(),a=n.parent(":not(.disabled):visible").last().index(),s=n.eq(o).parent().nextAll(":not(.disabled):visible").eq(0).index(),l=n.eq(o).parent().prevAll(":not(.disabled):visible").eq(0).index(),c=n.eq(s).parent().prevAll(":not(.disabled):visible").eq(0).index(),f.options.liveSearch&&(n.each(function(e){t(this).hasClass("disabled")||t(this).data("index",e)}),o=n.index(n.filter(".active")),r=n.filter(":not(.disabled):visible").first().data("index"),a=n.filter(":not(.disabled):visible").last().data("index"),s=n.eq(o).nextAll(":not(.disabled):visible").eq(0).data("index"),l=n.eq(o).prevAll(":not(.disabled):visible").eq(0).data("index"),c=n.eq(s).prevAll(":not(.disabled):visible").eq(0).data("index")),h=u.data("prevIndex"),38==i.keyCode?(f.options.liveSearch&&(o-=1),o!=c&&o>l&&(o=l),r>o&&(o=r),o==h&&(o=a)):40==i.keyCode&&(f.options.liveSearch&&(o+=1),-1==o&&(o=0),o!=c&&s>o&&(o=s),o>a&&(o=a),o==h&&(o=r)),u.data("prevIndex",o),f.options.liveSearch?(i.preventDefault(),
u.hasClass("dropdown-toggle")||(n.removeClass("active"),n.eq(o).addClass("active").children("a").focus(),u.focus())):n.eq(o).focus();else if(!u.is("input")){var v,m,b=[];n.each(function(){t(this).parent().hasClass("disabled")||t.trim(t(this).text().toLowerCase()).substring(0,1)==g[i.keyCode]&&b.push(t(this).parent().index())}),v=t(document).data("keycount"),v++,t(document).data("keycount",v),m=t.trim(t(":focus").text().toLowerCase()).substring(0,1),m!=g[i.keyCode]?(v=1,t(document).data("keycount",v)):v>=b.length&&(t(document).data("keycount",0),v>b.length&&(v=1)),n.eq(b[v-1]).focus()}if((/(13|32)/.test(i.keyCode.toString(10))||/(^9$)/.test(i.keyCode.toString(10))&&f.options.selectOnTab)&&d){if(/(32)/.test(i.keyCode.toString(10))||i.preventDefault(),f.options.liveSearch)/(32)/.test(i.keyCode.toString(10))||(f.$menu.find(".active a").click(),u.focus());else{var y=t(":focus");y.click(),y.focus(),i.preventDefault()}t(document).data("keycount",0)}(/(^9$|27)/.test(i.keyCode.toString(10))&&d&&(f.multiple||f.options.liveSearch)||/(27)/.test(i.keyCode.toString(10))&&!d)&&(f.$menu.parent().removeClass("open"),f.$button.focus())}},mobile:function(){this.$element.addClass("mobile-device").appendTo(this.$newElement),this.options.container&&this.$menu.hide()},refresh:function(){this.$lis=null,this.reloadLi(),this.render(),this.setWidth(),this.setStyle(),this.checkDisabled(),this.liHeight()},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()}};var s=t.fn.selectpicker;t.fn.selectpicker=n,t.fn.selectpicker.Constructor=o,t.fn.selectpicker.noConflict=function(){return t.fn.selectpicker=s,this},t(document).data("keycount",0).on("keydown",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bs-searchbox input",o.prototype.keydown).on("focusin.modal",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bs-searchbox input",function(t){t.stopPropagation()}),t(window).on("load.bs.select.data-api",function(){t(".selectpicker").each(function(){var e=t(this);n.call(e,e.data())})})}(jQuery),define("selecter",["jquery"],function(){}),define("models/LigaModel",["backbone"],function(t){return t.Model.extend({urlRoot:"liga",defaults:{nombre:"",nombreCompleto:"",telefono:"",calle:"",noExterior:"",noInterior:"",codigoPostal:"",coloniaId:"",coloniaDesc:"",municipioDesc:"",estadoDesc:"",paisDesc:"",longitude:"",latitude:""},initialize:function(){_.each(this.attributes,function(t,e){this.set(e,this.sanitize(t))},this)},sanitize:function(t){return _.escape(t)},validation:{nombre:{required:!0},nombreCompleto:{required:!0},telefono:{minLength:8},calle:{required:!0},noExterior:{required:!0},noInterior:{required:!1},codigoPostal:{required:!0},coloniaId:{required:!0},longitude:{required:!1},latitude:{required:!1}}})}),define("collections/LigasCollection",["backbone","models/LigaModel"],function(t,e){return t.Collection.extend({model:e,url:"liga"})}),define("text!templates/private/tplLigaDetail.html",[],function(){return'<h4 class="list-group-item-heading"><%= nombre %></h4>\n<p class="list-group-item-text"><%= nombreCompleto %></p>\n<p class="list-group-item-text"><%= telefono %></p>\n<p class="list-group-item-text"><%= calle %> <%= noExterior %> <%= noInterior %> <%= coloniaDesc %></p>\n<p class="list-group-item-text"><%= municipioDesc %> <%= estadoDesc %> <%= paisDesc %></p>\n<p class="list-group-item-text"><%= latitude %> <%= longitude %></p>'}),define("views/private/LigaDetailView",["jquery","backbone","core/BaseView","text!templates/private/tplLigaDetail.html"],function(t,e,i,n){return i.extend({template:_.template(n),events:{},initialize:function(){},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}})}),define("models/PaisModel",["backbone"],function(t){return t.Model.extend({urlRoot:"pais",defaults:{},initialize:function(){},validate:function(t){if(!t.nombre)return"Debe tener una nombre."}})}),define("collections/PaisesCollection",["backbone","models/PaisModel"],function(t,e){return t.Collection.extend({model:e,url:"pais"})}),define("models/EstadoModel",["backbone"],function(t){return t.Model.extend({urlRoot:"estado",defaults:{},initialize:function(){},validate:function(t){return t.nombre?t.idPais?void 0:"Debe tener un idPais.":"Debe tener una nombre."}})}),define("collections/EstadosCollection",["backbone","models/EstadoModel"],function(t,e){return t.Collection.extend({model:e,url:function(){return"pais/"+this.pais.id+"/estado"},setPais:function(t){this.pais=t}})}),define("models/MunicipioModel",["backbone"],function(t){return t.Model.extend({urlRoot:"municipio",defaults:{},initialize:function(){},validate:function(t){return t.nombre?t.idEstado?void 0:"Debe tener un idEstado.":"Debe tener una nombre."}})}),define("collections/MunicipiosCollection",["backbone","models/MunicipioModel"],function(t,e){return t.Collection.extend({model:e,url:function(){return"estado/"+this.estado.id+"/municipio"},setEstado:function(t){this.estado=t}})}),define("models/ColoniaModel",["backbone"],function(t){return t.Model.extend({urlRoot:"colonia",defaults:{},initialize:function(){},validate:function(t){return t.nombre?t.idMunicipio?void 0:"Debe tener un idMunicipio.":"Debe tener una nombre."}})}),define("collections/ColoniasCollection",["backbone","models/ColoniaModel"],function(t,e){return t.Collection.extend({model:e,url:function(){return"municipio/"+this.municipio.id+"/colonia"},setMunicipio:function(t){this.municipio=t}})}),define("text!templates/private/tplMainColoniaAdmin.html",[],function(){return'<div class="modal fade" id="colonia-dialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close close-entuliga" data-dismiss="modal" aria-hidden="true">×</button>\n                <h4 class="modal-title">Colonia</h4>\n            </div>\n            <div class="modal-body">\n                <p>Seleccione la país, estado, municipio y colonia.</p>\n                <div class="alert alert-danger" role="alert"></div>\n                <div class="row">\n                    <div class="col-xs-6">\n                        <label>País</label>\n                        <select class="form-control" id="input-pais" placeholder="País...">\n                        </select>\n                    </div>\n                    <div class="col-xs-6">\n                        <label>Estado</label>\n                        <select class="form-control" id="input-estado" placeholder="Estado...">\n                        </select>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="col-xs-6">\n                        <label>Municipio</label>\n                        <select class="form-control" id="input-municipio" placeholder="Municipio...">\n                        </select>\n                    </div>\n                    <div class="col-xs-6">\n                        <label>Colonia</label>\n                        <select class="form-control" id="input-colonia" placeholder="Colonia...">\n                        </select>\n                    </div>\n                </div>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default close-entuliga" data-dismiss="modal">Cancelar</button>\n                <button id="btn-aceptar" type="button" class="btn btn-success">Aceptar</button>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("views/private/MainColoniaAdminView",["jquery","bootstrap","core/BaseView","collections/PaisesCollection","collections/EstadosCollection","collections/MunicipiosCollection","collections/ColoniasCollection","text!templates/private/tplMainColoniaAdmin.html"],function(t,e,i,n,o,s,r,a){return i.extend({el:"#modal-colonia",template:_.template(a),events:{"change #input-pais":"changePais","change #input-estado":"changeEstado","change #input-municipio":"changeMunicipio","click #btn-aceptar":"clickAceptar","click .close-entuliga":"clickClose"},initialize:function(t){this.callbackAceptar=t,this.render(),this.paises=new n,this.listenTo(this.paises,"add",this.agregarPais),this.listenTo(this.paises,"sync",this.syncPaises),this.estados=new o,this.listenTo(this.estados,"add",this.agregarEstado),this.listenTo(this.estados,"sync",this.syncEstados),this.municipios=new s,this.listenTo(this.municipios,"add",this.agregarMunicipio),this.listenTo(this.municipios,"sync",this.syncMunicipios),this.colonias=new r,this.listenTo(this.colonias,"add",this.agregarColonia),this.listenTo(this.colonias,"sync",this.syncColonias),this.paises.fetch()},render:function(){return this.$el.html(this.template()),this.$("#colonia-dialog").modal({backdrop:"static",keyboard:!1}),this.$(".alert-danger").hide(),this},agregarPais:function(e){t("#input-pais").append(t("<option>",{value:e.get("id"),text:e.get("nombre")}))},syncPaises:function(){t("#input-pais").change()},agregarEstado:function(e){t("#input-estado").append(t("<option>",{value:e.get("id"),text:e.get("nombre")}))},syncEstados:function(){t("#input-estado").change()},agregarMunicipio:function(e){t("#input-municipio").append(t("<option>",{value:e.get("id"),text:e.get("nombre")}))},syncMunicipios:function(){t("#input-municipio").change()},agregarColonia:function(e){t("#input-colonia").append(t("<option>",{value:e.get("id"),text:e.get("nombre")}))},syncColonias:function(){t("#input-colonia").change()},changePais:function(e){var i=this.paises.get(t(e.target).val());t("#input-estado").html(""),this.estados.setPais(i),this.estados.fetch()},changeEstado:function(e){var i=this.estados.get(t(e.target).val());t("#input-municipio").html(""),this.municipios.setEstado(i),this.municipios.fetch()},changeMunicipio:function(e){var i=this.municipios.get(t(e.target).val());t("#input-colonia").html(""),this.colonias.setMunicipio(i),this.colonias.fetch()},clickAceptar:function(e){var i=t("#input-colonia").val();if("undefined"==i||""==i)this.$(".alert-danger").show(),this.$(".alert-danger").html("Debe seleccionar una colonia");else{var n=this.colonias.get(i);this.callbackAceptar(n),this.$("#colonia-dialog").modal("hide"),this.undelegateEvents()}},clickClose:function(){this.undelegateEvents()}})}),define("text!templates/private/tplLigaEdit.html",[],function(){return'<form id="form-liga" role="form">\n    <p>Detalle Liga.</p>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Nombre</label>\n                <input class="form-control" placeholder="Nombre" type="text" name="nombre" value="<%= nombre %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Nombre Oficial</label>\n                <input class="form-control" placeholder="Nombre Oficial" type="text" name="nombreCompleto" value="<%= nombreCompleto %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Telefono</label>\n                <input class="form-control" placeholder="Telefono" type="text" name="telefono" value="<%= telefono %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Calle</label>\n                <input class="form-control" placeholder="Calle" type="text" name="calle" value="<%= calle %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>No Exterior</label>\n                <input class="form-control" placeholder="No Exterior" type="text" name="noExterior" value="<%= noExterior %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>No Interior</label>\n                <input class="form-control" placeholder="No Interior" type="text" name="noInterior" value="<%= noInterior %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Codigo Postal</label>\n                <input class="form-control" placeholder="Codigo Postal" type="text" name="codigoPostal" value="<%= codigoPostal %>">\n\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Colonia</label>\n                <div class="input-group">\n                    <input id="liga-colonia-id" type="hidden" name="coloniaId" value="<%= coloniaId %>">\n                    <input id="liga-colonia-desc" class="form-control" placeholder="Colonia" type="text" name="coloniaDesc" value="<%= coloniaDesc %>">\n                    <div class="input-group-btn">\n                        <button id="colonia-buscar" type="button" class="btn btn-primary">Buscar</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Latitude</label>\n                <input class="form-control" placeholder="Latitude" type="text" name="latitude" value="<%= latitude %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Longitude</label>\n                <input class="form-control" placeholder="Longitude" type="text" name="longitude" value="<%= longitude %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="modal-footer">\n            <button id="btn-cancel" type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n            <button id="btn-ok" type="button" class="btn btn-success">Guardar</button>\n        </div>\n    </div>\n</form>\n<div id="modal-colonia">\n</div>'}),define("views/private/LigaEditView",["jquery","backbone","backboneValidation","jquerySerializeObject","models/LigaModel","core/BaseView","views/private/MainColoniaAdminView","views/private/util/ModalGenericView","text!templates/private/tplLigaEdit.html"],function(t,e,i,n,o,s,r,a,l){return s.extend({template:_.template(l),events:{"click #colonia-buscar":"buscarColonia","click #btn-ok":"saveLiga","click #btn-cancel":"cancelLiga"},initialize:function(t){"new"==t.tipo?this.model=new o:this.model=t.modelo,this.model.once("sync",this.saveLigaSuccess),this.model.once("error",this.saveLigaError),e.Validation.bind(this),app.that=this},remove:function(){return e.Validation.unbind(this),e.View.prototype.remove.apply(this,arguments)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},buscarColonia:function(){new r(this.selectColonia)},selectColonia:function(e){t("#liga-colonia-id").val(e.get("id")),t("#liga-colonia-desc").val(e.get("nombre"))},cancelLiga:function(){new a({type:"confirm",labelConfirm:"Si",labelCancel:"No",message:"¿Desea cancelar la acción?",callbackConfirm:function(t){app.that.disabledAction(!1),app.that.destroyView(),delete app.that}})},saveLiga:function(){var t=this.$el.find("#form-liga").serializeObject();for(var e in t)t.hasOwnProperty(e)&&(t[e]=_.escape(t[e]));this.model.set(t),this.model.isValid(!0)&&this.model.save()},saveLigaSuccess:function(e,i,n){app.ligas.add(e),void 0!==app.that&&(app.that.disabledAction(!1),new a({message:"Liga guardada correctamente"}),app.that.destroyView(),delete app.that,1==app.ligas.length&&t("#select-liga").change())},saveLigaError:function(t,e,i){new a({message:"Se presento un error al registrar la liga"})}})}),define("text!templates/private/tplLigaAdmin.html",[],function(){return'<div class="row">\n    <div class="col-md-12">\n      <div class="main-box">\n        <div class="panel panel-success">\n            <div class="panel-heading">\n                <h3 class="panel-title">Liga Admin</h3>\n            </div>\n            <div class="panel-body">\n                <div class="row">\n                  <div class="col-md-6">\n                    <div class="form-inline">\n                      <div class="form-group">\n                        <label for="select-liga">Selecciona una liga</label>\n                        <select name="select-liga" class="form-control action-entuliga" id="select-liga" placeholder="Liga...">\n                        </select>\n                      </div>\n                    </div>\n\n                      <div class="panel panel-default">\n                          <div id="liga-detail" class="panel-body">\n                          </div>\n                      </div>\n                      <div class="btn-group-horizontal" role="group" aria-label="...">\n                          <button id="liga-nuevo" type="button" class="btn btn-primary action-entuliga">Registrar</button>\n                          <button id="liga-editar" type="button" class="btn btn-primary action-entuliga">Editar</button>\n                          <button id="liga-borrar" type="button" class="btn btn-danger action-entuliga">\n                              <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>\n                          </button>\n                      </div>\n                    </div>\n                    <div class="col-md-6">\n                        <div class="panel panel-default">\n                            <div class="panel-heading">\n                                <h3 class="panel-title">Liga</h3>\n                            </div>\n                            <div id="liga-edit" class="panel-body">\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n      </div>\n    </div>\n</div>\n'}),define("views/private/LigaAdminView",["jquery","backbone","bootstrap","selecter","core/BaseView","collections/LigasCollection","views/private/LigaDetailView","views/private/LigaEditView","views/private/util/ModalGenericView","text!templates/private/tplLigaAdmin.html"],function(t,e,i,n,o,s,r,a,l,c){return o.extend({template:_.template(c),events:{"change #select-liga":"changeLiga","click #liga-nuevo":"newLiga","click #liga-editar":"editLiga","click #liga-borrar":"deleteLiga"},initialize:function(){app.ligas=new s,this.listenTo(app.ligas,"add",this.agregarLiga),this.listenTo(app.ligas,"sync",this.syncLigas),app.ligas.fetch()},render:function(){return this.$el.html(this.template()),this.$el.find(".selecter_liga").select(),this},changeLiga:function(e){var i=app.ligas.get(t(e.target).val());void 0!==i?(this.ligaDetailView=new r({model:i}),t("#liga-detail").html(this.ligaDetailView.render().$el),t("#liga-editar").removeAttr("disabled"),t("#liga-borrar").removeAttr("disabled")):(void 0!==this.ligaDetailView&&this.ligaDetailView.destroyView(),t("#liga-editar").attr("disabled",!0),t("#liga-borrar").attr("disabled",!0))},newLiga:function(){this.disabledAction(!0);var e=new a({tipo:"new",modelo:null});t("#liga-edit").html(e.render().$el)},editLiga:function(){this.disabledAction(!0);var e=app.ligas.get(t("#select-liga").val()),i=new a({tipo:"edit",modelo:e});t("#liga-edit").html(i.render().$el)},deleteLiga:function(){app.ligas.get(t("#select-liga").val()).destroy({wait:!0,success:function(e,i){new l({message:i.message}),i.result&&(t("#select-liga option:selected").remove(),t("#select-liga").change())},error:function(t,e){new l({message:e.responseJSON.message})}})},agregarLiga:function(e){t("#select-liga").append(t("<option>",{value:e.get("id"),text:e.get("nombre")}))},syncLigas:function(){t("#select-liga").change()}})});var dateFormat=function(){var t=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,e=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,i=/[^-+\dA-Z]/g,n=function(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t};return function(o,s,r){var a=dateFormat;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(o)||/\d/.test(o)||(s=o,o=void 0),o=o?new Date(o):new Date,isNaN(o))throw SyntaxError("invalid date");s=String(a.masks[s]||s||a.masks.default),"UTC:"==s.slice(0,4)&&(s=s.slice(4),r=!0);var l=r?"getUTC":"get",c=o[l+"Date"](),h=o[l+"Day"](),d=o[l+"Month"](),u=o[l+"FullYear"](),p=o[l+"Hours"](),f=o[l+"Minutes"](),g=o[l+"Seconds"](),v=o[l+"Milliseconds"](),m=r?0:o.getTimezoneOffset(),b={d:c,dd:n(c),ddd:a.i18n.dayNames[h],dddd:a.i18n.dayNames[h+7],m:d+1,mm:n(d+1),mmm:a.i18n.monthNames[d],mmmm:a.i18n.monthNames[d+12],yy:String(u).slice(2),yyyy:u,h:p%12||12,hh:n(p%12||12),H:p,HH:n(p),M:f,MM:n(f),s:g,ss:n(g),l:n(v,3),L:n(v>99?Math.round(v/10):v),t:p<12?"a":"p",tt:p<12?"am":"pm",T:p<12?"A":"P",TT:p<12?"AM":"PM",Z:r?"UTC":(String(o).match(e)||[""]).pop().replace(i,""),o:(m>0?"-":"+")+n(100*Math.floor(Math.abs(m)/60)+Math.abs(m)%60,4),S:["th","st","nd","rd"][c%10>3?0:(c%100-c%10!=10)*c%10]};return s.replace(t,function(t){return t in b?b[t]:t.slice(1,t.length-1)})}}();dateFormat.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},Date.prototype.format=function(t,e){return dateFormat(this,t,e)},define("dateformat",function(){}),define("core/BaseModel",["underscore","backbone"],function(t,e){return e.Model.extend({defaults:{},initialize:function(){t.each(this.attributes,function(e,i){this.set(i,t.escape(e))},this)}})}),define("models/TorneoModel",["backbone","dateformat","../core/BaseModel"],function(t,e,i){return i.extend({urlRoot:"torneo",defaults:{ligaId:"",nombre:"",descripcion:"",fechaInicio:(new Date).getTime(),fechaInicioDes:(new Date).format("mm/dd/yyyy"),fechaFin:(new Date).getTime(),fechaFinDes:(new Date).format("mm/dd/yyyy"),status:"ENPROCESO"},validation:{ligaId:{required:!0},nombre:{required:!0},descripcion:{required:!0},fechaInicio:{required:!0},fechaFin:{required:!0},status:{required:!0}}})}),define("collections/TorneosCollection",["backbone","models/TorneoModel"],function(t,e){return t.Collection.extend({model:e,url:function(){return null!=this.liga&&"undefined"!=this.liga?"liga/"+this.liga.get("id")+"/torneo":"torneo"},setLiga:function(t){this.liga=t}})}),define("models/TorneoEquipoModel",["backbone"],function(t){return t.Model.extend({urlRoot:"torneoequipo",defaults:{statusEquipo:"INSCRITO"},initialize:function(){},validate:function(t){return t.torneoId?t.equipoId?t.statusEquipo?void 0:"Debe tener un Status.":"Debe tener un Equipo.":"Debe tener un Torneo."}})}),define("collections/TorneoEquiposCollection",["backbone","models/TorneoEquipoModel"],function(t,e){return t.Collection.extend({model:e,url:function(){return"torneo/"+this.torneo.get("id")+"/equipo"},setTorneo:function(t){this.torneo=t}})}),define("models/EquipoModel",["backbone","../core/BaseModel"],function(t,e){return e.extend({urlRoot:"equipo",defaults:{nombre:"",aliasEquipo:"",logoEquipo:"novalid"},validation:{nombre:{required:!0},aliasEquipo:{required:!0},logoEquipo:{required:!0}}})}),define("collections/EquiposCollection",["backbone","models/EquipoModel"],function(t,e){return t.Collection.extend({model:e,url:function(){return"like"==this.tipo?"equipo/search/"+this.criterio:"equipo"},setTipo:function(t){this.tipo=t},setCriterio:function(t){this.criterio=t}})}),define("text!templates/private/tplEquipoSearch.html",[],function(){return'<div class="modal fade" id="equipo-search-dialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n                <h4 class="modal-title">Equipo</h4>\n            </div>\n            <div class="modal-body">\n                <p>Seleccione Equipo.</p>\n                <div class="alert alert-danger" role="alert"></div>\n                <div class="form-group">\n                    <input id="text-busqueda" type="text" class="form-control" placeholder="Buscar por..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">\n                    <div id="result-search" class="list-group">\n                    </div>\n                </div>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n                <button id="btn-aceptar" type="button" class="btn btn-success">Aceptar</button>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("views/private/EquipoSearchView",["jquery","bootstrap","core/BaseView","collections/EquiposCollection","text!templates/private/tplEquipoSearch.html"],function(t,e,i,n,o){return i.extend({el:"#modal-equipo-search",template:_.template(o),events:{"keydown #text-busqueda":"changeBuscar","click #btn-aceptar":"clickAceptar","click .list-group-item":"clickItemSearch"},initialize:function(t){this.callbackAceptar=t.callbackAceptar,this.model=t.modelo,this.render(),this.equipos=new n,this.listenTo(this.equipos,"add",this.agregarEquipo),this.listenTo(this.equipos,"sync",this.syncEquipos)},render:function(){this.$el.html(this.template()),this.$("#equipo-search-dialog").modal("show"),this.$(".alert-danger").hide()},agregarEquipo:function(t){},syncEquipos:function(){t("#result-search").html(""),this.equipos.forEach(function(e){var i="<a class='equipos list-group-item' id='"+e.get("id")+"'>"+e.get("nombre")+"</a>";t(i).appendTo("#result-search")})},changeBuscar:function(e){var i=t("#text-busqueda").val(),n=this.model.get("id");""!=i&&"undefined"!=i&&i.length>2&&(t("#result-search").html(""),this.equipos.setTipo("like"),this.equipos.setCriterio(i),this.equipos.fetch({data:{tipo:"notInTorneoAndContainName",idTorneo:n},processData:!0}))},clickAceptar:function(e){var i=t(".equipos.list-group-item.active").attr("id");if("undefined"==i||void 0==i||""==i)this.$(".alert-danger").show(),this.$(".alert-danger").html("Debe seleccionar un equipo");else{var n=this.equipos.get(i);this.callbackAceptar(n)}},clickItemSearch:function(e){t(".equipos.list-group-item").removeClass("active"),t(e.target).addClass("active")},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}})}),define("text!templates/private/tplRowTorneoEquipo.html",[],function(){return'<th><%= id %></th>\n<td><%= equipoNombre %></td>\n<td><%= statusEquipo %></td>\n<td>\n    <button id="eliminar-equipo" class="btn btn-primary btn-xs" value="<%= id %>">\n        <span class="glyphicon glyphicon-trash" aria-hidden="true" value="<%= id %>"></span>\n    </button>\n</td>'}),define("views/private/RowTorneoEquipoView",["jquery","underscore","core/BaseView","views/private/util/ModalGenericView","text!templates/private/tplRowTorneoEquipo.html"],function(t,e,i,n,o){return i.extend({template:e.template(o),tagName:"tr",events:{"click #eliminar-equipo":"deleteEquipo"},initialize:function(t){this.model=t},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},deleteEquipo:function(){that=this,this.model.destroy({contentType:"application/json",wait:!0,success:function(t,e){that.destroyView(),new n({message:e.message})},error:function(t,e){new n({message:e.responseJSON.message})}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}})}),define("text!templates/private/tplTorneoEquipoAdmin.html",[],function(){return'<div class="row">\n    <div class="col-md-12">\n        <table id="torneo-equipos" class="table table-condensed">\n            <thead>\n            <tr>\n                <th>#</th>\n                <th>Equipo</th>\n                <th>Status</th>\n                <th></th>\n            </tr>\n            </thead>\n            <tbody>\n            </tbody>\n            <div id="modal-equipo-search">\n            </div>\n        </table>\n    </div>\n</div>\n<div class="row">\n    <div class="col-md-12">\n        <div class="btn-group-horizontal" role="group" aria-label="...">\n            <button id="equipo-agregar" type="button" class="btn btn-primary">Agregar</button>\n        </div>\n    </div>\n</div>'}),define("views/private/TorneoEquipoAdminView",["jquery","backbone","core/BaseView","models/TorneoEquipoModel","collections/TorneoEquiposCollection","views/private/EquipoSearchView","views/private/RowTorneoEquipoView","text!templates/private/tplTorneoEquipoAdmin.html"],function(t,e,i,n,o,s,r,a){return i.extend({template:_.template(a),events:{"click #equipo-agregar":"agregarEquipo"},initialize:function(){app.torneoequipos=new o,app.torneoequipos.setTorneo(this.model),this.listenTo(app.torneoequipos,"add",this.agregarTorneoEquipo),this.listenTo(app.torneoequipos,"sync",this.syncTorneoEquipos),app.torneoequipos.fetch()},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},agregarTorneoEquipo:function(e){var i=new r(e);t("#torneo-equipos").find("tbody:last").append(i.render().$el)},syncTorneoEquipos:function(){},agregarEquipo:function(){this.equipoSearchView=new s({modelo:this.model,callbackAceptar:this.selectEquipo})},selectEquipo:function(e){this.destroyView(),t("<div id='modal-equipo-search'></div>").appendTo("#torneo-equipos"),(new n).save({torneoId:this.model.get("id"),equipoId:e.get("id")},{wait:!0,success:function(t,e){app.torneoequipos.add(t)},error:function(t,e){console.log(t.toJSON()),console.log("error.responseText")}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this)}})}),define("models/TorneoJugadorModel",["backbone"],function(t){return t.Model.extend({urlRoot:"torneojugador",defaults:{torneoEquipoId:"",jugadorId:"",jugadorNombre:"",numeroJugador:"",posicionJugador:"BASE",statusJugador:"INSCRITO"},initialize:function(){},validation:{torneoEquipoId:{required:!0},jugadorId:{required:!0},jugadorNombre:{required:!1},statusJugador:{required:!0},posicionJugador:{required:!0},numeroJugador:{required:!0}}})}),define("collections/TorneoJugadoresCollection",["backbone","models/TorneoJugadorModel"],function(t,e){return t.Collection.extend({model:e,url:function(){return"torneoequipo/"+this.torneoEquipo.get("id")+"/jugador"},setTorneoEquipo:function(t){this.torneoEquipo=t}})}),define("models/JugadorModel",["backbone","../core/BaseModel"],function(t,e){return e.extend({urlRoot:"jugador",defaults:{nombre:"",paterno:"",materno:"",sexo:"FEMENINO",logoJugador:"novalid",fechaRegistro:(new Date).getTime(),calle:"",noExterior:"",noInterior:"",codigoPostal:"",coloniaId:"",coloniaDesc:"",municipioDesc:"",estadoDesc:"",paisDesc:"",longitude:"",latitude:""},validation:{nombre:{required:!0},paterno:{required:!0},materno:{required:!0},sexo:{required:!0},logoJugador:{required:!0},fechaRegistro:{required:!0},calle:{required:!0},noExterior:{required:!0},noInterior:{required:!1},codigoPostal:{required:!0},coloniaId:{required:!0},longitude:{required:!1},latitude:{required:!1}}})}),
define("collections/JugadoresCollection",["backbone","models/JugadorModel"],function(t,e){return t.Collection.extend({model:e,url:function(){return"like"==this.tipo?"jugador/search/"+this.criterio:"jugador"},setTipo:function(t){this.tipo=t},setCriterio:function(t){this.criterio=t}})}),define("models/FaseModel",["underscore","backbone"],function(t,e){return e.Model.extend({urlRoot:"fase",defaults:{clave:"",descripcion:""},initialize:function(){},validation:{clave:{required:!0},descripcion:{required:!0}}})}),define("collections/PosicionesCollection",["backbone","models/FaseModel"],function(t,e){return t.Collection.extend({model:e,url:"posicion"})}),define("text!templates/private/tplJugadorSearch.html",[],function(){return'<div class="modal fade" id="jugador-search-dialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n                <h4 class="modal-title">Jugador</h4>\n            </div>\n            <div class="modal-body">\n                <p>Seleccione Jugador.</p>\n                <div class="alert alert-danger" role="alert"></div>\n                <form id="form-torneo-jugador" role="form">\n                <input id="torneo-liga-id" type="hidden" name="torneoEquipoId" value="<%= torneoEquipoId %>">\n                <input id="jugador-id" type="hidden" name="jugadorId" value="<%= jugadorId %>">\n                <div class="row">\n                    <div class="col-xs-6">\n                        <div class="form-group">\n                            <label>Numero</label>\n                            <input class="form-control" placeholder="Numero" type="text" name="numeroJugador" value="<%= numeroJugador %>">\n                        </div>\n                    </div>\n                    <div class="col-xs-6">\n                        <div class="form-group">\n                            <label>Posicion</label>\n                            <select class="form-control" id="select-posicion" placeholder="Posicion..." name="posicionJugador" value="<%= posicionJugador %>">\n                            </select>\n                        </div>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="col-xs-12">\n                        <div class="form-group">\n                            <input id="text-busqueda" type="text" class="form-control" placeholder="Buscar por..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">\n                            <div id="result-search" class="list-group">\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                </form>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n                <button id="btn-aceptar" type="button" class="btn btn-success">Aceptar</button>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("views/private/JugadorSearchView",["jquery","backbone","bootstrap","core/BaseView","models/TorneoJugadorModel","collections/JugadoresCollection","collections/PosicionesCollection","views/private/util/ModalGenericView","text!templates/private/tplJugadorSearch.html"],function(t,e,i,n,o,s,r,a,l){return n.extend({el:"#modal-jugador-search",template:_.template(l),events:{"keydown #text-busqueda":"changeBuscar","click #btn-aceptar":"clickAceptar","click .list-group-item":"clickItemSearch"},initialize:function(t){this.callbackAceptar=t.callbackAceptar,this.model=new o,this.torneoEquipo=t.modelo,this.render(),this.jugadores=new s,this.listenTo(this.jugadores,"add",this.agregarJugador),this.listenTo(this.jugadores,"sync",this.syncJugadores),this.posiciones=new r,this.listenTo(this.posiciones,"add",this.agregarPosicion),this.listenTo(this.posiciones,"sync",this.syncPosiciones),this.posiciones.fetch(),e.Validation.bind(this)},render:function(){this.$el.html(this.template(this.model.toJSON())),this.$("#jugador-search-dialog").modal("show"),this.$(".alert-danger").hide(),this.$("#torneo-liga-id").val(this.torneoEquipo.get("id"))},agregarJugador:function(t){},syncJugadores:function(){t("#result-search").html(""),this.jugadores.forEach(function(e){var i="<a class='list-group-item' id='"+e.get("id")+"'>"+e.get("nombre")+" "+e.get("paterno")+" "+e.get("materno")+"</a>";t(i).appendTo("#result-search")})},agregarPosicion:function(e){t("#select-posicion").append(t("<option>",{value:e.get("clave"),text:e.get("descripcion")}))},syncPosiciones:function(e){t("#select-posicion").change()},changeBuscar:function(e){var i=t(e.target).val(),n=this.torneoEquipo.get("torneoId");""!=i&&"undefined"!=i&&i.length>2&&(t("#result-search").html(""),this.jugadores.setTipo("like"),this.jugadores.setCriterio(i),this.jugadores.fetch({data:{tipo:"notInTorneoAndContainName",idTorneo:n},processData:!0}))},clickAceptar:function(t){var e=this.$el.find("#form-torneo-jugador").serializeObject();this.model.set(e),that=this,this.model.isValid(!0)&&this.model.save({},{wait:!0,success:function(t,e){new a({message:"Jugador registrado correctamente"}),that.callbackAceptar(t)},error:function(t,e){new a({message:"Se presento un error al registrar el jugador"})}})},clickItemSearch:function(e){t(".list-group-item").removeClass("active"),t(e.target).addClass("active");var i=t(".list-group-item.active").attr("id");this.$("#jugador-id").val(i)},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this)}})}),define("text!templates/private/tplRowTorneoJugador.html",[],function(){return'<th><%= numeroJugador %></th>\n<td><%= jugadorNombre %></td>\n<td><%= posicionJugador %></td>\n<td><%= statusJugador %></td>\n<td>\n    <button id="eliminar-jugador" class="btn btn-primary btn-xs" value="<%= id %>">\n        <span class="glyphicon glyphicon-trash" aria-hidden="true" value="<%= id %>"></span>\n    </button>\n</td>'}),define("views/private/RowTorneoJugadorView",["jquery","underscore","core/BaseView","views/private/util/ModalGenericView","text!templates/private/tplRowTorneoJugador.html"],function(t,e,i,n,o){return i.extend({template:e.template(o),tagName:"tr",events:{"click #eliminar-jugador":"deleteJugador"},initialize:function(t){this.model=t},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},deleteJugador:function(){that=this,this.model.destroy({contentType:"application/json",wait:!0,success:function(t,e){that.destroyView(),new n({message:e.message})},error:function(t,e){new n({message:e.responseJSON.message})}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}})}),define("text!templates/private/tplTorneoJugadorAdmin.html",[],function(){return'<div class="row">\n    <div class="col-md-12">\n        <div class="form-group">\n            <select class="form-control" id="select-torneo-equipo" placeholder="Equipo...">\n            </select>\n        </div>\n        <table id="torneo-jugadores" class="table table-condensed">\n            <thead>\n            <tr>\n                <th>#</th>\n                <th>Jugador</th>\n                <th>Posicion</th>\n                <th>Status</th>\n                <th></th>\n            </tr>\n            </thead>\n            <tbody>\n            </tbody>\n            <div id="modal-jugador-search">\n            </div>\n        </table>\n    </div>\n</div>\n<div class="row">\n    <div class="col-md-12">\n        <div class="btn-group-horizontal" role="group" aria-label="...">\n            <button id="jugador-agregar" type="button" class="btn btn-primary">Agregar</button>\n        </div>\n    </div>\n</div>'}),define("views/private/TorneoJugadorAdminView",["jquery","backbone","core/BaseView","models/TorneoJugadorModel","collections/TorneoJugadoresCollection","collections/TorneoEquiposCollection","views/private/JugadorSearchView","views/private/RowTorneoJugadorView","text!templates/private/tplTorneoJugadorAdmin.html"],function(t,e,i,n,o,s,r,a,l){return i.extend({template:_.template(l),events:{"click #jugador-agregar":"agregarJugador","change #select-torneo-equipo":"changeEquipo"},initialize:function(){this.torneoequipos=new s,this.torneoequipos.setTorneo(this.model),this.listenTo(this.torneoequipos,"add",this.agregarTorneoEquipo),this.listenTo(this.torneoequipos,"sync",this.syncTorneoEquipos),this.torneoequipos.fetch(),app.torneojugadores=new o,this.listenTo(app.torneojugadores,"add",this.agregarTorneoJugador),this.listenTo(app.torneojugadores,"sync",this.syncTorneoJugadores)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},agregarTorneoEquipo:function(e){t("#select-torneo-equipo").append(t("<option>",{value:e.get("id"),text:e.get("equipoNombre")}))},syncTorneoEquipos:function(){t("#select-torneo-equipo").change()},changeEquipo:function(e){var i=this.torneoequipos.get(t(e.target).val());void 0!==i&&(this.torneoEquipo=i,t("#torneo-jugadores").find("tbody").html(""),app.torneojugadores.setTorneoEquipo(this.torneoEquipo),app.torneojugadores.fetch())},agregarTorneoJugador:function(e){var i=new a(e);t("#torneo-jugadores").find("tbody:last").append(i.render().$el)},syncTorneoJugadores:function(){},agregarJugador:function(){this.jugadorSearchView=new r({modelo:this.torneoEquipo,callbackAceptar:this.selectJugador})},selectJugador:function(e){this.destroyView(),t("<div id='modal-jugador-search'></div>").appendTo("#torneo-jugadores"),app.torneojugadores.add(e)},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this)}})}),define("models/TorneoJornadaModel",["backbone","../core/BaseModel"],function(t,e){return e.extend({urlRoot:"torneojornada",defaults:{torneoId:"",nombre:"",fase:"REGULAR"},validation:{torneoId:{required:!0},nombre:{required:!0},fase:{required:!0}}})}),define("collections/TorneoJornadasCollection",["backbone","models/TorneoJornadaModel"],function(t,e){return t.Collection.extend({model:e,url:function(){return"torneo/"+this.torneo.get("id")+"/jornada"},setTorneo:function(t){this.torneo=t}})}),define("collections/FasesCollection",["backbone","models/FaseModel"],function(t,e){return t.Collection.extend({model:e,url:"fase"})}),define("text!templates/private/tplJornadaNew.html",[],function(){return'<div class="modal fade" id="jornada-new-dialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n                <h4 class="modal-title">Jornada</h4>\n            </div>\n            <div class="modal-body">\n                <div class="alert alert-danger" role="alert"></div>\n                <form id="form-torneo-jornada" role="form">\n                <input id="torneo-liga-id" type="hidden" name="torneoId" value="<%= torneoId %>">\n                <div class="row">\n                    <div class="col-xs-6">\n                        <div class="form-group">\n                            <label>Nombre</label>\n                            <input class="form-control" placeholder="Nombre" type="text" name="nombre" value="<%= nombre %>">\n                        </div>\n                    </div>\n                    <div class="col-xs-6">\n                        <div class="form-group">\n                            <label>Fase</label>\n                            <select class="form-control" id="select-fase" placeholder="Fase..." name="fase" value="<%= fase %>">\n                            </select>\n                        </div>\n                    </div>\n                </div>\n                </form>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n                <button id="btn-aceptar" type="button" class="btn btn-success">Aceptar</button>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("views/private/JornadaNewView",["jquery","backbone","bootstrap","core/BaseView","models/TorneoJornadaModel","collections/FasesCollection","views/private/util/ModalGenericView","text!templates/private/tplJornadaNew.html"],function(t,e,i,n,o,s,r,a){return n.extend({el:"#modal-jornada-new",template:_.template(a),events:{"click #btn-aceptar":"clickAceptar"},initialize:function(t){this.callbackAceptar=t.callbackAceptar,this.model=new o,this.torneo=t.modelo,this.render(),this.fases=new s,this.listenTo(this.fases,"add",this.agregarFase),this.listenTo(this.fases,"sync",this.syncFases),this.fases.fetch(),e.Validation.bind(this)},render:function(){this.$el.html(this.template(this.model.toJSON())),this.$("#jornada-new-dialog").modal("show"),this.$(".alert-danger").hide(),this.$("#torneo-liga-id").val(this.torneo.get("id"))},agregarFase:function(e){t("#select-fase").append(t("<option>",{value:e.get("clave"),text:e.get("descripcion")}))},syncFases:function(e){t("#select-fase").change()},clickAceptar:function(t){var e=this.$el.find("#form-torneo-jornada").serializeObject();for(var i in e)console.log(i),e.hasOwnProperty(i)&&(e[i]=_.escape(e[i]));this.model.set(e),that=this,this.model.isValid(!0)&&this.model.save({},{wait:!0,success:function(t,e){new r({message:"Jornada registrada correctamente"}),that.callbackAceptar(t)},error:function(t,e){new r({message:"Se presento un error al registrar la jornada"})}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this)}})}),define("text!templates/private/tplRowTorneoJornada.html",[],function(){return'<th><%= id %></th>\n<td><%= nombre %></td>\n<td><%= fase %></td>\n<td>\n    <button id="eliminar-jornada" class="btn btn-primary btn-xs" value="<%= id %>">\n        <span class="glyphicon glyphicon-trash" aria-hidden="true" value="<%= id %>"></span>\n    </button>\n</td>'}),define("views/private/RowTorneoJornadaView",["jquery","underscore","core/BaseView","views/private/util/ModalGenericView","text!templates/private/tplRowTorneoJornada.html"],function(t,e,i,n,o){return i.extend({template:e.template(o),tagName:"tr",events:{"click #eliminar-jornada":"deleteJornada"},initialize:function(t){this.model=t},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},deleteJornada:function(){that=this,this.model.destroy({wait:!0,success:function(t,e){that.destroyView(),new n({message:e.message})},error:function(t,e){new n({message:e.responseJSON.message})}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}})}),define("text!templates/private/tplTorneoJornadaAdmin.html",[],function(){return'<div class="row">\n    <div class="col-md-12">\n        <table id="torneo-jornadas" class="table table-condensed">\n            <thead>\n            <tr>\n                <th>#</th>\n                <th>Nombre</th>\n                <th>Fase</th>\n                <th></th>\n            </tr>\n            </thead>\n            <tbody>\n            </tbody>\n            <div id="modal-jornada-new">\n            </div>\n        </table>\n    </div>\n</div>\n<div class="row">\n    <div class="col-md-12">\n        <div class="btn-group-horizontal" role="group" aria-label="...">\n            <button id="jornada-agregar" type="button" class="btn btn-primary">Agregar</button>\n        </div>\n    </div>\n</div>'}),define("views/private/TorneoJornadaAdminView",["jquery","backbone","core/BaseView","models/TorneoJornadaModel","collections/TorneoJornadasCollection","views/private/JornadaNewView","views/private/RowTorneoJornadaView","text!templates/private/tplTorneoJornadaAdmin.html"],function(t,e,i,n,o,s,r,a){return i.extend({template:_.template(a),events:{"click #jornada-agregar":"agregarJornada"},initialize:function(){app.torneojornadas=new o,app.torneojornadas.setTorneo(this.model),this.listenTo(app.torneojornadas,"add",this.agregarTorneoJornada),this.listenTo(app.torneojornadas,"sync",this.syncTorneoJornadas),app.torneojornadas.fetch()},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},agregarTorneoJornada:function(e){var i=new r(e);t("#torneo-jornadas").find("tbody:last").append(i.render().$el)},syncTorneoJornadas:function(){},agregarJornada:function(){this.jornadaNewView=new s({modelo:this.model,callbackAceptar:this.selectJornada})},selectJornada:function(e){this.destroyView(),t("<div id='modal-jornada-new'></div>").appendTo("#torneo-jornadas"),app.torneojornadas.add(e)},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this)}})}),define("models/TorneoPartidoModel",["backbone","dateformat"],function(t,e){return t.Model.extend({urlRoot:"torneopartido",defaults:{torneoId:"",jornadaId:"",localId:"",localNombre:"",localAlias:"",localPuntos:0,localColor:"",visitaId:"",visitaNombre:"",visitaNombre:"",visitaPuntos:0,visitaColor:"",canchaId:"",canchaNombre:"",canchaDomicilio:"",horario:(new Date).getTime(),horarioDes:(new Date).format("mm/dd/yyyy HH:MM"),statusPartido:"PROGRAMADO"},initialize:function(){},validation:{torneoId:{required:!1},jornadaId:{required:!0},localId:{required:!0},localNombre:{required:!1},localAlias:{required:!1},localPuntos:{required:!1},localColor:{required:!1},visitaId:{required:!0},visitaNombre:{required:!1},visitaAlias:{required:!1},visitaPuntos:{required:!1},visitaColor:{required:!1},canchaId:{required:!0},canchaNombre:{required:!1},canchaDomicilio:{required:!1},horario:{required:!0},horarioDes:{required:!1},statusPartido:{required:!0}}})}),define("collections/TorneoPartidosCollection",["backbone","models/TorneoPartidoModel"],function(t,e){return t.Collection.extend({model:e,url:function(){return"torneojornada/"+this.torneoJornada.get("id")+"/partido"},setTorneoJornada:function(t){this.torneoJornada=t}})}),define("text!templates/private/tplRowTorneoPartido.html",[],function(){return'<th><%= id %></th>\n<td><%= localNombre %></td>\n<td><%= visitaNombre %></td>\n<td><%= horarioDes %></td>\n<td><%= canchaNombre %></td>\n<td>\n    <a id="editar-partido" class="btn btn-primary btn-xs" href="#admin/partido/<%= id %>">\n        <span class="glyphicon glyphicon-pencil" aria-hidden="true" value="<%= id %>"></span>\n    </a>\n</td>\n<td>\n    <button id="eliminar-partido" class="btn btn-primary btn-xs" value="<%= id %>">\n        <span class="glyphicon glyphicon-trash" aria-hidden="true" value="<%= id %>"></span>\n    </button>\n</td>'}),define("views/private/RowTorneoPartidoView",["jquery","underscore","core/BaseView","views/private/util/ModalGenericView","text!templates/private/tplRowTorneoPartido.html"],function(t,e,i,n,o){return i.extend({template:e.template(o),tagName:"tr",events:{"click #eliminar-partido":"deletePartido"},initialize:function(t){this.model=t},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},deletePartido:function(){that=this,this.model.destroy({contentType:"application/json",wait:!0,success:function(t,e){that.destroyView(),new n({message:e.message})},error:function(t,e){new n({message:e.responseJSON.message})}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}})}),function(t){function e(e){var i=t(e),n=i.add(i.parents()),o=!1;return n.each(function(){if("fixed"===t(this).css("position"))return o=!0,!1}),o}function i(){return new Date(Date.UTC.apply(Date,arguments))}"indexOf"in Array.prototype||(Array.prototype.indexOf=function(t,e){void 0===e&&(e=0),e<0&&(e+=this.length),e<0&&(e=0);for(var i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1});var n=function(e,i){var n=this;this.element=t(e),this.container=i.container||"body",this.language=i.language||this.element.data("date-language")||"en",this.language=this.language in s?this.language:"en",this.isRTL=s[this.language].rtl||!1,this.formatType=i.formatType||this.element.data("format-type")||"standard",this.format=r.parseFormat(i.format||this.element.data("date-format")||s[this.language].format||r.getDefaultFormat(this.formatType,"input"),this.formatType),this.isInline=!1,this.isVisible=!1,this.isInput=this.element.is("input"),this.fontAwesome=i.fontAwesome||this.element.data("font-awesome")||!1,this.bootcssVer=i.bootcssVer||(this.isInput?this.element.is(".form-control")?3:2:this.bootcssVer=this.element.is(".input-group")?3:2),this.component=!!this.element.is(".date")&&(3==this.bootcssVer?this.element.find(".input-group-addon .glyphicon-th, .input-group-addon .glyphicon-time, .input-group-addon .glyphicon-calendar, .input-group-addon .glyphicon-calendar, .input-group-addon .fa-calendar, .input-group-addon .fa-clock-o").parent():this.element.find(".add-on .icon-th, .add-on .icon-time, .add-on .icon-calendar .fa-calendar .fa-clock-o").parent()),this.componentReset=!!this.element.is(".date")&&(3==this.bootcssVer?this.element.find(".input-group-addon .glyphicon-remove, .input-group-addon .fa-times").parent():this.element.find(".add-on .icon-remove, .add-on .fa-times").parent()),this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.linkField=i.linkField||this.element.data("link-field")||!1,this.linkFormat=r.parseFormat(i.linkFormat||this.element.data("link-format")||r.getDefaultFormat(this.formatType,"link"),this.formatType),this.minuteStep=i.minuteStep||this.element.data("minute-step")||5,this.pickerPosition=i.pickerPosition||this.element.data("picker-position")||"bottom-right",this.showMeridian=i.showMeridian||this.element.data("show-meridian")||!1,this.initialDate=i.initialDate||new Date,this.zIndex=i.zIndex||this.element.data("z-index")||void 0,this.icons={leftArrow:this.fontAwesome?"fa-arrow-left":3===this.bootcssVer?"glyphicon-arrow-left":"icon-arrow-left",rightArrow:this.fontAwesome?"fa-arrow-right":3===this.bootcssVer?"glyphicon-arrow-right":"icon-arrow-right"},this.icontype=this.fontAwesome?"fa":"glyphicon",this._attachEvents(),this.formatViewType="datetime","formatViewType"in i?this.formatViewType=i.formatViewType:"formatViewType"in this.element.data()&&(this.formatViewType=this.element.data("formatViewType")),this.minView=0,"minView"in i?this.minView=i.minView:"minView"in this.element.data()&&(this.minView=this.element.data("min-view")),this.minView=r.convertViewMode(this.minView),this.maxView=r.modes.length-1,"maxView"in i?this.maxView=i.maxView:"maxView"in this.element.data()&&(this.maxView=this.element.data("max-view")),this.maxView=r.convertViewMode(this.maxView),this.wheelViewModeNavigation=!1,"wheelViewModeNavigation"in i?this.wheelViewModeNavigation=i.wheelViewModeNavigation:"wheelViewModeNavigation"in this.element.data()&&(this.wheelViewModeNavigation=this.element.data("view-mode-wheel-navigation")),this.wheelViewModeNavigationInverseDirection=!1,"wheelViewModeNavigationInverseDirection"in i?this.wheelViewModeNavigationInverseDirection=i.wheelViewModeNavigationInverseDirection:"wheelViewModeNavigationInverseDirection"in this.element.data()&&(this.wheelViewModeNavigationInverseDirection=this.element.data("view-mode-wheel-navigation-inverse-dir")),this.wheelViewModeNavigationDelay=100,"wheelViewModeNavigationDelay"in i?this.wheelViewModeNavigationDelay=i.wheelViewModeNavigationDelay:"wheelViewModeNavigationDelay"in this.element.data()&&(this.wheelViewModeNavigationDelay=this.element.data("view-mode-wheel-navigation-delay")),this.startViewMode=2,"startView"in i?this.startViewMode=i.startView:"startView"in this.element.data()&&(this.startViewMode=this.element.data("start-view")),this.startViewMode=r.convertViewMode(this.startViewMode),this.viewMode=this.startViewMode,this.viewSelect=this.minView,"viewSelect"in i?this.viewSelect=i.viewSelect:"viewSelect"in this.element.data()&&(this.viewSelect=this.element.data("view-select")),this.viewSelect=r.convertViewMode(this.viewSelect),this.forceParse=!0,"forceParse"in i?this.forceParse=i.forceParse:"dateForceParse"in this.element.data()&&(this.forceParse=this.element.data("date-force-parse"));for(var o=3===this.bootcssVer?r.templateV3:r.template;-1!==o.indexOf("{iconType}");)o=o.replace("{iconType}",this.icontype);for(;-1!==o.indexOf("{leftArrow}");)o=o.replace("{leftArrow}",this.icons.leftArrow);for(;-1!==o.indexOf("{rightArrow}");)o=o.replace("{rightArrow}",this.icons.rightArrow);if(this.picker=t(o).appendTo(this.isInline?this.element:this.container).on({click:t.proxy(this.click,this),mousedown:t.proxy(this.mousedown,this)}),this.wheelViewModeNavigation&&(t.fn.mousewheel?this.picker.on({mousewheel:t.proxy(this.mousewheel,this)}):console.log("Mouse Wheel event is not supported. Please include the jQuery Mouse Wheel plugin before enabling this option")),this.isInline?this.picker.addClass("datetimepicker-inline"):this.picker.addClass("datetimepicker-dropdown-"+this.pickerPosition+" dropdown-menu"),this.isRTL){this.picker.addClass("datetimepicker-rtl");var a=3===this.bootcssVer?".prev span, .next span":".prev i, .next i";this.picker.find(a).toggleClass(this.icons.leftArrow+" "+this.icons.rightArrow)}t(document).on("mousedown",function(e){0===t(e.target).closest(".datetimepicker").length&&n.hide()}),this.autoclose=!1,"autoclose"in i?this.autoclose=i.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose")),this.keyboardNavigation=!0,"keyboardNavigation"in i?this.keyboardNavigation=i.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation")),this.todayBtn=i.todayBtn||this.element.data("date-today-btn")||!1,this.todayHighlight=i.todayHighlight||this.element.data("date-today-highlight")||!1,this.weekStart=(i.weekStart||this.element.data("date-weekstart")||s[this.language].weekStart||0)%7,this.weekEnd=(this.weekStart+6)%7,this.startDate=-1/0,this.endDate=1/0,this.daysOfWeekDisabled=[],this.setStartDate(i.startDate||this.element.data("date-startdate")),this.setEndDate(i.endDate||this.element.data("date-enddate")),this.setDaysOfWeekDisabled(i.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled")),this.setMinutesDisabled(i.minutesDisabled||this.element.data("date-minute-disabled")),this.setHoursDisabled(i.hoursDisabled||this.element.data("date-hour-disabled")),this.fillDow(),this.fillMonths(),this.update(),this.showMode(),this.isInline&&this.show()};n.prototype={constructor:n,_events:[],_attachEvents:function(){this._detachEvents(),this.isInput?this._events=[[this.element,{focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}]]:this.component&&this.hasInput?(this._events=[[this.element.find("input"),{focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}],[this.component,{click:t.proxy(this.show,this)}]],this.componentReset&&this._events.push([this.componentReset,{click:t.proxy(this.reset,this)}])):this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:t.proxy(this.show,this)}]];for(var e,i,n=0;n<this._events.length;n++)e=this._events[n][0],i=this._events[n][1],e.on(i)},_detachEvents:function(){for(var t,e,i=0;i<this._events.length;i++)t=this._events[i][0],e=this._events[i][1],t.off(e);this._events=[]},show:function(e){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.forceParse&&this.update(),this.place(),t(window).on("resize",t.proxy(this.place,this)),e&&(e.stopPropagation(),e.preventDefault()),this.isVisible=!0,this.element.trigger({type:"show",date:this.date})},hide:function(e){this.isVisible&&(this.isInline||(this.picker.hide(),t(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||t(document).off("mousedown",this.hide),this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this.isVisible=!1,this.element.trigger({type:"hide",date:this.date})))},remove:function(){this._detachEvents(),this.picker.remove(),delete this.picker,delete this.element.data().datetimepicker},getDate:function(){var t=this.getUTCDate();return new Date(t.getTime()+6e4*t.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(t){this.setUTCDate(new Date(t.getTime()-6e4*t.getTimezoneOffset()))},setUTCDate:function(t){t>=this.startDate&&t<=this.endDate?(this.date=t,this.setValue(),this.viewDate=this.date,this.fill()):this.element.trigger({type:"outOfRange",date:t,startDate:this.startDate,endDate:this.endDate})},setFormat:function(t){this.format=r.parseFormat(t,this.formatType);var e;this.isInput?e=this.element:this.component&&(e=this.element.find("input")),e&&e.val()&&this.setValue()},setValue:function(){var e=this.getFormattedDate();this.isInput?this.element.val(e):(this.component&&this.element.find("input").val(e),this.element.data("date",e)),this.linkField&&t("#"+this.linkField).val(this.getFormattedDate(this.linkFormat))},getFormattedDate:function(t){return void 0==t&&(t=this.format),r.formatDate(this.date,t,this.language,this.formatType)},setStartDate:function(t){this.startDate=t||-1/0,this.startDate!==-1/0&&(this.startDate=r.parseDate(this.startDate,this.format,this.language,this.formatType)),this.update(),this.updateNavArrows()},setEndDate:function(t){this.endDate=t||1/0,this.endDate!==1/0&&(this.endDate=r.parseDate(this.endDate,this.format,this.language,this.formatType)),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(e){this.daysOfWeekDisabled=e||[],t.isArray(this.daysOfWeekDisabled)||(this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)),this.daysOfWeekDisabled=t.map(this.daysOfWeekDisabled,function(t){return parseInt(t,10)}),this.update(),this.updateNavArrows()},setMinutesDisabled:function(e){this.minutesDisabled=e||[],t.isArray(this.minutesDisabled)||(this.minutesDisabled=this.minutesDisabled.split(/,\s*/)),this.minutesDisabled=t.map(this.minutesDisabled,function(t){return parseInt(t,10)}),this.update(),this.updateNavArrows()},setHoursDisabled:function(e){this.hoursDisabled=e||[],t.isArray(this.hoursDisabled)||(this.hoursDisabled=this.hoursDisabled.split(/,\s*/)),this.hoursDisabled=t.map(this.hoursDisabled,function(t){return parseInt(t,10)}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){if(!this.zIndex){var i=0;t("div").each(function(){var e=parseInt(t(this).css("zIndex"),10);e>i&&(i=e)}),this.zIndex=i+10}var n,o,s,r;r=this.container instanceof t?this.container.offset():t(this.container).offset(),this.component?(n=this.component.offset(),s=n.left,"bottom-left"!=this.pickerPosition&&"top-left"!=this.pickerPosition||(s+=this.component.outerWidth()-this.picker.outerWidth())):(n=this.element.offset(),s=n.left),s+220>document.body.clientWidth&&(s=document.body.clientWidth-220),o="top-left"==this.pickerPosition||"top-right"==this.pickerPosition?n.top-this.picker.outerHeight():n.top+this.height,o-=r.top,s-=r.left,e(this.element)||(o+=document.body.scrollTop),this.picker.css({top:o,left:s,zIndex:this.zIndex})}},update:function(){var t,e=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(t=arguments[0],e=!0):("string"==typeof(t=(this.isInput?this.element.val():this.element.find("input").val())||this.element.data("date")||this.initialDate)||t instanceof String)&&(t=t.replace(/^\s+|\s+$/g,"")),t||(t=new Date,e=!1),this.date=r.parseDate(t,this.format,this.language,this.formatType),
e&&this.setValue(),this.date<this.startDate?this.viewDate=new Date(this.startDate):this.date>this.endDate?this.viewDate=new Date(this.endDate):this.viewDate=new Date(this.date),this.fill()},fillDow:function(){for(var t=this.weekStart,e="<tr>";t<this.weekStart+7;)e+='<th class="dow">'+s[this.language].daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datetimepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;e<12;)t+='<span class="month">'+s[this.language].monthsShort[e++]+"</span>";this.picker.find(".datetimepicker-months td").html(t)},fill:function(){if(null!=this.date&&null!=this.viewDate){var e=new Date(this.viewDate),n=e.getUTCFullYear(),o=e.getUTCMonth(),a=e.getUTCDate(),l=e.getUTCHours(),c=e.getUTCMinutes(),h=this.startDate!==-1/0?this.startDate.getUTCFullYear():-1/0,d=this.startDate!==-1/0?this.startDate.getUTCMonth()+1:-1/0,u=this.endDate!==1/0?this.endDate.getUTCFullYear():1/0,p=this.endDate!==1/0?this.endDate.getUTCMonth()+1:1/0,f=new i(this.date.getUTCFullYear(),this.date.getUTCMonth(),this.date.getUTCDate()).valueOf(),g=new Date;if(this.picker.find(".datetimepicker-days thead th:eq(1)").text(s[this.language].months[o]+" "+n),"time"==this.formatViewType){var v=this.getFormattedDate();this.picker.find(".datetimepicker-hours thead th:eq(1)").text(v),this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(v)}else this.picker.find(".datetimepicker-hours thead th:eq(1)").text(a+" "+s[this.language].months[o]+" "+n),this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(a+" "+s[this.language].months[o]+" "+n);this.picker.find("tfoot th.today").text(s[this.language].today).toggle(!1!==this.todayBtn),this.updateNavArrows(),this.fillMonths();var m=i(n,o-1,28,0,0,0,0),b=r.getDaysInMonth(m.getUTCFullYear(),m.getUTCMonth());m.setUTCDate(b),m.setUTCDate(b-(m.getUTCDay()-this.weekStart+7)%7);var y=new Date(m);y.setUTCDate(y.getUTCDate()+42),y=y.valueOf();for(var w,x=[];m.valueOf()<y;)m.getUTCDay()==this.weekStart&&x.push("<tr>"),w="",m.getUTCFullYear()<n||m.getUTCFullYear()==n&&m.getUTCMonth()<o?w+=" old":(m.getUTCFullYear()>n||m.getUTCFullYear()==n&&m.getUTCMonth()>o)&&(w+=" new"),this.todayHighlight&&m.getUTCFullYear()==g.getFullYear()&&m.getUTCMonth()==g.getMonth()&&m.getUTCDate()==g.getDate()&&(w+=" today"),m.valueOf()==f&&(w+=" active"),(m.valueOf()+864e5<=this.startDate||m.valueOf()>this.endDate||-1!==t.inArray(m.getUTCDay(),this.daysOfWeekDisabled))&&(w+=" disabled"),x.push('<td class="day'+w+'">'+m.getUTCDate()+"</td>"),m.getUTCDay()==this.weekEnd&&x.push("</tr>"),m.setUTCDate(m.getUTCDate()+1);this.picker.find(".datetimepicker-days tbody").empty().append(x.join("")),x=[];for(var C="",_="",T="",S=this.hoursDisabled||[],k=0;k<24;k++)if(-1===S.indexOf(k)){var E=i(n,o,a,k);w="",E.valueOf()+36e5<=this.startDate||E.valueOf()>this.endDate?w+=" disabled":l==k&&(w+=" active"),this.showMeridian&&2==s[this.language].meridiem.length?(_=k<12?s[this.language].meridiem[0]:s[this.language].meridiem[1],_!=T&&(""!=T&&x.push("</fieldset>"),x.push('<fieldset class="hour"><legend>'+_.toUpperCase()+"</legend>")),T=_,C=k%12?k%12:12,x.push('<span class="hour'+w+" hour_"+(k<12?"am":"pm")+'">'+C+"</span>"),23==k&&x.push("</fieldset>")):(C=k+":00",x.push('<span class="hour'+w+'">'+C+"</span>"))}this.picker.find(".datetimepicker-hours td").html(x.join("")),x=[],C="",_="",T="";for(var A=this.minutesDisabled||[],k=0;k<60;k+=this.minuteStep)if(-1===A.indexOf(k)){var E=i(n,o,a,l,k,0);w="",E.valueOf()<this.startDate||E.valueOf()>this.endDate?w+=" disabled":Math.floor(c/this.minuteStep)==Math.floor(k/this.minuteStep)&&(w+=" active"),this.showMeridian&&2==s[this.language].meridiem.length?(_=l<12?s[this.language].meridiem[0]:s[this.language].meridiem[1],_!=T&&(""!=T&&x.push("</fieldset>"),x.push('<fieldset class="minute"><legend>'+_.toUpperCase()+"</legend>")),T=_,C=l%12?l%12:12,x.push('<span class="minute'+w+'">'+C+":"+(k<10?"0"+k:k)+"</span>"),59==k&&x.push("</fieldset>")):(C=k+":00",x.push('<span class="minute'+w+'">'+l+":"+(k<10?"0"+k:k)+"</span>"))}this.picker.find(".datetimepicker-minutes td").html(x.join(""));var O=this.date.getUTCFullYear(),D=this.picker.find(".datetimepicker-months").find("th:eq(1)").text(n).end().find("span").removeClass("active");if(O==n){var j=D.length-12;D.eq(this.date.getUTCMonth()+j).addClass("active")}(n<h||n>u)&&D.addClass("disabled"),n==h&&D.slice(0,d+1).addClass("disabled"),n==u&&D.slice(p).addClass("disabled"),x="",n=10*parseInt(n/10,10);var M=this.picker.find(".datetimepicker-years").find("th:eq(1)").text(n+"-"+(n+9)).end().find("td");n-=1;for(var k=-1;k<11;k++)x+='<span class="year'+(-1==k||10==k?" old":"")+(O==n?" active":"")+(n<h||n>u?" disabled":"")+'">'+n+"</span>",n+=1;M.html(x),this.place()}},updateNavArrows:function(){var t=new Date(this.viewDate),e=t.getUTCFullYear(),i=t.getUTCMonth(),n=t.getUTCDate(),o=t.getUTCHours();switch(this.viewMode){case 0:this.startDate!==-1/0&&e<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()&&n<=this.startDate.getUTCDate()&&o<=this.startDate.getUTCHours()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()&&n>=this.endDate.getUTCDate()&&o>=this.endDate.getUTCHours()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:this.startDate!==-1/0&&e<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()&&n<=this.startDate.getUTCDate()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()&&n>=this.endDate.getUTCDate()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 2:this.startDate!==-1/0&&e<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 3:case 4:this.startDate!==-1/0&&e<=this.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},mousewheel:function(e){if(e.preventDefault(),e.stopPropagation(),!this.wheelPause){this.wheelPause=!0;var i=e.originalEvent,n=i.wheelDelta,o=n>0?1:0===n?0:-1;this.wheelViewModeNavigationInverseDirection&&(o=-o),this.showMode(o),setTimeout(t.proxy(function(){this.wheelPause=!1},this),this.wheelViewModeNavigationDelay)}},click:function(e){e.stopPropagation(),e.preventDefault();var n=t(e.target).closest("span, td, th, legend");if(n.is("."+this.icontype)&&(n=t(n).parent().closest("span, td, th, legend")),1==n.length){if(n.is(".disabled"))return void this.element.trigger({type:"outOfRange",date:this.viewDate,startDate:this.startDate,endDate:this.endDate});switch(n[0].nodeName.toLowerCase()){case"th":switch(n[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var o=r.modes[this.viewMode].navStep*("prev"==n[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveHour(this.viewDate,o);break;case 1:this.viewDate=this.moveDate(this.viewDate,o);break;case 2:this.viewDate=this.moveMonth(this.viewDate,o);break;case 3:case 4:this.viewDate=this.moveYear(this.viewDate,o)}this.fill(),this.element.trigger({type:n[0].className+":"+this.convertViewModeText(this.viewMode),date:this.viewDate,startDate:this.startDate,endDate:this.endDate});break;case"today":var s=new Date;s=i(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),0),s<this.startDate?s=this.startDate:s>this.endDate&&(s=this.endDate),this.viewMode=this.startViewMode,this.showMode(0),this._setDate(s),this.fill(),this.autoclose&&this.hide()}break;case"span":if(!n.is(".disabled")){var a=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth(),c=this.viewDate.getUTCDate(),h=this.viewDate.getUTCHours(),d=this.viewDate.getUTCMinutes(),u=this.viewDate.getUTCSeconds();if(n.is(".month")?(this.viewDate.setUTCDate(1),l=n.parent().find("span").index(n),c=this.viewDate.getUTCDate(),this.viewDate.setUTCMonth(l),this.element.trigger({type:"changeMonth",date:this.viewDate}),this.viewSelect>=3&&this._setDate(i(a,l,c,h,d,u,0))):n.is(".year")?(this.viewDate.setUTCDate(1),a=parseInt(n.text(),10)||0,this.viewDate.setUTCFullYear(a),this.element.trigger({type:"changeYear",date:this.viewDate}),this.viewSelect>=4&&this._setDate(i(a,l,c,h,d,u,0))):n.is(".hour")?(h=parseInt(n.text(),10)||0,(n.hasClass("hour_am")||n.hasClass("hour_pm"))&&(12==h&&n.hasClass("hour_am")?h=0:12!=h&&n.hasClass("hour_pm")&&(h+=12)),this.viewDate.setUTCHours(h),this.element.trigger({type:"changeHour",date:this.viewDate}),this.viewSelect>=1&&this._setDate(i(a,l,c,h,d,u,0))):n.is(".minute")&&(d=parseInt(n.text().substr(n.text().indexOf(":")+1),10)||0,this.viewDate.setUTCMinutes(d),this.element.trigger({type:"changeMinute",date:this.viewDate}),this.viewSelect>=0&&this._setDate(i(a,l,c,h,d,u,0))),0!=this.viewMode){var p=this.viewMode;this.showMode(-1),this.fill(),p==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide()}break;case"td":if(n.is(".day")&&!n.is(".disabled")){var c=parseInt(n.text(),10)||1,a=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth(),h=this.viewDate.getUTCHours(),d=this.viewDate.getUTCMinutes(),u=this.viewDate.getUTCSeconds();n.is(".old")?0===l?(l=11,a-=1):l-=1:n.is(".new")&&(11==l?(l=0,a+=1):l+=1),this.viewDate.setUTCFullYear(a),this.viewDate.setUTCMonth(l,c),this.element.trigger({type:"changeDay",date:this.viewDate}),this.viewSelect>=2&&this._setDate(i(a,l,c,h,d,u,0))}var p=this.viewMode;this.showMode(-1),this.fill(),p==this.viewMode&&this.autoclose&&this.hide()}}},_setDate:function(t,e){e&&"date"!=e||(this.date=t),e&&"view"!=e||(this.viewDate=t),this.fill(),this.setValue();var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&(i.change(),this.autoclose),this.element.trigger({type:"changeDate",date:this.date}),null==t&&(this.date=this.viewDate)},moveMinute:function(t,e){if(!e)return t;var i=new Date(t.valueOf());return i.setUTCMinutes(i.getUTCMinutes()+e*this.minuteStep),i},moveHour:function(t,e){if(!e)return t;var i=new Date(t.valueOf());return i.setUTCHours(i.getUTCHours()+e),i},moveDate:function(t,e){if(!e)return t;var i=new Date(t.valueOf());return i.setUTCDate(i.getUTCDate()+e),i},moveMonth:function(t,e){if(!e)return t;var i,n,o=new Date(t.valueOf()),s=o.getUTCDate(),r=o.getUTCMonth(),a=Math.abs(e);if(e=e>0?1:-1,1==a)n=-1==e?function(){return o.getUTCMonth()==r}:function(){return o.getUTCMonth()!=i},i=r+e,o.setUTCMonth(i),(i<0||i>11)&&(i=(i+12)%12);else{for(var l=0;l<a;l++)o=this.moveMonth(o,e);i=o.getUTCMonth(),o.setUTCDate(s),n=function(){return i!=o.getUTCMonth()}}for(;n();)o.setUTCDate(--s),o.setUTCMonth(i);return o},moveYear:function(t,e){return this.moveMonth(t,12*e)},dateWithinRange:function(t){return t>=this.startDate&&t<=this.endDate},keydown:function(t){if(this.picker.is(":not(:visible)"))return void(27==t.keyCode&&this.show());var e,i,n,o=!1;switch(t.keyCode){case 27:this.hide(),t.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;e=37==t.keyCode?-1:1,viewMode=this.viewMode,t.ctrlKey?viewMode+=2:t.shiftKey&&(viewMode+=1),4==viewMode?(i=this.moveYear(this.date,e),n=this.moveYear(this.viewDate,e)):3==viewMode?(i=this.moveMonth(this.date,e),n=this.moveMonth(this.viewDate,e)):2==viewMode?(i=this.moveDate(this.date,e),n=this.moveDate(this.viewDate,e)):1==viewMode?(i=this.moveHour(this.date,e),n=this.moveHour(this.viewDate,e)):0==viewMode&&(i=this.moveMinute(this.date,e),n=this.moveMinute(this.viewDate,e)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),t.preventDefault(),o=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;e=38==t.keyCode?-1:1,viewMode=this.viewMode,t.ctrlKey?viewMode+=2:t.shiftKey&&(viewMode+=1),4==viewMode?(i=this.moveYear(this.date,e),n=this.moveYear(this.viewDate,e)):3==viewMode?(i=this.moveMonth(this.date,e),n=this.moveMonth(this.viewDate,e)):2==viewMode?(i=this.moveDate(this.date,7*e),n=this.moveDate(this.viewDate,7*e)):1==viewMode?this.showMeridian?(i=this.moveHour(this.date,6*e),n=this.moveHour(this.viewDate,6*e)):(i=this.moveHour(this.date,4*e),n=this.moveHour(this.viewDate,4*e)):0==viewMode&&(i=this.moveMinute(this.date,4*e),n=this.moveMinute(this.viewDate,4*e)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),t.preventDefault(),o=!0);break;case 13:if(0!=this.viewMode){var s=this.viewMode;this.showMode(-1),this.fill(),s==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide();t.preventDefault();break;case 9:this.hide()}if(o){var r;this.isInput?r=this.element:this.component&&(r=this.element.find("input")),r&&r.change(),this.element.trigger({type:"changeDate",date:this.date})}},showMode:function(t){if(t){var e=Math.max(0,Math.min(r.modes.length-1,this.viewMode+t));e>=this.minView&&e<=this.maxView&&(this.element.trigger({type:"changeMode",date:this.viewDate,oldViewMode:this.viewMode,newViewMode:e}),this.viewMode=e)}this.picker.find(">div").hide().filter(".datetimepicker-"+r.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()},reset:function(t){this._setDate(null,"date")},convertViewModeText:function(t){switch(t){case 4:return"decade";case 3:return"year";case 2:return"month";case 1:return"day";case 0:return"hour"}}};var o=t.fn.datetimepicker;t.fn.datetimepicker=function(e){var i=Array.apply(null,arguments);i.shift();var o;return this.each(function(){var s=t(this),r=s.data("datetimepicker"),a="object"==typeof e&&e;if(r||s.data("datetimepicker",r=new n(this,t.extend({},t.fn.datetimepicker.defaults,a))),"string"==typeof e&&"function"==typeof r[e]&&void 0!==(o=r[e].apply(r,i)))return!1}),void 0!==o?o:this},t.fn.datetimepicker.defaults={},t.fn.datetimepicker.Constructor=n;var s=t.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridiem:["am","pm"],suffix:["st","nd","rd","th"],today:"Today"}},r={modes:[{clsName:"minutes",navFnc:"Hours",navStep:1},{clsName:"hours",navFnc:"Date",navStep:1},{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(t){return t%4==0&&t%100!=0||t%400==0},getDaysInMonth:function(t,e){return[31,r.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},getDefaultFormat:function(t,e){if("standard"==t)return"input"==e?"yyyy-mm-dd hh:ii":"yyyy-mm-dd hh:ii:ss";if("php"==t)return"input"==e?"Y-m-d H:i":"Y-m-d H:i:s";throw new Error("Invalid format type.")},validParts:function(t){if("standard"==t)return/hh?|HH?|p|P|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g;if("php"==t)return/[dDjlNwzFmMnStyYaABgGhHis]/g;throw new Error("Invalid format type.")},nonpunctuation:/[^ -\/:-@\[-`{-~\t\n\rTZ]+/g,parseFormat:function(t,e){var i=t.replace(this.validParts(e),"\0").split("\0"),n=t.match(this.validParts(e));if(!i||!i.length||!n||0==n.length)throw new Error("Invalid date format.");return{separators:i,parts:n}},parseDate:function(e,o,r,a){if(e instanceof Date){var l=new Date(e.valueOf()-6e4*e.getTimezoneOffset());return l.setMilliseconds(0),l}if(/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(e)&&(o=this.parseFormat("yyyy-mm-dd",a)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(e)&&(o=this.parseFormat("yyyy-mm-dd hh:ii",a)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(e)&&(o=this.parseFormat("yyyy-mm-dd hh:ii:ss",a)),/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(e)){var c,h,d=/([-+]\d+)([dmwy])/,u=e.match(/([-+]\d+)([dmwy])/g);e=new Date;for(var p=0;p<u.length;p++)switch(c=d.exec(u[p]),h=parseInt(c[1]),c[2]){case"d":e.setUTCDate(e.getUTCDate()+h);break;case"m":e=n.prototype.moveMonth.call(n.prototype,e,h);break;case"w":e.setUTCDate(e.getUTCDate()+7*h);break;case"y":e=n.prototype.moveYear.call(n.prototype,e,h)}return i(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),0)}var f,g,c,u=e&&e.toString().match(this.nonpunctuation)||[],e=new Date(0,0,0,0,0,0,0),v={},m=["hh","h","ii","i","ss","s","yyyy","yy","M","MM","m","mm","D","DD","d","dd","H","HH","p","P"],b={hh:function(t,e){return t.setUTCHours(e)},h:function(t,e){return t.setUTCHours(e)},HH:function(t,e){return t.setUTCHours(12==e?0:e)},H:function(t,e){return t.setUTCHours(12==e?0:e)},ii:function(t,e){return t.setUTCMinutes(e)},i:function(t,e){return t.setUTCMinutes(e)},ss:function(t,e){return t.setUTCSeconds(e)},s:function(t,e){return t.setUTCSeconds(e)},yyyy:function(t,e){return t.setUTCFullYear(e)},yy:function(t,e){return t.setUTCFullYear(2e3+e)},m:function(t,e){for(e-=1;e<0;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!=e;){if(isNaN(t.getUTCMonth()))return t;t.setUTCDate(t.getUTCDate()-1)}return t},d:function(t,e){return t.setUTCDate(e)},p:function(t,e){return t.setUTCHours(1==e?t.getUTCHours()+12:t.getUTCHours())}};if(b.M=b.MM=b.mm=b.m,b.dd=b.d,b.P=b.p,e=i(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()),u.length==o.parts.length){for(var p=0,y=o.parts.length;p<y;p++){if(f=parseInt(u[p],10),c=o.parts[p],isNaN(f))switch(c){case"MM":g=t(s[r].months).filter(function(){var t=this.slice(0,u[p].length);return t==u[p].slice(0,t.length)}),f=t.inArray(g[0],s[r].months)+1;break;case"M":g=t(s[r].monthsShort).filter(function(){var t=this.slice(0,u[p].length),e=u[p].slice(0,t.length);return t.toLowerCase()==e.toLowerCase()}),f=t.inArray(g[0],s[r].monthsShort)+1;break;case"p":case"P":f=t.inArray(u[p].toLowerCase(),s[r].meridiem)}v[c]=f}for(var w,p=0;p<m.length;p++)(w=m[p])in v&&!isNaN(v[w])&&b[w](e,v[w])}return e},formatDate:function(e,i,n,o){if(null==e)return"";var a;if("standard"==o)a={yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear(),m:e.getUTCMonth()+1,M:s[n].monthsShort[e.getUTCMonth()],MM:s[n].months[e.getUTCMonth()],d:e.getUTCDate(),D:s[n].daysShort[e.getUTCDay()],DD:s[n].days[e.getUTCDay()],p:2==s[n].meridiem.length?s[n].meridiem[e.getUTCHours()<12?0:1]:"",h:e.getUTCHours(),i:e.getUTCMinutes(),s:e.getUTCSeconds()},2==s[n].meridiem.length?a.H=a.h%12==0?12:a.h%12:a.H=a.h,a.HH=(a.H<10?"0":"")+a.H,a.P=a.p.toUpperCase(),a.hh=(a.h<10?"0":"")+a.h,a.ii=(a.i<10?"0":"")+a.i,a.ss=(a.s<10?"0":"")+a.s,a.dd=(a.d<10?"0":"")+a.d,a.mm=(a.m<10?"0":"")+a.m;else{if("php"!=o)throw new Error("Invalid format type.");a={y:e.getUTCFullYear().toString().substring(2),Y:e.getUTCFullYear(),F:s[n].months[e.getUTCMonth()],M:s[n].monthsShort[e.getUTCMonth()],n:e.getUTCMonth()+1,t:r.getDaysInMonth(e.getUTCFullYear(),e.getUTCMonth()),j:e.getUTCDate(),l:s[n].days[e.getUTCDay()],D:s[n].daysShort[e.getUTCDay()],w:e.getUTCDay(),N:0==e.getUTCDay()?7:e.getUTCDay(),S:e.getUTCDate()%10<=s[n].suffix.length?s[n].suffix[e.getUTCDate()%10-1]:"",a:2==s[n].meridiem.length?s[n].meridiem[e.getUTCHours()<12?0:1]:"",g:e.getUTCHours()%12==0?12:e.getUTCHours()%12,G:e.getUTCHours(),i:e.getUTCMinutes(),s:e.getUTCSeconds()},a.m=(a.n<10?"0":"")+a.n,a.d=(a.j<10?"0":"")+a.j,a.A=a.a.toString().toUpperCase(),a.h=(a.g<10?"0":"")+a.g,a.H=(a.G<10?"0":"")+a.G,a.i=(a.i<10?"0":"")+a.i,a.s=(a.s<10?"0":"")+a.s}for(var e=[],l=t.extend([],i.separators),c=0,h=i.parts.length;c<h;c++)l.length&&e.push(l.shift()),e.push(a[i.parts[c]]);return l.length&&e.push(l.shift()),e.join("")},convertViewMode:function(t){switch(t){case 4:case"decade":t=4;break;case 3:case"year":t=3;break;case 2:case"month":t=2;break;case 1:case"day":t=1;break;case 0:case"hour":t=0}return t},headTemplate:'<thead><tr><th class="prev"><i class="{iconType} {leftArrow}"/></th><th colspan="5" class="switch"></th><th class="next"><i class="{iconType} {rightArrow}"/></th></tr></thead>',headTemplateV3:'<thead><tr><th class="prev"><span class="{iconType} {leftArrow}"></span> </th><th colspan="5" class="switch"></th><th class="next"><span class="{iconType} {rightArrow}"></span> </th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr></tfoot>'};r.template='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+r.headTemplate+r.contTemplate+r.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed">'+r.headTemplate+r.contTemplate+r.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed">'+r.headTemplate+"<tbody></tbody>"+r.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+r.headTemplate+r.contTemplate+r.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+r.headTemplate+r.contTemplate+r.footTemplate+"</table></div></div>",r.templateV3='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+r.headTemplateV3+r.contTemplate+r.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed">'+r.headTemplateV3+r.contTemplate+r.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed">'+r.headTemplateV3+"<tbody></tbody>"+r.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+r.headTemplateV3+r.contTemplate+r.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+r.headTemplateV3+r.contTemplate+r.footTemplate+"</table></div></div>",t.fn.datetimepicker.DPGlobal=r,t.fn.datetimepicker.noConflict=function(){return t.fn.datetimepicker=o,this},t(document).on("focus.datetimepicker.data-api click.datetimepicker.data-api",'[data-provide="datetimepicker"]',function(e){var i=t(this);i.data("datetimepicker")||(e.preventDefault(),i.datetimepicker("show"))}),t(function(){t('[data-provide="datetimepicker-inline"]').datetimepicker()})}(window.jQuery),define("datetimepicker",["jquery"],function(){}),define("collections/JornadaEquiposCollection",["backbone","models/TorneoEquipoModel"],function(t,e){return t.Collection.extend({model:e,url:function(){return"torneojornada/"+this.jornada.get("id")+"/equipo"},setJornada:function(t){this.jornada=t}})}),define("models/CanchaModel",["backbone","../core/BaseModel"],function(t,e){return e.extend({urlRoot:"cancha",defaults:{nombre:"",alias:"",descripcion:"",calle:"",noExterior:"",noInterior:"",codigoPostal:"",coloniaId:"",coloniaDesc:"",municipioDesc:"",estadoDesc:"",paisDesc:"",longitude:"",latitude:""},validation:{nombre:{required:!0},alias:{required:!0},descripcion:{required:!1},calle:{required:!0},noExterior:{required:!0},noInterior:{required:!1},codigoPostal:{required:!0},coloniaId:{required:!0},longitude:{required:!1},latitude:{required:!1}}})}),define("collections/TorneoCanchasCollection",["backbone","models/CanchaModel"],function(t,e){return t.Collection.extend({model:e,url:function(){return"torneo/"+this.torneo.get("id")+"/cancha"},setTorneo:function(t){this.torneo=t}})}),define("text!templates/private/tplPartidoCreate.html",[],function(){return'<div class="modal fade" id="partido-create-dialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n                <h4 class="modal-title">Partido</h4>\n            </div>\n            <div class="modal-body">\n                <p>Crear Partido.</p>\n                <div class="alert alert-danger" role="alert"></div>\n                <form id="form-torneo-partido" role="form">\n                <input id="jornada-id" type="hidden" name="jornadaId" value="<%= jornadaId %>">\n                <div class="row">\n                    <div class="col-xs-6">\n                        <div class="form-group">\n                            <label>Local</label>\n                            <select class="form-control" id="select-local" placeholder="Local..." name="localId" value="<%= localId %>">\n                            </select>\n                        </div>\n                    </div>\n                    <div class="col-xs-6">\n                        <div class="form-group">\n                            <label>Visitante</label>\n                            <select class="form-control" id="select-visita" placeholder="Visitante..." name="visitaId" value="<%= visitaId %>">\n                            </select>\n                        </div>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="col-xs-6">\n                        <div class="form-group">\n                            <label>Cancha</label>\n                            <select class="form-control" id="select-cancha" placeholder="Cancha..." name="canchaId" value="<%= canchaId %>">\n                            </select>\n                        </div>\n                    </div>\n                    <div class="col-xs-6">\n                        <div class="form-group">\n                            <label>Horario</label>\n                            <input id="dtp-horario" class="span2 form-control" size="16" type="text" name="horarioDes" value="<%= horarioDes %>">\n                        </div>\n                    </div>\n                </div>\n                </form>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n                <button id="btn-aceptar" type="button" class="btn btn-success">Aceptar</button>\n            </div>\n        </div>\n    </div>\n</div>\n<style>\n    .ui-datepicker-partido{\n        z-index: 100000 !important;\n        display: block;\n    }\n</style>\n'}),define("views/private/PartidoCreateView",["jquery","backbone","bootstrap","datetimepicker","core/BaseView","models/TorneoPartidoModel","models/TorneoModel","collections/JornadaEquiposCollection","collections/TorneoCanchasCollection","views/private/util/ModalGenericView","text!templates/private/tplPartidoCreate.html"],function(t,e,i,n,o,s,r,a,l,c,h){return o.extend({el:"#modal-partido-create",template:_.template(h),events:{"click #btn-aceptar":"clickAceptar","change #select-local":"changeLocal"},initialize:function(t){this.callbackAceptar=t.callbackAceptar,this.model=new s,this.jornada=t.modelo,this.torneo=new r({id:this.jornada.get("torneoId")}),this.render(),this.locales=new a,this.listenTo(this.locales,"add",this.agregarLocal),this.listenTo(this.locales,"sync",this.syncLocales),this.locales.setJornada(this.jornada),this.visitas=new a,this.listenTo(this.visitas,"add",this.agregarVisita),this.listenTo(this.visitas,"sync",this.syncVisitas),this.visitas.setJornada(this.jornada),this.visitas.fetch(),this.canchas=new l,this.listenTo(this.canchas,"add",this.agregarCancha),this.listenTo(this.canchas,"sync",this.syncCanchas),this.canchas.setTorneo(this.torneo),this.canchas.fetch(),e.Validation.bind(this)},render:function(){this.$el.html(this.template(this.model.toJSON())),this.$("#partido-create-dialog").modal("show"),this.$(".alert-danger").hide(),this.$("#jornada-id").val(this.jornada.get("id")),this.$el.find("#dtp-horario").datetimepicker({format:"mm/dd/yyyy hh:ii"}).on("show",function(e){t(".datepicker.dropdown-menu").addClass("ui-datepicker-partido")})},agregarLocal:function(e){t("#select-local").append(t("<option>",{value:e.get("id"),text:e.get("equipoNombre")}))},syncLocales:function(){t("#select-local").change()},agregarVisita:function(t){},syncVisitas:function(t){this.locales.fetch()},agregarCancha:function(e){t("#select-cancha").append(t("<option>",{value:e.get("id"),text:e.get("canchaNombre")}))},syncCanchas:function(e){t("#select-cancha").change()},changeLocal:function(e){var i=this.locales.get(t(e.target).val());t("#select-visita").html(""),this.visitas.each(function(e){i.get("id")!=e.get("id")&&t("#select-visita").append(t("<option>",{value:e.get("id"),text:e.get("equipoNombre")}))})},clickAceptar:function(t){var e=this.$el.find("#form-torneo-partido").serializeObject();this.model.set(e);var i=new Date(this.model.get("horarioDes"));this.model.set({horario:i.getTime()}),that=this,this.model.isValid(!0)&&this.model.save({},{wait:!0,success:function(t,e){new c({message:"Partido registrado correctamente"}),that.callbackAceptar(t)},error:function(t,e){new c({message:"Se presento un error al registrar el partido"})}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this)}})}),define("text!templates/private/tplTorneoPartidoAdmin.html",[],function(){return'<div class="row">\n    <div class="col-md-12">\n        <div class="form-group">\n            <select class="form-control" id="select-torneo-jornada" placeholder="Jornada...">\n            </select>\n        </div>\n        <table id="torneo-partidos" class="table table-condensed">\n            <thead>\n            <tr>\n                <th>#</th>\n                <th>Local</th>\n                <th>Visita</th>\n                <th>Fecha</th>\n                <th>Lugar</th>\n                <th></th>\n                <th></th>\n            </tr>\n            </thead>\n            <tbody>\n            </tbody>\n            <div id="modal-partido-create">\n            </div>\n        </table>\n    </div>\n</div>\n<div class="row">\n    <div class="col-md-12">\n        <div class="btn-group-horizontal" role="group" aria-label="...">\n            <button id="partido-agregar" type="button" class="btn btn-primary">Agregar</button>\n        </div>\n    </div>\n</div>'}),define("views/private/TorneoPartidoAdminView",["jquery","backbone","core/BaseView","models/TorneoPartidoModel","collections/TorneoJornadasCollection","collections/TorneoPartidosCollection","views/private/RowTorneoPartidoView","views/private/PartidoCreateView","text!templates/private/tplTorneoPartidoAdmin.html"],function(t,e,i,n,o,s,r,a,l){return i.extend({template:_.template(l),events:{"click #partido-agregar":"agregarPartido","change #select-torneo-jornada":"changeJornada"},initialize:function(){this.torneojornadas=new o,this.torneojornadas.setTorneo(this.model),this.listenTo(this.torneojornadas,"add",this.agregarTorneoJornada),this.listenTo(this.torneojornadas,"sync",this.syncTorneoJornadas),this.torneojornadas.fetch(),app.torneopartidos=new s,this.listenTo(app.torneopartidos,"add",this.agregarTorneoPartido),this.listenTo(app.torneopartidos,"sync",this.syncTorneoPartidos)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},agregarTorneoJornada:function(e){t("#select-torneo-jornada").append(t("<option>",{value:e.get("id"),text:e.get("nombre")+" - "+e.get("fase")}))},syncTorneoJornadas:function(){t("#select-torneo-jornada").change()},changeJornada:function(e){var i=this.torneojornadas.get(t(e.target).val());void 0!==i&&(this.torneoJornada=i,t("#torneo-partidos").find("tbody").html(""),app.torneopartidos.setTorneoJornada(this.torneoJornada),app.torneopartidos.fetch())},agregarTorneoPartido:function(e){var i=new r(e)
;t("#torneo-partidos").find("tbody:last").append(i.render().$el)},syncTorneoPartidos:function(){},agregarPartido:function(){this.partidoCreateView=new a({modelo:this.torneoJornada,callbackAceptar:this.selectPartido})},selectPartido:function(e){this.destroyView(),t("<div id='modal-equipo-create'></div>").appendTo("#torneo-partidos"),app.torneopartidos.add(e)},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this)}})}),define("models/TorneoCanchaModel",["backbone"],function(t){return t.Model.extend({urlRoot:"torneocancha",defaults:{statusCancha:"INSCRITO"},initialize:function(){},validate:function(t){return t.torneoId?t.canchaId?t.statusCancha?void 0:"Debe tener un Status.":"Debe tener una Cancha.":"Debe tener un Torneo."}})}),define("collections/CanchasCollection",["backbone","models/CanchaModel"],function(t,e){return t.Collection.extend({model:e,url:function(){return"like"==this.tipo?"cancha/search/"+this.criterio:"cancha"},setTipo:function(t){this.tipo=t},setCriterio:function(t){this.criterio=t}})}),define("text!templates/private/tplCanchaSearch.html",[],function(){return'<div class="modal fade" id="cancha-search-dialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n                <h4 class="modal-title">Cancha</h4>\n            </div>\n            <div class="modal-body">\n                <p>Seleccione Cancha.</p>\n                <div class="alert alert-danger" role="alert"></div>\n                <div class="input-group">\n                    <input id="text-busqueda" type="text" class="form-control" placeholder="Buscar por...">\n                    <span class="input-group-btn">\n                        <button id="btn-buscar" class="btn btn-default" type="button">Buscar</button>\n                    </span>\n                </div>\n                <div id="result-search" class="list-group">\n                </div>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n                <button id="btn-aceptar" type="button" class="btn btn-success">Aceptar</button>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("views/private/CanchaSearchView",["jquery","bootstrap","core/BaseView","collections/CanchasCollection","text!templates/private/tplCanchaSearch.html"],function(t,e,i,n,o){return i.extend({el:"#modal-cancha-search",template:_.template(o),events:{"click #btn-buscar":"clickBuscar","click #btn-aceptar":"clickAceptar","click .list-group-item":"clickItemSearch"},initialize:function(t){this.callbackAceptar=t.callbackAceptar,this.model=t.modelo,this.render(),this.canchas=new n,this.listenTo(this.canchas,"add",this.agregarCancha),this.listenTo(this.canchas,"sync",this.syncCanchas)},render:function(){this.$el.html(this.template()),this.$("#cancha-search-dialog").modal("show"),this.$(".alert-danger").hide()},agregarCancha:function(t){},syncCanchas:function(){t("#result-search").html(""),this.canchas.forEach(function(e){var i="<a class='canchas list-group-item' id='"+e.get("id")+"'>"+e.get("nombre")+"</a>";t(i).appendTo("#result-search")})},clickBuscar:function(e){var i=t("#text-busqueda").val(),n=this.model.get("id");""!=i&&"undefined"!=i&&(t("#result-search").html(""),this.canchas.setTipo("like"),this.canchas.setCriterio(i),this.canchas.fetch({data:{tipo:"notInTorneoAndContainName",idTorneo:n},processData:!0}))},clickAceptar:function(e){var i=t(".canchas.list-group-item.active").attr("id");if("undefined"==i||void 0==i||""==i)this.$(".alert-danger").show(),this.$(".alert-danger").html("Debe seleccionar una cancha");else{var n=this.canchas.get(i);this.callbackAceptar(n)}},clickItemSearch:function(e){t(".canchas.list-group-item").removeClass("active"),t(e.target).addClass("active")},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}})}),define("text!templates/private/tplRowTorneoCancha.html",[],function(){return'<th><%= id %></th>\n<td><%= canchaNombre %></td>\n<td><%= statusCancha %></td>\n<td>\n    <button id="eliminar-cancha" class="btn btn-primary btn-xs" value="<%= id %>">\n        <span class="glyphicon glyphicon-trash" aria-hidden="true" value="<%= id %>"></span>\n    </button>\n</td>'}),define("views/private/RowTorneoCanchaView",["jquery","underscore","core/BaseView","views/private/util/ModalGenericView","text!templates/private/tplRowTorneoCancha.html"],function(t,e,i,n,o){return i.extend({template:e.template(o),tagName:"tr",events:{"click #eliminar-cancha":"deleteCancha"},initialize:function(t){this.model=t},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},deleteCancha:function(){that=this,this.model.destroy({contentType:"application/json",wait:!0,success:function(t,e){that.destroyView(),new n({message:e.message})},error:function(t,e){new n({message:e.responseJSON.message})}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}})}),define("text!templates/private/tplTorneoCanchaAdmin.html",[],function(){return'<div class="row">\n    <div class="col-md-12">\n        <table id="torneo-canchas" class="table table-condensed">\n            <thead>\n            <tr>\n                <th>#</th>\n                <th>Cancha</th>\n                <th>Status</th>\n                <th></th>\n            </tr>\n            </thead>\n            <tbody>\n            </tbody>\n            <div id="modal-cancha-search">\n            </div>\n        </table>\n    </div>\n</div>\n<div class="row">\n    <div class="col-md-12">\n        <div class="btn-group-horizontal" role="group" aria-label="...">\n            <button id="cancha-agregar" type="button" class="btn btn-primary">Agregar</button>\n        </div>\n    </div>\n</div>'}),define("views/private/TorneoCanchaAdminView",["jquery","backbone","core/BaseView","models/TorneoCanchaModel","collections/TorneoCanchasCollection","views/private/CanchaSearchView","views/private/RowTorneoCanchaView","text!templates/private/tplTorneoCanchaAdmin.html"],function(t,e,i,n,o,s,r,a){return i.extend({template:_.template(a),events:{"click #cancha-agregar":"agregarCancha"},initialize:function(){app.torneocanchas=new o,app.torneocanchas.setTorneo(this.model),this.listenTo(app.torneocanchas,"add",this.agregarTorneoCancha),this.listenTo(app.torneocanchas,"sync",this.syncTorneoCanchas),app.torneocanchas.fetch()},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},agregarTorneoCancha:function(e){var i=new r(e);t("#torneo-canchas").find("tbody:last").append(i.render().$el)},syncTorneoCanchas:function(){},agregarCancha:function(){this.canchaSearchView=new s({modelo:this.model,callbackAceptar:this.selectCancha})},selectCancha:function(e){this.destroyView(),t("<div id='modal-cancha-search'></div>").appendTo("#torneo-canchas"),(new n).save({torneoId:this.model.get("id"),canchaId:e.get("id")},{wait:!0,success:function(t,e){app.torneocanchas.add(t)},error:function(t,e){console.log(t.toJSON()),console.log("error.responseText")}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this)}})}),define("models/TorneoArbitroModel",["backbone"],function(t){return t.Model.extend({urlRoot:"torneoarbitro",defaults:{statusArbitro:"INSCRITO",tipoArbitro:"PRINCIPAL"},initialize:function(){},validate:function(t){return console.log("validar torneoarbitro"),console.log(t),t.torneoId?t.arbitroId?t.statusArbitro?void 0:"Debe tener un Status.":"Debe tener un Arbitro.":"Debe tener un Torneo."}})}),define("collections/TorneoArbitrosCollection",["backbone","models/TorneoArbitroModel"],function(t,e){return t.Collection.extend({model:e,url:function(){return"torneo/"+this.torneo.get("id")+"/arbitro"},setTorneo:function(t){this.torneo=t},onDestroy:function(){console.log("Fired whenever view.destroy() is called.")}})}),define("models/ArbitroModel",["backbone","../core/BaseModel"],function(t,e){return e.extend({urlRoot:"arbitro",defaults:{nombre:"",paterno:"",materno:"",sexo:"FEMENINO",logoArbitro:"novalid",fechaRegistro:(new Date).getTime(),calle:"",noExterior:"",noInterior:"",codigoPostal:"",coloniaId:"",coloniaDesc:"",municipioDesc:"",estadoDesc:"",paisDesc:"",longitude:"",latitude:""},validation:{nombre:{required:!0},paterno:{required:!0},materno:{required:!0},sexo:{required:!0},logoArbitro:{required:!0},fechaRegistro:{required:!0},calle:{required:!0},noExterior:{required:!0},noInterior:{required:!1},codigoPostal:{required:!0},coloniaId:{required:!0},longitude:{required:!1},latitude:{required:!1}}})}),define("collections/ArbitrosCollection",["backbone","models/ArbitroModel"],function(t,e){return t.Collection.extend({model:e,url:function(){return"like"==this.tipo?"arbitro/search/"+this.criterio:"arbitro"},setTipo:function(t){this.tipo=t},setCriterio:function(t){this.criterio=t}})}),define("text!templates/private/tplArbitroSearch.html",[],function(){return'<div class="modal fade" id="arbitro-search-dialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n                <h4 class="modal-title">Arbitro</h4>\n            </div>\n            <div class="modal-body">\n                <p>Seleccione Arbitro.</p>\n                <div class="alert alert-danger" role="alert"></div>\n                <div class="form-group">\n                    <input id="text-busqueda" type="text" class="form-control" placeholder="Buscar por..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">\n                    <div id="result-search" class="list-group">\n                    </div>\n                </div>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n                <button id="btn-aceptar" type="button" class="btn btn-success">Aceptar</button>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("views/private/ArbitroSearchView",["jquery","bootstrap","core/BaseView","collections/ArbitrosCollection","text!templates/private/tplArbitroSearch.html"],function(t,e,i,n,o){return i.extend({el:"#modal-arbitro-search",template:_.template(o),events:{"keydown #text-busqueda":"changeBuscar","click #btn-aceptar":"clickAceptar","click .list-group-item":"clickItemSearch"},initialize:function(t){this.callbackAceptar=t.callbackAceptar,this.model=t.modelo,this.render(),this.arbitros=new n,this.listenTo(this.arbitros,"add",this.agregarArbitro),this.listenTo(this.arbitros,"sync",this.syncArbitros)},render:function(){this.$el.html(this.template()),this.$("#arbitro-search-dialog").modal("show"),this.$(".alert-danger").hide()},agregarArbitro:function(t){},syncArbitros:function(){t("#result-search").html(""),this.arbitros.forEach(function(e){var i="<a class='arbitros list-group-item' id='"+e.get("id")+"'>"+e.get("nombre")+"</a>";t(i).appendTo("#result-search")})},changeBuscar:function(e){var i=t("#text-busqueda").val(),n=this.model.get("id");""!=i&&"undefined"!=i&&i.length>2&&(t("#result-search").html(""),this.arbitros.setTipo("like"),this.arbitros.setCriterio(i),this.arbitros.fetch({data:{tipo:"notInTorneoAndContainName",idTorneo:n},processData:!0}))},clickAceptar:function(e){var i=t(".arbitros.list-group-item.active").attr("id");if("undefined"==i||void 0==i||""==i)this.$(".alert-danger").show(),this.$(".alert-danger").html("Debe seleccionar un arbitro");else{var n=this.arbitros.get(i);this.callbackAceptar(n)}},clickItemSearch:function(e){t(".arbitros.list-group-item").removeClass("active"),t(e.target).addClass("active")},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}})}),define("text!templates/private/tplRowTorneoArbitro.html",[],function(){return'<th><%= id %></th>\n<td><%= arbitroNombre %></td>\n<td><%= statusArbitro %></td>\n<td>\n    <button id="eliminar-arbitro" class="btn btn-primary btn-xs" value="<%= id %>">\n        <span class="glyphicon glyphicon-trash" aria-hidden="true" value="<%= id %>"></span>\n    </button>\n</td>'}),define("views/private/RowTorneoArbitroView",["jquery","underscore","core/BaseView","views/private/util/ModalGenericView","text!templates/private/tplRowTorneoArbitro.html"],function(t,e,i,n,o){return i.extend({template:e.template(o),tagName:"tr",events:{"click #eliminar-arbitro":"deleteArbitro"},initialize:function(t){this.model=t},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},deleteArbitro:function(){that=this,this.model.destroy({contentType:"application/json",wait:!0,success:function(t,e){that.destroyView(),new n({message:e.message})},error:function(t,e){new n({message:e.responseJSON.message})}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}})}),define("text!templates/private/tplTorneoArbitroAdmin.html",[],function(){return'<div class="row">\n    <div class="col-md-12">\n        <table id="torneo-arbitros" class="table table-condensed">\n            <thead>\n            <tr>\n                <th>#</th>\n                <th>Arbitro</th>\n                <th>Status</th>\n                <th></th>\n            </tr>\n            </thead>\n            <tbody>\n            </tbody>\n            <div id="modal-arbitro-search">\n            </div>\n        </table>\n    </div>\n</div>\n<div class="row">\n    <div class="col-md-12">\n        <div class="btn-group-horizontal" role="group" aria-label="...">\n            <button id="arbitro-agregar" type="button" class="btn btn-primary">Agregar</button>\n        </div>\n    </div>\n</div>'}),define("views/private/TorneoArbitroAdminView",["jquery","backbone","core/BaseView","models/TorneoArbitroModel","collections/TorneoArbitrosCollection","views/private/ArbitroSearchView","views/private/RowTorneoArbitroView","text!templates/private/tplTorneoArbitroAdmin.html"],function(t,e,i,n,o,s,r,a){return i.extend({template:_.template(a),events:{"click #arbitro-agregar":"agregarArbitro"},initialize:function(){app.torneoarbitros=new o,app.torneoarbitros.setTorneo(this.model),this.listenTo(app.torneoarbitros,"add",this.agregarTorneoArbitro),this.listenTo(app.torneoarbitros,"sync",this.syncTorneoArbitros),app.torneoarbitros.fetch()},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},agregarTorneoArbitro:function(e){var i=new r(e);t("#torneo-arbitros").find("tbody:last").append(i.render().$el)},syncTorneoArbitros:function(){},agregarArbitro:function(){this.arbitroSearchView=new s({modelo:this.model,callbackAceptar:this.selectArbitro})},selectArbitro:function(e){this.destroyView(),t("<div id='modal-arbitro-search'></div>").appendTo("#torneo-arbitros"),(new n).save({torneoId:this.model.get("id"),arbitroId:e.get("id")},{wait:!0,success:function(t,e){app.torneoarbitros.add(t)},error:function(t,e){console.log(t.toJSON()),console.log("error.responseText")}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this)}})}),define("text!templates/private/tplTorneoDetail.html",[],function(){return'\n<div class="panel panel-default">\n    <div class="panel-body">\n        <h4 class="list-group-item-heading"><%= nombre %></h4>\n        <p class="list-group-item-text"><%= descripcion %></p>\n        <p class="list-group-item-text"><%= fechaInicioDes %> - <%= fechaFinDes %></p>\n        <p class="list-group-item-text"><%= status %></p>\n    </div>\n</div>\n<ul class="list-group">\n    <a id="torneo-jornada" class="action-entuliga list-group-item">\n        <span class="badge"><span class="glyphicon glyphicon-circle-arrow-right" aria-hidden="true"></span></span>\n        Jornadas\n    </a>\n    <a id="torneo-partido" class="action-entuliga list-group-item">\n        <span class="badge"><span class="glyphicon glyphicon-circle-arrow-right" aria-hidden="true"></span></span>\n        Partidos\n    </a>\n    <a id="torneo-equipo" class="action-entuliga list-group-item">\n        <span class="badge"><span class="glyphicon glyphicon-circle-arrow-right" aria-hidden="true"></span></span>\n        Equipos\n    </a>\n    <a id="torneo-jugador" class="action-entuliga list-group-item">\n        <span class="badge"><span class="glyphicon glyphicon-circle-arrow-right" aria-hidden="true"></span></span>\n        Jugadores\n    </a>\n    <a id="torneo-cancha" class="action-entuliga list-group-item">\n        <span class="badge"><span class="glyphicon glyphicon-circle-arrow-right" aria-hidden="true"></span></span>\n        Canchas\n    </a>\n    <a id="torneo-arbitro" class="action-entuliga list-group-item">\n        <span class="badge"><span class="glyphicon glyphicon-circle-arrow-right" aria-hidden="true"></span></span>\n        Arbitros\n    </a>\n</ul>'}),define("views/private/TorneoDetailView",["jquery","backbone","core/BaseView","views/private/TorneoEquipoAdminView","views/private/TorneoJugadorAdminView","views/private/TorneoJornadaAdminView","views/private/TorneoPartidoAdminView","views/private/TorneoCanchaAdminView","views/private/TorneoArbitroAdminView","text!templates/private/tplTorneoDetail.html"],function(t,e,i,n,o,s,r,a,l,c){return i.extend({template:_.template(c),events:{"click #torneo-jornada":"viewJornada","click #torneo-equipo":"viewEquipo","click #torneo-jugador":"viewJugador","click #torneo-partido":"viewPartido","click #torneo-cancha":"viewCancha","click #torneo-arbitro":"viewArbitro","click .list-group-item":"clickOptionDetail"},initialize:function(){this.tipo="none"},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},viewJornada:function(){"undefined"!=this.torneoDetailAdminView&&void 0!=this.torneoDetailAdminView&&"jornada"==this.tipo||(this.tipo="jornada",this.torneoDetailAdminView=new s({model:this.model}),t("#torneo-edit").html(this.torneoDetailAdminView.render().$el),t("#titulo-torneo-detalle").html("Jornadas"))},viewPartido:function(){"undefined"!=this.torneoDetailAdminView&&void 0!=this.torneoDetailAdminView&&"partido"==this.tipo||(this.tipo="partido",this.torneoDetailAdminView=new r({model:this.model}),t("#torneo-edit").html(this.torneoDetailAdminView.render().$el),t("#titulo-torneo-detalle").html("Partidos"))},viewJugador:function(){"undefined"!=this.torneoDetailAdminView&&void 0!=this.torneoDetailAdminView&&"jugador"==this.tipo||(this.tipo="jugador",this.torneoDetailAdminView=new o({model:this.model}),t("#torneo-edit").html(this.torneoDetailAdminView.render().$el),t("#titulo-torneo-detalle").html("Jugadores"))},viewEquipo:function(){"undefined"!=this.torneoDetailAdminView&&void 0!=this.torneoDetailAdminView&&"equipo"==this.tipo||(this.tipo="equipo",this.torneoDetailAdminView=new n({model:this.model}),t("#torneo-edit").html(this.torneoDetailAdminView.render().$el),t("#titulo-torneo-detalle").html("Equipos"))},viewCancha:function(){"undefined"!=this.torneoDetailAdminView&&void 0!=this.torneoDetailAdminView&&"cancha"==this.tipo||(this.tipo="cancha",this.torneoDetailAdminView=new a({model:this.model}),t("#torneo-edit").html(this.torneoDetailAdminView.render().$el),t("#titulo-torneo-detalle").html("Canchas"))},viewArbitro:function(){"undefined"!=this.torneoDetailAdminView&&void 0!=this.torneoDetailAdminView&&"arbitro"==this.tipo||(this.tipo="arbitro",this.torneoDetailAdminView=new l({model:this.model}),t("#torneo-edit").html(this.torneoDetailAdminView.render().$el),t("#titulo-torneo-detalle").html("Arbitros"))},clickOptionDetail:function(e){t(".list-group-item").removeClass("active"),t(e.target).addClass("active")}})}),define("text!templates/private/tplTorneoEdit.html",[],function(){return'<form id="form-torneo" role="form">\n    <p>Detalle Torneo.</p>\n    <input id="torneo-liga-id" type="hidden" name="ligaId" value="<%= ligaId %>">\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Nombre</label>\n                <input class="form-control" placeholder="Nombre" type="text" name="nombre" value="<%= nombre %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Descripcion</label>\n                <input class="form-control" placeholder="Descripcion" type="text" name="descripcion" value="<%= descripcion %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Fecha Inicio</label>\n                <input id="dp-fecha-inicio" class="span2 form-control" size="16" type="text" name="fechaInicioDes" value="<%= fechaInicioDes %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Fecha Fin</label>\n                <input id="dp-fecha-fin" class="span2 form-control" size="16" type="text" name="fechaFinDes" value="<%= fechaFinDes %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Status</label>\n                <select class="form-control" id="select-status" placeholder="Status..." name="status">\n                    <option value="ENPROCESO" <% print( status == \'ENPROCESO\' ? \'selected\' : \'\') %>>En Proceso</option>\n                    <option value="FINALIZADO" <% print( status == \'FINALIZADO\' ? \'selected\' : \'\') %>>Finalizado</option>\n                    <option value="CANCELADO" <% print( status == \'CANCELADO\' ? \'selected\' : \'\') %>>Cancelado</option>\n                </select>\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="modal-footer">\n            <button id="btn-cancel" type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n            <button id="btn-ok" type="button" class="btn btn-success">Guardar</button>\n        </div>\n    </div>\n</form>'}),define("views/private/TorneoEditView",["jquery","backbone","datetimepicker","backboneValidation","jquerySerializeObject","models/TorneoModel","core/BaseView","views/private/util/ModalGenericView","text!templates/private/tplTorneoEdit.html"],function(t,e,i,n,o,s,r,a,l){return r.extend({template:_.template(l),events:{"click #btn-ok":"saveTorneo","click #btn-cancel":"cancelTorneo"},initialize:function(t){"new"==t.tipo?(this.model=new s,this.model.set({ligaId:t.idLiga})):this.model=t.modelo,this.model.once("sync",this.saveTorneoSuccess),this.model.once("error",this.saveTorneoError),e.Validation.bind(this),app.that=this},remove:function(){return e.Validation.unbind(this),e.View.prototype.remove.apply(this,arguments)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el.find("#dp-fecha-inicio").datetimepicker({format:"mm/dd/yyyy",pickTime:!1,autoclose:!0,startView:"month",minView:"month"}),this.$el.find("#dp-fecha-fin").datetimepicker({format:"mm/dd/yyyy",pickTime:!1,autoclose:!0,startView:"month",minView:"month"}),this},saveTorneo:function(){var t=this.$el.find("#form-torneo").serializeObject();this.model.set(t);for(var e in t)t.hasOwnProperty(e)&&(t[e]=_.escape(t[e]));var i=new Date(this.model.get("fechaInicioDes")),n=new Date(this.model.get("fechaFinDes"));this.model.set({fechaInicio:i.getTime(),fechaFin:n.getTime()}),this.model.isValid(!0)&&this.model.save()},cancelTorneo:function(){new a({type:"confirm",labelConfirm:"Si",labelCancel:"No",message:"¿Desea cancelar la acción?",callbackConfirm:function(t){app.that.disabledAction(!1),app.that.destroyView(),delete app.that}})},saveTorneoSuccess:function(e,i,n){for(var o in e.attributes)e.attributes.hasOwnProperty(o)&&(e.attributes[o]=_.escape(e.attributes[o]));app.torneos.add(e),void 0!==app.that&&(app.that.disabledAction(!1),new a({message:"Torneo registrado correctamente"}),app.that.destroyView(),delete app.that,1==app.torneos.length&&t("#select-torneo").change())},saveTorneoError:function(t,e,i){new a({message:"Se presento un error al registrar el Torneo"})}})}),define("text!templates/private/tplTorneoAdmin.html",[],function(){return'<div class="row">\n    <div class="col-md-12">\n      <div class="main-box">\n        <div class="panel panel-info">\n            <div class="panel-heading">\n                <h3 class="panel-title">Torneo Admin</h3>\n            </div>\n            <div class="panel-body">\n                <div class="row">\n                    <div class="col-md-6">\n                        <div class="form-group">\n                            <select class="action-entuliga form-control selectpicker" id="select-liga" data-style="btn-primary" placeholder="Liga...">\n                            </select>\n                        </div>\n                        <div class="panel panel-default">\n                            <div id="liga-detail" class="panel-body">\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <select class="action-entuliga form-control" id="select-torneo" placeholder="Torneo...">\n                            </select>\n                        </div>\n                        <div class="panel panel-default">\n                            <div id="torneo-detail" class="panel-body">\n                            </div>\n                        </div>\n                        <div class="btn-group-horizontal" role="group" aria-label="...">\n                            <button id="torneo-nuevo" type="button" class="action-entuliga btn btn-primary">Registrar</button>\n\n                            <button id="torneo-editar" type="button" class="action-entuliga btn btn-primary">Editar</button>\n                            <button id="torneo-borrar" type="button" class="btn btn-danger action-entuliga">\n                                <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>\n                            </button>\n                        </div>\n                    </div>\n                    <div class="col-md-6">\n                        <div class="panel panel-default">\n                            <div class="panel-heading">\n                                <h3 id="titulo-torneo-detalle" class="panel-title">Torneo</h3>\n                            </div>\n                            <div id="torneo-edit" class="panel-body">\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n      </div>\n    </div>\n</div>\n'}),define("views/private/TorneoAdminView",["jquery","backbone","bootstrap","selecter","core/BaseView","collections/LigasCollection","collections/TorneosCollection","views/private/LigaDetailView","views/private/TorneoDetailView","views/private/TorneoEditView","views/private/util/ModalGenericView","text!templates/private/tplTorneoAdmin.html"],function(t,e,i,n,o,s,r,a,l,c,h,d){return o.extend({template:_.template(d),events:{"change #select-liga":"changeLiga","change #select-torneo":"changeTorneo","click #torneo-nuevo":"newTorneo","click #torneo-editar":"editTorneo","click #torneo-borrar":"deleteTorneo"},initialize:function(){this.ligas=new s,this.listenTo(this.ligas,"sync",this.agregarLiga),this.listenTo(this.ligas,"sync",this.syncLigas),app.torneos=new r,this.listenTo(app.torneos,"sync",this.agregarTorneo),this.listenTo(app.torneos,"sync",this.syncTorneos),this.ligas.fetch()},render:function(){return this.$el.html(this.template()),this},changeLiga:function(e){var i=this.ligas.get(t(e.target).val());void 0!==i?(this.ligaDetailView=new a({model:i}),t("#liga-detail").html(this.ligaDetailView.render().$el),app.torneos.setLiga(i),app.torneos.fetch(),t("#torneo-editar").removeAttr("disabled"),t("#torneo-borrar").removeAttr("disabled")):(t("#torneo-editar").attr("disabled",!0),t("#torneo-borrar").attr("disabled",!0)),t("#torneo-edit").html("")},changeTorneo:function(e){var i=app.torneos.get(t(e.target).val());void 0!==i?(this.torneoDetailView=new l({model:i}),t("#torneo-detail").html(this.torneoDetailView.render().$el),t("#torneo-editar").removeAttr("disabled"),t("#torneo-borrar").removeAttr("disabled")):(void 0!==this.torneoDetailView&&this.torneoDetailView.destroyView(),t("#torneo-editar").attr("disabled",!0),t("#torneo-borrar").attr("disabled",!0)),t("#torneo-edit").html(""),t("#torneo-detail ul a:first-child").click()},agregarLiga:function(e){t("#select-liga").empty();for(var i=0;i<e.length;i++)t("#select-liga").append(t("<option>",{value:e.models[i].get("id"),text:e.models[i].get("nombre")}))},syncLigas:function(){t("#select-liga").change(),t("#torneo-edit").html("")},agregarTorneo:function(e){t("#select-torneo").empty();for(var i=0;i<e.length;i++)t("#select-torneo").append(t("<option>",{value:e.models[i].get("id"),text:e.models[i].get("nombre")}))},syncTorneos:function(){t("#select-torneo").change()},newTorneo:function(){this.disabledAction(!0);var e=this.ligas.get(t("#select-liga").val()).get("id"),i=new c({tipo:"new",idLiga:e,tha:this});t("#torneo-edit").html(""),t("#torneo-edit").html(i.render().$el),t("#titulo-torneo-detalle").html("Nuevo torneo")},editTorneo:function(){this.disabledAction(!0);var e=app.torneos.get(t("#select-torneo").val()),i=new c({tipo:"edit",modelo:e});t("#torneo-edit").html(i.render().$el),t("#titulo-torneo-detalle").html("Editar torneo")},deleteTorneo:function(){app.torneos.get(t("#select-torneo").val()).destroy({wait:!0,success:function(e,i){new h({message:i.message}),i.result&&(t("#select-torneo option:selected").remove(),t("#select-torneo").change())},error:function(t,e){new h({message:e.responseJSON.message})}})}})}),define("text!templates/private/tplEquipoDetail.html",[],function(){return'<div class="row">\n    <div class="col-xs-2">\n        <img class="avatar avatar-sm" src="<%= rutaLogoEquipo %>">\n    </div>\n    <div class="col-xs-10">\n        <h4 class="list-group-item-heading"><%= nombre %></h4>\n        <p class="list-group-item-text"><%= aliasEquipo %></p>\n    </div>\n</div>'}),define("views/private/EquipoDetailView",["jquery","backbone","core/BaseView","text!templates/private/tplEquipoDetail.html"],function(t,e,i,n){return i.extend({template:_.template(n),events:{},initialize:function(){},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}})}),define("models/util/PhotoModel",["backbone"],function(t){return t.Model.extend({urlRoot:"photo",defaults:{},initialize:function(){}})}),define("text!templates/private/util/tplUploadView.html",[],function(){
return'<div class="row">\n    <div class="col-sm-6 col-md-6">\n        <div class="thumbnail">\n            <img id="preview-photo" src="<%= pathLogo %>" alt="...">\n            <div class="caption">\n                <div class="btn-group btn-group-sm" role="group" aria-label="...">\n                    <input id="file-es" name="filelogo" type="file" accept="image/*">\n                    <button id="btn-upload" type="button" class="btn btn-default">Cambiar</button>\n                    <button id="btn-confirm" type="button" class="btn btn-default">Confirmar</button>\n                    <button id="btn-cancel" type="button" class="btn btn-default">Cancelar</button>\n                    <button id="btn-delete" type="button" class="btn btn-default">Eliminar</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'}),define("views/private/util/UploadFileView",["jquery","backbone","core/BaseView","views/private/util/ModalGenericView","text!templates/private/util/tplUploadView.html"],function(t,e,i,n,o){return i.extend({template:_.template(o),events:{"click #btn-upload":"uploadFile","click #btn-confirm":"confirmFile","click #btn-cancel":"cancelFile","click #btn-delete":"deleteFile","change #file-es":"changeFile"},initialize:function(t){this.model=t.modelo,this.callbackUpload=t.callbackUpload,this.callbackDelete=t.callbackDelete,this.urlUpload=t.urlUpload,this.urlDelete=t.urlDelete},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el.find("#file-es").hide(),this.btnUpload=this.$el.find("#btn-upload"),this.btnConfirm=this.$el.find("#btn-confirm"),this.btnCancel=this.$el.find("#btn-cancel"),this.btnDelete=this.$el.find("#btn-delete"),this.previewPhoto=this.$el.find("#preview-photo"),this.setUp("Empty"),this},setUp:function(t){this.model.get("hasLogo")?this.btnDelete.show():this.btnDelete.hide(),"Empty"==t?(this.btnConfirm.hide(),this.btnCancel.hide(),this.btnUpload.show()):(this.btnConfirm.show(),this.btnCancel.show(),this.btnUpload.hide(),this.btnDelete.hide())},uploadFile:function(){this.$el.find("#file-es").click()},deleteFile:function(){var t=new FormData;t.append("key",this.model.get("idLogo")),t.append("logo",this.model.get("nameLogo")),t.append("origin",this.model.get("type")),this.servicesRemote(this.urlDelete,t,this.callbackDelete)},confirmFile:function(){var e=t("#file-es")[0].files[0],i=new FormData;i.append("filelogo",e),i.append("id",this.model.get("idLogo")),i.append("origin",this.model.get("type")),this.servicesRemote(this.urlUpload,i,this.callbackUpload)},servicesRemote:function(e,i,o){var s=this;t.ajax({url:e,data:i,cache:!1,contentType:!1,processData:!1,type:"POST",success:function(t){this.url==s.urlDelete?(s.model.set({hasLogo:!1}),t.defaultname+=s.makeId(),s.previewPhoto.attr("src",t.defaultname)):(s.model.set({hasLogo:!0}),t.pathfilename+=s.makeId()),o(t),s.setUp("Empty"),new n({message:"Operación realizada con éxito"})},error:function(t){new n({message:"Se presentó un error, vuelva a intentar"})}})},cancelFile:function(){this.previewPhoto.attr("src",this.model.get("pathLogo")),this.setUp("Empty")},changeFile:function(t){var e=this,i=new FileReader;i.onload=function(t){e.previewPhoto.attr("src",t.target.result),e.setUp("Full")},i.readAsDataURL(t.target.files[0])},makeId:function(){for(var t="?",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<5;i++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}})}),define("text!templates/private/tplEquipoEdit.html",[],function(){return'<form id="form-equipo" role="form">\n    <p>Detalle Equipo</p>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Nombre</label>\n                <input class="form-control" placeholder="Nombre" type="text" name="nombre" value="<%= nombre %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Alias</label>\n                <input class="form-control" placeholder="Alias" type="text" name="aliasEquipo" value="<%= aliasEquipo %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-12">\n            <div class="form-group">\n                <label>Logo</label>\n                <div id="upload-file"></div>\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="modal-footer">\n            <button id="btn-cancel" type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n            <button id="btn-ok" type="button" class="btn btn-success">Guardar</button>\n        </div>\n    </div>\n</form>'}),define("views/private/EquipoEditView",["jquery","backbone","backboneValidation","jquerySerializeObject","models/EquipoModel","models/util/PhotoModel","core/BaseView","views/private/util/UploadFileView","views/private/util/ModalGenericView","text!templates/private/tplEquipoEdit.html"],function(t,e,i,n,o,s,r,a,l,c){return r.extend({template:_.template(c),events:{"click #btn-ok":"saveEquipo","click #btn-cancel":"cancelEquipo"},initialize:function(t){"new"==t.tipo?this.model=new o:this.model=t.modelo,this.model.once("sync",this.saveEquipoSuccess),this.model.once("error",this.saveEquipoError),e.Validation.bind(this),app.that=this},setUpNew:function(){t("#upload-file").html('<img class="avatar avatar-sm" src="photo/equipo/equipo-default.png">')},setUpEdit:function(){var e=this,i=new s;i.set({pathLogo:this.model.get("rutaLogoEquipo")}),i.set({hasLogo:this.model.get("hasLogoEquipo")}),i.set({idLogo:this.model.get("id")}),i.set({nameLogo:this.model.get("logoEquipo")}),i.set({type:"EQUIPO"});var n=new a({modelo:i,urlUpload:"file/upload/logo",urlDelete:"file/delete/logo",callbackUpload:function(i){e.model.set({hasLogoEquipo:!0}),e.model.set({rutaLogoEquipo:i.pathfilename}),e.model.set({logoEquipo:i.filename}),app.equipos.add(e.model),t("#select-equipo").change()},callbackDelete:function(i){e.model.set({hasLogoEquipo:!1}),e.model.set({rutaLogoEquipo:i.defaultname}),e.model.set({logoEquipo:""}),app.equipos.add(e.model),t("#select-equipo").change()}});t("#upload-file").html(n.render().$el)},remove:function(){return e.Validation.unbind(this),e.View.prototype.remove.apply(this,arguments)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},cancelEquipo:function(){new l({type:"confirm",labelConfirm:"Si",labelCancel:"No",message:"¿Desea cancelar la acción?",callbackConfirm:function(t){app.that.disabledAction(!1),app.that.destroyView(),delete app.that}})},saveEquipo:function(){var t=this.$el.find("#form-equipo").serializeObject();for(var e in t)console.log(e),t.hasOwnProperty(e)&&(t[e]=_.escape(t[e]));this.model.set(t),this.model.isValid(!0)&&this.model.save()},saveEquipoSuccess:function(e,i,n){app.equipos.add(e),void 0!==app.that&&(app.that.disabledAction(!1),new l({message:"Equipo registrado correctamente"}),app.that.destroyView(),delete app.that,1==app.equipos.length&&t("#select-equipo").change())},saveEquipoError:function(t,e,i){new l({message:"Se presento un error al registrar el equipo"})}})}),define("text!templates/private/tplEquipoAdmin.html",[],function(){return'<div class="row">\n    <div class="col-md-12">\n      <div class="main-box">\n        <div class="panel panel-info">\n            <div class="panel-heading">\n                <h3 class="panel-title">Equipo Admin</h3>\n            </div>\n            <div class="panel-body">\n                <div class="row">\n                    <div class="col-md-6">\n                        <div class="form-group">\n                            <select class="action-entuliga form-control" id="select-equipo" placeholder="Equipo...">\n                            </select>\n                        </div>\n                        <div class="panel panel-default">\n                            <div id="equipo-detail" class="panel-body">\n                            </div>\n                        </div>\n                        <div class="btn-group-horizontal" role="group" aria-label="...">\n                            <button id="equipo-nuevo" type="button" class="action-entuliga btn btn-primary">Registrar</button>\n                            <button id="equipo-editar" type="button" class="action-entuliga btn btn-primary">Editar</button>\n                            <button id="equipo-borrar" type="button" class="btn btn-danger action-entuliga">\n                                <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>\n                            </button>\n                        </div>\n                    </div>\n                    <div class="col-md-6">\n                        <div class="panel panel-default">\n                            <div class="panel-heading">\n                                <h3 class="panel-title">Equipo</h3>\n                            </div>\n                            <div id="equipo-edit" class="panel-body">\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n      </div>\n    </div>\n</div>\n'}),define("views/private/EquipoAdminView",["jquery","backbone","bootstrap","selecter","core/BaseView","collections/EquiposCollection","views/private/EquipoDetailView","views/private/EquipoEditView","views/private/util/ModalGenericView","text!templates/private/tplEquipoAdmin.html"],function(t,e,i,n,o,s,r,a,l,c){return o.extend({template:_.template(c),events:{"change #select-equipo":"changeEquipo","click #equipo-nuevo":"newEquipo","click #equipo-editar":"editEquipo","click #equipo-borrar":"deleteEquipo"},initialize:function(){app.equipos=new s,this.listenTo(app.equipos,"add",this.agregarEquipo),this.listenTo(app.equipos,"sync",this.syncEquipos),app.equipos.fetch()},render:function(){return this.$el.html(this.template()),this.$el.find(".selecter_equipo").select(),this},changeEquipo:function(e){var i=app.equipos.get(t(e.target).val());void 0!==i?(this.equipoDetailView=new r({model:i}),t("#equipo-detail").html(this.equipoDetailView.render().$el),t("#equipo-editar").removeAttr("disabled"),t("#equipo-borrar").removeAttr("disabled")):(void 0!==this.equipoDetailView&&this.equipoDetailView.destroyView(),t("#equipo-editar").attr("disabled",!0),t("#equipo-borrar").attr("disabled",!0))},newEquipo:function(){this.disabledAction(!0);var e=new a({tipo:"new",modelo:null});t("#equipo-edit").html(e.render().$el),e.setUpNew()},editEquipo:function(){this.disabledAction(!0);var e=app.equipos.get(t("#select-equipo").val()),i=new a({tipo:"edit",modelo:e});t("#equipo-edit").html(i.render().$el),i.setUpEdit()},deleteEquipo:function(){app.equipos.get(t("#select-equipo").val()).destroy({wait:!0,success:function(e,i){new l({message:i.message}),i.result&&(t("#select-equipo option:selected").remove(),t("#select-equipo").change())},error:function(t,e){new l({message:e.responseJSON.message})}})},agregarEquipo:function(e){t("#select-equipo").append(t("<option>",{value:e.get("id"),text:e.get("nombre")}))},syncEquipos:function(){t("#select-equipo").change()}})}),define("text!templates/private/tplJugadorDetail.html",[],function(){return'<div class="row">\n    <div class="col-xs-2">\n        <img class="avatar avatar-sm" src="<%= rutaLogoJugador %>">\n    </div>\n    <div class="col-xs-10">\n        <h4 class="list-group-item-heading"><%= nombre %> <%= paterno %> <%= materno %></h4>\n        <p class="list-group-item-text"><%= sexo %></p>\n        <p class="list-group-item-text"><%= fechaRegistro %></p>\n        <p class="list-group-item-text"><%= calle %> <%= noExterior %> <%= noInterior %> <%= coloniaDesc %></p>\n        <p class="list-group-item-text"><%= municipioDesc %> <%= estadoDesc %> <%= paisDesc %></p>\n        <p class="list-group-item-text"><%= latitude %> <%= longitude %></p>\n    </div>\n</div>'}),define("views/private/JugadorDetailView",["jquery","backbone","core/BaseView","text!templates/private/tplJugadorDetail.html"],function(t,e,i,n){return i.extend({template:_.template(n),events:{},initialize:function(){},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}})}),define("text!templates/private/tplJugadorEdit.html",[],function(){return'<form id="form-jugador" role="form">\n    <p>Detalle Jugador.</p>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Nombre</label>\n                <input class="form-control" placeholder="Nombre" type="text" name="nombre" value="<%= nombre %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Paterno</label>\n                <input class="form-control" placeholder="Paterno" type="text" name="paterno" value="<%= paterno %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Materno</label>\n                <input class="form-control" placeholder="Materno" type="text" name="materno" value="<%= materno %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Sexo</label>\n                <select class="form-control" id="select-sexo" placeholder="Sexo..." name="sexo">\n                    <option value="FEMENINO" <% print( sexo == \'FEMENINO\' ? \'selected\' : \'\') %>>Femenino</option>\n                    <option value="MASCULINO" <% print( sexo == \'MASCULINO\' ? \'selected\' : \'\') %>>Masculino</option>\n                </select>\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Ruta Foto</label>\n                <div id="upload-file"></div>\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Calle</label>\n                <input class="form-control" placeholder="Calle" type="text" name="calle" value="<%= calle %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>No Exterior</label>\n                <input class="form-control" placeholder="No Exterior" type="text" name="noExterior" value="<%= noExterior %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>No Interior</label>\n                <input class="form-control" placeholder="No Interior" type="text" name="noInterior" value="<%= noInterior %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Codigo Postal</label>\n                <input class="form-control" placeholder="Codigo Postal" type="text" name="codigoPostal" value="<%= codigoPostal %>">\n\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Colonia</label>\n                <div class="input-group">\n                    <input id="jugador-colonia-id" type="hidden" name="coloniaId" value="<%= coloniaId %>">\n                    <input id="jugador-colonia-desc" class="form-control" placeholder="Colonia" type="text" name="coloniaDesc" value="<%= coloniaDesc %>">\n                    <div class="input-group-btn">\n                        <button id="colonia-buscar" type="button" class="btn btn-primary">Buscar</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Latitude</label>\n                <input class="form-control" placeholder="Latitude" type="text" name="latitude" value="<%= latitude %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Longitude</label>\n                <input class="form-control" placeholder="Longitude" type="text" name="longitude" value="<%= longitude %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="modal-footer">\n            <button id="btn-cancel" type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n            <button id="btn-ok" type="button" class="btn btn-success">Guardar</button>\n        </div>\n    </div>\n</form>\n<div id="modal-colonia">\n</div>'}),define("views/private/JugadorEditView",["jquery","backbone","backboneValidation","jquerySerializeObject","models/JugadorModel","models/util/PhotoModel","core/BaseView","views/private/MainColoniaAdminView","views/private/util/UploadFileView","views/private/util/ModalGenericView","text!templates/private/tplJugadorEdit.html"],function(t,e,i,n,o,s,r,a,l,c,h){return r.extend({template:_.template(h),events:{"click #colonia-buscar":"buscarColonia","click #btn-ok":"saveJugador","click #btn-cancel":"cancelJugador"},initialize:function(t){"new"==t.tipo?this.model=new o:this.model=t.modelo,this.model.once("sync",this.saveJugadorSuccess),this.model.once("error",this.saveJugadorError),e.Validation.bind(this),app.that=this},setUpNew:function(){t("#upload-file").html('<img class="avatar avatar-sm" src="photo/jugador/jugador-default.png">')},setUpEdit:function(){var e=this,i=new s;i.set({pathLogo:this.model.get("rutaLogoJugador")}),i.set({hasLogo:this.model.get("hasLogoJugador")}),i.set({idLogo:this.model.get("id")}),i.set({nameLogo:this.model.get("logoJugador")}),i.set({type:"JUGADOR"});var n=new l({modelo:i,urlUpload:"file/upload/foto",urlDelete:"file/delete/foto",callbackUpload:function(i){e.model.set({hasLogoJugador:!0}),e.model.set({rutaLogoJugador:i.pathfilename}),e.model.set({logoJugador:i.filename}),app.jugadores.add(e.model),t("#select-jugador").change()},callbackDelete:function(i){e.model.set({hasLogoJugador:!1}),e.model.set({rutaLogoJugador:i.defaultname}),e.model.set({logoJugador:""}),app.jugadores.add(e.model),t("#select-jugador").change()}});t("#upload-file").html(n.render().$el)},remove:function(){return e.Validation.unbind(this),e.View.prototype.remove.apply(this,arguments)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},buscarColonia:function(){new a(this.selectColonia)},selectColonia:function(e){t("#jugador-colonia-id").val(e.get("id")),t("#jugador-colonia-desc").val(e.get("nombre"))},cancelJugador:function(){new c({type:"confirm",labelConfirm:"Si",labelCancel:"No",message:"¿Desea cancelar la acción?",callbackConfirm:function(t){app.that.disabledAction(!1),app.that.destroyView(),delete app.that}})},saveJugador:function(){var t=this.$el.find("#form-jugador").serializeObject();for(var e in t)console.log(e),t.hasOwnProperty(e)&&(t[e]=_.escape(t[e]));this.model.set(t),this.model.isValid(!0)&&this.model.save()},saveJugadorSuccess:function(e,i,n){app.jugadores.add(e),void 0!==app.that&&(app.that.disabledAction(!1),new c({message:"Jugador registrado correctamente"}),app.that.destroyView(),delete app.that,1==app.jugadores.length&&t("#select-jugador").change())},saveJugadorError:function(t,e,i){new c({message:"Se presento un error al registrar el Jugador"})}})}),define("text!templates/private/tplJugadorAdmin.html",[],function(){return'<div class="row">\n    <div class="col-md-12">\n      <div class="main-box">\n        <div class="panel panel-info">\n            <div class="panel-heading">\n                <h3 class="panel-title">Jugador Admin A</h3>\n            </div>\n            <div class="panel-body">\n                <div class="row">\n                    <div class="col-md-6">\n                        <div class="form-group">\n                            <select class="action-entuliga form-control " id="select-jugador" placeholder="Jugador...">\n                            </select>\n                        </div>\n                        <div class="panel panel-default">\n                            <div id="jugador-detail" class="panel-body">\n                            </div>\n                        </div>\n                        <div class="btn-group-horizontal" role="group" aria-label="...">\n                            <button id="jugador-nuevo" type="button" class="btn btn-primary action-entuliga">Registrar</button>\n                            <button id="jugador-editar" type="button" class="btn btn-primary action-entuliga">Editar</button>\n                            <button id="jugador-borrar" type="button" class="btn btn-danger action-entuliga">\n                                <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>\n                            </button>\n                        </div>\n                    </div>\n                    <div class="col-md-6">\n                        <div class="panel panel-default">\n                            <div class="panel-heading">\n                                <h3 class="panel-title">Jugador</h3>\n                            </div>\n                            <div id="jugador-edit" class="panel-body">\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n      </div>\n    </div>\n</div>\n'}),define("views/private/JugadorAdminView",["jquery","backbone","bootstrap","selecter","core/BaseView","collections/JugadoresCollection","views/private/JugadorDetailView","views/private/JugadorEditView","views/private/util/ModalGenericView","text!templates/private/tplJugadorAdmin.html"],function(t,e,i,n,o,s,r,a,l,c){return o.extend({template:_.template(c),events:{"change #select-jugador":"changeJugador","click #jugador-nuevo":"newJugador","click #jugador-editar":"editJugador","click #jugador-borrar":"deleteJugador"},initialize:function(){app.jugadores=new s,app.jugadores.setTipo("none"),this.listenTo(app.jugadores,"add",this.agregarJugador),this.listenTo(app.jugadores,"sync",this.syncJugadores),app.jugadores.fetch()},render:function(){return this.$el.html(this.template()),this.$el.find(".selecter_jugador").select(),this},changeJugador:function(e){var i=app.jugadores.get(t(e.target).val());void 0!==i?(this.jugadorDetailView=new r({model:i}),t("#jugador-detail").html(this.jugadorDetailView.render().$el),t("#jugador-editar").removeAttr("disabled"),t("#jugador-borrar").removeAttr("disabled")):(void 0!==this.jugadorDetailView&&this.jugadorDetailView.destroyView(),t("#jugador-editar").attr("disabled",!0),t("#jugador-borrar").attr("disabled",!0))},newJugador:function(){this.disabledAction(!0);var e=new a({tipo:"new",modelo:null});t("#jugador-edit").html(e.render().$el),e.setUpNew()},editJugador:function(){this.disabledAction(!0);var e=app.jugadores.get(t("#select-jugador").val()),i=new a({tipo:"edit",modelo:e});t("#jugador-edit").html(i.render().$el),i.setUpEdit()},deleteJugador:function(){app.jugadores.get(t("#select-jugador").val()).destroy({wait:!0,success:function(e,i){new l({message:i.message}),i.result&&(t("#select-jugador option:selected").remove(),t("#select-jugador").change())},error:function(t,e){new l({message:e.responseJSON.message})}})},agregarJugador:function(e){t("#select-jugador").append(t("<option>",{value:e.get("id"),text:e.get("nombre")+" "+e.get("paterno")+" "+e.get("paterno")}))},syncJugadores:function(){t("#select-jugador").change()}})}),define("text!templates/private/tplArbitroDetail.html",[],function(){return'<div class="row">\n    <div class="col-xs-2">\n        <img class="avatar avatar-sm" src="<%= rutaLogoArbitro %>">\n    </div>\n    <div class="col-xs-10">\n        <h4 class="list-group-item-heading"><%= nombre %> <%= paterno %> <%= materno %></h4>\n        <p class="list-group-item-text"><%= sexo %></p>\n        <p class="list-group-item-text"><%= fechaRegistro %></p>\n        <p class="list-group-item-text"><%= calle %> <%= noExterior %> <%= noInterior %> <%= coloniaDesc %></p>\n        <p class="list-group-item-text"><%= municipioDesc %> <%= estadoDesc %> <%= paisDesc %></p>\n        <p class="list-group-item-text"><%= latitude %> <%= longitude %></p>\n    </div>\n</div>'}),define("views/private/ArbitroDetailView",["jquery","backbone","core/BaseView","text!templates/private/tplArbitroDetail.html"],function(t,e,i,n){return i.extend({template:_.template(n),events:{},initialize:function(){},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}})}),define("text!templates/private/tplArbitroEdit.html",[],function(){return'<form id="form-arbitro" role="form">\n    <p>Detalle Arbitro.</p>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Nombre</label>\n                <input class="form-control" placeholder="Nombre" type="text" name="nombre" value="<%= nombre %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Paterno</label>\n                <input class="form-control" placeholder="Paterno" type="text" name="paterno" value="<%= paterno %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Materno</label>\n                <input class="form-control" placeholder="Materno" type="text" name="materno" value="<%= materno %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Sexo</label>\n                <select class="form-control" id="select-sexo" placeholder="Sexo..." name="sexo">\n                    <option value="FEMENINO" <% print( sexo == \'FEMENINO\' ? \'selected\' : \'\') %>>Femenino</option>\n                    <option value="MASCULINO" <% print( sexo == \'MASCULINO\' ? \'selected\' : \'\') %>>Masculino</option>\n                </select>\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Ruta Foto</label>\n                <div id="upload-file"></div>\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Calle</label>\n                <input class="form-control" placeholder="Calle" type="text" name="calle" value="<%= calle %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>No Exterior</label>\n                <input class="form-control" placeholder="No Exterior" type="text" name="noExterior" value="<%= noExterior %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>No Interior</label>\n                <input class="form-control" placeholder="No Interior" type="text" name="noInterior" value="<%= noInterior %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Codigo Postal</label>\n                <input class="form-control" placeholder="Codigo Postal" type="text" name="codigoPostal" value="<%= codigoPostal %>">\n\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Colonia</label>\n                <div class="input-group">\n                    <input id="arbitro-colonia-id" type="hidden" name="coloniaId" value="<%= coloniaId %>">\n                    <input id="arbitro-colonia-desc" class="form-control" placeholder="Colonia" type="text" name="coloniaDesc" value="<%= coloniaDesc %>">\n                    <div class="input-group-btn">\n                        <button id="colonia-buscar" type="button" class="btn btn-primary">Buscar</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Latitude</label>\n                <input class="form-control" placeholder="Latitude" type="text" name="latitude" value="<%= latitude %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Longitude</label>\n                <input class="form-control" placeholder="Longitude" type="text" name="longitude" value="<%= longitude %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="modal-footer">\n            <button id="btn-cancel" type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n            <button id="btn-ok" type="button" class="btn btn-success">Guardar</button>\n        </div>\n    </div>\n</form>\n<div id="modal-colonia">\n</div>'}),define("views/private/ArbitroEditView",["jquery","backbone","backboneValidation","jquerySerializeObject","models/ArbitroModel","models/util/PhotoModel","core/BaseView","views/private/MainColoniaAdminView","views/private/util/UploadFileView","views/private/util/ModalGenericView","text!templates/private/tplArbitroEdit.html"],function(t,e,i,n,o,s,r,a,l,c,h){return r.extend({template:_.template(h),events:{"click #colonia-buscar":"buscarColonia","click #btn-ok":"saveArbitro","click #btn-cancel":"cancelArbitro"},initialize:function(t){"new"==t.tipo?this.model=new o:this.model=t.modelo,this.model.once("sync",this.saveArbitroSuccess),this.model.once("error",this.saveArbitroError),e.Validation.bind(this),app.that=this},setUpNew:function(){t("#upload-file").html('<img class="avatar avatar-sm" src="photo/arbitro/arbitro-default.png">')},setUpEdit:function(){var e=this,i=new s;i.set({pathLogo:this.model.get("rutaLogoArbitro")}),i.set({hasLogo:this.model.get("hasLogoArbitro")}),i.set({idLogo:this.model.get("id")}),i.set({nameLogo:this.model.get("logoArbitro")}),i.set({type:"ARBITRO"});var n=new l({modelo:i,urlUpload:"file/upload/foto",urlDelete:"file/delete/foto",callbackUpload:function(i){e.model.set({hasLogoArbitro:!0}),e.model.set({rutaLogoArbitro:i.pathfilename}),e.model.set({logoArbitro:i.filename}),app.arbitros.add(e.model),t("#select-arbitro").change()},callbackDelete:function(i){e.model.set({hasLogoArbitro:!1}),e.model.set({rutaLogoArbitro:i.defaultname}),e.model.set({logoArbitro:""}),app.arbitros.add(e.model),t("#select-arbitro").change()}});t("#upload-file").html(n.render().$el)},remove:function(){return e.Validation.unbind(this),e.View.prototype.remove.apply(this,arguments)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},buscarColonia:function(){new a(this.selectColonia)},selectColonia:function(e){t("#arbitro-colonia-id").val(e.get("id")),t("#arbitro-colonia-desc").val(e.get("nombre"))},cancelArbitro:function(){new c({type:"confirm",labelConfirm:"Si",labelCancel:"No",message:"¿Desea cancelar la acción?",callbackConfirm:function(t){app.that.disabledAction(!1),app.that.destroyView(),delete app.that}})},saveArbitro:function(){var t=this.$el.find("#form-arbitro").serializeObject();for(var e in t)console.log(e),t.hasOwnProperty(e)&&(t[e]=_.escape(t[e]));this.model.set(t),this.model.isValid(!0)&&this.model.save()},saveArbitroSuccess:function(e,i,n){app.arbitros.add(e),void 0!==app.that&&(app.that.disabledAction(!1),new c({message:"Arbitro registrado correctamente"}),app.that.destroyView(),delete app.that,1==app.arbitros.length&&t("#select-arbitro").change())},saveArbitroError:function(t,e,i){new c({message:"Se presento un error al registrar el arbitro"})}})}),define("text!templates/private/tplArbitroAdmin.html",[],function(){
return'\n<div class="row">\n    <div class="col-md-12">\n      <div class="main-box">\n        <div class="panel panel-info">\n            <div class="panel-heading">\n                <h3 class="panel-title">Arbitro Admin</h3>\n            </div>\n            <div class="panel-body">\n                <div class="row">\n                    <div class="col-md-6">\n                        <div class="form-group">\n                            <select class="form-control action-entuliga" id="select-arbitro" placeholder="Arbitro...">\n                            </select>\n                        </div>\n                        <div class="panel panel-default">\n                            <div id="arbitro-detail" class="panel-body">\n                            </div>\n                        </div>\n                        <div class="btn-group-horizontal" role="group" aria-label="...">\n                            <button id="arbitro-nuevo" type="button" class="btn btn-primary action-entuliga">Registrar</button>\n                            <button id="arbitro-editar" type="button" class="btn btn-primary action-entuliga">Editar</button>\n                            <button id="arbitro-borrar" type="button" class="btn btn-danger action-entuliga">\n                                <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>\n                            </button>\n                        </div>\n                    </div>\n                    <div class="col-md-6">\n                        <div class="panel panel-default">\n                            <div class="panel-heading">\n                                <h3 class="panel-title">Arbitro</h3>\n                            </div>\n                            <div id="arbitro-edit" class="panel-body">\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n      </div>\n    </div>\n</div>\n'}),define("views/private/ArbitroAdminView",["jquery","backbone","bootstrap","selecter","core/BaseView","collections/ArbitrosCollection","views/private/ArbitroDetailView","views/private/ArbitroEditView","views/private/util/ModalGenericView","text!templates/private/tplArbitroAdmin.html"],function(t,e,i,n,o,s,r,a,l,c){return o.extend({template:_.template(c),events:{"change #select-arbitro":"changeArbitro","click #arbitro-nuevo":"newArbitro","click #arbitro-editar":"editArbitro","click #arbitro-borrar":"deleteArbitro"},initialize:function(){app.arbitros=new s,this.listenTo(app.arbitros,"add",this.agregarArbitro),this.listenTo(app.arbitros,"sync",this.syncArbitros),app.arbitros.fetch()},render:function(){return this.$el.html(this.template()),this.$el.find(".selecter_arbitro").select(),this},changeArbitro:function(e){var i=app.arbitros.get(t(e.target).val());void 0!==i?(this.arbitroDetailView=new r({model:i}),t("#arbitro-detail").html(this.arbitroDetailView.render().$el),t("#arbitro-editar").removeAttr("disabled"),t("#arbitro-borrar").removeAttr("disabled")):(void 0!==this.arbitroDetailView&&this.arbitroDetailView.destroyView(),t("#arbitro-editar").attr("disabled",!0),t("#arbitro-borrar").attr("disabled",!0))},newArbitro:function(){this.disabledAction(!0);var e=new a({tipo:"new",modelo:null});t("#arbitro-edit").html(e.render().$el),e.setUpNew()},editArbitro:function(){this.disabledAction(!0);var e=app.arbitros.get(t("#select-arbitro").val()),i=new a({tipo:"edit",modelo:e});t("#arbitro-edit").html(i.render().$el),i.setUpEdit()},deleteArbitro:function(){app.arbitros.get(t("#select-arbitro").val()).destroy({wait:!0,success:function(e,i){new l({message:i.message}),i.result&&(t("#select-arbitro option:selected").remove(),t("#select-arbitro").change())},error:function(t,e){new l({message:e.responseJSON.message})}})},agregarArbitro:function(e){t("#select-arbitro").append(t("<option>",{value:e.get("id"),text:e.get("nombre")+" "+e.get("paterno")+" "+e.get("paterno")}))},syncArbitros:function(){t("#select-arbitro").change()}})}),define("text!templates/private/tplCanchaDetail.html",[],function(){return'<h4 class="list-group-item-heading"><%= nombre %></h4>\n<p class="list-group-item-text"><%= descripcion %></p>\n<p class="list-group-item-text"><%= calle %> <%= noExterior %> <%= noInterior %> <%= coloniaDesc %></p>\n<p class="list-group-item-text"><%= municipioDesc %> <%= estadoDesc %> <%= paisDesc %></p>\n<p class="list-group-item-text"><%= latitude %> <%= longitude %></p>'}),define("views/private/CanchaDetailView",["jquery","backbone","core/BaseView","text!templates/private/tplCanchaDetail.html"],function(t,e,i,n){return i.extend({template:_.template(n),events:{},initialize:function(){},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}})}),define("text!templates/private/tplCanchaEdit.html",[],function(){return'<form id="form-cancha" role="form">\n    <p>Detalle Cancha.</p>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Nombre</label>\n                <input class="form-control" placeholder="Nombre" type="text" name="nombre" value="<%= nombre %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Alias</label>\n                <input class="form-control" placeholder="Alias" type="text" name="alias" value="<%= alias %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Descripcion</label>\n                <input class="form-control" placeholder="Descripcion" type="text" name="descripcion" value="<%= descripcion %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Calle</label>\n                <input class="form-control" placeholder="Calle" type="text" name="calle" value="<%= calle %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>No Exterior</label>\n                <input class="form-control" placeholder="No Exterior" type="text" name="noExterior" value="<%= noExterior %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>No Interior</label>\n                <input class="form-control" placeholder="No Interior" type="text" name="noInterior" value="<%= noInterior %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Codigo Postal</label>\n                <input class="form-control" placeholder="Codigo Postal" type="text" name="codigoPostal" value="<%= codigoPostal %>">\n\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Colonia</label>\n                <div class="input-group">\n                    <input id="cancha-colonia-id" type="hidden" name="coloniaId" value="<%= coloniaId %>">\n                    <input id="cancha-colonia-desc" class="form-control" placeholder="Colonia" type="text" name="coloniaDesc" value="<%= coloniaDesc %>">\n                    <div class="input-group-btn">\n                        <button id="colonia-buscar" type="button" class="btn btn-primary">Buscar</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Latitude</label>\n                <input class="form-control" placeholder="Latitude" type="text" name="latitude" value="<%= latitude %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Longitude</label>\n                <input class="form-control" placeholder="Longitude" type="text" name="longitude" value="<%= longitude %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="modal-footer">\n            <button id="btn-cancel" type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n            <button id="btn-ok" type="button" class="btn btn-success">Guardar</button>\n        </div>\n    </div>\n</form>\n<div id="modal-colonia">\n</div>'}),define("views/private/CanchaEditView",["jquery","backbone","backboneValidation","jquerySerializeObject","models/CanchaModel","core/BaseView","views/private/MainColoniaAdminView","views/private/util/ModalGenericView","text!templates/private/tplCanchaEdit.html"],function(t,e,i,n,o,s,r,a,l){return s.extend({template:_.template(l),events:{"click #colonia-buscar":"buscarColonia","click #btn-ok":"saveCancha","click #btn-cancel":"cancelCancha"},initialize:function(t){"new"==t.tipo?this.model=new o:this.model=t.modelo,this.model.once("sync",this.saveCanchaSuccess),this.model.once("error",this.saveCanchaError),e.Validation.bind(this),app.that=this},remove:function(){return e.Validation.unbind(this),e.View.prototype.remove.apply(this,arguments)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},buscarColonia:function(){new r(this.selectColonia)},selectColonia:function(e){t("#cancha-colonia-id").val(e.get("id")),t("#cancha-colonia-desc").val(e.get("nombre"))},cancelCancha:function(){new a({type:"confirm",labelConfirm:"Si",labelCancel:"No",message:"¿Desea cancelar la acción?",callbackConfirm:function(t){app.that.disabledAction(!1),app.that.destroyView(),delete app.that}})},saveCancha:function(){var t=this.$el.find("#form-cancha").serializeObject();for(var e in t)console.log(e),t.hasOwnProperty(e)&&(t[e]=_.escape(t[e]));this.model.set(t),this.model.isValid(!0)&&this.model.save()},saveCanchaSuccess:function(e,i,n){app.canchas.add(e),void 0!==app.that&&(app.that.disabledAction(!1),new a({message:"Cancha guardada correctamente"}),app.that.destroyView(),delete app.that,1==app.canchas.length&&t("#select-cancha").change())},saveCanchaError:function(t,e,i){new a({message:"Se presento un error al registrar la cancha"})}})}),define("text!templates/private/tplCanchaAdmin.html",[],function(){return'<div class="row">\n    <div class="col-md-12">\n      <div class="main-box">\n        <div class="panel panel-info">\n            <div class="panel-heading">\n                <h3 class="panel-title">Cancha Admin</h3>\n            </div>\n            <div class="panel-body">\n                <div class="row">\n                    <div class="col-md-6">\n                        <div class="form-group">\n                            <select class="action-entuliga form-control" id="select-cancha" placeholder="Cancha...">\n                            </select>\n                        </div>\n                        <div class="panel panel-default">\n                            <div id="cancha-detail" class="panel-body">\n                            </div>\n                        </div>\n                        <div class="btn-group-horizontal" role="group" aria-label="...">\n                            <button id="cancha-nuevo" type="button" class="btn btn-primary action-entuliga">Registrar</button>\n                            <button id="cancha-editar" type="button" class="btn btn-primary action-entuliga">Editar</button>\n                            <button id="cancha-borrar" type="button" class="btn btn-danger action-entuliga">\n                                <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>\n                            </button>\n                        </div>\n                    </div>\n                    <div class="col-md-6">\n                        <div class="panel panel-default">\n                            <div class="panel-heading">\n                                <h3 class="panel-title">Cancha</h3>\n                            </div>\n                            <div id="cancha-edit" class="panel-body">\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n      </div>\n    </div>\n</div>\n'}),define("views/private/CanchaAdminView",["jquery","backbone","bootstrap","selecter","core/BaseView","collections/CanchasCollection","views/private/CanchaDetailView","views/private/CanchaEditView","views/private/util/ModalGenericView","text!templates/private/tplCanchaAdmin.html"],function(t,e,i,n,o,s,r,a,l,c){return o.extend({template:_.template(c),events:{"change #select-cancha":"changeCancha","click #cancha-nuevo":"newCancha","click #cancha-editar":"editCancha","click #cancha-borrar":"deleteCancha"},initialize:function(){app.canchas=new s,this.listenTo(app.canchas,"add",this.agregarCancha),this.listenTo(app.canchas,"sync",this.syncCanchas),app.canchas.fetch()},render:function(){return this.$el.html(this.template()),this.$el.find(".selecter_cancha").select(),this},changeCancha:function(e){var i=app.canchas.get(t(e.target).val());void 0!==i?(this.canchaDetailView=new r({model:i}),t("#cancha-detail").html(this.canchaDetailView.render().$el),t("#cancha-editar").removeAttr("disabled"),t("#cancha-borrar").removeAttr("disabled")):(void 0!==this.canchaDetailView&&this.canchaDetailView.destroyView(),t("#cancha-editar").attr("disabled",!0),t("#cancha-borrar").attr("disabled",!0))},newCancha:function(){this.disabledAction(!0);var e=new a({tipo:"new",modelo:null});t("#cancha-edit").html(e.render().$el)},editCancha:function(){this.disabledAction(!0);var e=app.canchas.get(t("#select-cancha").val()),i=new a({tipo:"edit",modelo:e});t("#cancha-edit").html(i.render().$el)},deleteCancha:function(){app.canchas.get(t("#select-cancha").val()).destroy({wait:!0,success:function(e,i){new l({message:i.message}),i.result&&(t("#select-cancha option:selected").remove(),t("#select-cancha").change())},error:function(t,e){new l({message:e.responseJSON.message})}})},agregarCancha:function(e){t("#select-cancha").append(t("<option>",{value:e.get("id"),text:e.get("nombre")}))},syncCanchas:function(){t("#select-cancha").change()}})});var fabric=fabric||{version:"1.7.9"};"undefined"!=typeof exports&&(exports.fabric=fabric),"undefined"!=typeof document&&"undefined"!=typeof window?(fabric.document=document,fabric.window=window,window.fabric=fabric):(fabric.document=require("jsdom").jsdom(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E")),fabric.document.createWindow?fabric.window=fabric.document.createWindow():fabric.window=fabric.document.parentWindow),fabric.isTouchSupported="ontouchstart"in fabric.document.documentElement,fabric.isLikelyNode="undefined"!=typeof Buffer&&"undefined"==typeof window,fabric.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id"],fabric.DPI=96,fabric.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?)",fabric.fontPaths={},fabric.iMatrix=[1,0,0,1,0,0],fabric.charWidthsCache={},fabric.devicePixelRatio=fabric.window.devicePixelRatio||fabric.window.webkitDevicePixelRatio||fabric.window.mozDevicePixelRatio||1,function(){function t(t,e){if(this.__eventListeners[t]){var i=this.__eventListeners[t];e?i[i.indexOf(e)]=!1:fabric.util.array.fill(i,!1)}}function e(t,e){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var i in t)this.on(i,t[i]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(e);return this}function i(e,i){if(this.__eventListeners){if(0===arguments.length)for(e in this.__eventListeners)t.call(this,e);else if(1===arguments.length&&"object"==typeof arguments[0])for(var n in e)t.call(this,n,e[n]);else t.call(this,e,i);return this}}function n(t,e){if(this.__eventListeners){var i=this.__eventListeners[t];if(i){for(var n=0,o=i.length;n<o;n++)i[n]&&i[n].call(this,e||{});return this.__eventListeners[t]=i.filter(function(t){return!1!==t}),this}}}fabric.Observable={observe:e,stopObserving:i,fire:n,on:e,off:i,trigger:n}}(),fabric.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var t=0,e=arguments.length;t<e;t++)this._onObjectAdded(arguments[t]);return this.renderOnAddRemove&&this.renderAll(),this},insertAt:function(t,e,i){var n=this.getObjects();return i?n[e]=t:n.splice(e,0,t),this._onObjectAdded&&this._onObjectAdded(t),this.renderOnAddRemove&&this.renderAll(),this},remove:function(){for(var t,e=this.getObjects(),i=!1,n=0,o=arguments.length;n<o;n++)-1!==(t=e.indexOf(arguments[n]))&&(i=!0,e.splice(t,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[n]));return this.renderOnAddRemove&&i&&this.renderAll(),this},forEachObject:function(t,e){for(var i=this.getObjects(),n=0,o=i.length;n<o;n++)t.call(e,i[n],n,i);return this},getObjects:function(t){return void 0===t?this._objects:this._objects.filter(function(e){return e.type===t})},item:function(t){return this.getObjects()[t]},isEmpty:function(){return 0===this.getObjects().length},size:function(){return this.getObjects().length},contains:function(t){return this.getObjects().indexOf(t)>-1},complexity:function(){return this.getObjects().reduce(function(t,e){return t+=e.complexity?e.complexity():0},0)}},fabric.CommonMethods={_setOptions:function(t){for(var e in t)this.set(e,t[e])},_initGradient:function(t,e){!t||!t.colorStops||t instanceof fabric.Gradient||this.set(e,new fabric.Gradient(t))},_initPattern:function(t,e,i){!t||!t.source||t instanceof fabric.Pattern?i&&i():this.set(e,new fabric.Pattern(t,i))},_initClipping:function(t){if(t.clipTo&&"string"==typeof t.clipTo){var e=fabric.util.getFunctionBody(t.clipTo);void 0!==e&&(this.clipTo=new Function("ctx",e))}},_setObject:function(t){for(var e in t)this._set(e,t[e])},set:function(t,e){return"object"==typeof t?this._setObject(t):"function"==typeof e&&"clipTo"!==t?this._set(t,e(this.get(t))):this._set(t,e),this},_set:function(t,e){this[t]=e},toggle:function(t){var e=this.get(t);return"boolean"==typeof e&&this.set(t,!e),this},get:function(t){return this[t]}},function(t){var e=Math.sqrt,i=Math.atan2,n=Math.pow,o=Math.abs,s=Math.PI/180;fabric.util={removeFromArray:function(t,e){var i=t.indexOf(e);return-1!==i&&t.splice(i,1),t},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},degreesToRadians:function(t){return t*s},radiansToDegrees:function(t){return t/s},rotatePoint:function(t,e,i){t.subtractEquals(e);var n=fabric.util.rotateVector(t,i);return new fabric.Point(n.x,n.y).addEquals(e)},rotateVector:function(t,e){var i=Math.sin(e),n=Math.cos(e);return{x:t.x*n-t.y*i,y:t.x*i+t.y*n}},transformPoint:function(t,e,i){return i?new fabric.Point(e[0]*t.x+e[2]*t.y,e[1]*t.x+e[3]*t.y):new fabric.Point(e[0]*t.x+e[2]*t.y+e[4],e[1]*t.x+e[3]*t.y+e[5])},makeBoundingBoxFromPoints:function(t){var e=[t[0].x,t[1].x,t[2].x,t[3].x],i=fabric.util.array.min(e),n=fabric.util.array.max(e),o=Math.abs(i-n),s=[t[0].y,t[1].y,t[2].y,t[3].y],r=fabric.util.array.min(s),a=fabric.util.array.max(s);return{left:i,top:r,width:o,height:Math.abs(r-a)}},invertTransform:function(t){var e=1/(t[0]*t[3]-t[1]*t[2]),i=[e*t[3],-e*t[1],-e*t[2],e*t[0]],n=fabric.util.transformPoint({x:t[4],y:t[5]},i,!0);return i[4]=-n.x,i[5]=-n.y,i},toFixed:function(t,e){return parseFloat(Number(t).toFixed(e))},parseUnit:function(t,e){var i=/\D{0,2}$/.exec(t),n=parseFloat(t);switch(e||(e=fabric.Text.DEFAULT_SVG_FONT_SIZE),i[0]){case"mm":return n*fabric.DPI/25.4;case"cm":return n*fabric.DPI/2.54;case"in":return n*fabric.DPI;case"pt":return n*fabric.DPI/72;case"pc":return n*fabric.DPI/72*12;case"em":return n*e;default:return n}},falseFunction:function(){return!1},getKlass:function(t,e){return t=fabric.util.string.camelize(t.charAt(0).toUpperCase()+t.slice(1)),fabric.util.resolveNamespace(e)[t]},resolveNamespace:function(e){if(!e)return fabric;var i,n=e.split("."),o=n.length,s=t||fabric.window;for(i=0;i<o;++i)s=s[n[i]];return s},loadImage:function(t,e,i,n){if(!t)return void(e&&e.call(i,t));var o=fabric.util.createImage();o.onload=function(){e&&e.call(i,o),o=o.onload=o.onerror=null},o.onerror=function(){fabric.log("Error loading "+o.src),e&&e.call(i,null,!0),o=o.onload=o.onerror=null},0!==t.indexOf("data")&&n&&(o.crossOrigin=n),o.src=t},enlivenObjects:function(t,e,i,n){function o(){++r===a&&e&&e(s)}t=t||[];var s=[],r=0,a=t.length;return a?void t.forEach(function(t,e){if(!t||!t.type)return void o();fabric.util.getKlass(t.type,i).fromObject(t,function(i,r){r||(s[e]=i),n&&n(t,i,r),o()},!0)}):void(e&&e(s))},enlivenPatterns:function(t,e){function i(){++o===s&&e&&e(n)}t=t||[];var n=[],o=0,s=t.length;return s?void t.forEach(function(t,e){t&&t.source?new fabric.Pattern(t,function(t){n[e]=t,i()}):(n[e]=t,i())}):void(e&&e(n))},groupSVGElements:function(t,e,i){var n;return n=new fabric.PathGroup(t,e),void 0!==i&&n.setSourcePath(i),n},populateWithProperties:function(t,e,i){if(i&&"[object Array]"===Object.prototype.toString.call(i))for(var n=0,o=i.length;n<o;n++)i[n]in t&&(e[i[n]]=t[i[n]])},drawDashedLine:function(t,n,o,s,r,a){var l=s-n,c=r-o,h=e(l*l+c*c),d=i(c,l),u=a.length,p=0,f=!0;for(t.save(),t.translate(n,o),t.moveTo(0,0),t.rotate(d),n=0;h>n;)n+=a[p++%u],n>h&&(n=h),t[f?"lineTo":"moveTo"](n,0),f=!f;t.restore()},createCanvasElement:function(t){return t||(t=fabric.document.createElement("canvas")),t.getContext||"undefined"==typeof G_vmlCanvasManager||G_vmlCanvasManager.initElement(t),t},createImage:function(){return fabric.isLikelyNode?new(require("canvas").Image):fabric.document.createElement("img")},createAccessors:function(t){var e,i,n,o,s,r=t.prototype;for(e=r.stateProperties.length;e--;)i=r.stateProperties[e],n=i.charAt(0).toUpperCase()+i.slice(1),o="set"+n,s="get"+n,r[s]||(r[s]=function(t){return new Function('return this.get("'+t+'")')}(i)),r[o]||(r[o]=function(t){return new Function("value",'return this.set("'+t+'", value)')}(i))},clipContext:function(t,e){e.save(),e.beginPath(),t.clipTo(e),e.clip()},multiplyTransformMatrices:function(t,e,i){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],i?0:t[0]*e[4]+t[2]*e[5]+t[4],i?0:t[1]*e[4]+t[3]*e[5]+t[5]]},qrDecompose:function(t){var o=i(t[1],t[0]),r=n(t[0],2)+n(t[1],2),a=e(r),l=(t[0]*t[3]-t[2]*t[1])/a,c=i(t[0]*t[2]+t[1]*t[3],r);return{angle:o/s,scaleX:a,scaleY:l,skewX:c/s,skewY:0,translateX:t[4],translateY:t[5]}},customTransformMatrix:function(t,e,i){var n=[1,0,o(Math.tan(i*s)),1],r=[o(t),0,0,o(e)];return fabric.util.multiplyTransformMatrices(r,n,!0)},resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.flipX=!1,t.flipY=!1,t.setAngle(0)},getFunctionBody:function(t){return(String(t).match(/function[^{]*\{([\s\S]*)\}/)||{})[1]},isTransparent:function(t,e,i,n){n>0&&(e>n?e-=n:e=0,i>n?i-=n:i=0);var o,s,r=!0,a=t.getImageData(e,i,2*n||1,2*n||1),l=a.data.length;for(o=3;o<l&&(s=a.data[o],!1!==(r=s<=0));o+=4);return a=null,r},parsePreserveAspectRatioAttribute:function(t){var e,i="meet",n="Mid",o="Mid",s=t.split(" ");return s&&s.length&&(i=s.pop(),"meet"!==i&&"slice"!==i?(e=i,i="meet"):s.length&&(e=s.pop())),n="none"!==e?e.slice(1,4):"none",o="none"!==e?e.slice(5,8):"none",{meetOrSlice:i,alignX:n,alignY:o}},clearFabricFontCache:function(t){t?fabric.charWidthsCache[t]&&delete fabric.charWidthsCache[t]:fabric.charWidthsCache={}}}}("undefined"!=typeof exports?exports:this),function(){function t(t,n,s,r,l,c,h){var d=a.call(arguments);if(o[d])return o[d];var u=Math.PI,p=h*u/180,f=Math.sin(p),g=Math.cos(p),v=0,m=0;s=Math.abs(s),r=Math.abs(r);var b=-g*t*.5-f*n*.5,y=-g*n*.5+f*t*.5,w=s*s,x=r*r,C=y*y,_=b*b,T=w*x-w*C-x*_,S=0;if(T<0){var k=Math.sqrt(1-T/(w*x));s*=k,r*=k}else S=(l===c?-1:1)*Math.sqrt(T/(w*C+x*_));var E=S*s*y/r,A=-S*r*b/s,O=g*E-f*A+.5*t,D=f*E+g*A+.5*n,j=i(1,0,(b-E)/s,(y-A)/r),M=i((b-E)/s,(y-A)/r,(-b-E)/s,(-y-A)/r);0===c&&M>0?M-=2*u:1===c&&M<0&&(M+=2*u);for(var I=Math.ceil(Math.abs(M/u*2)),V=[],P=M/I,L=8/3*Math.sin(P/4)*Math.sin(P/4)/Math.sin(P/2),R=j+P,F=0;F<I;F++)V[F]=e(j,R,g,f,s,r,O,D,L,v,m),v=V[F][4],m=V[F][5],j=R,R+=P;return o[d]=V,V}function e(t,e,i,n,o,r,l,c,h,d,u){var p=a.call(arguments);if(s[p])return s[p];var f=Math.cos(t),g=Math.sin(t),v=Math.cos(e),m=Math.sin(e),b=i*o*v-n*r*m+l,y=n*o*v+i*r*m+c,w=d+h*(-i*o*g-n*r*f),x=u+h*(-n*o*g+i*r*f),C=b+h*(i*o*m+n*r*v),_=y+h*(n*o*m-i*r*v);return s[p]=[w,x,C,_,b,y],s[p]}function i(t,e,i,n){var o=Math.atan2(e,t),s=Math.atan2(n,i);return s>=o?s-o:2*Math.PI-(o-s)}function n(t,e,i,n,o,s,l,c){var h=a.call(arguments);if(r[h])return r[h];var d,u,p,f,g,v,m,b,y=Math.sqrt,w=Math.min,x=Math.max,C=Math.abs,_=[],T=[[],[]];u=6*t-12*i+6*o,d=-3*t+9*i-9*o+3*l,p=3*i-3*t;for(var S=0;S<2;++S)if(S>0&&(u=6*e-12*n+6*s,d=-3*e+9*n-9*s+3*c,p=3*n-3*e),C(d)<1e-12){if(C(u)<1e-12)continue;0<(f=-p/u)&&f<1&&_.push(f)}else(m=u*u-4*p*d)<0||(b=y(m),g=(-u+b)/(2*d),0<g&&g<1&&_.push(g),0<(v=(-u-b)/(2*d))&&v<1&&_.push(v));for(var k,E,A,O=_.length,D=O;O--;)f=_[O],A=1-f,k=A*A*A*t+3*A*A*f*i+3*A*f*f*o+f*f*f*l,T[0][O]=k,E=A*A*A*e+3*A*A*f*n+3*A*f*f*s+f*f*f*c,T[1][O]=E;T[0][D]=t,T[1][D]=e,T[0][D+1]=l,T[1][D+1]=c;var j=[{x:w.apply(null,T[0]),y:w.apply(null,T[1])},{x:x.apply(null,T[0]),y:x.apply(null,T[1])}];return r[h]=j,j}var o={},s={},r={},a=Array.prototype.join;fabric.util.drawArc=function(e,i,n,o){for(var s=o[0],r=o[1],a=o[2],l=o[3],c=o[4],h=o[5],d=o[6],u=[[],[],[],[]],p=t(h-i,d-n,s,r,l,c,a),f=0,g=p.length;f<g;f++)u[f][0]=p[f][0]+i,u[f][1]=p[f][1]+n,u[f][2]=p[f][2]+i,u[f][3]=p[f][3]+n,u[f][4]=p[f][4]+i,u[f][5]=p[f][5]+n,e.bezierCurveTo.apply(e,u[f])},fabric.util.getBoundsOfArc=function(e,i,o,s,r,a,l,c,h){for(var d,u=0,p=0,f=[],g=t(c-e,h-i,o,s,a,l,r),v=0,m=g.length;v<m;v++)d=n(u,p,g[v][0],g[v][1],g[v][2],g[v][3],g[v][4],g[v][5]),f.push({x:d[0].x+e,y:d[0].y+i}),f.push({x:d[1].x+e,y:d[1].y+i}),u=g[v][4],p=g[v][5];return f},fabric.util.getBoundsOfCurve=n}(),function(){function t(t,e){for(var i=s.call(arguments,2),n=[],o=0,r=t.length;o<r;o++)n[o]=i.length?t[o][e].apply(t[o],i):t[o][e].call(t[o]);return n}function e(t,e){return o(t,e,function(t,e){return t>=e})}function i(t,e){return o(t,e,function(t,e){return t<e})}function n(t,e){for(var i=t.length;i--;)t[i]=e;return t}function o(t,e,i){if(t&&0!==t.length){var n=t.length-1,o=e?t[n][e]:t[n];if(e)for(;n--;)i(t[n][e],o)&&(o=t[n][e]);else for(;n--;)i(t[n],o)&&(o=t[n]);return o}}var s=Array.prototype.slice;Array.prototype.indexOf||(Array.prototype.indexOf=function(t){if(void 0===this||null===this)throw new TypeError;var e=Object(this),i=e.length>>>0;if(0===i)return-1;var n=0;if(arguments.length>0&&(n=Number(arguments[1]),n!==n?n=0:0!==n&&n!==Number.POSITIVE_INFINITY&&n!==Number.NEGATIVE_INFINITY&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=i)return-1;for(var o=n>=0?n:Math.max(i-Math.abs(n),0);o<i;o++)if(o in e&&e[o]===t)return o;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){for(var i=0,n=this.length>>>0;i<n;i++)i in this&&t.call(e,this[i],i,this)}),Array.prototype.map||(Array.prototype.map=function(t,e){for(var i=[],n=0,o=this.length>>>0;n<o;n++)n in this&&(i[n]=t.call(e,this[n],n,this));return i}),Array.prototype.every||(Array.prototype.every=function(t,e){for(var i=0,n=this.length>>>0;i<n;i++)if(i in this&&!t.call(e,this[i],i,this))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(t,e){for(var i=0,n=this.length>>>0;i<n;i++)if(i in this&&t.call(e,this[i],i,this))return!0;return!1}),Array.prototype.filter||(Array.prototype.filter=function(t,e){for(var i,n=[],o=0,s=this.length>>>0;o<s;o++)o in this&&(i=this[o],t.call(e,i,o,this)&&n.push(i));return n}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var e,i=this.length>>>0,n=0;if(arguments.length>1)e=arguments[1];else for(;;){if(n in this){e=this[n++];break}if(++n>=i)throw new TypeError}for(;n<i;n++)n in this&&(e=t.call(null,e,this[n],n,this));return e}),fabric.util.array={fill:n,invoke:t,min:i,max:e}}(),function(){function t(e,i,n){if(n)if(!fabric.isLikelyNode&&i instanceof Element)e=i;else if(i instanceof Array){e=[];for(var o=0,s=i.length;o<s;o++)e[o]=t({},i[o],n)}else if(i&&"object"==typeof i)for(var r in i)i.hasOwnProperty(r)&&(e[r]=t({},i[r],n));else e=i;else for(var r in i)e[r]=i[r];return e}function e(e,i){return t({},e,i)}fabric.util.object={extend:t,clone:e}}(),function(){function t(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})}function e(t,e){return t.charAt(0).toUpperCase()+(e?t.slice(1):t.slice(1).toLowerCase())}function i(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"")}),fabric.util.string={camelize:t,capitalize:e,escapeXml:i}}(),function(){var t=Array.prototype.slice,e=Function.prototype.apply,i=function(){};Function.prototype.bind||(Function.prototype.bind=function(n){var o,s=this,r=t.call(arguments,1);return o=r.length?function(){return e.call(s,this instanceof i?this:n,r.concat(t.call(arguments)))}:function(){return e.call(s,this instanceof i?this:n,arguments)},i.prototype=this.prototype,o.prototype=new i,o})}(),function(){function t(){}function e(t){var e=this.constructor.superclass.prototype[t];return arguments.length>1?e.apply(this,n.call(arguments,1)):e.call(this)}function i(){function i(){this.initialize.apply(this,arguments)}var s=null,a=n.call(arguments,0);"function"==typeof a[0]&&(s=a.shift()),i.superclass=s,i.subclasses=[],s&&(t.prototype=s.prototype,i.prototype=new t,s.subclasses.push(i));for(var l=0,c=a.length;l<c;l++)r(i,a[l],s);return i.prototype.initialize||(i.prototype.initialize=o),i.prototype.constructor=i,i.prototype.callSuper=e,i}var n=Array.prototype.slice,o=function(){},s=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}(),r=function(t,e,i){for(var n in e)n in t.prototype&&"function"==typeof t.prototype[n]&&(e[n]+"").indexOf("callSuper")>-1?t.prototype[n]=function(t){return function(){var n=this.constructor.superclass;this.constructor.superclass=i;var o=e[t].apply(this,arguments);if(this.constructor.superclass=n,"initialize"!==t)return o}}(n):t.prototype[n]=e[n],s&&(e.toString!==Object.prototype.toString&&(t.prototype.toString=e.toString),e.valueOf!==Object.prototype.valueOf&&(t.prototype.valueOf=e.valueOf))};fabric.util.createClass=i}(),function(){function t(t){var e,i,n=Array.prototype.slice.call(arguments,1),o=n.length;for(i=0;i<o;i++)if(e=typeof t[n[i]],!/^(?:function|object|unknown)$/.test(e))return!1;return!0}function e(t,e){return{handler:e,wrappedHandler:i(t,e)}}function i(t,e){return function(i){e.call(r(t),i||fabric.window.event)}}function n(t,e){return function(i){if(g[t]&&g[t][e])for(var n=g[t][e],o=0,s=n.length;o<s;o++)n[o].call(this,i||fabric.window.event)}}function o(t){t||(t=fabric.window.event);var e=t.target||(typeof t.srcElement!==l?t.srcElement:null),i=fabric.util.getScrollLeftTop(e);return{x:v(t)+i.left,y:m(t)+i.top}}function s(t,e,i){var n="touchend"===t.type?"changedTouches":"touches";return t[n]&&t[n][0]?t[n][0][e]-(t[n][0][e]-t[n][0][i])||t[i]:t[i]}var r,a,l="unknown",c=function(){var t=0;return function(e){return e.__uniqueID||(e.__uniqueID="uniqueID__"+t++)}}();!function(){var t={};r=function(e){return t[e]},a=function(e,i){t[e]=i}}();var h,d,u=t(fabric.document.documentElement,"addEventListener","removeEventListener")&&t(fabric.window,"addEventListener","removeEventListener"),p=t(fabric.document.documentElement,"attachEvent","detachEvent")&&t(fabric.window,"attachEvent","detachEvent"),f={},g={};u?(h=function(t,e,i,n){t.addEventListener(e,i,!p&&n)},d=function(t,e,i,n){t.removeEventListener(e,i,!p&&n)}):p?(h=function(t,i,n){var o=c(t);a(o,t),f[o]||(f[o]={}),f[o][i]||(f[o][i]=[]);var s=e(o,n);f[o][i].push(s),t.attachEvent("on"+i,s.wrappedHandler)},
d=function(t,e,i){var n,o=c(t);if(f[o]&&f[o][e])for(var s=0,r=f[o][e].length;s<r;s++)(n=f[o][e][s])&&n.handler===i&&(t.detachEvent("on"+e,n.wrappedHandler),f[o][e][s]=null)}):(h=function(t,e,i){var o=c(t);if(g[o]||(g[o]={}),!g[o][e]){g[o][e]=[];var s=t["on"+e];s&&g[o][e].push(s),t["on"+e]=n(o,e)}g[o][e].push(i)},d=function(t,e,i){var n=c(t);if(g[n]&&g[n][e])for(var o=g[n][e],s=0,r=o.length;s<r;s++)o[s]===i&&o.splice(s,1)}),fabric.util.addListener=h,fabric.util.removeListener=d;var v=function(t){return typeof t.clientX!==l?t.clientX:0},m=function(t){return typeof t.clientY!==l?t.clientY:0};fabric.isTouchSupported&&(v=function(t){return s(t,"pageX","clientX")},m=function(t){return s(t,"pageY","clientY")}),fabric.util.getPointer=o,fabric.util.object.extend(fabric.util,fabric.Observable)}(),function(){function t(t,e){var i=t.style;if(!i)return t;if("string"==typeof e)return t.style.cssText+=";"+e,e.indexOf("opacity")>-1?s(t,e.match(/opacity:\s*(\d?\.?\d*)/)[1]):t;for(var n in e)if("opacity"===n)s(t,e[n]);else{var o="float"===n||"cssFloat"===n?void 0===i.styleFloat?"cssFloat":"styleFloat":n;i[o]=e[n]}return t}var e=fabric.document.createElement("div"),i="string"==typeof e.style.opacity,n="string"==typeof e.style.filter,o=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,s=function(t){return t};i?s=function(t,e){return t.style.opacity=e,t}:n&&(s=function(t,e){var i=t.style;return t.currentStyle&&!t.currentStyle.hasLayout&&(i.zoom=1),o.test(i.filter)?(e=e>=.9999?"":"alpha(opacity="+100*e+")",i.filter=i.filter.replace(o,e)):i.filter+=" alpha(opacity="+100*e+")",t}),fabric.util.setStyle=t}(),function(){function t(t){return"string"==typeof t?fabric.document.getElementById(t):t}function e(t,e){var i=fabric.document.createElement(t);for(var n in e)"class"===n?i.className=e[n]:"for"===n?i.htmlFor=e[n]:i.setAttribute(n,e[n]);return i}function i(t,e){t&&-1===(" "+t.className+" ").indexOf(" "+e+" ")&&(t.className+=(t.className?" ":"")+e)}function n(t,i,n){return"string"==typeof i&&(i=e(i,n)),t.parentNode&&t.parentNode.replaceChild(i,t),i.appendChild(t),i}function o(t){for(var e=0,i=0,n=fabric.document.documentElement,o=fabric.document.body||{scrollLeft:0,scrollTop:0};t&&(t.parentNode||t.host)&&(t=t.parentNode||t.host,t===fabric.document?(e=o.scrollLeft||n.scrollLeft||0,i=o.scrollTop||n.scrollTop||0):(e+=t.scrollLeft||0,i+=t.scrollTop||0),1!==t.nodeType||"fixed"!==fabric.util.getElementStyle(t,"position")););return{left:e,top:i}}function s(t){var e,i,n=t&&t.ownerDocument,s={left:0,top:0},r={left:0,top:0},a={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!n)return r;for(var l in a)r[a[l]]+=parseInt(c(t,l),10)||0;return e=n.documentElement,void 0!==t.getBoundingClientRect&&(s=t.getBoundingClientRect()),i=o(t),{left:s.left+i.left-(e.clientLeft||0)+r.left,top:s.top+i.top-(e.clientTop||0)+r.top}}var r,a=Array.prototype.slice,l=function(t){return a.call(t,0)};try{r=l(fabric.document.childNodes)instanceof Array}catch(t){}r||(l=function(t){for(var e=new Array(t.length),i=t.length;i--;)e[i]=t[i];return e});var c;c=fabric.document.defaultView&&fabric.document.defaultView.getComputedStyle?function(t,e){var i=fabric.document.defaultView.getComputedStyle(t,null);return i?i[e]:void 0}:function(t,e){var i=t.style[e];return!i&&t.currentStyle&&(i=t.currentStyle[e]),i},function(){function t(t){return void 0!==t.onselectstart&&(t.onselectstart=fabric.util.falseFunction),n?t.style[n]="none":"string"==typeof t.unselectable&&(t.unselectable="on"),t}function e(t){return void 0!==t.onselectstart&&(t.onselectstart=null),n?t.style[n]="":"string"==typeof t.unselectable&&(t.unselectable=""),t}var i=fabric.document.documentElement.style,n="userSelect"in i?"userSelect":"MozUserSelect"in i?"MozUserSelect":"WebkitUserSelect"in i?"WebkitUserSelect":"KhtmlUserSelect"in i?"KhtmlUserSelect":"";fabric.util.makeElementUnselectable=t,fabric.util.makeElementSelectable=e}(),function(){function t(t,e){var i=fabric.document.getElementsByTagName("head")[0],n=fabric.document.createElement("script"),o=!0;n.onload=n.onreadystatechange=function(t){if(o){if("string"==typeof this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState)return;o=!1,e(t||fabric.window.event),n=n.onload=n.onreadystatechange=null}},n.src=t,i.appendChild(n)}fabric.util.getScript=t}(),fabric.util.getById=t,fabric.util.toArray=l,fabric.util.makeElement=e,fabric.util.addClass=i,fabric.util.wrapElement=n,fabric.util.getScrollLeftTop=o,fabric.util.getElementOffset=s,fabric.util.getElementStyle=c}(),function(){function t(t,e){return t+(/\?/.test(t)?"&":"?")+e}function e(){}function i(i,o){o||(o={});var s=o.method?o.method.toUpperCase():"GET",r=o.onComplete||function(){},a=n(),l=o.body||o.parameters;return a.onreadystatechange=function(){4===a.readyState&&(r(a),a.onreadystatechange=e)},"GET"===s&&(l=null,"string"==typeof o.parameters&&(i=t(i,o.parameters))),a.open(s,i,!0),"POST"!==s&&"PUT"!==s||a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(l),a}var n=function(){for(var t=[function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP.3.0")},function(){return new XMLHttpRequest}],e=t.length;e--;)try{if(t[e]())return t[e]}catch(t){}}();fabric.util.request=i}(),fabric.log=function(){},fabric.warn=function(){},"undefined"!=typeof console&&["log","warn"].forEach(function(t){void 0!==console[t]&&"function"==typeof console[t].apply&&(fabric[t]=function(){return console[t].apply(console,arguments)})}),function(){function t(t){e(function(i){t||(t={});var n,o=i||+new Date,s=t.duration||500,r=o+s,a=t.onChange||function(){},l=t.abort||function(){return!1},c=t.easing||function(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e},h="startValue"in t?t.startValue:0,d="endValue"in t?t.endValue:100,u=t.byValue||d-h;t.onStart&&t.onStart(),function i(d){n=d||+new Date;var p=n>r?s:n-o;return l()?void(t.onComplete&&t.onComplete()):(a(c(p,h,u,s)),n>r?void(t.onComplete&&t.onComplete()):void e(i))}(o)})}function e(){return i.apply(fabric.window,arguments)}var i=fabric.window.requestAnimationFrame||fabric.window.webkitRequestAnimationFrame||fabric.window.mozRequestAnimationFrame||fabric.window.oRequestAnimationFrame||fabric.window.msRequestAnimationFrame||function(t){fabric.window.setTimeout(t,1e3/60)};fabric.util.animate=t,fabric.util.requestAnimFrame=e}(),function(){function t(t,e,i){var n="rgba("+parseInt(t[0]+i*(e[0]-t[0]),10)+","+parseInt(t[1]+i*(e[1]-t[1]),10)+","+parseInt(t[2]+i*(e[2]-t[2]),10);return n+=","+(t&&e?parseFloat(t[3]+i*(e[3]-t[3])):1),n+=")"}function e(e,i,n,o){var s=new fabric.Color(e).getSource(),r=new fabric.Color(i).getSource();o=o||{},fabric.util.animate(fabric.util.object.extend(o,{duration:n||500,startValue:s,endValue:r,byValue:r,easing:function(e,i,n,s){return t(i,n,o.colorEasing?o.colorEasing(e,s):1-Math.cos(e/s*(Math.PI/2)))}}))}fabric.util.animateColor=e}(),function(){function t(t,e,i,n){return t<Math.abs(e)?(t=e,n=i/4):n=0===e&&0===t?i/(2*Math.PI)*Math.asin(1):i/(2*Math.PI)*Math.asin(e/t),{a:t,c:e,p:i,s:n}}function e(t,e,i){return t.a*Math.pow(2,10*(e-=1))*Math.sin((e*i-t.s)*(2*Math.PI)/t.p)}function i(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e}function n(t,e,i,n){return t/=n/2,t<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e}function o(t,e,i,n){return i*(t/=n)*t*t*t+e}function s(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e}function r(t,e,i,n){return t/=n/2,t<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e}function a(t,e,i,n){return i*(t/=n)*t*t*t*t+e}function l(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e}function c(t,e,i,n){return t/=n/2,t<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e}function h(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e}function d(t,e,i,n){return i*Math.sin(t/n*(Math.PI/2))+e}function u(t,e,i,n){return-i/2*(Math.cos(Math.PI*t/n)-1)+e}function p(t,e,i,n){return 0===t?e:i*Math.pow(2,10*(t/n-1))+e}function f(t,e,i,n){return t===n?e+i:i*(1-Math.pow(2,-10*t/n))+e}function g(t,e,i,n){return 0===t?e:t===n?e+i:(t/=n/2,t<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(2-Math.pow(2,-10*--t))+e)}function v(t,e,i,n){return-i*(Math.sqrt(1-(t/=n)*t)-1)+e}function m(t,e,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+e}function b(t,e,i,n){return t/=n/2,t<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e}function y(i,n,o,s){var r=0,a=o;return 0===i?n:1===(i/=s)?n+o:(r||(r=.3*s),-e(t(a,o,r,1.70158),i,s)+n)}function w(e,i,n,o){var s=0,r=n;if(0===e)return i;if(1===(e/=o))return i+n;s||(s=.3*o);var a=t(r,n,s,1.70158);return a.a*Math.pow(2,-10*e)*Math.sin((e*o-a.s)*(2*Math.PI)/a.p)+a.c+i}function x(i,n,o,s){var r=0,a=o;if(0===i)return n;if(2===(i/=s/2))return n+o;r||(r=s*(.3*1.5));var l=t(a,o,r,1.70158);return i<1?-.5*e(l,i,s)+n:l.a*Math.pow(2,-10*(i-=1))*Math.sin((i*s-l.s)*(2*Math.PI)/l.p)*.5+l.c+n}function C(t,e,i,n,o){return void 0===o&&(o=1.70158),i*(t/=n)*t*((o+1)*t-o)+e}function _(t,e,i,n,o){return void 0===o&&(o=1.70158),i*((t=t/n-1)*t*((o+1)*t+o)+1)+e}function T(t,e,i,n,o){return void 0===o&&(o=1.70158),t/=n/2,t<1?i/2*(t*t*((1+(o*=1.525))*t-o))+e:i/2*((t-=2)*t*((1+(o*=1.525))*t+o)+2)+e}function S(t,e,i,n){return i-k(n-t,0,i,n)+e}function k(t,e,i,n){return(t/=n)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e}function E(t,e,i,n){return t<n/2?.5*S(2*t,0,i,n)+e:.5*k(2*t-n,0,i,n)+.5*i+e}fabric.util.ease={easeInQuad:function(t,e,i,n){return i*(t/=n)*t+e},easeOutQuad:function(t,e,i,n){return-i*(t/=n)*(t-2)+e},easeInOutQuad:function(t,e,i,n){return t/=n/2,t<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,n){return i*(t/=n)*t*t+e},easeOutCubic:i,easeInOutCubic:n,easeInQuart:o,easeOutQuart:s,easeInOutQuart:r,easeInQuint:a,easeOutQuint:l,easeInOutQuint:c,easeInSine:h,easeOutSine:d,easeInOutSine:u,easeInExpo:p,easeOutExpo:f,easeInOutExpo:g,easeInCirc:v,easeOutCirc:m,easeInOutCirc:b,easeInElastic:y,easeOutElastic:w,easeInOutElastic:x,easeInBack:C,easeOutBack:_,easeInOutBack:T,easeInBounce:S,easeOutBounce:k,easeInOutBounce:E}}(),function(t){"use strict";function e(t){return t in S?S[t]:t}function i(t,e,i,n){var o,s="[object Array]"===Object.prototype.toString.call(e);return"fill"!==t&&"stroke"!==t||"none"!==e?"strokeDashArray"===t?e="none"===e?null:e.replace(/,/g," ").split(/\s+/).map(function(t){return parseFloat(t)}):"transformMatrix"===t?e=i&&i.transformMatrix?w(i.transformMatrix,g.parseTransformAttribute(e)):g.parseTransformAttribute(e):"visible"===t?(e="none"!==e&&"hidden"!==e,i&&!1===i.visible&&(e=!1)):"opacity"===t?(e=parseFloat(e),i&&void 0!==i.opacity&&(e*=i.opacity)):"originX"===t?e="start"===e?"left":"end"===e?"right":"center":o=s?e.map(y):y(e,n):e="",!s&&isNaN(o)?e:o}function n(t){for(var e in k)if(void 0!==t[k[e]]&&""!==t[e]){if(void 0===t[e]){if(!g.Object.prototype[e])continue;t[e]=g.Object.prototype[e]}if(0!==t[e].indexOf("url(")){var i=new g.Color(t[e]);t[e]=i.setAlpha(b(i.getAlpha()*t[k[e]],2)).toRgba()}}return t}function o(t,e){for(var i,n,o=[],s=0;s<e.length;s++)i=e[s],n=t.getElementsByTagName(i),o=o.concat(Array.prototype.slice.call(n));return o}function s(t,e){var i,n;t.replace(/;\s*$/,"").split(";").forEach(function(t){var o=t.split(":");i=o[0].trim().toLowerCase(),n=o[1].trim(),e[i]=n})}function r(t,e){var i,n;for(var o in t)void 0!==t[o]&&(i=o.toLowerCase(),n=t[o],e[i]=n)}function a(t,e){var i={};for(var n in g.cssRules[e])if(l(t,n.split(" ")))for(var o in g.cssRules[e][n])i[o]=g.cssRules[e][n][o];return i}function l(t,e){var i,n=!0;return i=h(t,e.pop()),i&&e.length&&(n=c(t,e)),i&&n&&0===e.length}function c(t,e){for(var i,n=!0;t.parentNode&&1===t.parentNode.nodeType&&e.length;)n&&(i=e.pop()),t=t.parentNode,n=h(t,i);return 0===e.length}function h(t,e){var i,n=t.nodeName,o=t.getAttribute("class"),s=t.getAttribute("id");if(i=new RegExp("^"+n,"i"),e=e.replace(i,""),s&&e.length&&(i=new RegExp("#"+s+"(?![a-zA-Z\\-]+)","i"),e=e.replace(i,"")),o&&e.length){o=o.split(" ");for(var r=o.length;r--;)i=new RegExp("\\."+o[r]+"(?![a-zA-Z\\-]+)","i"),e=e.replace(i,"")}return 0===e.length}function d(t,e){var i;if(t.getElementById&&(i=t.getElementById(e)),i)return i;var n,o,s=t.getElementsByTagName("*");for(o=0;o<s.length;o++)if(n=s[o],e===n.getAttribute("id"))return n}function u(t){for(var e=o(t,["use","svg:use"]),i=0;e.length&&i<e.length;){var n,s,r,a,l,c=e[i],h=c.getAttribute("xlink:href").substr(1),u=c.getAttribute("x")||0,f=c.getAttribute("y")||0,g=d(t,h).cloneNode(!0),v=(g.getAttribute("transform")||"")+" translate("+u+", "+f+")",m=e.length;if(p(g),/^svg$/i.test(g.nodeName)){var b=g.ownerDocument.createElement("g");for(r=0,a=g.attributes,l=a.length;r<l;r++)s=a.item(r),b.setAttribute(s.nodeName,s.nodeValue);for(;g.firstChild;)b.appendChild(g.firstChild);g=b}for(r=0,a=c.attributes,l=a.length;r<l;r++)s=a.item(r),"x"!==s.nodeName&&"y"!==s.nodeName&&"xlink:href"!==s.nodeName&&("transform"===s.nodeName?v=s.nodeValue+" "+v:g.setAttribute(s.nodeName,s.nodeValue));g.setAttribute("transform",v),g.setAttribute("instantiated_by_use","1"),g.removeAttribute("id"),n=c.parentNode,n.replaceChild(g,c),e.length===m&&i++}}function p(t){var e,i,n,o,s=t.getAttribute("viewBox"),r=1,a=1,l=0,c=0,h=t.getAttribute("width"),d=t.getAttribute("height"),u=t.getAttribute("x")||0,p=t.getAttribute("y")||0,f=t.getAttribute("preserveAspectRatio")||"",v=!s||!C.test(t.nodeName)||!(s=s.match(E)),m=!h||!d||"100%"===h||"100%"===d,b=v&&m,w={},x="";if(w.width=0,w.height=0,w.toBeParsed=b,b)return w;if(v)return w.width=y(h),w.height=y(d),w;if(l=-parseFloat(s[1]),c=-parseFloat(s[2]),e=parseFloat(s[3]),i=parseFloat(s[4]),m?(w.width=e,w.height=i):(w.width=y(h),w.height=y(d),r=w.width/e,a=w.height/i),f=g.util.parsePreserveAspectRatioAttribute(f),"none"!==f.alignX&&(a=r=r>a?a:r),1===r&&1===a&&0===l&&0===c&&0===u&&0===p)return w;if((u||p)&&(x=" translate("+y(u)+" "+y(p)+") "),n=x+" matrix("+r+" 0 0 "+a+" "+l*r+" "+c*a+") ","svg"===t.nodeName){for(o=t.ownerDocument.createElement("g");t.firstChild;)o.appendChild(t.firstChild);t.appendChild(o)}else o=t,n=o.getAttribute("transform")+n;return o.setAttribute("transform",n),w}function f(t,e){for(;t&&(t=t.parentNode);)if(t.nodeName&&e.test(t.nodeName.replace("svg:",""))&&!t.getAttribute("instantiated_by_use"))return!0;return!1}var g=t.fabric||(t.fabric={}),v=g.util.object.extend,m=g.util.object.clone,b=g.util.toFixed,y=g.util.parseUnit,w=g.util.multiplyTransformMatrices,x=/^(path|circle|polygon|polyline|ellipse|rect|line|image|text)$/i,C=/^(symbol|image|marker|pattern|view|svg)$/i,_=/^(?:pattern|defs|symbol|metadata|clipPath|mask)$/i,T=/^(symbol|g|a|svg)$/i,S={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","stroke-dasharray":"strokeDashArray","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"originX",opacity:"opacity"},k={stroke:"strokeOpacity",fill:"fillOpacity"};g.cssRules={},g.gradientDefs={},g.parseTransformAttribute=function(){function t(t,e){var i=Math.cos(e[0]),n=Math.sin(e[0]),o=0,s=0;3===e.length&&(o=e[1],s=e[2]),t[0]=i,t[1]=n,t[2]=-n,t[3]=i,t[4]=o-(i*o-n*s),t[5]=s-(n*o+i*s)}function e(t,e){var i=e[0],n=2===e.length?e[1]:e[0];t[0]=i,t[3]=n}function i(t,e,i){t[i]=Math.tan(g.util.degreesToRadians(e[0]))}function n(t,e){t[4]=e[0],2===e.length&&(t[5]=e[1])}var o=[1,0,0,1,0,0],s=g.reNum,r="(?:\\s+,?\\s*|,\\s*)",a="(?:(skewX)\\s*\\(\\s*("+s+")\\s*\\))",l="(?:(skewY)\\s*\\(\\s*("+s+")\\s*\\))",c="(?:(rotate)\\s*\\(\\s*("+s+")(?:"+r+"("+s+")"+r+"("+s+"))?\\s*\\))",h="(?:(scale)\\s*\\(\\s*("+s+")(?:"+r+"("+s+"))?\\s*\\))",d="(?:(translate)\\s*\\(\\s*("+s+")(?:"+r+"("+s+"))?\\s*\\))",u="(?:(matrix)\\s*\\(\\s*("+s+")"+r+"("+s+")"+r+"("+s+")"+r+"("+s+")"+r+"("+s+")"+r+"("+s+")\\s*\\))",p="(?:"+u+"|"+d+"|"+h+"|"+c+"|"+a+"|"+l+")",f="(?:"+p+"(?:"+r+"*"+p+")*)",v="^\\s*(?:"+f+"?)\\s*$",m=new RegExp(v),b=new RegExp(p,"g");return function(s){var r=o.concat(),a=[];if(!s||s&&!m.test(s))return r;s.replace(b,function(s){var l=new RegExp(p).exec(s).filter(function(t){return!!t}),c=l[1],h=l.slice(2).map(parseFloat);switch(c){case"translate":n(r,h);break;case"rotate":h[0]=g.util.degreesToRadians(h[0]),t(r,h);break;case"scale":e(r,h);break;case"skewX":i(r,h,2);break;case"skewY":i(r,h,1);break;case"matrix":r=h}a.push(r.concat()),r=o.concat()});for(var l=a[0];a.length>1;)a.shift(),l=g.util.multiplyTransformMatrices(l,a[0]);return l}}();var E=new RegExp("^\\s*("+g.reNum+"+)\\s*,?\\s*("+g.reNum+"+)\\s*,?\\s*("+g.reNum+"+)\\s*,?\\s*("+g.reNum+"+)\\s*$");g.parseSVGDocument=function(t,e,i,n){if(t){u(t);var o=g.Object.__uid++,s=p(t),r=g.util.toArray(t.getElementsByTagName("*"));if(s.crossOrigin=n&&n.crossOrigin,s.svgUid=o,0===r.length&&g.isLikelyNode){r=t.selectNodes('//*[name(.)!="svg"]');for(var a=[],l=0,c=r.length;l<c;l++)a[l]=r[l];r=a}var h=r.filter(function(t){return p(t),x.test(t.nodeName.replace("svg:",""))&&!f(t,_)});if(!h||h&&!h.length)return void(e&&e([],{}));g.gradientDefs[o]=g.getGradientDefs(t),g.cssRules[o]=g.getCSSRules(t),g.parseElements(h,function(t){e&&e(t,s)},m(s),i,n)}};var A=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+g.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+g.reNum+"))?\\s+(.*)");v(g,{parseFontDeclaration:function(t,e){var i=t.match(A);if(i){var n=i[1],o=i[3],s=i[4],r=i[5],a=i[6];n&&(e.fontStyle=n),o&&(e.fontWeight=isNaN(parseFloat(o))?o:parseFloat(o)),s&&(e.fontSize=y(s)),a&&(e.fontFamily=a),r&&(e.lineHeight="normal"===r?1:r)}},getGradientDefs:function(t){var e,i,n,s=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],r=o(t,s),a=0,l={},c={};for(a=r.length;a--;)e=r[a],n=e.getAttribute("xlink:href"),i=e.getAttribute("id"),n&&(c[i]=n.substr(1)),l[i]=e;for(i in c){var h=l[c[i]].cloneNode(!0);for(e=l[i];h.firstChild;)e.appendChild(h.firstChild)}return l},parseAttributes:function(t,o,s){if(t){var r,l,c={};void 0===s&&(s=t.getAttribute("svgUid")),t.parentNode&&T.test(t.parentNode.nodeName)&&(c=g.parseAttributes(t.parentNode,o,s)),l=c&&c.fontSize||t.getAttribute("font-size")||g.Text.DEFAULT_SVG_FONT_SIZE;var h=o.reduce(function(e,i){return r=t.getAttribute(i),r&&(e[i]=r),e},{});h=v(h,v(a(t,s),g.parseStyleAttribute(t)));var d,u,p={};for(var f in h)d=e(f),u=i(d,h[f],c,l),p[d]=u;p&&p.font&&g.parseFontDeclaration(p.font,p);var m=v(c,p);return T.test(t.nodeName)?m:n(m)}},parseElements:function(t,e,i,n,o){new g.ElementsParser(t,e,i,n,o).parse()},parseStyleAttribute:function(t){var e={},i=t.getAttribute("style");return i?("string"==typeof i?s(i,e):r(i,e),e):e},parsePointsAttribute:function(t){if(!t)return null;t=t.replace(/,/g," ").trim(),t=t.split(/\s+/);var e,i,n=[];for(e=0,i=t.length;e<i;e+=2)n.push({x:parseFloat(t[e]),y:parseFloat(t[e+1])});return n},getCSSRules:function(t){for(var e,i=t.getElementsByTagName("style"),n={},o=0,s=i.length;o<s;o++){var r=i[o].textContent||i[o].text;r=r.replace(/\/\*[\s\S]*?\*\//g,""),""!==r.trim()&&(e=r.match(/[^{]*\{[\s\S]*?\}/g),e=e.map(function(t){return t.trim()}),e.forEach(function(t){for(var e=t.match(/([\s\S]*?)\s*\{([^}]*)\}/),i={},o=e[2].trim(),s=o.replace(/;$/,"").split(/\s*;\s*/),r=0,a=s.length;r<a;r++){var l=s[r].split(/\s*:\s*/),c=l[0],h=l[1];i[c]=h}t=e[1],t.split(",").forEach(function(t){""!==(t=t.replace(/^svg/i,"").trim())&&(n[t]?g.util.object.extend(n[t],i):n[t]=g.util.object.clone(i))})}))}return n},loadSVGFromURL:function(t,e,i,n){function o(t){var o=t.responseXML;o&&!o.documentElement&&g.window.ActiveXObject&&t.responseText&&(o=new ActiveXObject("Microsoft.XMLDOM"),o.async="false",o.loadXML(t.responseText.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,""))),o&&o.documentElement||e&&e(null),g.parseSVGDocument(o.documentElement,function(t,i){e&&e(t,i)},i,n)}t=t.replace(/^\n\s*/,"").trim(),new g.util.request(t,{method:"get",onComplete:o})},loadSVGFromString:function(t,e,i,n){t=t.trim();var o;if("undefined"!=typeof DOMParser){var s=new DOMParser;s&&s.parseFromString&&(o=s.parseFromString(t,"text/xml"))}else g.window.ActiveXObject&&(o=new ActiveXObject("Microsoft.XMLDOM"),o.async="false",o.loadXML(t.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,"")));g.parseSVGDocument(o.documentElement,function(t,i){e(t,i)},i,n)}})}("undefined"!=typeof exports?exports:this),fabric.ElementsParser=function(t,e,i,n,o){this.elements=t,this.callback=e,this.options=i,this.reviver=n,this.svgUid=i&&i.svgUid||0,this.parsingOptions=o},fabric.ElementsParser.prototype.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},fabric.ElementsParser.prototype.createObjects=function(){for(var t=0,e=this.elements.length;t<e;t++)this.elements[t].setAttribute("svgUid",this.svgUid),function(t,e){setTimeout(function(){t.createObject(t.elements[e],e)},0)}(this,t)},fabric.ElementsParser.prototype.createObject=function(t,e){var i=fabric[fabric.util.string.capitalize(t.tagName.replace("svg:",""))];if(i&&i.fromElement)try{this._createObject(i,t,e)}catch(t){fabric.log(t)}else this.checkIfDone()},fabric.ElementsParser.prototype._createObject=function(t,e,i){if(t.async)t.fromElement(e,this.createCallback(i,e),this.options);else{var n=t.fromElement(e,this.options);this.resolveGradient(n,"fill"),this.resolveGradient(n,"stroke"),this.reviver&&this.reviver(e,n),this.instances[i]=n,this.checkIfDone()}},fabric.ElementsParser.prototype.createCallback=function(t,e){var i=this;return function(n){i.resolveGradient(n,"fill"),i.resolveGradient(n,"stroke"),i.reviver&&i.reviver(e,n),i.instances[t]=n,i.checkIfDone()}},fabric.ElementsParser.prototype.resolveGradient=function(t,e){var i=t.get(e);if(/^url\(/.test(i)){var n=i.slice(5,i.length-1);fabric.gradientDefs[this.svgUid][n]&&t.set(e,fabric.Gradient.fromElement(fabric.gradientDefs[this.svgUid][n],t))}},fabric.ElementsParser.prototype.checkIfDone=function(){0==--this.numElements&&(this.instances=this.instances.filter(function(t){return null!=t}),this.callback(this.instances))},function(t){"use strict";function e(t,e){this.x=t,this.y=e}var i=t.fabric||(t.fabric={});i.Point?i.warn("fabric.Point is already defined"):(i.Point=e,e.prototype={type:"point",constructor:e,add:function(t){return new e(this.x+t.x,this.y+t.y)},addEquals:function(t){return this.x+=t.x,this.y+=t.y,this},scalarAdd:function(t){return new e(this.x+t,this.y+t)},scalarAddEquals:function(t){return this.x+=t,this.y+=t,this},subtract:function(t){return new e(this.x-t.x,this.y-t.y)},subtractEquals:function(t){return this.x-=t.x,this.y-=t.y,this},scalarSubtract:function(t){return new e(this.x-t,this.y-t)},scalarSubtractEquals:function(t){return this.x-=t,this.y-=t,this},multiply:function(t){return new e(this.x*t,this.y*t)},multiplyEquals:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return new e(this.x/t,this.y/t)},divideEquals:function(t){return this.x/=t,this.y/=t,this},eq:function(t){return this.x===t.x&&this.y===t.y},lt:function(t){return this.x<t.x&&this.y<t.y},lte:function(t){return this.x<=t.x&&this.y<=t.y},gt:function(t){return this.x>t.x&&this.y>t.y},gte:function(t){return this.x>=t.x&&this.y>=t.y},lerp:function(t,i){return void 0===i&&(i=.5),i=Math.max(Math.min(1,i),0),new e(this.x+(t.x-this.x)*i,this.y+(t.y-this.y)*i)},distanceFrom:function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},midPointFrom:function(t){return this.lerp(t)},min:function(t){return new e(Math.min(this.x,t.x),Math.min(this.y,t.y))},max:function(t){return new e(Math.max(this.x,t.x),Math.max(this.y,t.y))},toString:function(){return this.x+","+this.y},setXY:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setFromPoint:function(t){return this.x=t.x,this.y=t.y,this},swap:function(t){var e=this.x,i=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=i},clone:function(){return new e(this.x,this.y)}})}("undefined"!=typeof exports?exports:this),function(t){"use strict";function e(t){this.status=t,this.points=[]}var i=t.fabric||(t.fabric={});i.Intersection?i.warn("fabric.Intersection is already defined"):(i.Intersection=e,i.Intersection.prototype={constructor:e,appendPoint:function(t){return this.points.push(t),this},appendPoints:function(t){return this.points=this.points.concat(t),this}},i.Intersection.intersectLineLine=function(t,n,o,s){var r,a=(s.x-o.x)*(t.y-o.y)-(s.y-o.y)*(t.x-o.x),l=(n.x-t.x)*(t.y-o.y)-(n.y-t.y)*(t.x-o.x),c=(s.y-o.y)*(n.x-t.x)-(s.x-o.x)*(n.y-t.y);if(0!==c){var h=a/c,d=l/c;0<=h&&h<=1&&0<=d&&d<=1?(r=new e("Intersection"),r.appendPoint(new i.Point(t.x+h*(n.x-t.x),t.y+h*(n.y-t.y)))):r=new e}else r=new e(0===a||0===l?"Coincident":"Parallel");return r},i.Intersection.intersectLinePolygon=function(t,i,n){for(var o,s,r,a=new e,l=n.length,c=0;c<l;c++)o=n[c],s=n[(c+1)%l],r=e.intersectLineLine(t,i,o,s),a.appendPoints(r.points);return a.points.length>0&&(a.status="Intersection"),a},i.Intersection.intersectPolygonPolygon=function(t,i){for(var n=new e,o=t.length,s=0;s<o;s++){var r=t[s],a=t[(s+1)%o],l=e.intersectLinePolygon(r,a,i);n.appendPoints(l.points)}return n.points.length>0&&(n.status="Intersection"),n},i.Intersection.intersectPolygonRectangle=function(t,n,o){var s=n.min(o),r=n.max(o),a=new i.Point(r.x,s.y),l=new i.Point(s.x,r.y),c=e.intersectLinePolygon(s,a,t),h=e.intersectLinePolygon(a,r,t),d=e.intersectLinePolygon(r,l,t),u=e.intersectLinePolygon(l,s,t),p=new e;return p.appendPoints(c.points),p.appendPoints(h.points),p.appendPoints(d.points),p.appendPoints(u.points),p.points.length>0&&(p.status="Intersection"),p})}("undefined"!=typeof exports?exports:this),function(t){"use strict";function e(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}function i(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}var n=t.fabric||(t.fabric={});n.Color?n.warn("fabric.Color is already defined."):(n.Color=e,n.Color.prototype={_tryParsingColor:function(t){var i;t in e.colorNameMap&&(t=e.colorNameMap[t]),"transparent"===t&&(i=[255,255,255,0]),i||(i=e.sourceFromHex(t)),i||(i=e.sourceFromRgb(t)),i||(i=e.sourceFromHsl(t)),i||(i=[0,0,0,1]),i&&this.setSource(i)},_rgbToHsl:function(t,e,i){t/=255,e/=255,i/=255;var o,s,r,a=n.util.array.max([t,e,i]),l=n.util.array.min([t,e,i]);if(r=(a+l)/2,a===l)o=s=0;else{var c=a-l;switch(s=r>.5?c/(2-a-l):c/(a+l),a){case t:o=(e-i)/c+(e<i?6:0);break;case e:o=(i-t)/c+2;break;case i:o=(t-e)/c+4}o/=6}return[Math.round(360*o),Math.round(100*s),Math.round(100*r)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return"rgb("+t[0]+","+t[1]+","+t[2]+")"},toRgba:function(){var t=this.getSource();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},toHsl:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsl("+e[0]+","+e[1]+"%,"+e[2]+"%)"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsla("+e[0]+","+e[1]+"%,"+e[2]+"%,"+t[3]+")"},toHex:function(){var t,e,i,n=this.getSource();return t=n[0].toString(16),t=1===t.length?"0"+t:t,e=n[1].toString(16),e=1===e.length?"0"+e:e,i=n[2].toString(16),i=1===i.length?"0"+i:i,t.toUpperCase()+e.toUpperCase()+i.toUpperCase()},toHexa:function(){var t;return t=255*this.getSource()[3],t=t.toString(16),t=1===t.length?"0"+t:t,this.toHex()+t.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),10),i=t[3];return this.setSource([e,e,e,i]),this},toBlackWhite:function(t){var e=this.getSource(),i=(.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),n=e[3];return t=t||127,i=Number(i)<Number(t)?0:255,this.setSource([i,i,i,n]),this},overlayWith:function(t){t instanceof e||(t=new e(t));for(var i=[],n=this.getAlpha(),o=this.getSource(),s=t.getSource(),r=0;r<3;r++)i.push(Math.round(.5*o[r]+.5*s[r]));return i[3]=n,this.setSource(i),this}},n.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,n.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,n.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,n.Color.colorNameMap={aqua:"#00FFFF",black:"#000000",blue:"#0000FF",fuchsia:"#FF00FF",gray:"#808080",grey:"#808080",green:"#008000",lime:"#00FF00",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#FFA500",purple:"#800080",red:"#FF0000",silver:"#C0C0C0",teal:"#008080",white:"#FFFFFF",yellow:"#FFFF00"},n.Color.fromRgb=function(t){return e.fromSource(e.sourceFromRgb(t))},n.Color.sourceFromRgb=function(t){var i=t.match(e.reRGBa);if(i){var n=parseInt(i[1],10)/(/%$/.test(i[1])?100:1)*(/%$/.test(i[1])?255:1),o=parseInt(i[2],10)/(/%$/.test(i[2])?100:1)*(/%$/.test(i[2])?255:1),s=parseInt(i[3],10)/(/%$/.test(i[3])?100:1)*(/%$/.test(i[3])?255:1);return[parseInt(n,10),parseInt(o,10),parseInt(s,10),i[4]?parseFloat(i[4]):1]}},n.Color.fromRgba=e.fromRgb,n.Color.fromHsl=function(t){return e.fromSource(e.sourceFromHsl(t))},n.Color.sourceFromHsl=function(t){var n=t.match(e.reHSLa);if(n){var o,s,r,a=(parseFloat(n[1])%360+360)%360/360,l=parseFloat(n[2])/(/%$/.test(n[2])?100:1),c=parseFloat(n[3])/(/%$/.test(n[3])?100:1);if(0===l)o=s=r=c;else{var h=c<=.5?c*(l+1):c+l-c*l,d=2*c-h;o=i(d,h,a+1/3),s=i(d,h,a),r=i(d,h,a-1/3)}return[Math.round(255*o),Math.round(255*s),Math.round(255*r),n[4]?parseFloat(n[4]):1]}},n.Color.fromHsla=e.fromHsl,n.Color.fromHex=function(t){return e.fromSource(e.sourceFromHex(t))},n.Color.sourceFromHex=function(t){if(t.match(e.reHex)){var i=t.slice(t.indexOf("#")+1),n=3===i.length||4===i.length,o=8===i.length||4===i.length,s=n?i.charAt(0)+i.charAt(0):i.substring(0,2),r=n?i.charAt(1)+i.charAt(1):i.substring(2,4),a=n?i.charAt(2)+i.charAt(2):i.substring(4,6),l=o?n?i.charAt(3)+i.charAt(3):i.substring(6,8):"FF";return[parseInt(s,16),parseInt(r,16),parseInt(a,16),parseFloat((parseInt(l,16)/255).toFixed(2))]}},n.Color.fromSource=function(t){var i=new e;return i.setSource(t),i})}("undefined"!=typeof exports?exports:this),function(){function t(t){var e,i,n,o=t.getAttribute("style"),s=t.getAttribute("offset")||0;if(s=parseFloat(s)/(/%$/.test(s)?100:1),s=s<0?0:s>1?1:s,o){var r=o.split(/\s*;\s*/);""===r[r.length-1]&&r.pop();for(var a=r.length;a--;){var l=r[a].split(/\s*:\s*/),c=l[0].trim(),h=l[1].trim();"stop-color"===c?e=h:"stop-opacity"===c&&(n=h)}}return e||(e=t.getAttribute("stop-color")||"rgb(0,0,0)"),n||(n=t.getAttribute("stop-opacity")),e=new fabric.Color(e),i=e.getAlpha(),n=isNaN(parseFloat(n))?1:parseFloat(n),n*=i,{offset:s,color:e.toRgb(),opacity:n}}function e(t){return{x1:t.getAttribute("x1")||0,y1:t.getAttribute("y1")||0,x2:t.getAttribute("x2")||"100%",y2:t.getAttribute("y2")||0}}function i(t){return{x1:t.getAttribute("fx")||t.getAttribute("cx")||"50%",y1:t.getAttribute("fy")||t.getAttribute("cy")||"50%",r1:0,x2:t.getAttribute("cx")||"50%",y2:t.getAttribute("cy")||"50%",r2:t.getAttribute("r")||"50%"}}function n(t,e,i){var n,o=0,s=1,r="";for(var a in e)"Infinity"===e[a]?e[a]=1:"-Infinity"===e[a]&&(e[a]=0),n=parseFloat(e[a],10),s="string"==typeof e[a]&&/^\d+%$/.test(e[a])?.01:1,"x1"===a||"x2"===a||"r2"===a?(s*="objectBoundingBox"===i?t.width:1,o="objectBoundingBox"===i?t.left||0:0):"y1"!==a&&"y2"!==a||(s*="objectBoundingBox"===i?t.height:1,o="objectBoundingBox"===i?t.top||0:0),e[a]=n*s+o;if("ellipse"===t.type&&null!==e.r2&&"objectBoundingBox"===i&&t.rx!==t.ry){var l=t.ry/t.rx;r=" scale(1, "+l+")",e.y1&&(e.y1/=l),e.y2&&(e.y2/=l)}return r}fabric.Gradient=fabric.util.createClass({offsetX:0,offsetY:0,initialize:function(t){t||(t={});var e={};this.id=fabric.Object.__uid++,this.type=t.type||"linear",e={
x1:t.coords.x1||0,y1:t.coords.y1||0,x2:t.coords.x2||0,y2:t.coords.y2||0},"radial"===this.type&&(e.r1=t.coords.r1||0,e.r2=t.coords.r2||0),this.coords=e,this.colorStops=t.colorStops.slice(),t.gradientTransform&&(this.gradientTransform=t.gradientTransform),this.offsetX=t.offsetX||this.offsetX,this.offsetY=t.offsetY||this.offsetY},addColorStop:function(t){for(var e in t){var i=new fabric.Color(t[e]);this.colorStops.push({offset:e,color:i.toRgb(),opacity:i.getAlpha()})}return this},toObject:function(t){var e={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return fabric.util.populateWithProperties(this,e,t),e},toSVG:function(t){var e,i,n=fabric.util.object.clone(this.coords);if(this.colorStops.sort(function(t,e){return t.offset-e.offset}),!t.group||"path-group"!==t.group.type)for(var o in n)"x1"===o||"x2"===o||"r2"===o?n[o]+=this.offsetX-t.width/2:"y1"!==o&&"y2"!==o||(n[o]+=this.offsetY-t.height/2);i='id="SVGID_'+this.id+'" gradientUnits="userSpaceOnUse"',this.gradientTransform&&(i+=' gradientTransform="matrix('+this.gradientTransform.join(" ")+')" '),"linear"===this.type?e=["<linearGradient ",i,' x1="',n.x1,'" y1="',n.y1,'" x2="',n.x2,'" y2="',n.y2,'">\n']:"radial"===this.type&&(e=["<radialGradient ",i,' cx="',n.x2,'" cy="',n.y2,'" r="',n.r2,'" fx="',n.x1,'" fy="',n.y1,'">\n']);for(var s=0;s<this.colorStops.length;s++)e.push("<stop ",'offset="',100*this.colorStops[s].offset+"%",'" style="stop-color:',this.colorStops[s].color,null!==this.colorStops[s].opacity?";stop-opacity: "+this.colorStops[s].opacity:";",'"/>\n');return e.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),e.join("")},toLive:function(t,e){var i,n,o=fabric.util.object.clone(this.coords);if(this.type){if(e.group&&"path-group"===e.group.type)for(n in o)"x1"===n||"x2"===n?o[n]+=-this.offsetX+e.width/2:"y1"!==n&&"y2"!==n||(o[n]+=-this.offsetY+e.height/2);"linear"===this.type?i=t.createLinearGradient(o.x1,o.y1,o.x2,o.y2):"radial"===this.type&&(i=t.createRadialGradient(o.x1,o.y1,o.r1,o.x2,o.y2,o.r2));for(var s=0,r=this.colorStops.length;s<r;s++){var a=this.colorStops[s].color,l=this.colorStops[s].opacity,c=this.colorStops[s].offset;void 0!==l&&(a=new fabric.Color(a).setAlpha(l).toRgba()),i.addColorStop(parseFloat(c),a)}return i}}}),fabric.util.object.extend(fabric.Gradient,{fromElement:function(o,s){var r,a,l,c=o.getElementsByTagName("stop"),h=o.getAttribute("gradientUnits")||"objectBoundingBox",d=o.getAttribute("gradientTransform"),u=[];r="linearGradient"===o.nodeName||"LINEARGRADIENT"===o.nodeName?"linear":"radial","linear"===r?a=e(o):"radial"===r&&(a=i(o));for(var p=c.length;p--;)u.push(t(c[p]));l=n(s,a,h);var f=new fabric.Gradient({type:r,coords:a,colorStops:u,offsetX:-s.left,offsetY:-s.top});return(d||""!==l)&&(f.gradientTransform=fabric.parseTransformAttribute((d||"")+l)),f},forObject:function(t,e){return e||(e={}),n(t,e.coords,"userSpaceOnUse"),new fabric.Gradient(e)}})}(),function(){"use strict";var t=fabric.util.toFixed;fabric.Pattern=fabric.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,initialize:function(t,e){if(t||(t={}),this.id=fabric.Object.__uid++,this.setOptions(t),!t.source||t.source&&"string"!=typeof t.source)return void(e&&e(this));if(void 0!==fabric.util.getFunctionBody(t.source))this.source=new Function(fabric.util.getFunctionBody(t.source)),e&&e(this);else{var i=this;this.source=fabric.util.createImage(),fabric.util.loadImage(t.source,function(t){i.source=t,e&&e(i)})}},toObject:function(e){var i,n,o=fabric.Object.NUM_FRACTION_DIGITS;return"function"==typeof this.source?i=String(this.source):"string"==typeof this.source.src?i=this.source.src:"object"==typeof this.source&&this.source.toDataURL&&(i=this.source.toDataURL()),n={type:"pattern",source:i,repeat:this.repeat,offsetX:t(this.offsetX,o),offsetY:t(this.offsetY,o)},fabric.util.populateWithProperties(this,n,e),n},toSVG:function(t){var e="function"==typeof this.source?this.source():this.source,i=e.width/t.width,n=e.height/t.height,o=this.offsetX/t.width,s=this.offsetY/t.height,r="";return"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat||(n=1),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat||(i=1),e.src?r=e.src:e.toDataURL&&(r=e.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+o+'" y="'+s+'" width="'+i+'" height="'+n+'">\n<image x="0" y="0" width="'+e.width+'" height="'+e.height+'" xlink:href="'+r+'"></image>\n</pattern>\n'},setOptions:function(t){for(var e in t)this[e]=t[e]},toLive:function(t){var e="function"==typeof this.source?this.source():this.source;if(!e)return"";if(void 0!==e.src){if(!e.complete)return"";if(0===e.naturalWidth||0===e.naturalHeight)return""}return t.createPattern(e,this.repeat)}})}(),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.toFixed;e.Shadow?e.warn("fabric.Shadow is already defined."):(e.Shadow=e.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,initialize:function(t){"string"==typeof t&&(t=this._parseShadow(t));for(var i in t)this[i]=t[i];this.id=e.Object.__uid++},_parseShadow:function(t){var i=t.trim(),n=e.Shadow.reOffsetsAndBlur.exec(i)||[];return{color:(i.replace(e.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseInt(n[1],10)||0,offsetY:parseInt(n[2],10)||0,blur:parseInt(n[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(t){var n=40,o=40,s=e.Object.NUM_FRACTION_DIGITS,r=e.util.rotateVector({x:this.offsetX,y:this.offsetY},e.util.degreesToRadians(-t.angle));return t.width&&t.height&&(n=100*i((Math.abs(r.x)+this.blur)/t.width,s)+20,o=100*i((Math.abs(r.y)+this.blur)/t.height,s)+20),t.flipX&&(r.x*=-1),t.flipY&&(r.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+o+'%" height="'+(100+2*o)+'%" x="-'+n+'%" width="'+(100+2*n)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+i(this.blur?this.blur/2:0,s)+'"></feGaussianBlur>\n\t<feOffset dx="'+i(r.x,s)+'" dy="'+i(r.y,s)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+this.color+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke};var t={},i=e.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke"].forEach(function(e){this[e]!==i[e]&&(t[e]=this[e])},this),t}}),e.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:px)?(?:\s?|$))?(-?\d+(?:px)?(?:\s?|$))?(\d+(?:px)?)?(?:\s?|$)(?:$|\s)/)}("undefined"!=typeof exports?exports:this),function(){"use strict";if(fabric.StaticCanvas)return void fabric.warn("fabric.StaticCanvas is already defined.");var t=fabric.util.object.extend,e=fabric.util.getElementOffset,i=fabric.util.removeFromArray,n=fabric.util.toFixed,o=fabric.util.transformPoint,s=fabric.util.invertTransform,r=new Error("Could not initialize `canvas` element");fabric.StaticCanvas=fabric.util.createClass(fabric.CommonMethods,{initialize:function(t,e){e||(e={}),this._initStatic(t,e)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,clipTo:null,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:fabric.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,onBeforeScaleRotate:function(){},enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!1,_initStatic:function(t,e){var i=fabric.StaticCanvas.prototype.renderAll.bind(this);this._objects=[],this._createLowerCanvas(t),this._initOptions(e),this._setImageSmoothing(),this.interactive||this._initRetinaScaling(),e.overlayImage&&this.setOverlayImage(e.overlayImage,i),e.backgroundImage&&this.setBackgroundImage(e.backgroundImage,i),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor,i),e.overlayColor&&this.setOverlayColor(e.overlayColor,i),this.calcOffset()},_isRetinaScaling:function(){return 1!==fabric.devicePixelRatio&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?fabric.devicePixelRatio:1},_initRetinaScaling:function(){this._isRetinaScaling()&&(this.lowerCanvasEl.setAttribute("width",this.width*fabric.devicePixelRatio),this.lowerCanvasEl.setAttribute("height",this.height*fabric.devicePixelRatio),this.contextContainer.scale(fabric.devicePixelRatio,fabric.devicePixelRatio))},calcOffset:function(){return this._offset=e(this.lowerCanvasEl),this},setOverlayImage:function(t,e,i){return this.__setBgOverlayImage("overlayImage",t,e,i)},setBackgroundImage:function(t,e,i){return this.__setBgOverlayImage("backgroundImage",t,e,i)},setOverlayColor:function(t,e){return this.__setBgOverlayColor("overlayColor",t,e)},setBackgroundColor:function(t,e){return this.__setBgOverlayColor("backgroundColor",t,e)},_setImageSmoothing:function(){var t=this.getContext();t.imageSmoothingEnabled=t.imageSmoothingEnabled||t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled||t.oImageSmoothingEnabled,t.imageSmoothingEnabled=this.imageSmoothingEnabled},__setBgOverlayImage:function(t,e,i,n){return"string"==typeof e?fabric.util.loadImage(e,function(e){e&&(this[t]=new fabric.Image(e,n)),i&&i(e)},this,n&&n.crossOrigin):(n&&e.setOptions(n),this[t]=e,i&&i(e)),this},__setBgOverlayColor:function(t,e,i){return this[t]=e,this._initGradient(e,t),this._initPattern(e,t,i),this},_createCanvasElement:function(t){var e=fabric.util.createCanvasElement(t);if(e.style||(e.style={}),!e)throw r;if(void 0===e.getContext)throw r;return e},_initOptions:function(t){this._setOptions(t),this.width=this.width||parseInt(this.lowerCanvasEl.width,10)||0,this.height=this.height||parseInt(this.lowerCanvasEl.height,10)||0,this.lowerCanvasEl.style&&(this.lowerCanvasEl.width=this.width,this.lowerCanvasEl.height=this.height,this.lowerCanvasEl.style.width=this.width+"px",this.lowerCanvasEl.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(t){this.lowerCanvasEl=fabric.util.getById(t)||this._createCanvasElement(t),fabric.util.addClass(this.lowerCanvasEl,"lower-canvas"),this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(t,e){return this.setDimensions({width:t},e)},setHeight:function(t,e){return this.setDimensions({height:t},e)},setDimensions:function(t,e){var i;e=e||{};for(var n in t)i=t[n],e.cssOnly||(this._setBackstoreDimension(n,t[n]),i+="px"),e.backstoreOnly||this._setCssDimension(n,i);return this._initRetinaScaling(),this._setImageSmoothing(),this.calcOffset(),e.cssOnly||this.renderAll(),this},_setBackstoreDimension:function(t,e){return this.lowerCanvasEl[t]=e,this.upperCanvasEl&&(this.upperCanvasEl[t]=e),this.cacheCanvasEl&&(this.cacheCanvasEl[t]=e),this[t]=e,this},_setCssDimension:function(t,e){return this.lowerCanvasEl.style[t]=e,this.upperCanvasEl&&(this.upperCanvasEl.style[t]=e),this.wrapperEl&&(this.wrapperEl.style[t]=e),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(t){var e,i=this._activeGroup;this.viewportTransform=t;for(var n=0,o=this._objects.length;n<o;n++)e=this._objects[n],e.group||e.setCoords(!1,!0);return i&&i.setCoords(!1,!0),this.calcViewportBoundaries(),this.renderAll(),this},zoomToPoint:function(t,e){var i=t,n=this.viewportTransform.slice(0);t=o(t,s(this.viewportTransform)),n[0]=e,n[3]=e;var r=o(t,n);return n[4]+=i.x-r.x,n[5]+=i.y-r.y,this.setViewportTransform(n)},setZoom:function(t){return this.zoomToPoint(new fabric.Point(0,0),t),this},absolutePan:function(t){var e=this.viewportTransform.slice(0);return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)},relativePan:function(t){return this.absolutePan(new fabric.Point(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(t){this.stateful&&t.setupState(),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added")},_onObjectRemoved:function(t){this.fire("object:removed",{target:t}),t.fire("removed"),delete t.canvas},clearContext:function(t){return t.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this._objects.length=0,this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderAll(),this},renderAll:function(){var t=this.contextContainer;return this.renderCanvas(t,this._objects),this},calcViewportBoundaries:function(){var t={},e=this.getWidth(),i=this.getHeight(),n=s(this.viewportTransform);return t.tl=o({x:0,y:0},n),t.br=o({x:e,y:i},n),t.tr=new fabric.Point(t.br.x,t.tl.y),t.bl=new fabric.Point(t.tl.x,t.br.y),this.vptCoords=t,t},renderCanvas:function(t,e){this.calcViewportBoundaries(),this.clearContext(t),this.fire("before:render"),this.clipTo&&fabric.util.clipContext(this,t),this._renderBackground(t),t.save(),t.transform.apply(t,this.viewportTransform),this._renderObjects(t,e),t.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),this.clipTo&&t.restore(),this._renderOverlay(t),this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),this.fire("after:render")},_renderObjects:function(t,e){for(var i=0,n=e.length;i<n;++i)e[i]&&e[i].render(t)},_renderBackgroundOrOverlay:function(t,e){var i=this[e+"Color"];i&&(t.fillStyle=i.toLive?i.toLive(t,this):i,t.fillRect(i.offsetX||0,i.offsetY||0,this.width,this.height)),(i=this[e+"Image"])&&(this[e+"Vpt"]&&(t.save(),t.transform.apply(t,this.viewportTransform)),i.render(t),this[e+"Vpt"]&&t.restore())},_renderBackground:function(t){this._renderBackgroundOrOverlay(t,"background")},_renderOverlay:function(t){this._renderBackgroundOrOverlay(t,"overlay")},getCenter:function(){return{top:this.getHeight()/2,left:this.getWidth()/2}},centerObjectH:function(t){return this._centerObject(t,new fabric.Point(this.getCenter().left,t.getCenterPoint().y))},centerObjectV:function(t){return this._centerObject(t,new fabric.Point(t.getCenterPoint().x,this.getCenter().top))},centerObject:function(t){var e=this.getCenter();return this._centerObject(t,new fabric.Point(e.left,e.top))},viewportCenterObject:function(t){var e=this.getVpCenter();return this._centerObject(t,e)},viewportCenterObjectH:function(t){var e=this.getVpCenter();return this._centerObject(t,new fabric.Point(e.x,t.getCenterPoint().y)),this},viewportCenterObjectV:function(t){var e=this.getVpCenter();return this._centerObject(t,new fabric.Point(t.getCenterPoint().x,e.y))},getVpCenter:function(){var t=this.getCenter(),e=s(this.viewportTransform);return o({x:t.left,y:t.top},e)},_centerObject:function(t,e){return t.setPositionByOrigin(e,"center","center"),this.renderAll(),this},toDatalessJSON:function(t){return this.toDatalessObject(t)},toObject:function(t){return this._toObjectMethod("toObject",t)},toDatalessObject:function(t){return this._toObjectMethod("toDatalessObject",t)},_toObjectMethod:function(e,i){var n={objects:this._toObjects(e,i)};return t(n,this.__serializeBgOverlay(e,i)),fabric.util.populateWithProperties(this,n,i),n},_toObjects:function(t,e){return this.getObjects().filter(function(t){return!t.excludeFromExport}).map(function(i){return this._toObject(i,t,e)},this)},_toObject:function(t,e,i){var n;this.includeDefaultValues||(n=t.includeDefaultValues,t.includeDefaultValues=!1);var o=t[e](i);return this.includeDefaultValues||(t.includeDefaultValues=n),o},__serializeBgOverlay:function(t,e){var i={};return this.backgroundColor&&(i.background=this.backgroundColor.toObject?this.backgroundColor.toObject(e):this.backgroundColor),this.overlayColor&&(i.overlay=this.overlayColor.toObject?this.overlayColor.toObject(e):this.overlayColor),this.backgroundImage&&(i.backgroundImage=this._toObject(this.backgroundImage,t,e)),this.overlayImage&&(i.overlayImage=this._toObject(this.overlayImage,t,e)),i},svgViewportTransformation:!0,toSVG:function(t,e){t||(t={});var i=[];return this._setSVGPreamble(i,t),this._setSVGHeader(i,t),this._setSVGBgOverlayColor(i,"backgroundColor"),this._setSVGBgOverlayImage(i,"backgroundImage",e),this._setSVGObjects(i,e),this._setSVGBgOverlayColor(i,"overlayColor"),this._setSVGBgOverlayImage(i,"overlayImage",e),i.push("</svg>"),i.join("")},_setSVGPreamble:function(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(t,e){var i,o=e.width||this.width,s=e.height||this.height,r='viewBox="0 0 '+this.width+" "+this.height+'" ',a=fabric.Object.NUM_FRACTION_DIGITS;e.viewBox?r='viewBox="'+e.viewBox.x+" "+e.viewBox.y+" "+e.viewBox.width+" "+e.viewBox.height+'" ':this.svgViewportTransformation&&(i=this.viewportTransform,r='viewBox="'+n(-i[4]/i[0],a)+" "+n(-i[5]/i[3],a)+" "+n(this.width/i[0],a)+" "+n(this.height/i[3],a)+'" '),t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',o,'" ','height="',s,'" ',r,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",fabric.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),"</defs>\n")},createSVGRefElementsMarkup:function(){var t=this;return["backgroundColor","overlayColor"].map(function(e){var i=t[e];if(i&&i.toLive)return i.toSVG(t,!1)}).join("")},createSVGFontFacesMarkup:function(){for(var t,e,i,n,o,s,r,a="",l={},c=fabric.fontPaths,h=this.getObjects(),d=0,u=h.length;d<u;d++)if(t=h[d],e=t.fontFamily,-1!==t.type.indexOf("text")&&!l[e]&&c[e]&&(l[e]=!0,t.styles)){i=t.styles;for(o in i){n=i[o];for(r in n)s=n[r],e=s.fontFamily,!l[e]&&c[e]&&(l[e]=!0)}}for(var p in l)a+=["\t\t@font-face {\n","\t\t\tfont-family: '",p,"';\n","\t\t\tsrc: url('",c[p],"');\n","\t\t}\n"].join("");return a&&(a=['\t<style type="text/css">',"<![CDATA[\n",a,"]]>","</style>\n"].join("")),a},_setSVGObjects:function(t,e){for(var i,n=0,o=this.getObjects(),s=o.length;n<s;n++)i=o[n],i.excludeFromExport||this._setSVGObject(t,i,e)},_setSVGObject:function(t,e,i){t.push(e.toSVG(i))},_setSVGBgOverlayImage:function(t,e,i){this[e]&&this[e].toSVG&&t.push(this[e].toSVG(i))},_setSVGBgOverlayColor:function(t,e){var i=this[e];if(i)if(i.toLive){var n=i.repeat;t.push('<rect transform="translate(',this.width/2,",",this.height/2,')"',' x="',i.offsetX-this.width/2,'" y="',i.offsetY-this.height/2,'" ','width="',"repeat-y"===n||"no-repeat"===n?i.source.width:this.width,'" height="',"repeat-x"===n||"no-repeat"===n?i.source.height:this.height,'" fill="url(#SVGID_'+i.id+')"',"></rect>\n")}else t.push('<rect x="0" y="0" ','width="',this.width,'" height="',this.height,'" fill="',this[e],'"',"></rect>\n")},sendToBack:function(t){if(!t)return this;var e,n,o,s=this._activeGroup;if(t===s)for(o=s._objects,e=o.length;e--;)n=o[e],i(this._objects,n),this._objects.unshift(n);else i(this._objects,t),this._objects.unshift(t);return this.renderAll&&this.renderAll()},bringToFront:function(t){if(!t)return this;var e,n,o,s=this._activeGroup;if(t===s)for(o=s._objects,e=0;e<o.length;e++)n=o[e],i(this._objects,n),this._objects.push(n);else i(this._objects,t),this._objects.push(t);return this.renderAll&&this.renderAll()},sendBackwards:function(t,e){if(!t)return this;var n,o,s,r,a,l=this._activeGroup;if(t===l)for(a=l._objects,n=0;n<a.length;n++)o=a[n],0!==(s=this._objects.indexOf(o))&&(r=s-1,i(this._objects,o),this._objects.splice(r,0,o));else 0!==(s=this._objects.indexOf(t))&&(r=this._findNewLowerIndex(t,s,e),i(this._objects,t),this._objects.splice(r,0,t));return this.renderAll&&this.renderAll(),this},_findNewLowerIndex:function(t,e,i){var n;if(i){n=e;for(var o=e-1;o>=0;--o){if(t.intersectsWithObject(this._objects[o])||t.isContainedWithinObject(this._objects[o])||this._objects[o].isContainedWithinObject(t)){n=o;break}}}else n=e-1;return n},bringForward:function(t,e){if(!t)return this;var n,o,s,r,a,l=this._activeGroup;if(t===l)for(a=l._objects,n=a.length;n--;)o=a[n],(s=this._objects.indexOf(o))!==this._objects.length-1&&(r=s+1,i(this._objects,o),this._objects.splice(r,0,o));else(s=this._objects.indexOf(t))!==this._objects.length-1&&(r=this._findNewUpperIndex(t,s,e),i(this._objects,t),this._objects.splice(r,0,t));return this.renderAll&&this.renderAll(),this},_findNewUpperIndex:function(t,e,i){var n;if(i){n=e;for(var o=e+1;o<this._objects.length;++o){if(t.intersectsWithObject(this._objects[o])||t.isContainedWithinObject(this._objects[o])||this._objects[o].isContainedWithinObject(t)){n=o;break}}}else n=e+1;return n},moveTo:function(t,e){return i(this._objects,t),this._objects.splice(e,0,t),this.renderAll&&this.renderAll()},dispose:function(){return this.clear(),this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this.getObjects().length+" }>"}}),t(fabric.StaticCanvas.prototype,fabric.Observable),t(fabric.StaticCanvas.prototype,fabric.Collection),t(fabric.StaticCanvas.prototype,fabric.DataURLExporter),t(fabric.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(t){var e=fabric.util.createCanvasElement();if(!e||!e.getContext)return null;var i=e.getContext("2d");if(!i)return null;switch(t){case"getImageData":return void 0!==i.getImageData;case"setLineDash":return void 0!==i.setLineDash;case"toDataURL":return void 0!==e.toDataURL;case"toDataURLWithQuality":try{return e.toDataURL("image/jpeg",0),!0}catch(t){}return!1;default:return null}}}),fabric.StaticCanvas.prototype.toJSON=fabric.StaticCanvas.prototype.toObject}(),fabric.BaseBrush=fabric.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeDashArray:null,setShadow:function(t){return this.shadow=new fabric.Shadow(t),this},_setBrushStyles:function(){var t=this.canvas.contextTop;t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,this.strokeDashArray&&fabric.StaticCanvas.supports("setLineDash")&&t.setLineDash(this.strokeDashArray)},_setShadow:function(){if(this.shadow){var t=this.canvas.contextTop,e=this.canvas.getZoom();t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur*e,t.shadowOffsetX=this.shadow.offsetX*e,t.shadowOffsetY=this.shadow.offsetY*e}},_resetShadow:function(){var t=this.canvas.contextTop;t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0}}),function(){fabric.PencilBrush=fabric.util.createClass(fabric.BaseBrush,{initialize:function(t){this.canvas=t,this._points=[]},onMouseDown:function(t){this._prepareForDrawing(t),this._captureDrawingPath(t),this._render()},onMouseMove:function(t){this._captureDrawingPath(t),this.canvas.clearContext(this.canvas.contextTop),this._render()},onMouseUp:function(){this._finalizeAndAddPath()},_prepareForDrawing:function(t){var e=new fabric.Point(t.x,t.y);this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)},_addPoint:function(t){this._points.push(t)},_reset:function(){this._points.length=0,this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(t){var e=new fabric.Point(t.x,t.y);this._addPoint(e)},_render:function(){var t=this.canvas.contextTop,e=this.canvas.viewportTransform,i=this._points[0],n=this._points[1];t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t.beginPath(),2===this._points.length&&i.x===n.x&&i.y===n.y&&(i.x-=.5,n.x+=.5),t.moveTo(i.x,i.y);for(var o=1,s=this._points.length;o<s;o++){var r=i.midPointFrom(n);t.quadraticCurveTo(i.x,i.y,r.x,r.y),i=this._points[o],n=this._points[o+1]}t.lineTo(i.x,i.y),t.stroke(),t.restore()},convertPointsToSVGPath:function(t){var e=[],i=new fabric.Point(t[0].x,t[0].y),n=new fabric.Point(t[1].x,t[1].y);e.push("M ",t[0].x," ",t[0].y," ");for(var o=1,s=t.length;o<s;o++){var r=i.midPointFrom(n);e.push("Q ",i.x," ",i.y," ",r.x," ",r.y," "),i=new fabric.Point(t[o].x,t[o].y),o+1<t.length&&(n=new fabric.Point(t[o+1].x,t[o+1].y))}return e.push("L ",i.x," ",i.y," "),e},createPath:function(t){var e=new fabric.Path(t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray,originX:"center",originY:"center"});return this.shadow&&(this.shadow.affectStroke=!0,e.setShadow(this.shadow)),e},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath();var t=this.convertPointsToSVGPath(this._points).join("");if("M 0 0 Q 0 0 0 0 L 0 0"===t)return void this.canvas.renderAll();var e=this.createPath(t);this.canvas.add(e),e.setCoords(),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderAll(),this.canvas.fire("path:created",{path:e})}})}(),fabric.CircleBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,initialize:function(t){this.canvas=t,this.points=[]},drawDot:function(t){var e=this.addPoint(t),i=this.canvas.contextTop,n=this.canvas.viewportTransform;i.save(),i.transform(n[0],n[1],n[2],n[3],n[4],n[5]),i.fillStyle=e.fill,i.beginPath(),i.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),i.closePath(),i.fill(),i.restore()},onMouseDown:function(t){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(t)},onMouseMove:function(t){this.drawDot(t)},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],i=0,n=this.points.length;i<n;i++){var o=this.points[i],s=new fabric.Circle({radius:o.radius,left:o.x,top:o.y,originX:"center",originY:"center",fill:o.fill});this.shadow&&s.setShadow(this.shadow),e.push(s)}var r=new fabric.Group(e,{originX:"center",originY:"center"});r.canvas=this.canvas,this.canvas.add(r),this.canvas.fire("path:created",{path:r}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.renderAll()},addPoint:function(t){var e=new fabric.Point(t.x,t.y),i=fabric.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,n=new fabric.Color(this.color).setAlpha(fabric.util.getRandomInt(0,100)/100).toRgba();return e.radius=i,e.fill=n,this.points.push(e),e}}),fabric.SprayBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(t){this.canvas=t,this.sprayChunks=[]},onMouseDown:function(t){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(t),this.render()},onMouseMove:function(t){this.addSprayChunk(t),this.render()},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],i=0,n=this.sprayChunks.length;i<n;i++)for(var o=this.sprayChunks[i],s=0,r=o.length;s<r;s++){var a=new fabric.Rect({width:o[s].width,height:o[s].width,left:o[s].x+1,top:o[s].y+1,originX:"center",originY:"center",fill:this.color});this.shadow&&a.setShadow(this.shadow),e.push(a)}this.optimizeOverlapping&&(e=this._getOptimizedRects(e));var l=new fabric.Group(e,{originX:"center",originY:"center"});l.canvas=this.canvas,this.canvas.add(l),this.canvas.fire("path:created",{path:l}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.renderAll()},_getOptimizedRects:function(t){for(var e,i={},n=0,o=t.length;n<o;n++)e=t[n].left+""+t[n].top,i[e]||(i[e]=t[n]);var s=[];for(e in i)s.push(i[e]);return s},render:function(){var t=this.canvas.contextTop;t.fillStyle=this.color;var e=this.canvas.viewportTransform;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]);for(var i=0,n=this.sprayChunkPoints.length;i<n;i++){var o=this.sprayChunkPoints[i];void 0!==o.opacity&&(t.globalAlpha=o.opacity),t.fillRect(o.x,o.y,o.width,o.width)}t.restore()},addSprayChunk:function(t){this.sprayChunkPoints=[];for(var e,i,n,o=this.width/2,s=0;s<this.density;s++){e=fabric.util.getRandomInt(t.x-o,t.x+o),i=fabric.util.getRandomInt(t.y-o,t.y+o),n=this.dotWidthVariance?fabric.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var r=new fabric.Point(e,i);r.width=n,this.randomOpacity&&(r.opacity=fabric.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(r)}this.sprayChunks.push(this.sprayChunkPoints)}}),fabric.PatternBrush=fabric.util.createClass(fabric.PencilBrush,{getPatternSrc:function(){var t=fabric.document.createElement("canvas"),e=t.getContext("2d");return t.width=t.height=25,e.fillStyle=this.color,e.beginPath(),e.arc(10,10,10,0,2*Math.PI,!1),e.closePath(),e.fill(),t},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(t){var e=this.callSuper("createPath",t),i=e._getLeftTopCoords().scalarAdd(e.strokeWidth/2);return e.stroke=new fabric.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-i.x,offsetY:-i.y}),e}}),function(){var t=fabric.util.getPointer,e=fabric.util.degreesToRadians,i=fabric.util.radiansToDegrees,n=Math.atan2,o=Math.abs,s=fabric.StaticCanvas.supports("setLineDash");fabric.Canvas=fabric.util.createClass(fabric.StaticCanvas,{initialize:function(t,e){e||(e={}),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas()},uniScaleTransform:!1,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=fabric.PencilBrush&&new fabric.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var t,e=this.getActiveGroup(),i=this.getActiveObject(),n=[],o=[];if(!e&&!i||this.preserveObjectStacking)n=this._objects;else{for(var s=0,r=this._objects.length;s<r;s++)t=this._objects[s],e&&e.contains(t)||t===i?o.push(t):n.push(t);e&&(e._set("_objects",o),n.push(e)),i&&n.push(i)}return n},renderAll:function(){!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1);var t=this.contextContainer;return this.renderCanvas(t,this._chooseObjectsToRender()),this},renderTop:function(){var t=this.contextTop;return this.clearContext(t),this.selection&&this._groupSelector&&this._drawSelection(t),this.fire("after:render"),this.contextTopDirty=!0,this},_resetCurrentTransform:function(){var t=this._currentTransform;t.target.set({scaleX:t.original.scaleX,scaleY:t.original.scaleY,skewX:t.original.skewX,skewY:t.original.skewY,left:t.original.left,top:t.original.top}),this._shouldCenterTransform(t.target)?"rotate"===t.action?this._setOriginToCenter(t.target):("center"!==t.originX&&("right"===t.originX?t.mouseXSign=-1:t.mouseXSign=1),"center"!==t.originY&&("bottom"===t.originY?t.mouseYSign=-1:t.mouseYSign=1),
t.originX="center",t.originY="center"):(t.originX=t.original.originX,t.originY=t.original.originY)},containsPoint:function(t,e,i){var n,o=i||this.getPointer(t,!0);return n=e.group&&e.group===this.getActiveGroup()?this._normalizePointer(e.group,o):{x:o.x,y:o.y},e.containsPoint(n)||e._findTargetCorner(o)},_normalizePointer:function(t,e){var i=t.calcTransformMatrix(),n=fabric.util.invertTransform(i),o=this.restorePointerVpt(e);return fabric.util.transformPoint(o,n)},isTargetTransparent:function(t,e,i){var n=t.hasBorders,o=t.transparentCorners,s=this.contextCache,r=t.selectionBackgroundColor;t.hasBorders=t.transparentCorners=!1,t.selectionBackgroundColor="",s.save(),s.transform.apply(s,this.viewportTransform),t.render(s),s.restore(),t.active&&t._renderControls(s),t.hasBorders=n,t.transparentCorners=o,t.selectionBackgroundColor=r;var a=fabric.util.isTransparent(s,e,i,this.targetFindTolerance);return this.clearContext(s),a},_shouldClearSelection:function(t,e){var i=this.getActiveGroup(),n=this.getActiveObject();return!e||e&&i&&!i.contains(e)&&i!==e&&!t[this.selectionKey]||e&&!e.evented||e&&!e.selectable&&n&&n!==e},_shouldCenterTransform:function(t){if(t){var e,i=this._currentTransform;return"scale"===i.action||"scaleX"===i.action||"scaleY"===i.action?e=this.centeredScaling||t.centeredScaling:"rotate"===i.action&&(e=this.centeredRotation||t.centeredRotation),e?!i.altKey:i.altKey}},_getOriginFromCorner:function(t,e){var i={x:t.originX,y:t.originY};return"ml"===e||"tl"===e||"bl"===e?i.x="right":"mr"!==e&&"tr"!==e&&"br"!==e||(i.x="left"),"tl"===e||"mt"===e||"tr"===e?i.y="bottom":"bl"!==e&&"mb"!==e&&"br"!==e||(i.y="top"),i},_getActionFromCorner:function(t,e,i){if(!e)return"drag";switch(e){case"mtr":return"rotate";case"ml":case"mr":return i[this.altActionKey]?"skewY":"scaleX";case"mt":case"mb":return i[this.altActionKey]?"skewX":"scaleY";default:return"scale"}},_setupCurrentTransform:function(t,i){if(i){var n=this.getPointer(t),o=i._findTargetCorner(this.getPointer(t,!0)),s=this._getActionFromCorner(i,o,t),r=this._getOriginFromCorner(i,o);this._currentTransform={target:i,action:s,corner:o,scaleX:i.scaleX,scaleY:i.scaleY,skewX:i.skewX,skewY:i.skewY,offsetX:n.x-i.left,offsetY:n.y-i.top,originX:r.x,originY:r.y,ex:n.x,ey:n.y,lastX:n.x,lastY:n.y,left:i.left,top:i.top,theta:e(i.angle),width:i.width*i.scaleX,mouseXSign:1,mouseYSign:1,shiftKey:t.shiftKey,altKey:t[this.centeredKey]},this._currentTransform.original={left:i.left,top:i.top,scaleX:i.scaleX,scaleY:i.scaleY,skewX:i.skewX,skewY:i.skewY,originX:r.x,originY:r.y},this._resetCurrentTransform()}},_translateObject:function(t,e){var i=this._currentTransform,n=i.target,o=t-i.offsetX,s=e-i.offsetY,r=!n.get("lockMovementX")&&n.left!==o,a=!n.get("lockMovementY")&&n.top!==s;return r&&n.set("left",o),a&&n.set("top",s),r||a},_changeSkewTransformOrigin:function(t,e,i){var n="originX",o={0:"center"},s=e.target.skewX,r="left",a="right",l="mt"===e.corner||"ml"===e.corner?1:-1,c=1;t=t>0?1:-1,"y"===i&&(s=e.target.skewY,r="top",a="bottom",n="originY"),o[-1]=r,o[1]=a,e.target.flipX&&(c*=-1),e.target.flipY&&(c*=-1),0===s?(e.skewSign=-l*t*c,e[n]=o[-t]):(s=s>0?1:-1,e.skewSign=s,e[n]=o[s*l*c])},_skewObject:function(t,e,i){var n=this._currentTransform,o=n.target,s=!1,r=o.get("lockSkewingX"),a=o.get("lockSkewingY");if(r&&"x"===i||a&&"y"===i)return!1;var l,c,h=o.getCenterPoint(),d=o.toLocalPoint(new fabric.Point(t,e),"center","center")[i],u=o.toLocalPoint(new fabric.Point(n.lastX,n.lastY),"center","center")[i],p=o._getTransformedDimensions();return this._changeSkewTransformOrigin(d-u,n,i),l=o.toLocalPoint(new fabric.Point(t,e),n.originX,n.originY)[i],c=o.translateToOriginPoint(h,n.originX,n.originY),s=this._setObjectSkew(l,n,i,p),n.lastX=t,n.lastY=e,o.setPositionByOrigin(c,n.originX,n.originY),s},_setObjectSkew:function(t,e,i,n){var o,s,r,a,l,c,h,d,u,p=e.target,f=!1,g=e.skewSign;return"x"===i?(a="y",l="Y",c="X",d=0,u=p.skewY):(a="x",l="X",c="Y",d=p.skewX,u=0),r=p._getTransformedDimensions(d,u),h=2*Math.abs(t)-r[i],h<=2?o=0:(o=g*Math.atan(h/p["scale"+c]/(r[a]/p["scale"+l])),o=fabric.util.radiansToDegrees(o)),f=p["skew"+c]!==o,p.set("skew"+c,o),0!==p["skew"+l]&&(s=p._getTransformedDimensions(),o=n[a]/s[a]*p["scale"+l],p.set("scale"+l,o)),f},_scaleObject:function(t,e,i){var n=this._currentTransform,o=n.target,s=o.get("lockScalingX"),r=o.get("lockScalingY"),a=o.get("lockScalingFlip");if(s&&r)return!1;var l=o.translateToOriginPoint(o.getCenterPoint(),n.originX,n.originY),c=o.toLocalPoint(new fabric.Point(t,e),n.originX,n.originY),h=o._getTransformedDimensions(),d=!1;return this._setLocalMouse(c,n),d=this._setObjectScale(c,n,s,r,i,a,h),o.setPositionByOrigin(l,n.originX,n.originY),d},_setObjectScale:function(t,e,i,n,o,s,r){var a,l,c,h,d=e.target,u=!1,p=!1,f=!1;return c=t.x*d.scaleX/r.x,h=t.y*d.scaleY/r.y,a=d.scaleX!==c,l=d.scaleY!==h,s&&c<=0&&c<d.scaleX&&(u=!0),s&&h<=0&&h<d.scaleY&&(p=!0),"equally"!==o||i||n?o?"x"!==o||d.get("lockUniScaling")?"y"!==o||d.get("lockUniScaling")||p||n||d.set("scaleY",h)&&(f=f||l):u||i||d.set("scaleX",c)&&(f=f||a):(u||i||d.set("scaleX",c)&&(f=f||a),p||n||d.set("scaleY",h)&&(f=f||l)):u||p||(f=this._scaleObjectEqually(t,d,e,r)),e.newScaleX=c,e.newScaleY=h,u||p||this._flipObject(e,o),f},_scaleObjectEqually:function(t,e,i,n){var o,s=t.y+t.x,r=n.y*i.original.scaleY/e.scaleY+n.x*i.original.scaleX/e.scaleX;return i.newScaleX=i.original.scaleX*s/r,i.newScaleY=i.original.scaleY*s/r,o=i.newScaleX!==e.scaleX||i.newScaleY!==e.scaleY,e.set("scaleX",i.newScaleX),e.set("scaleY",i.newScaleY),o},_flipObject:function(t,e){t.newScaleX<0&&"y"!==e&&("left"===t.originX?t.originX="right":"right"===t.originX&&(t.originX="left")),t.newScaleY<0&&"x"!==e&&("top"===t.originY?t.originY="bottom":"bottom"===t.originY&&(t.originY="top"))},_setLocalMouse:function(t,e){var i=e.target,n=this.getZoom(),s=i.padding/n;"right"===e.originX?t.x*=-1:"center"===e.originX&&(t.x*=2*e.mouseXSign,t.x<0&&(e.mouseXSign=-e.mouseXSign)),"bottom"===e.originY?t.y*=-1:"center"===e.originY&&(t.y*=2*e.mouseYSign,t.y<0&&(e.mouseYSign=-e.mouseYSign)),o(t.x)>s?t.x<0?t.x+=s:t.x-=s:t.x=0,o(t.y)>s?t.y<0?t.y+=s:t.y-=s:t.y=0},_rotateObject:function(t,e){var o=this._currentTransform;if(o.target.get("lockRotation"))return!1;var s=n(o.ey-o.top,o.ex-o.left),r=n(e-o.top,t-o.left),a=i(r-s+o.theta),l=!0;if(a<0&&(a=360+a),a%=360,o.target.snapAngle>0){var c=o.target.snapAngle,h=o.target.snapThreshold||c,d=Math.ceil(a/c)*c,u=Math.floor(a/c)*c;Math.abs(a-u)<h?a=u:Math.abs(a-d)<h&&(a=d),o.target.angle===a&&(l=!1)}return o.target.angle=a,l},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.setAngle(0)},_drawSelection:function(t){var e=this._groupSelector,i=e.left,n=e.top,r=o(i),a=o(n);if(this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(e.ex-(i>0?0:-i),e.ey-(n>0?0:-n),r,a)),this.selectionLineWidth&&this.selectionBorderColor)if(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,this.selectionDashArray.length>1&&!s){var l=e.ex+.5-(i>0?0:r),c=e.ey+.5-(n>0?0:a);t.beginPath(),fabric.util.drawDashedLine(t,l,c,l+r,c,this.selectionDashArray),fabric.util.drawDashedLine(t,l,c+a-1,l+r,c+a-1,this.selectionDashArray),fabric.util.drawDashedLine(t,l,c,l,c+a,this.selectionDashArray),fabric.util.drawDashedLine(t,l+r-1,c,l+r-1,c+a,this.selectionDashArray),t.closePath(),t.stroke()}else fabric.Object.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(e.ex+.5-(i>0?0:r),e.ey+.5-(n>0?0:a),r,a)},findTarget:function(t,e){if(!this.skipTargetFind){var i,n=this.getPointer(t,!0),o=this.getActiveGroup(),s=this.getActiveObject();if(o&&!e&&o===this._searchPossibleTargets([o],n))return this._fireOverOutEvents(o,t),o;if(s&&s._findTargetCorner(n))return this._fireOverOutEvents(s,t),s;if(s&&s===this._searchPossibleTargets([s],n)){if(!this.preserveObjectStacking)return this._fireOverOutEvents(s,t),s;i=s}this.targets=[];var r=this._searchPossibleTargets(this._objects,n);return t[this.altSelectionKey]&&r&&i&&r!==i&&(r=i),this._fireOverOutEvents(r,t),r}},_fireOverOutEvents:function(t,e){t?this._hoveredTarget!==t&&(this._hoveredTarget&&(this.fire("mouse:out",{target:this._hoveredTarget,e:e}),this._hoveredTarget.fire("mouseout")),this.fire("mouse:over",{target:t,e:e}),t.fire("mouseover"),this._hoveredTarget=t):this._hoveredTarget&&(this.fire("mouse:out",{target:this._hoveredTarget,e:e}),this._hoveredTarget.fire("mouseout"),this._hoveredTarget=null)},_checkTarget:function(t,e){if(e&&e.visible&&e.evented&&this.containsPoint(null,e,t)){if(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing)return!0;if(!this.isTargetTransparent(e,t.x,t.y))return!0}},_searchPossibleTargets:function(t,e){for(var i,n,o,s=t.length;s--;)if(this._checkTarget(e,t[s])){i=t[s],"group"===i.type&&i.subTargetCheck&&(n=this._normalizePointer(i,e),(o=this._searchPossibleTargets(i._objects,n))&&this.targets.push(o));break}return i},restorePointerVpt:function(t){return fabric.util.transformPoint(t,fabric.util.invertTransform(this.viewportTransform))},getPointer:function(e,i,n){n||(n=this.upperCanvasEl);var o,s=t(e),r=n.getBoundingClientRect(),a=r.width||0,l=r.height||0;return a&&l||("top"in r&&"bottom"in r&&(l=Math.abs(r.top-r.bottom)),"right"in r&&"left"in r&&(a=Math.abs(r.right-r.left))),this.calcOffset(),s.x=s.x-this._offset.left,s.y=s.y-this._offset.top,i||(s=this.restorePointerVpt(s)),o=0===a||0===l?{width:1,height:1}:{width:n.width/a,height:n.height/l},{x:s.x*o.width,y:s.y*o.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,"");this.upperCanvasEl=this._createCanvasElement(),fabric.util.addClass(this.upperCanvasEl,"upper-canvas "+t),this.wrapperEl.appendChild(this.upperCanvasEl),this._copyCanvasStyle(this.lowerCanvasEl,this.upperCanvasEl),this._applyCanvasStyle(this.upperCanvasEl),this.contextTop=this.upperCanvasEl.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=fabric.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),fabric.util.setStyle(this.wrapperEl,{width:this.getWidth()+"px",height:this.getHeight()+"px",position:"relative"}),fabric.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.getWidth()||t.width,i=this.getHeight()||t.height;fabric.util.setStyle(t,{position:"absolute",width:e+"px",height:i+"px",left:0,top:0,"touch-action":"none"}),t.width=e,t.height=i,fabric.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},_setActiveObject:function(t){var e=this._activeObject;e&&(e.set("active",!1),t!==e&&e.onDeselect&&"function"==typeof e.onDeselect&&e.onDeselect()),this._activeObject=t,t.set("active",!0)},setActiveObject:function(t,e){var i=this.getActiveObject();return i&&i!==t&&i.fire("deselected",{e:e}),this._setActiveObject(t),this.renderAll(),this.fire("object:selected",{target:t,e:e}),t.fire("selected",{e:e}),this},getActiveObject:function(){return this._activeObject},_onObjectRemoved:function(t){this.getActiveObject()===t&&(this.fire("before:selection:cleared",{target:t}),this._discardActiveObject(),this.fire("selection:cleared",{target:t}),t.fire("deselected")),this._hoveredTarget===t&&(this._hoveredTarget=null),this.callSuper("_onObjectRemoved",t)},_discardActiveObject:function(){var t=this._activeObject;t&&(t.set("active",!1),t.onDeselect&&"function"==typeof t.onDeselect&&t.onDeselect()),this._activeObject=null},discardActiveObject:function(t){var e=this._activeObject;return e&&(this.fire("before:selection:cleared",{target:e,e:t}),this._discardActiveObject(),this.fire("selection:cleared",{e:t}),e.fire("deselected",{e:t})),this},_setActiveGroup:function(t){this._activeGroup=t,t&&t.set("active",!0)},setActiveGroup:function(t,e){return this._setActiveGroup(t),t&&(this.fire("object:selected",{target:t,e:e}),t.fire("selected",{e:e})),this},getActiveGroup:function(){return this._activeGroup},_discardActiveGroup:function(){var t=this.getActiveGroup();t&&t.destroy(),this.setActiveGroup(null)},discardActiveGroup:function(t){var e=this.getActiveGroup();return e&&(this.fire("before:selection:cleared",{e:t,target:e}),this._discardActiveGroup(),this.fire("selection:cleared",{e:t})),this},deactivateAll:function(){for(var t,e=this.getObjects(),i=0,n=e.length;i<n;i++)(t=e[i])&&t.set("active",!1);return this._discardActiveGroup(),this._discardActiveObject(),this},deactivateAllWithDispatch:function(t){return this.discardActiveGroup(t),this.discardActiveObject(t),this.deactivateAll(),this},dispose:function(){this.callSuper("dispose");var t=this.wrapperEl;return this.removeListeners(),t.removeChild(this.upperCanvasEl),t.removeChild(this.lowerCanvasEl),delete this.upperCanvasEl,t.parentNode&&t.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,this},clear:function(){return this.discardActiveGroup(),this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(t){var e=this.getActiveGroup();e?e._renderControls(t):this._drawObjectsControls(t)},_drawObjectsControls:function(t){for(var e=0,i=this._objects.length;e<i;++e)this._objects[e]&&this._objects[e].active&&this._objects[e]._renderControls(t)},_toObject:function(t,e,i){var n=this._realizeGroupTransformOnObject(t),o=this.callSuper("_toObject",t,e,i);return this._unwindGroupTransformOnObject(t,n),o},_realizeGroupTransformOnObject:function(t){var e=["angle","flipX","flipY","height","left","scaleX","scaleY","top","width"];if(t.group&&t.group===this.getActiveGroup()){var i={};return e.forEach(function(e){i[e]=t[e]}),this.getActiveGroup().realizeTransform(t),i}return null},_unwindGroupTransformOnObject:function(t,e){e&&t.set(e)},_setSVGObject:function(t,e,i){var n;n=this._realizeGroupTransformOnObject(e),this.callSuper("_setSVGObject",t,e,i),this._unwindGroupTransformOnObject(e,n)}});for(var r in fabric.StaticCanvas)"prototype"!==r&&(fabric.Canvas[r]=fabric.StaticCanvas[r]);fabric.isTouchSupported&&(fabric.Canvas.prototype._setCursorFromEvent=function(){}),fabric.Element=fabric.Canvas}(),function(){var t={mt:0,tr:1,mr:2,br:3,mb:4,bl:5,ml:6,tl:7},e=fabric.util.addListener,i=fabric.util.removeListener;fabric.util.object.extend(fabric.Canvas.prototype,{cursorMap:["n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize","nw-resize"],_initEventListeners:function(){this._bindEvents(),e(fabric.window,"resize",this._onResize),e(this.upperCanvasEl,"mousedown",this._onMouseDown),e(this.upperCanvasEl,"mousemove",this._onMouseMove),e(this.upperCanvasEl,"mouseout",this._onMouseOut),e(this.upperCanvasEl,"mouseenter",this._onMouseEnter),e(this.upperCanvasEl,"wheel",this._onMouseWheel),e(this.upperCanvasEl,"contextmenu",this._onContextMenu),e(this.upperCanvasEl,"touchstart",this._onMouseDown,{passive:!1}),e(this.upperCanvasEl,"touchmove",this._onMouseMove,{passive:!1}),"undefined"!=typeof eventjs&&"add"in eventjs&&(eventjs.add(this.upperCanvasEl,"gesture",this._onGesture),eventjs.add(this.upperCanvasEl,"drag",this._onDrag),eventjs.add(this.upperCanvasEl,"orientation",this._onOrientationChange),eventjs.add(this.upperCanvasEl,"shake",this._onShake),eventjs.add(this.upperCanvasEl,"longpress",this._onLongPress))},_bindEvents:function(){this._onMouseDown=this._onMouseDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this)},removeListeners:function(){i(fabric.window,"resize",this._onResize),i(this.upperCanvasEl,"mousedown",this._onMouseDown),i(this.upperCanvasEl,"mousemove",this._onMouseMove),i(this.upperCanvasEl,"mouseout",this._onMouseOut),i(this.upperCanvasEl,"mouseenter",this._onMouseEnter),i(this.upperCanvasEl,"wheel",this._onMouseWheel),i(this.upperCanvasEl,"contextmenu",this._onContextMenu),i(this.upperCanvasEl,"touchstart",this._onMouseDown),i(this.upperCanvasEl,"touchmove",this._onMouseMove),"undefined"!=typeof eventjs&&"remove"in eventjs&&(eventjs.remove(this.upperCanvasEl,"gesture",this._onGesture),eventjs.remove(this.upperCanvasEl,"drag",this._onDrag),eventjs.remove(this.upperCanvasEl,"orientation",this._onOrientationChange),eventjs.remove(this.upperCanvasEl,"shake",this._onShake),eventjs.remove(this.upperCanvasEl,"longpress",this._onLongPress))},_onGesture:function(t,e){this.__onTransformGesture&&this.__onTransformGesture(t,e)},_onDrag:function(t,e){this.__onDrag&&this.__onDrag(t,e)},_onMouseWheel:function(t){this.__onMouseWheel(t)},_onMouseOut:function(t){var e=this._hoveredTarget;this.fire("mouse:out",{target:e,e:t}),this._hoveredTarget=null,e&&e.fire("mouseout",{e:t}),this._iTextInstances&&this._iTextInstances.forEach(function(t){t.isEditing&&t.hiddenTextarea.focus()})},_onMouseEnter:function(t){this.findTarget(t)||(this.fire("mouse:over",{target:null,e:t}),this._hoveredTarget=null)},_onOrientationChange:function(t,e){this.__onOrientationChange&&this.__onOrientationChange(t,e)},_onShake:function(t,e){this.__onShake&&this.__onShake(t,e)},_onLongPress:function(t,e){this.__onLongPress&&this.__onLongPress(t,e)},_onContextMenu:function(t){return this.stopContextMenu&&(t.stopPropagation(),t.preventDefault()),!1},_onMouseDown:function(t){this.__onMouseDown(t),e(fabric.document,"touchend",this._onMouseUp,{passive:!1}),e(fabric.document,"touchmove",this._onMouseMove,{passive:!1}),i(this.upperCanvasEl,"mousemove",this._onMouseMove),i(this.upperCanvasEl,"touchmove",this._onMouseMove),"touchstart"===t.type?i(this.upperCanvasEl,"mousedown",this._onMouseDown):(e(fabric.document,"mouseup",this._onMouseUp),e(fabric.document,"mousemove",this._onMouseMove))},_onMouseUp:function(t){if(this.__onMouseUp(t),i(fabric.document,"mouseup",this._onMouseUp),i(fabric.document,"touchend",this._onMouseUp),i(fabric.document,"mousemove",this._onMouseMove),i(fabric.document,"touchmove",this._onMouseMove),e(this.upperCanvasEl,"mousemove",this._onMouseMove),e(this.upperCanvasEl,"touchmove",this._onMouseMove,{passive:!1}),"touchend"===t.type){var n=this;setTimeout(function(){e(n.upperCanvasEl,"mousedown",n._onMouseDown)},400)}},_onMouseMove:function(t){!this.allowTouchScrolling&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)},_onResize:function(){this.calcOffset()},_shouldRender:function(t,e){var i=this.getActiveGroup()||this.getActiveObject();return!(i&&i.isEditing&&t===i||!(t&&(t.isMoving||t!==i)||!t&&i||!t&&!i&&!this._groupSelector||e&&this._previousPointer&&this.selection&&(e.x!==this._previousPointer.x||e.y!==this._previousPointer.y)))},__onMouseUp:function(t){var e,i=!0,n=this._currentTransform,o=this._groupSelector,s=!o||0===o.left&&0===o.top;if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(t);n&&(this._finalizeCurrentTransform(),i=!n.actionPerformed),e=i?this.findTarget(t,!0):n.target;var r=this._shouldRender(e,this.getPointer(t));e||!s?this._maybeGroupObjects(t):(this._groupSelector=null,this._currentTransform=null),e&&(e.isMoving=!1),this._handleCursorAndEvent(t,e,"up"),e&&(e.__corner=0),r&&this.renderAll()},_handleCursorAndEvent:function(t,e,i){this._setCursorFromEvent(t,e),this._handleEvent(t,i,e||null)},_handleEvent:function(t,e,i){var n=void 0===i?this.findTarget(t):i,o=this.targets||[],s={e:t,target:n,subTargets:o};this.fire("mouse:"+e,s),n&&n.fire("mouse"+e,s);for(var r=0;r<o.length;r++)o[r].fire("mouse"+e,s)},_finalizeCurrentTransform:function(){var t=this._currentTransform,e=t.target;e._scaling&&(e._scaling=!1),e.setCoords(),this._restoreOriginXY(e),(t.actionPerformed||this.stateful&&e.hasStateChanged())&&(this.fire("object:modified",{target:e}),e.fire("modified"))},_restoreOriginXY:function(t){if(this._previousOriginX&&this._previousOriginY){var e=t.translateToOriginPoint(t.getCenterPoint(),this._previousOriginX,this._previousOriginY);t.originX=this._previousOriginX,t.originY=this._previousOriginY,t.left=e.x,t.top=e.y,this._previousOriginX=null,this._previousOriginY=null}},_onMouseDownInDrawingMode:function(t){this._isCurrentlyDrawing=!0,this.discardActiveObject(t).renderAll(),this.clipTo&&fabric.util.clipContext(this,this.contextTop);var e=this.getPointer(t);this.freeDrawingBrush.onMouseDown(e),this._handleEvent(t,"down")},_onMouseMoveInDrawingMode:function(t){if(this._isCurrentlyDrawing){var e=this.getPointer(t);this.freeDrawingBrush.onMouseMove(e)}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")},_onMouseUpInDrawingMode:function(t){this._isCurrentlyDrawing=!1,this.clipTo&&this.contextTop.restore(),this.freeDrawingBrush.onMouseUp(),this._handleEvent(t,"up")},__onMouseDown:function(t){var e=this.findTarget(t);if("which"in t?3===t.which:2===t.button)return void(this.fireRightClick&&this._handleEvent(t,"down",e||null));if("which"in t?2===t.which:1===t.button)return void(this.fireMiddleClick&&this._handleEvent(t,"down",e||null));if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(t);if(!this._currentTransform){var i=this.getPointer(t,!0);this._previousPointer=i;var n=this._shouldRender(e,i),o=this._shouldGroup(t,e);if(this._shouldClearSelection(t,e)?this._clearSelection(t,e,i):o&&(this._handleGrouping(t,e),e=this.getActiveGroup()),e){!e.selectable||!e.__corner&&o||(this._beforeTransform(t,e),this._setupCurrentTransform(t,e));var s=this.getActiveObject();e!==this.getActiveGroup()&&e!==s&&(this.deactivateAll(),e.selectable&&(s&&s.fire("deselected",{e:t}),this.setActiveObject(e,t)))}this._handleEvent(t,"down",e||null),n&&this.renderAll()}},_beforeTransform:function(t,e){this.stateful&&e.saveState(),e._findTargetCorner(this.getPointer(t))&&this.onBeforeScaleRotate(e)},_clearSelection:function(t,e,i){this.deactivateAllWithDispatch(t),e&&e.selectable?this.setActiveObject(e,t):this.selection&&(this._groupSelector={ex:i.x,ey:i.y,top:0,left:0})},_setOriginToCenter:function(t){this._previousOriginX=this._currentTransform.target.originX,this._previousOriginY=this._currentTransform.target.originY;var e=t.getCenterPoint();t.originX="center",t.originY="center",t.left=e.x,t.top=e.y,this._currentTransform.left=t.left,this._currentTransform.top=t.top},_setCenterToOrigin:function(t){var e=t.translateToOriginPoint(t.getCenterPoint(),this._previousOriginX,this._previousOriginY);t.originX=this._previousOriginX,t.originY=this._previousOriginY,t.left=e.x,t.top=e.y,this._previousOriginX=null,this._previousOriginY=null},__onMouseMove:function(t){var e,i;if(this.isDrawingMode)return void this._onMouseMoveInDrawingMode(t);if(!(void 0!==t.touches&&t.touches.length>1)){var n=this._groupSelector;n?(i=this.getPointer(t,!0),n.left=i.x-n.ex,n.top=i.y-n.ey,this.renderTop()):this._currentTransform?this._transformObject(t):(e=this.findTarget(t),this._setCursorFromEvent(t,e)),this._handleEvent(t,"move",e||null)}},__onMouseWheel:function(t){this._handleEvent(t,"wheel")},_transformObject:function(t){var e=this.getPointer(t),i=this._currentTransform;i.reset=!1,i.target.isMoving=!0,i.shiftKey=t.shiftKey,i.altKey=t[this.centeredKey],this._beforeScaleTransform(t,i),this._performTransformAction(t,i,e),i.actionPerformed&&this.renderAll()},_performTransformAction:function(t,e,i){var n=i.x,o=i.y,s=e.target,r=e.action,a=!1;"rotate"===r?(a=this._rotateObject(n,o))&&this._fire("rotating",s,t):"scale"===r?(a=this._onScale(t,e,n,o))&&this._fire("scaling",s,t):"scaleX"===r?(a=this._scaleObject(n,o,"x"))&&this._fire("scaling",s,t):"scaleY"===r?(a=this._scaleObject(n,o,"y"))&&this._fire("scaling",s,t):"skewX"===r?(a=this._skewObject(n,o,"x"))&&this._fire("skewing",s,t):"skewY"===r?(a=this._skewObject(n,o,"y"))&&this._fire("skewing",s,t):(a=this._translateObject(n,o))&&(this._fire("moving",s,t),this.setCursor(s.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||a},_fire:function(t,e,i){this.fire("object:"+t,{target:e,e:i}),e.fire(t,{e:i})},_beforeScaleTransform:function(t,e){if("scale"===e.action||"scaleX"===e.action||"scaleY"===e.action){var i=this._shouldCenterTransform(e.target);(i&&("center"!==e.originX||"center"!==e.originY)||!i&&"center"===e.originX&&"center"===e.originY)&&(this._resetCurrentTransform(),e.reset=!0)}},_onScale:function(t,e,i,n){return!t[this.uniScaleKey]&&!this.uniScaleTransform||e.target.get("lockUniScaling")?(e.reset||"scale"!==e.currentAction||this._resetCurrentTransform(),e.currentAction="scaleEqually",this._scaleObject(i,n,"equally")):(e.currentAction="scale",this._scaleObject(i,n))},_setCursorFromEvent:function(t,e){if(!e||!e.selectable)return this.setCursor(this.defaultCursor),!1;var i=e.hoverCursor||this.hoverCursor,n=this.getActiveGroup(),o=e._findTargetCorner&&(!n||!n.contains(e))&&e._findTargetCorner(this.getPointer(t,!0));return o?this._setCornerCursor(o,e,t):this.setCursor(i),!0},_setCornerCursor:function(e,i,n){if(e in t)this.setCursor(this._getRotatedCornerCursor(e,i,n));else{if("mtr"!==e||!i.hasRotatingPoint)return this.setCursor(this.defaultCursor),!1;this.setCursor(this.rotationCursor)}},_getRotatedCornerCursor:function(e,i,n){var o=Math.round(i.getAngle()%360/45);return o<0&&(o+=8),o+=t[e],n[this.altActionKey]&&t[e]%2==0&&(o+=2),o%=8,this.cursorMap[o]}})}(),function(){var t=Math.min,e=Math.max;fabric.util.object.extend(fabric.Canvas.prototype,{_shouldGroup:function(t,e){var i=this.getActiveObject();return t[this.selectionKey]&&e&&e.selectable&&(this.getActiveGroup()||i&&i!==e)&&this.selection},_handleGrouping:function(t,e){var i=this.getActiveGroup();(e!==i||(e=this.findTarget(t,!0)))&&(i?this._updateActiveGroup(e,t):this._createActiveGroup(e,t),this._activeGroup&&this._activeGroup.saveCoords())},_updateActiveGroup:function(t,e){var i=this.getActiveGroup();if(i.contains(t)){if(i.removeWithUpdate(t),t.set("active",!1),1===i.size())return this.discardActiveGroup(e),void this.setActiveObject(i.item(0))}else i.addWithUpdate(t);this.fire("selection:created",{target:i,e:e}),i.set("active",!0)},_createActiveGroup:function(t,e){if(this._activeObject&&t!==this._activeObject){var i=this._createGroup(t);i.addWithUpdate(),this.setActiveGroup(i),this._activeObject=null,this.fire("selection:created",{target:i,e:e})}t.set("active",!0)},_createGroup:function(t){var e=this.getObjects(),i=e.indexOf(this._activeObject)<e.indexOf(t),n=i?[this._activeObject,t]:[t,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new fabric.Group(n,{canvas:this})},_groupSelectedObjects:function(t){var e=this._collectObjects();1===e.length?this.setActiveObject(e[0],t):e.length>1&&(e=new fabric.Group(e.reverse(),{canvas:this}),e.addWithUpdate(),this.setActiveGroup(e,t),e.saveCoords(),this.fire("selection:created",{target:e}),this.renderAll())},_collectObjects:function(){for(var i,n=[],o=this._groupSelector.ex,s=this._groupSelector.ey,r=o+this._groupSelector.left,a=s+this._groupSelector.top,l=new fabric.Point(t(o,r),t(s,a)),c=new fabric.Point(e(o,r),e(s,a)),h=o===r&&s===a,d=this._objects.length;d--&&!((i=this._objects[d])&&i.selectable&&i.visible&&(i.intersectsWithRect(l,c)||i.isContainedWithinRect(l,c)||i.containsPoint(l)||i.containsPoint(c))&&(i.set("active",!0),n.push(i),h)););return n},_maybeGroupObjects:function(t){this.selection&&this._groupSelector&&this._groupSelectedObjects(t);var e=this.getActiveGroup();e&&(e.setObjectsCoords().setCoords(),e.isMoving=!1,this.setCursor(this.defaultCursor)),this._groupSelector=null,this._currentTransform=null}})}(),function(){var t=fabric.StaticCanvas.supports("toDataURLWithQuality");fabric.util.object.extend(fabric.StaticCanvas.prototype,{toDataURL:function(t){t||(t={});var e=t.format||"png",i=t.quality||1,n=t.multiplier||1,o={left:t.left||0,top:t.top||0,width:t.width||0,height:t.height||0};return this.__toDataURLWithMultiplier(e,i,o,n)},__toDataURLWithMultiplier:function(t,e,i,n){var o=this.getWidth(),s=this.getHeight(),r=(i.width||this.getWidth())*n,a=(i.height||this.getHeight())*n,l=this.getZoom(),c=l*n,h=this.viewportTransform,d=(h[4]-i.left)*n,u=(h[5]-i.top)*n,p=[c,0,0,c,d,u],f=this.interactive;this.viewportTransform=p,this.interactive&&(this.interactive=!1),o!==r||s!==a?this.setDimensions({width:r,height:a}):this.renderAll();var g=this.__toDataURL(t,e,i);return f&&(this.interactive=f),this.viewportTransform=h,this.setDimensions({width:o,height:s}),g},__toDataURL:function(e,i){var n=this.contextContainer.canvas;return"jpg"===e&&(e="jpeg"),t?n.toDataURL("image/"+e,i):n.toDataURL("image/"+e)},toDataURLWithMultiplier:function(t,e,i){return this.toDataURL({format:t,multiplier:e,quality:i})}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{loadFromDatalessJSON:function(t,e,i){return this.loadFromJSON(t,e,i)},loadFromJSON:function(t,e,i){if(t){var n="string"==typeof t?JSON.parse(t):fabric.util.object.clone(t);this.clear();var o=this;return this._enlivenObjects(n.objects,function(){o._setBgOverlay(n,function(){delete n.objects,delete n.backgroundImage,delete n.overlayImage,delete n.background,delete n.overlay,o._setOptions(n),e&&e()})},i),this}},_setBgOverlay:function(t,e){var i=this,n={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!(t.backgroundImage||t.overlayImage||t.background||t.overlay))return void(e&&e());var o=function(){n.backgroundImage&&n.overlayImage&&n.backgroundColor&&n.overlayColor&&(i.renderAll(),e&&e())};this.__setBgOverlay("backgroundImage",t.backgroundImage,n,o),this.__setBgOverlay("overlayImage",t.overlayImage,n,o),this.__setBgOverlay("backgroundColor",t.background,n,o),this.__setBgOverlay("overlayColor",t.overlay,n,o)},__setBgOverlay:function(t,e,i,n){var o=this;return e?void("backgroundImage"===t||"overlayImage"===t?fabric.util.enlivenObjects([e],function(e){o[t]=e[0],i[t]=!0,n&&n()}):this["set"+fabric.util.string.capitalize(t,!0)](e,function(){i[t]=!0,n&&n()})):(i[t]=!0,void(n&&n()))},_enlivenObjects:function(t,e,i){var n=this;if(!t||0===t.length)return void(e&&e());var o=this.renderOnAddRemove;this.renderOnAddRemove=!1,fabric.util.enlivenObjects(t,function(t){t.forEach(function(t,e){n.insertAt(t,e)}),n.renderOnAddRemove=o,e&&e()},null,i)},_toDataURL:function(t,e){this.clone(function(i){e(i.toDataURL(t))})},_toDataURLWithMultiplier:function(t,e,i){this.clone(function(n){i(n.toDataURLWithMultiplier(t,e))})},clone:function(t,e){var i=JSON.stringify(this.toJSON(e));this.cloneWithoutData(function(e){e.loadFromJSON(i,function(){t&&t(e)})})},cloneWithoutData:function(t){var e=fabric.document.createElement("canvas");e.width=this.getWidth(),e.height=this.getHeight();var i=new fabric.Canvas(e);i.clipTo=this.clipTo,this.backgroundImage?(i.setBackgroundImage(this.backgroundImage.src,function(){i.renderAll(),t&&t(i)}),i.backgroundImageOpacity=this.backgroundImageOpacity,i.backgroundImageStretch=this.backgroundImageStretch):t&&t(i)}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.object.clone,o=e.util.toFixed,s=e.util.string.capitalize,r=e.util.degreesToRadians,a=e.StaticCanvas.supports("setLineDash"),l=!e.isLikelyNode;e.Object||(e.Object=e.util.createClass(e.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgba(102,153,255,0.75)",borderDashArray:null,cornerColor:"rgba(102,153,255,0.5)",cornerStrokeColor:null,
cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:10,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,transformMatrix:null,minScaleLimit:.01,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,hasRotatingPoint:!0,rotatingPointOffset:40,perPixelTargetFind:!1,includeDefaultValues:!0,clipTo:null,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockUniScaling:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:l,statefullCache:!1,noScaleCache:!0,dirty:!1,needsItsOwnCache:!1,stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeLineJoin strokeMiterLimit angle opacity fill fillRule globalCompositeOperation shadow clipTo visible backgroundColor skewX skewY".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height stroke strokeWidth strokeDashArray strokeLineCap strokeLineJoin strokeMiterLimit fillRule backgroundColor".split(" "),initialize:function(t){t=t||{},t&&this.setOptions(t),this.objectCaching&&(this._createCacheCanvas(),this.setupState({propertySet:"cacheProperties"}))},_createCacheCanvas:function(){this._cacheCanvas=e.document.createElement("canvas"),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas()},_getCacheCanvasDimensions:function(){var t=this.canvas&&this.canvas.getZoom()||1,i=this.getObjectScaling(),n=this._getNonTransformedDimensions(),o=this.canvas&&this.canvas._isRetinaScaling()?e.devicePixelRatio:1,s=i.scaleX*t*o,r=i.scaleY*t*o;return{width:n.x*s+2,height:n.y*r+2,zoomX:s,zoomY:r}},_updateCacheCanvas:function(){if(this.noScaleCache&&this.canvas&&this.canvas._currentTransform){if("scale"===this.canvas._currentTransform.action.slice(0,5))return!1}var t=this._getCacheCanvasDimensions(),e=t.width,i=t.height,n=t.zoomX,o=t.zoomY;return(e!==this.cacheWidth||i!==this.cacheHeight)&&(this._cacheCanvas.width=Math.ceil(e),this._cacheCanvas.height=Math.ceil(i),this._cacheContext.translate(e/2,i/2),this._cacheContext.scale(n,o),this.cacheWidth=e,this.cacheHeight=i,this.zoomX=n,this.zoomY=o,!0)},setOptions:function(t){this._setOptions(t),this._initGradient(t.fill,"fill"),this._initGradient(t.stroke,"stroke"),this._initClipping(t),this._initPattern(t.fill,"fill"),this._initPattern(t.stroke,"stroke")},transform:function(t,e){this.group&&!this.group._transformDone&&this.group===this.canvas._activeGroup&&this.group.transform(t);var i=e?this._getLeftTopCoords():this.getCenterPoint();t.translate(i.x,i.y),this.angle&&t.rotate(r(this.angle)),t.scale(this.scaleX*(this.flipX?-1:1),this.scaleY*(this.flipY?-1:1)),this.skewX&&t.transform(1,0,Math.tan(r(this.skewX)),1,0,0),this.skewY&&t.transform(1,Math.tan(r(this.skewY)),0,1,0,0)},toObject:function(t){var i=e.Object.NUM_FRACTION_DIGITS,n={type:this.type,originX:this.originX,originY:this.originY,left:o(this.left,i),top:o(this.top,i),width:o(this.width,i),height:o(this.height,i),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:o(this.strokeWidth,i),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:o(this.strokeMiterLimit,i),scaleX:o(this.scaleX,i),scaleY:o(this.scaleY,i),angle:o(this.getAngle(),i),flipX:this.flipX,flipY:this.flipY,opacity:o(this.opacity,i),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,clipTo:this.clipTo&&String(this.clipTo),backgroundColor:this.backgroundColor,fillRule:this.fillRule,globalCompositeOperation:this.globalCompositeOperation,transformMatrix:this.transformMatrix?this.transformMatrix.concat():null,skewX:o(this.skewX,i),skewY:o(this.skewY,i)};return e.util.populateWithProperties(this,n,t),this.includeDefaultValues||(n=this._removeDefaultValues(n)),n},toDatalessObject:function(t){return this.toObject(t)},_removeDefaultValues:function(t){var i=e.util.getKlass(t.type).prototype;return i.stateProperties.forEach(function(e){t[e]===i[e]&&delete t[e],"[object Array]"===Object.prototype.toString.call(t[e])&&"[object Array]"===Object.prototype.toString.call(i[e])&&0===t[e].length&&0===i[e].length&&delete t[e]}),t},toString:function(){return"#<fabric."+s(this.type)+">"},getObjectScaling:function(){var t=this.scaleX,e=this.scaleY;if(this.group){var i=this.group.getObjectScaling();t*=i.scaleX,e*=i.scaleY}return{scaleX:t,scaleY:e}},_set:function(t,i){return("scaleX"===t||"scaleY"===t)&&(i=this._constrainScale(i)),"scaleX"===t&&i<0?(this.flipX=!this.flipX,i*=-1):"scaleY"===t&&i<0?(this.flipY=!this.flipY,i*=-1):"shadow"!==t||!i||i instanceof e.Shadow?"dirty"===t&&this.group&&this.group.set("dirty",i):i=new e.Shadow(i),this[t]=i,this.cacheProperties.indexOf(t)>-1&&(this.group&&this.group.set("dirty",!0),this.dirty=!0),this.group&&this.stateProperties.indexOf(t)>-1&&this.group.set("dirty",!0),"width"!==t&&"height"!==t||(this.minScaleLimit=Math.min(.1,1/Math.max(this.width,this.height))),this},setOnGroup:function(){},setSourcePath:function(t){return this.sourcePath=t,this},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:e.iMatrix.concat()},render:function(t,i){0===this.width&&0===this.height||!this.visible||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),i||this.transform(t),this._setOpacity(t),this._setShadow(t),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this.clipTo&&e.util.clipContext(this,t),!this.objectCaching||this.group&&!this.needsItsOwnCache?(this.drawObject(t,i),i&&this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})):(this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty(i)&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,i),this.dirty=!1),this.drawCacheOnCanvas(t)),this.clipTo&&t.restore(),t.restore())},drawObject:function(t,e){this._renderBackground(t),this._setStrokeStyles(t),this._setFillStyles(t),this._render(t,e)},drawCacheOnCanvas:function(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheWidth/2,-this.cacheHeight/2)},isCacheDirty:function(t){if(!t&&this._updateCacheCanvas())return!0;if(this.dirty||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(!t){var e=this.cacheWidth/this.zoomX,i=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-e/2,-i/2,e,i)}return!0}return!1},_renderBackground:function(t){if(this.backgroundColor){var e=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t)}},_setOpacity:function(t){t.globalAlpha*=this.opacity},_setStrokeStyles:function(t){this.stroke&&(t.lineWidth=this.strokeWidth,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,t.strokeStyle=this.stroke.toLive?this.stroke.toLive(t,this):this.stroke)},_setFillStyles:function(t){this.fill&&(t.fillStyle=this.fill.toLive?this.fill.toLive(t,this):this.fill)},_setLineDash:function(t,e,i){e&&(1&e.length&&e.push.apply(e,e),a?t.setLineDash(e):i&&i(t))},_renderControls:function(t,i){if(!(!this.active||i||this.group&&this.group!==this.canvas.getActiveGroup())){var n,o=this.getViewportTransform(),s=this.calcTransformMatrix();s=e.util.multiplyTransformMatrices(o,s),n=e.util.qrDecompose(s),t.save(),t.translate(n.translateX,n.translateY),t.lineWidth=1*this.borderScaleFactor,this.group||(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.group&&this.group===this.canvas.getActiveGroup()?(t.rotate(r(n.angle)),this.drawBordersInGroup(t,n)):(t.rotate(r(this.angle)),this.drawBorders(t)),this.drawControls(t),t.restore()}},_setShadow:function(t){if(this.shadow){var i=this.canvas&&this.canvas.viewportTransform[0]||1,n=this.canvas&&this.canvas.viewportTransform[3]||1,o=this.getObjectScaling();this.canvas&&this.canvas._isRetinaScaling()&&(i*=e.devicePixelRatio,n*=e.devicePixelRatio),t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur*(i+n)*(o.scaleX+o.scaleY)/4,t.shadowOffsetX=this.shadow.offsetX*i*o.scaleX,t.shadowOffsetY=this.shadow.offsetY*n*o.scaleY}},_removeShadow:function(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)},_applyPatternGradientTransform:function(t,e){if(e.toLive){var i=e.gradientTransform||e.patternTransform;i&&t.transform.apply(t,i);var n=-this.width/2+e.offsetX||0,o=-this.height/2+e.offsetY||0;t.translate(n,o)}},_renderFill:function(t){this.fill&&(t.save(),this._applyPatternGradientTransform(t,this.fill),"evenodd"===this.fillRule?t.fill("evenodd"):t.fill(),t.restore())},_renderStroke:function(t){this.stroke&&0!==this.strokeWidth&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray,this._renderDashedStroke),this._applyPatternGradientTransform(t,this.stroke),t.stroke(),t.restore())},clone:function(t,i){return this.constructor.fromObject?this.constructor.fromObject(this.toObject(i),t):new e.Object(this.toObject(i))},cloneAsImage:function(t,i){var n=this.toDataURL(i);return e.util.loadImage(n,function(i){t&&t(new e.Image(i))}),this},toDataURL:function(t){t||(t={});var i=e.util.createCanvasElement(),n=this.getBoundingRect();i.width=n.width,i.height=n.height,e.util.wrapElement(i,"div");var o=new e.StaticCanvas(i,{enableRetinaScaling:t.enableRetinaScaling});"jpg"===t.format&&(t.format="jpeg"),"jpeg"===t.format&&(o.backgroundColor="#fff");var s={active:this.get("active"),left:this.getLeft(),top:this.getTop()};this.set("active",!1),this.setPositionByOrigin(new e.Point(o.getWidth()/2,o.getHeight()/2),"center","center");var r=this.canvas;o.add(this);var a=o.toDataURL(t);return this.set(s).setCoords(),this.canvas=r,o.dispose(),o=null,a},isType:function(t){return this.type===t},complexity:function(){return 1},toJSON:function(t){return this.toObject(t)},setGradient:function(t,i){i||(i={});var n={colorStops:[]};return n.type=i.type||(i.r1||i.r2?"radial":"linear"),n.coords={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},(i.r1||i.r2)&&(n.coords.r1=i.r1,n.coords.r2=i.r2),n.gradientTransform=i.gradientTransform,e.Gradient.prototype.addColorStop.call(n,i.colorStops),this.set(t,e.Gradient.forObject(this,n))},setPatternFill:function(t){return this.set("fill",new e.Pattern(t))},setShadow:function(t){return this.set("shadow",t?new e.Shadow(t):null)},setColor:function(t){return this.set("fill",t),this},setAngle:function(t){var e=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return e&&this._setOriginToCenter(),this.set("angle",t),e&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},remove:function(){return this.canvas&&this.canvas.remove(this),this},getLocalPointer:function(t,i){i=i||this.canvas.getPointer(t);var n=new e.Point(i.x,i.y),o=this._getLeftTopCoords();return this.angle&&(n=e.util.rotatePoint(n,o,r(-this.angle))),{x:n.x-o.x,y:n.y-o.y}},_setupCompositeOperation:function(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}}),e.util.createAccessors(e.Object),e.Object.prototype.rotate=e.Object.prototype.setAngle,i(e.Object.prototype,e.Observable),e.Object.NUM_FRACTION_DIGITS=2,e.Object._fromObject=function(t,i,o,s,r){var a=e[t];if(i=n(i,!0),!s){var l=r?new a(i[r],i):new a(i);return o&&o(l),l}e.util.enlivenPatterns([i.fill,i.stroke],function(t){void 0!==t[0]&&(i.fill=t[0]),void 0!==t[1]&&(i.stroke=t[1]);var e=r?new a(i[r],i):new a(i);o&&o(e)})},e.Object.__uid=0)}("undefined"!=typeof exports?exports:this),function(){var t=fabric.util.degreesToRadians,e={left:-.5,center:0,right:.5},i={top:-.5,center:0,bottom:.5};fabric.util.object.extend(fabric.Object.prototype,{translateToGivenOrigin:function(t,n,o,s,r){var a,l,c,h=t.x,d=t.y;return"string"==typeof n?n=e[n]:n-=.5,"string"==typeof s?s=e[s]:s-=.5,a=s-n,"string"==typeof o?o=i[o]:o-=.5,"string"==typeof r?r=i[r]:r-=.5,l=r-o,(a||l)&&(c=this._getTransformedDimensions(),h=t.x+a*c.x,d=t.y+l*c.y),new fabric.Point(h,d)},translateToCenterPoint:function(e,i,n){var o=this.translateToGivenOrigin(e,i,n,"center","center");return this.angle?fabric.util.rotatePoint(o,e,t(this.angle)):o},translateToOriginPoint:function(e,i,n){var o=this.translateToGivenOrigin(e,"center","center",i,n);return this.angle?fabric.util.rotatePoint(o,e,t(this.angle)):o},getCenterPoint:function(){var t=new fabric.Point(this.left,this.top);return this.translateToCenterPoint(t,this.originX,this.originY)},getPointByOrigin:function(t,e){var i=this.getCenterPoint();return this.translateToOriginPoint(i,t,e)},toLocalPoint:function(e,i,n){var o,s,r=this.getCenterPoint();return o=void 0!==i&&void 0!==n?this.translateToGivenOrigin(r,"center","center",i,n):new fabric.Point(this.left,this.top),s=new fabric.Point(e.x,e.y),this.angle&&(s=fabric.util.rotatePoint(s,r,-t(this.angle))),s.subtractEquals(o)},setPositionByOrigin:function(t,e,i){var n=this.translateToCenterPoint(t,e,i),o=this.translateToOriginPoint(n,this.originX,this.originY);this.set("left",o.x),this.set("top",o.y)},adjustPosition:function(i){var n,o,s=t(this.angle),r=this.getWidth(),a=Math.cos(s)*r,l=Math.sin(s)*r;n="string"==typeof this.originX?e[this.originX]:this.originX-.5,o="string"==typeof i?e[i]:i-.5,this.left+=a*(o-n),this.top+=l*(o-n),this.setCoords(),this.originX=i},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var t=this.getCenterPoint();this.originX="center",this.originY="center",this.left=t.x,this.top=t.y},_resetOrigin:function(){var t=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=t.x,this.top=t.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function t(t){return[new fabric.Point(t.tl.x,t.tl.y),new fabric.Point(t.tr.x,t.tr.y),new fabric.Point(t.br.x,t.br.y),new fabric.Point(t.bl.x,t.bl.y)]}var e=fabric.util.degreesToRadians,i=fabric.util.multiplyTransformMatrices;fabric.util.object.extend(fabric.Object.prototype,{oCoords:null,aCoords:null,getCoords:function(e,i){this.oCoords||this.setCoords();var n=e?this.aCoords:this.oCoords;return t(i?this.calcCoords(e):n)},intersectsWithRect:function(t,e,i,n){var o=this.getCoords(i,n);return"Intersection"===fabric.Intersection.intersectPolygonRectangle(o,t,e).status},intersectsWithObject:function(t,e,i){return"Intersection"===fabric.Intersection.intersectPolygonPolygon(this.getCoords(e,i),t.getCoords(e,i)).status||t.isContainedWithinObject(this,e,i)||this.isContainedWithinObject(t,e,i)},isContainedWithinObject:function(t,e,i){for(var n=this.getCoords(e,i),o=0,s=t._getImageLines(i?t.calcCoords(e):e?t.aCoords:t.oCoords);o<4;o++)if(!t.containsPoint(n[o],s))return!1;return!0},isContainedWithinRect:function(t,e,i,n){var o=this.getBoundingRect(i,n);return o.left>=t.x&&o.left+o.width<=e.x&&o.top>=t.y&&o.top+o.height<=e.y},containsPoint:function(t,e,i,n){var e=e||this._getImageLines(n?this.calcCoords(i):i?this.aCoords:this.oCoords),o=this._findCrossPoints(t,e);return 0!==o&&o%2==1},isOnScreen:function(t){if(!this.canvas)return!1;for(var e,i=this.canvas.vptCoords.tl,n=this.canvas.vptCoords.br,o=this.getCoords(!0,t),s=0;s<4;s++)if(e=o[s],e.x<=n.x&&e.x>=i.x&&e.y<=n.y&&e.y>=i.y)return!0;if(this.intersectsWithRect(i,n,!0))return!0;var r={x:(i.x+n.x)/2,y:(i.y+n.y)/2};return!!this.containsPoint(r,null,!0)},_getImageLines:function(t){return{topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}}},_findCrossPoints:function(t,e){var i,n,o,s,r,a,l=0;for(var c in e)if(a=e[c],!(a.o.y<t.y&&a.d.y<t.y||a.o.y>=t.y&&a.d.y>=t.y||(a.o.x===a.d.x&&a.o.x>=t.x?r=a.o.x:(i=0,n=(a.d.y-a.o.y)/(a.d.x-a.o.x),o=t.y-i*t.x,s=a.o.y-n*a.o.x,r=-(o-s)/(i-n)),r>=t.x&&(l+=1),2!==l)))break;return l},getBoundingRectWidth:function(){return this.getBoundingRect().width},getBoundingRectHeight:function(){return this.getBoundingRect().height},getBoundingRect:function(t,e){var i=this.getCoords(t,e);return fabric.util.makeBoundingBoxFromPoints(i)},getWidth:function(){return this._getTransformedDimensions().x},getHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:t},scale:function(t){return t=this._constrainScale(t),t<0&&(this.flipX=!this.flipX,this.flipY=!this.flipY,t*=-1),this.scaleX=t,this.scaleY=t,this.setCoords()},scaleToWidth:function(t){var e=this.getBoundingRect().width/this.getWidth();return this.scale(t/this.width/e)},scaleToHeight:function(t){var e=this.getBoundingRect().height/this.getHeight();return this.scale(t/this.height/e)},calcCoords:function(t){var i=e(this.angle),n=this.getViewportTransform(),o=t?this._getTransformedDimensions():this._calculateCurrentDimensions(),s=o.x,r=o.y,a=Math.sin(i),l=Math.cos(i),c=s>0?Math.atan(r/s):0,h=s/Math.cos(c)/2,d=Math.cos(c+i)*h,u=Math.sin(c+i)*h,p=this.getCenterPoint(),f=t?p:fabric.util.transformPoint(p,n),g=new fabric.Point(f.x-d,f.y-u),v=new fabric.Point(g.x+s*l,g.y+s*a),m=new fabric.Point(g.x-r*a,g.y+r*l),b=new fabric.Point(f.x+d,f.y+u);if(!t)var y=new fabric.Point((g.x+m.x)/2,(g.y+m.y)/2),w=new fabric.Point((v.x+g.x)/2,(v.y+g.y)/2),x=new fabric.Point((b.x+v.x)/2,(b.y+v.y)/2),C=new fabric.Point((b.x+m.x)/2,(b.y+m.y)/2),_=new fabric.Point(w.x+a*this.rotatingPointOffset,w.y-l*this.rotatingPointOffset);var f={tl:g,tr:v,br:b,bl:m};return t||(f.ml=y,f.mt=w,f.mr=x,f.mb=C,f.mtr=_),f},setCoords:function(t,e){return this.oCoords=this.calcCoords(t),e||(this.aCoords=this.calcCoords(!0)),t||this._setCornerCoords&&this._setCornerCoords(),this},_calcRotateMatrix:function(){if(this.angle){var t=e(this.angle),i=Math.cos(t),n=Math.sin(t);return[i,n,-n,i,0,0]}return fabric.iMatrix.concat()},calcTransformMatrix:function(t){var e=this.getCenterPoint(),n=[1,0,0,1,e.x,e.y],o=this._calcRotateMatrix(),s=this._calcDimensionsTransformMatrix(this.skewX,this.skewY,!0),r=this.group&&!t?this.group.calcTransformMatrix():fabric.iMatrix.concat();return r=i(r,n),r=i(r,o),r=i(r,s)},_calcDimensionsTransformMatrix:function(t,n,o){var s=[1,0,Math.tan(e(t)),1],r=[1,Math.tan(e(n)),0,1],a=this.scaleX*(o&&this.flipX?-1:1),l=this.scaleY*(o&&this.flipY?-1:1),c=[a,0,0,l],h=i(c,s,!0);return i(h,r,!0)},_getNonTransformedDimensions:function(){var t=this.strokeWidth;return{x:this.width+t,y:this.height+t}},_getTransformedDimensions:function(t,e){void 0===t&&(t=this.skewX),void 0===e&&(e=this.skewY);var i,n,o=this._getNonTransformedDimensions(),s=o.x/2,r=o.y/2,a=[{x:-s,y:-r},{x:s,y:-r},{x:-s,y:r},{x:s,y:r}],l=this._calcDimensionsTransformMatrix(t,e,!1);for(i=0;i<a.length;i++)a[i]=fabric.util.transformPoint(a[i],l);return n=fabric.util.makeBoundingBoxFromPoints(a),{x:n.width,y:n.height}},_calculateCurrentDimensions:function(){var t=this.getViewportTransform(),e=this._getTransformedDimensions();return fabric.util.transformPoint(e,t,!0).scalarAdd(2*this.padding)}})}(),fabric.util.object.extend(fabric.Object.prototype,{sendToBack:function(){return this.group?fabric.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?fabric.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas.bringToFront(this),this},sendBackwards:function(t){return this.group?fabric.StaticCanvas.prototype.sendBackwards.call(this.group,this,t):this.canvas.sendBackwards(this,t),this},bringForward:function(t){return this.group?fabric.StaticCanvas.prototype.bringForward.call(this.group,this,t):this.canvas.bringForward(this,t),this},moveTo:function(t){return this.group?fabric.StaticCanvas.prototype.moveTo.call(this.group,this,t):this.canvas.moveTo(this,t),this}}),function(){function t(t,e){if(e){if(e.toLive)return t+": url(#SVGID_"+e.id+"); ";var i=new fabric.Color(e),n=t+": "+i.toRgb()+"; ",o=i.getAlpha();return 1!==o&&(n+=t+"-opacity: "+o.toString()+"; "),n}return t+": none; "}fabric.util.object.extend(fabric.Object.prototype,{getSvgStyles:function(e){var i=this.fillRule,n=this.strokeWidth?this.strokeWidth:"0",o=this.strokeDashArray?this.strokeDashArray.join(" "):"none",s=this.strokeLineCap?this.strokeLineCap:"butt",r=this.strokeLineJoin?this.strokeLineJoin:"miter",a=this.strokeMiterLimit?this.strokeMiterLimit:"4",l=void 0!==this.opacity?this.opacity:"1",c=this.visible?"":" visibility: hidden;",h=e?"":this.getSvgFilter(),d=t("fill",this.fill);return[t("stroke",this.stroke),"stroke-width: ",n,"; ","stroke-dasharray: ",o,"; ","stroke-linecap: ",s,"; ","stroke-linejoin: ",r,"; ","stroke-miterlimit: ",a,"; ",d,"fill-rule: ",i,"; ","opacity: ",l,";",h,c].join("")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgId:function(){return this.id?'id="'+this.id+'" ':""},getSvgTransform:function(){if(this.group&&"path-group"===this.group.type)return"";var t=fabric.util.toFixed,e=this.getAngle(),i=this.getSkewX()%360,n=this.getSkewY()%360,o=this.getCenterPoint(),s=fabric.Object.NUM_FRACTION_DIGITS,r="path-group"===this.type?"":"translate("+t(o.x,s)+" "+t(o.y,s)+")",a=0!==e?" rotate("+t(e,s)+")":"",l=1===this.scaleX&&1===this.scaleY?"":" scale("+t(this.scaleX,s)+" "+t(this.scaleY,s)+")",c=0!==i?" skewX("+t(i,s)+")":"",h=0!==n?" skewY("+t(n,s)+")":"",d="path-group"===this.type?this.width:0,u=this.flipX?" matrix(-1 0 0 1 "+d+" 0) ":"",p="path-group"===this.type?this.height:0;return[r,a,l,u,this.flipY?" matrix(1 0 0 -1 0 "+p+")":"",c,h].join("")},getSvgTransformMatrix:function(){return this.transformMatrix?" matrix("+this.transformMatrix.join(" ")+") ":""},_createBaseSVGMarkup:function(){var t=[];return this.fill&&this.fill.toLive&&t.push(this.fill.toSVG(this,!1)),this.stroke&&this.stroke.toLive&&t.push(this.stroke.toSVG(this,!1)),this.shadow&&t.push(this.shadow.toSVG(this)),t}})}(),function(){function t(t,e,n){var o={};n.forEach(function(e){o[e]=t[e]}),i(t[e],o,!0)}function e(t,i,n){if(!fabric.isLikelyNode&&t instanceof Element)return t===i;if(t instanceof Array){if(t.length!==i.length)return!1;for(var o=0,s=t.length;o<s;o++)if(t[o]!==i[o])return!1;return!0}if(t&&"object"==typeof t){if(!n&&Object.keys(t).length!==Object.keys(i).length)return!1;for(var r in t)if(!e(t[r],i[r]))return!1;return!0}return t===i}var i=fabric.util.object.extend,n="stateProperties";fabric.util.object.extend(fabric.Object.prototype,{hasStateChanged:function(t){return t=t||n,t="_"+t,!e(this[t],this,!0)},saveState:function(e){var i=e&&e.propertySet||n,o="_"+i;return this[o]?(t(this,o,this[i]),e&&e.stateProperties&&t(this,o,e.stateProperties),this):this.setupState(e)},setupState:function(t){t=t||{};var e=t.propertySet||n;return t.propertySet=e,this["_"+e]={},this.saveState(t),this}})}(),function(){var t=fabric.util.degreesToRadians,e=function(){return"undefined"!=typeof G_vmlCanvasManager};fabric.util.object.extend(fabric.Object.prototype,{_controlsVisibility:null,_findTargetCorner:function(t){if(!this.hasControls||!this.active)return!1;var e,i,n=t.x,o=t.y;this.__corner=0;for(var s in this.oCoords)if(this.isControlVisible(s)&&("mtr"!==s||this.hasRotatingPoint)&&(!this.get("lockUniScaling")||"mt"!==s&&"mr"!==s&&"mb"!==s&&"ml"!==s)&&(i=this._getImageLines(this.oCoords[s].corner),0!==(e=this._findCrossPoints({x:n,y:o},i))&&e%2==1))return this.__corner=s,s;return!1},_setCornerCoords:function(){var e,i,n=this.oCoords,o=t(45-this.angle),s=.707106*this.cornerSize,r=s*Math.cos(o),a=s*Math.sin(o);for(var l in n)e=n[l].x,i=n[l].y,n[l].corner={tl:{x:e-a,y:i-r},tr:{x:e+r,y:i-a},bl:{x:e-r,y:i+a},br:{x:e+a,y:i+r}}},drawSelectionBackground:function(e){if(!this.selectionBackgroundColor||this.group||!this.active)return this;e.save();var i=this.getCenterPoint(),n=this._calculateCurrentDimensions(),o=this.canvas.viewportTransform;return e.translate(i.x,i.y),e.scale(1/o[0],1/o[3]),e.rotate(t(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-n.x/2,-n.y/2,n.x,n.y),e.restore(),this},drawBorders:function(t){if(!this.hasBorders)return this;var e=this._calculateCurrentDimensions(),i=1/this.borderScaleFactor,n=e.x+i,o=e.y+i;if(t.save(),t.strokeStyle=this.borderColor,this._setLineDash(t,this.borderDashArray,null),t.strokeRect(-n/2,-o/2,n,o),this.hasRotatingPoint&&this.isControlVisible("mtr")&&!this.get("lockRotation")&&this.hasControls){var s=-o/2;t.beginPath(),t.moveTo(0,s),t.lineTo(0,s-this.rotatingPointOffset),t.closePath(),t.stroke()}return t.restore(),this},drawBordersInGroup:function(t,e){if(!this.hasBorders)return this;var i=this._getNonTransformedDimensions(),n=fabric.util.customTransformMatrix(e.scaleX,e.scaleY,e.skewX),o=fabric.util.transformPoint(i,n),s=1/this.borderScaleFactor,r=o.x+s,a=o.y+s;return t.save(),this._setLineDash(t,this.borderDashArray,null),t.strokeStyle=this.borderColor,t.strokeRect(-r/2,-a/2,r,a),t.restore(),this},drawControls:function(t){if(!this.hasControls)return this;var e=this._calculateCurrentDimensions(),i=e.x,n=e.y,o=this.cornerSize,s=-(i+o)/2,r=-(n+o)/2,a=this.transparentCorners?"stroke":"fill";return t.save(),t.strokeStyle=t.fillStyle=this.cornerColor,this.transparentCorners||(t.strokeStyle=this.cornerStrokeColor),this._setLineDash(t,this.cornerDashArray,null),this._drawControl("tl",t,a,s,r),this._drawControl("tr",t,a,s+i,r),this._drawControl("bl",t,a,s,r+n),this._drawControl("br",t,a,s+i,r+n),this.get("lockUniScaling")||(this._drawControl("mt",t,a,s+i/2,r),this._drawControl("mb",t,a,s+i/2,r+n),this._drawControl("mr",t,a,s+i,r+n/2),this._drawControl("ml",t,a,s,r+n/2)),this.hasRotatingPoint&&this._drawControl("mtr",t,a,s+i/2,r-this.rotatingPointOffset),t.restore(),this},_drawControl:function(t,i,n,o,s){if(this.isControlVisible(t)){var r=this.cornerSize,a=!this.transparentCorners&&this.cornerStrokeColor;switch(this.cornerStyle){case"circle":i.beginPath(),i.arc(o+r/2,s+r/2,r/2,0,2*Math.PI,!1),i[n](),a&&i.stroke();break;default:e()||this.transparentCorners||i.clearRect(o,s,r,r),i[n+"Rect"](o,s,r,r),a&&i.strokeRect(o,s,r,r)}}},isControlVisible:function(t){return this._getControlsVisibility()[t]},setControlVisible:function(t,e){return this._getControlsVisibility()[t]=e,this},setControlsVisibility:function(t){t||(t={});for(var e in t)this.setControlVisible(e,t[e]);return this},_getControlsVisibility:function(){return this._controlsVisibility||(this._controlsVisibility={tl:!0,tr:!0,br:!0,bl:!0,ml:!0,mt:!0,mr:!0,mb:!0,mtr:!0}),this._controlsVisibility}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(t,e){e=e||{};var i=function(){},n=e.onComplete||i,o=e.onChange||i,s=this;return fabric.util.animate({startValue:t.get("left"),endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(e){t.set("left",e),s.renderAll(),o()},onComplete:function(){t.setCoords(),n()}}),this},fxCenterObjectV:function(t,e){e=e||{};var i=function(){},n=e.onComplete||i,o=e.onChange||i,s=this;return fabric.util.animate({startValue:t.get("top"),endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(e){t.set("top",e),s.renderAll(),o()},onComplete:function(){t.setCoords(),n()}}),this},fxRemove:function(t,e){e=e||{};var i=function(){},n=e.onComplete||i,o=e.onChange||i,s=this;return fabric.util.animate({startValue:t.get("opacity"),endValue:0,duration:this.FX_DURATION,onStart:function(){t.set("active",!1)},onChange:function(e){t.set("opacity",e),s.renderAll(),o()},onComplete:function(){s.remove(t),n()}}),this}}),fabric.util.object.extend(fabric.Object.prototype,{animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var t,e,i=[];for(t in arguments[0])i.push(t);for(var n=0,o=i.length;n<o;n++)t=i[n],e=n!==o-1,this._animate(t,arguments[0][t],arguments[1],e)}else this._animate.apply(this,arguments);return this},_animate:function(t,e,i,n){var o,s=this;e=e.toString(),i=i?fabric.util.object.clone(i):{},~t.indexOf(".")&&(o=t.split("."));var r=o?this.get(o[0])[o[1]]:this.get(t);"from"in i||(i.from=r),e=~e.indexOf("=")?r+parseFloat(e.replace("=","")):parseFloat(e),fabric.util.animate({startValue:i.from,endValue:e,byValue:i.by,easing:i.easing,duration:i.duration,abort:i.abort&&function(){return i.abort.call(s)},onChange:function(e){o?s[o[0]][o[1]]=e:s.set(t,e),n||i.onChange&&i.onChange()},onComplete:function(){n||(s.setCoords(),i.onComplete&&i.onComplete())}})}}),function(t){"use strict";function e(t,e){var i=t.origin,n=t.axis1,o=t.axis2,s=t.dimension,r=e.nearest,a=e.center,l=e.farthest;return function(){switch(this.get(i)){case r:return Math.min(this.get(n),this.get(o));case a:return Math.min(this.get(n),this.get(o))+.5*this.get(s);case l:return Math.max(this.get(n),this.get(o))}}}var i=t.fabric||(t.fabric={}),n=i.util.object.extend,o=i.util.object.clone,s={x1:1,x2:1,y1:1,y2:1},r=i.StaticCanvas.supports("setLineDash");if(i.Line)return void i.warn("fabric.Line is already defined");var a=i.Object.prototype.cacheProperties.concat();a.push("x1","x2","y1","y2"),i.Line=i.util.createClass(i.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:a,initialize:function(t,e){t||(t=[0,0,0,0]),this.callSuper("initialize",e),this.set("x1",t[0]),this.set("y1",t[1]),this.set("x2",t[2]),this.set("y2",t[3]),this._setWidthHeight(e)},_setWidthHeight:function(t){t||(t={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in t?t.left:this._getLeftToOriginX(),this.top="top"in t?t.top:this._getTopToOriginY()},_set:function(t,e){return this.callSuper("_set",t,e),void 0!==s[t]&&this._setWidthHeight(),this},_getLeftToOriginX:e({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:e({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(t,e){if(t.beginPath(),e){var i=this.getCenterPoint(),n=this.strokeWidth/2;t.translate(i.x-("butt"===this.strokeLineCap&&0===this.height?0:n),i.y-("butt"===this.strokeLineCap&&0===this.width?0:n))}if(!this.strokeDashArray||this.strokeDashArray&&r){var o=this.calcLinePoints();t.moveTo(o.x1,o.y1),t.lineTo(o.x2,o.y2)}t.lineWidth=this.strokeWidth;var s=t.strokeStyle;t.strokeStyle=this.stroke||t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=s},_renderDashedStroke:function(t){var e=this.calcLinePoints();t.beginPath(),i.util.drawDashedLine(t,e.x1,e.y1,e.x2,e.y2,this.strokeDashArray),t.closePath()},toObject:function(t){return n(this.callSuper("toObject",t),this.calcLinePoints())},_getNonTransformedDimensions:function(){var t=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(t.y-=this.strokeWidth),0===this.height&&(t.x-=this.strokeWidth)),t},calcLinePoints:function(){var t=this.x1<=this.x2?-1:1,e=this.y1<=this.y2?-1:1,i=t*this.width*.5,n=e*this.height*.5;return{x1:i,x2:t*this.width*-.5,y1:n,y2:e*this.height*-.5}},toSVG:function(t){var e=this._createBaseSVGMarkup(),i={x1:this.x1,x2:this.x2,y1:this.y1,y2:this.y2}
;return this.group&&"path-group"===this.group.type||(i=this.calcLinePoints()),e.push("<line ",this.getSvgId(),'x1="',i.x1,'" y1="',i.y1,'" x2="',i.x2,'" y2="',i.y2,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")}}),i.Line.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),i.Line.fromElement=function(t,e){e=e||{};var o=i.parseAttributes(t,i.Line.ATTRIBUTE_NAMES),s=[o.x1||0,o.y1||0,o.x2||0,o.y2||0];return e.originX="left",e.originY="top",new i.Line(s,n(o,e))},i.Line.fromObject=function(t,e,n){function s(t){delete t.points,e&&e(t)}var r=o(t,!0);r.points=[t.x1,t.y1,t.x2,t.y2];var a=i.Object._fromObject("Line",r,s,n,"points");return a&&delete a.points,a}}("undefined"!=typeof exports?exports:this),function(t){"use strict";function e(t){return"radius"in t&&t.radius>=0}var i=t.fabric||(t.fabric={}),n=Math.PI,o=i.util.object.extend;if(i.Circle)return void i.warn("fabric.Circle is already defined.");var s=i.Object.prototype.cacheProperties.concat();s.push("radius"),i.Circle=i.util.createClass(i.Object,{type:"circle",radius:0,startAngle:0,endAngle:2*n,cacheProperties:s,initialize:function(t){this.callSuper("initialize",t),this.set("radius",t&&t.radius||0)},_set:function(t,e){return this.callSuper("_set",t,e),"radius"===t&&this.setRadius(e),this},toObject:function(t){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(t))},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=0,o=0,s=(this.endAngle-this.startAngle)%(2*n);if(0===s)this.group&&"path-group"===this.group.type&&(i=this.left+this.radius,o=this.top+this.radius),e.push("<circle ",this.getSvgId(),'cx="'+i+'" cy="'+o+'" ','r="',this.radius,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n');else{var r=Math.cos(this.startAngle)*this.radius,a=Math.sin(this.startAngle)*this.radius,l=Math.cos(this.endAngle)*this.radius,c=Math.sin(this.endAngle)*this.radius,h=s>n?"1":"0";e.push('<path d="M '+r+" "+a," A "+this.radius+" "+this.radius," 0 ",+h+" 1"," "+l+" "+c,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n')}return t?t(e.join("")):e.join("")},_render:function(t,e){t.beginPath(),t.arc(e?this.left+this.radius:0,e?this.top+this.radius:0,this.radius,this.startAngle,this.endAngle,!1),this._renderFill(t),this._renderStroke(t)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(t){return this.radius=t,this.set("width",2*t).set("height",2*t)}}),i.Circle.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),i.Circle.fromElement=function(t,n){n||(n={});var s=i.parseAttributes(t,i.Circle.ATTRIBUTE_NAMES);if(!e(s))throw new Error("value of `r` attribute is required and can not be negative");s.left=s.left||0,s.top=s.top||0;var r=new i.Circle(o(s,n));return r.left-=r.radius,r.top-=r.radius,r},i.Circle.fromObject=function(t,e,n){return i.Object._fromObject("Circle",t,e,n)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Triangle?e.warn("fabric.Triangle is already defined"):(e.Triangle=e.util.createClass(e.Object,{type:"triangle",initialize:function(t){this.callSuper("initialize",t),this.set("width",t&&t.width||100).set("height",t&&t.height||100)},_render:function(t){var e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,i),t.lineTo(0,-i),t.lineTo(e,i),t.closePath(),this._renderFill(t),this._renderStroke(t)},_renderDashedStroke:function(t){var i=this.width/2,n=this.height/2;t.beginPath(),e.util.drawDashedLine(t,-i,n,0,-n,this.strokeDashArray),e.util.drawDashedLine(t,0,-n,i,n,this.strokeDashArray),e.util.drawDashedLine(t,i,n,-i,n,this.strokeDashArray),t.closePath()},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=this.width/2,n=this.height/2,o=[-i+" "+n,"0 "+-n,i+" "+n].join(",");return e.push("<polygon ",this.getSvgId(),'points="',o,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),'"/>'),t?t(e.join("")):e.join("")}}),e.Triangle.fromObject=function(t,i,n){return e.Object._fromObject("Triangle",t,i,n)})}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=2*Math.PI,n=e.util.object.extend;if(e.Ellipse)return void e.warn("fabric.Ellipse is already defined.");var o=e.Object.prototype.cacheProperties.concat();o.push("rx","ry"),e.Ellipse=e.util.createClass(e.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:o,initialize:function(t){this.callSuper("initialize",t),this.set("rx",t&&t.rx||0),this.set("ry",t&&t.ry||0)},_set:function(t,e){switch(this.callSuper("_set",t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=0,n=0;return this.group&&"path-group"===this.group.type&&(i=this.left+this.rx,n=this.top+this.ry),e.push("<ellipse ",this.getSvgId(),'cx="',i,'" cy="',n,'" ','rx="',this.rx,'" ry="',this.ry,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")},_render:function(t,e){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(e?this.left+this.rx:0,e?(this.top+this.ry)*this.rx/this.ry:0,this.rx,0,i,!1),t.restore(),this._renderFill(t),this._renderStroke(t)}}),e.Ellipse.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),e.Ellipse.fromElement=function(t,i){i||(i={});var o=e.parseAttributes(t,e.Ellipse.ATTRIBUTE_NAMES);o.left=o.left||0,o.top=o.top||0;var s=new e.Ellipse(n(o,i));return s.top-=s.ry,s.left-=s.rx,s},e.Ellipse.fromObject=function(t,i,n){return e.Object._fromObject("Ellipse",t,i,n)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;if(e.Rect)return void e.warn("fabric.Rect is already defined");var n=e.Object.prototype.stateProperties.concat();n.push("rx","ry");var o=e.Object.prototype.cacheProperties.concat();o.push("rx","ry"),e.Rect=e.util.createClass(e.Object,{stateProperties:n,type:"rect",rx:0,ry:0,cacheProperties:o,initialize:function(t){this.callSuper("initialize",t),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(t,e){if(1===this.width&&1===this.height)return void t.fillRect(-.5,-.5,1,1);var i=this.rx?Math.min(this.rx,this.width/2):0,n=this.ry?Math.min(this.ry,this.height/2):0,o=this.width,s=this.height,r=e?this.left:-this.width/2,a=e?this.top:-this.height/2,l=0!==i||0!==n,c=.4477152502;t.beginPath(),t.moveTo(r+i,a),t.lineTo(r+o-i,a),l&&t.bezierCurveTo(r+o-c*i,a,r+o,a+c*n,r+o,a+n),t.lineTo(r+o,a+s-n),l&&t.bezierCurveTo(r+o,a+s-c*n,r+o-c*i,a+s,r+o-i,a+s),t.lineTo(r+i,a+s),l&&t.bezierCurveTo(r+c*i,a+s,r,a+s-c*n,r,a+s-n),t.lineTo(r,a+n),l&&t.bezierCurveTo(r,a+c*n,r+c*i,a,r+i,a),t.closePath(),this._renderFill(t),this._renderStroke(t)},_renderDashedStroke:function(t){var i=-this.width/2,n=-this.height/2,o=this.width,s=this.height;t.beginPath(),e.util.drawDashedLine(t,i,n,i+o,n,this.strokeDashArray),e.util.drawDashedLine(t,i+o,n,i+o,n+s,this.strokeDashArray),e.util.drawDashedLine(t,i+o,n+s,i,n+s,this.strokeDashArray),e.util.drawDashedLine(t,i,n+s,i,n,this.strokeDashArray),t.closePath()},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=this.left,n=this.top;return this.group&&"path-group"===this.group.type||(i=-this.width/2,n=-this.height/2),e.push("<rect ",this.getSvgId(),'x="',i,'" y="',n,'" rx="',this.get("rx"),'" ry="',this.get("ry"),'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")}}),e.Rect.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),e.Rect.fromElement=function(t,n){if(!t)return null;n=n||{};var o=e.parseAttributes(t,e.Rect.ATTRIBUTE_NAMES);o.left=o.left||0,o.top=o.top||0;var s=new e.Rect(i(n?e.util.object.clone(n):{},o));return s.visible=s.visible&&s.width>0&&s.height>0,s},e.Rect.fromObject=function(t,i,n){return e.Object._fromObject("Rect",t,i,n)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.array.min,o=e.util.array.max,s=e.util.toFixed;if(e.Polyline)return void e.warn("fabric.Polyline is already defined");var r=e.Object.prototype.cacheProperties.concat();r.push("points"),e.Polyline=e.util.createClass(e.Object,{type:"polyline",points:null,minX:0,minY:0,cacheProperties:r,initialize:function(t,e){e=e||{},this.points=t||[],this.callSuper("initialize",e),this._calcDimensions(),"top"in e||(this.top=this.minY),"left"in e||(this.left=this.minX),this.pathOffset={x:this.minX+this.width/2,y:this.minY+this.height/2}},_calcDimensions:function(){var t=this.points,e=n(t,"x"),i=n(t,"y"),s=o(t,"x"),r=o(t,"y");this.width=s-e||0,this.height=r-i||0,this.minX=e||0,this.minY=i||0},toObject:function(t){return i(this.callSuper("toObject",t),{points:this.points.concat()})},toSVG:function(t){for(var e,i=[],n=this._createBaseSVGMarkup(),o=0,r=this.points.length;o<r;o++)i.push(s(this.points[o].x,2),",",s(this.points[o].y,2)," ");return this.group&&"path-group"===this.group.type||(e=" translate("+-this.pathOffset.x+", "+-this.pathOffset.y+") "),n.push("<",this.type," ",this.getSvgId(),'points="',i.join(""),'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),e," ",this.getSvgTransformMatrix(),'"/>\n'),t?t(n.join("")):n.join("")},commonRender:function(t,e){var i,n=this.points.length,o=e?0:this.pathOffset.x,s=e?0:this.pathOffset.y;if(!n||isNaN(this.points[n-1].y))return!1;t.beginPath(),t.moveTo(this.points[0].x-o,this.points[0].y-s);for(var r=0;r<n;r++)i=this.points[r],t.lineTo(i.x-o,i.y-s);return!0},_render:function(t,e){this.commonRender(t,e)&&(this._renderFill(t),this._renderStroke(t))},_renderDashedStroke:function(t){var i,n;t.beginPath();for(var o=0,s=this.points.length;o<s;o++)i=this.points[o],n=this.points[o+1]||i,e.util.drawDashedLine(t,i.x,i.y,n.x,n.y,this.strokeDashArray)},complexity:function(){return this.get("points").length}}),e.Polyline.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polyline.fromElement=function(t,i){if(!t)return null;i||(i={});var n=e.parsePointsAttribute(t.getAttribute("points")),o=e.parseAttributes(t,e.Polyline.ATTRIBUTE_NAMES);return new e.Polyline(n,e.util.object.extend(o,i))},e.Polyline.fromObject=function(t,i,n){return e.Object._fromObject("Polyline",t,i,n,"points")}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Polygon?e.warn("fabric.Polygon is already defined"):(e.Polygon=e.util.createClass(e.Polyline,{type:"polygon",_render:function(t,e){this.commonRender(t,e)&&(t.closePath(),this._renderFill(t),this._renderStroke(t))},_renderDashedStroke:function(t){this.callSuper("_renderDashedStroke",t),t.closePath()}}),e.Polygon.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polygon.fromElement=function(t,n){if(!t)return null;n||(n={});var o=e.parsePointsAttribute(t.getAttribute("points")),s=e.parseAttributes(t,e.Polygon.ATTRIBUTE_NAMES);return new e.Polygon(o,i(s,n))},e.Polygon.fromObject=function(t,i,n){return e.Object._fromObject("Polygon",t,i,n,"points")})}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.array.min,n=e.util.array.max,o=e.util.object.extend,s=Object.prototype.toString,r=e.util.drawArc,a={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},l={m:"l",M:"L"};if(e.Path)return void e.warn("fabric.Path is already defined");var c=e.Object.prototype.cacheProperties.concat();c.push("path"),e.Path=e.util.createClass(e.Object,{type:"path",path:null,minX:0,minY:0,cacheProperties:c,initialize:function(t,e){e=e||{},e&&this.setOptions(e),t||(t=[]);var i="[object Array]"===s.call(t);this.path=i?t:t.match&&t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi),this.path&&(i||(this.path=this._parsePath()),this._setPositionDimensions(e),e.sourcePath&&this.setSourcePath(e.sourcePath),this.objectCaching&&(this._createCacheCanvas(),this.setupState({propertySet:"cacheProperties"})))},_setPositionDimensions:function(t){var e=this._parseDimensions();this.minX=e.left,this.minY=e.top,this.width=e.width,this.height=e.height,void 0===t.left&&(this.left=e.left+("center"===this.originX?this.width/2:"right"===this.originX?this.width:0)),void 0===t.top&&(this.top=e.top+("center"===this.originY?this.height/2:"bottom"===this.originY?this.height:0)),this.pathOffset=this.pathOffset||{x:this.minX+this.width/2,y:this.minY+this.height/2}},_renderPathCommands:function(t){var e,i,n,o=null,s=0,a=0,l=0,c=0,h=0,d=0,u=-this.pathOffset.x,p=-this.pathOffset.y;this.group&&"path-group"===this.group.type&&(u=0,p=0),t.beginPath();for(var f=0,g=this.path.length;f<g;++f){switch(e=this.path[f],e[0]){case"l":l+=e[1],c+=e[2],t.lineTo(l+u,c+p);break;case"L":l=e[1],c=e[2],t.lineTo(l+u,c+p);break;case"h":l+=e[1],t.lineTo(l+u,c+p);break;case"H":l=e[1],t.lineTo(l+u,c+p);break;case"v":c+=e[1],t.lineTo(l+u,c+p);break;case"V":c=e[1],t.lineTo(l+u,c+p);break;case"m":l+=e[1],c+=e[2],s=l,a=c,t.moveTo(l+u,c+p);break;case"M":l=e[1],c=e[2],s=l,a=c,t.moveTo(l+u,c+p);break;case"c":i=l+e[5],n=c+e[6],h=l+e[3],d=c+e[4],t.bezierCurveTo(l+e[1]+u,c+e[2]+p,h+u,d+p,i+u,n+p),l=i,c=n;break;case"C":l=e[5],c=e[6],h=e[3],d=e[4],t.bezierCurveTo(e[1]+u,e[2]+p,h+u,d+p,l+u,c+p);break;case"s":i=l+e[3],n=c+e[4],null===o[0].match(/[CcSs]/)?(h=l,d=c):(h=2*l-h,d=2*c-d),t.bezierCurveTo(h+u,d+p,l+e[1]+u,c+e[2]+p,i+u,n+p),h=l+e[1],d=c+e[2],l=i,c=n;break;case"S":i=e[3],n=e[4],null===o[0].match(/[CcSs]/)?(h=l,d=c):(h=2*l-h,d=2*c-d),t.bezierCurveTo(h+u,d+p,e[1]+u,e[2]+p,i+u,n+p),l=i,c=n,h=e[1],d=e[2];break;case"q":i=l+e[3],n=c+e[4],h=l+e[1],d=c+e[2],t.quadraticCurveTo(h+u,d+p,i+u,n+p),l=i,c=n;break;case"Q":i=e[3],n=e[4],t.quadraticCurveTo(e[1]+u,e[2]+p,i+u,n+p),l=i,c=n,h=e[1],d=e[2];break;case"t":i=l+e[1],n=c+e[2],null===o[0].match(/[QqTt]/)?(h=l,d=c):(h=2*l-h,d=2*c-d),t.quadraticCurveTo(h+u,d+p,i+u,n+p),l=i,c=n;break;case"T":i=e[1],n=e[2],null===o[0].match(/[QqTt]/)?(h=l,d=c):(h=2*l-h,d=2*c-d),t.quadraticCurveTo(h+u,d+p,i+u,n+p),l=i,c=n;break;case"a":r(t,l+u,c+p,[e[1],e[2],e[3],e[4],e[5],e[6]+l+u,e[7]+c+p]),l+=e[6],c+=e[7];break;case"A":r(t,l+u,c+p,[e[1],e[2],e[3],e[4],e[5],e[6]+u,e[7]+p]),l=e[6],c=e[7];break;case"z":case"Z":l=s,c=a,t.closePath()}o=e}},_render:function(t){this._renderPathCommands(t),this._renderFill(t),this._renderStroke(t)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(t){return o(this.callSuper("toObject",["sourcePath","pathOffset"].concat(t)),{path:this.path.map(function(t){return t.slice()}),top:this.top,left:this.left})},toDatalessObject:function(t){var e=this.toObject(t);return this.sourcePath&&(e.path=this.sourcePath),delete e.sourcePath,e},toSVG:function(t){for(var e=[],i=this._createBaseSVGMarkup(),n="",o=0,s=this.path.length;o<s;o++)e.push(this.path[o].join(" "));var r=e.join(" ");return this.group&&"path-group"===this.group.type||(n=" translate("+-this.pathOffset.x+", "+-this.pathOffset.y+") "),i.push("<path ",this.getSvgId(),'d="',r,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),n,this.getSvgTransformMatrix(),'" stroke-linecap="round" ',"/>\n"),t?t(i.join("")):i.join("")},complexity:function(){return this.path.length},_parsePath:function(){for(var t,e,i,n,o,s=[],r=[],c=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,h=0,d=this.path.length;h<d;h++){for(t=this.path[h],n=t.slice(1).trim(),r.length=0;i=c.exec(n);)r.push(i[0]);o=[t.charAt(0)];for(var u=0,p=r.length;u<p;u++)e=parseFloat(r[u]),isNaN(e)||o.push(e);var f=o[0],g=a[f.toLowerCase()],v=l[f]||f;if(o.length-1>g)for(var m=1,b=o.length;m<b;m+=g)s.push([f].concat(o.slice(m,m+g))),f=v;else s.push(o)}return s},_parseDimensions:function(){for(var t,o,s,r,a=[],l=[],c=null,h=0,d=0,u=0,p=0,f=0,g=0,v=0,m=this.path.length;v<m;++v){switch(t=this.path[v],t[0]){case"l":u+=t[1],p+=t[2],r=[];break;case"L":u=t[1],p=t[2],r=[];break;case"h":u+=t[1],r=[];break;case"H":u=t[1],r=[];break;case"v":p+=t[1],r=[];break;case"V":p=t[1],r=[];break;case"m":u+=t[1],p+=t[2],h=u,d=p,r=[];break;case"M":u=t[1],p=t[2],h=u,d=p,r=[];break;case"c":o=u+t[5],s=p+t[6],f=u+t[3],g=p+t[4],r=e.util.getBoundsOfCurve(u,p,u+t[1],p+t[2],f,g,o,s),u=o,p=s;break;case"C":f=t[3],g=t[4],r=e.util.getBoundsOfCurve(u,p,t[1],t[2],f,g,t[5],t[6]),u=t[5],p=t[6];break;case"s":o=u+t[3],s=p+t[4],null===c[0].match(/[CcSs]/)?(f=u,g=p):(f=2*u-f,g=2*p-g),r=e.util.getBoundsOfCurve(u,p,f,g,u+t[1],p+t[2],o,s),f=u+t[1],g=p+t[2],u=o,p=s;break;case"S":o=t[3],s=t[4],null===c[0].match(/[CcSs]/)?(f=u,g=p):(f=2*u-f,g=2*p-g),r=e.util.getBoundsOfCurve(u,p,f,g,t[1],t[2],o,s),u=o,p=s,f=t[1],g=t[2];break;case"q":o=u+t[3],s=p+t[4],f=u+t[1],g=p+t[2],r=e.util.getBoundsOfCurve(u,p,f,g,f,g,o,s),u=o,p=s;break;case"Q":f=t[1],g=t[2],r=e.util.getBoundsOfCurve(u,p,f,g,f,g,t[3],t[4]),u=t[3],p=t[4];break;case"t":o=u+t[1],s=p+t[2],null===c[0].match(/[QqTt]/)?(f=u,g=p):(f=2*u-f,g=2*p-g),r=e.util.getBoundsOfCurve(u,p,f,g,f,g,o,s),u=o,p=s;break;case"T":o=t[1],s=t[2],null===c[0].match(/[QqTt]/)?(f=u,g=p):(f=2*u-f,g=2*p-g),r=e.util.getBoundsOfCurve(u,p,f,g,f,g,o,s),u=o,p=s;break;case"a":r=e.util.getBoundsOfArc(u,p,t[1],t[2],t[3],t[4],t[5],t[6]+u,t[7]+p),u+=t[6],p+=t[7];break;case"A":r=e.util.getBoundsOfArc(u,p,t[1],t[2],t[3],t[4],t[5],t[6],t[7]),u=t[6],p=t[7];break;case"z":case"Z":u=h,p=d}c=t,r.forEach(function(t){a.push(t.x),l.push(t.y)}),a.push(u),l.push(p)}var b=i(a)||0,y=i(l)||0;return{left:b,top:y,width:(n(a)||0)-b,height:(n(l)||0)-y}}}),e.Path.fromObject=function(t,i,n){var o;return"string"!=typeof t.path?e.Object._fromObject("Path",t,i,n,"path"):void e.loadSVGFromURL(t.path,function(n){var s=t.path;o=n[0],delete t.path,e.util.object.extend(o,t),o.setSourcePath(s),i&&i(o)})},e.Path.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(["d"]),e.Path.fromElement=function(t,i,n){var s=e.parseAttributes(t,e.Path.ATTRIBUTE_NAMES);i&&i(new e.Path(s.d,o(s,n)))},e.Path.async=!0}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.PathGroup?e.warn("fabric.PathGroup is already defined"):(e.PathGroup=e.util.createClass(e.Object,{type:"path-group",fill:"",initialize:function(t,e){e=e||{},this.paths=t||[];for(var i=this.paths.length;i--;)this.paths[i].group=this;e.toBeParsed&&(this.parseDimensionsFromPaths(e),delete e.toBeParsed),this.setOptions(e),this.setCoords(),e.sourcePath&&this.setSourcePath(e.sourcePath),this.objectCaching&&(this._createCacheCanvas(),this.setupState({propertySet:"cacheProperties"}))},parseDimensionsFromPaths:function(t){for(var i,n,o,s,r,a,l=[],c=[],h=this.paths.length;h--;){o=this.paths[h],s=o.height+o.strokeWidth,r=o.width+o.strokeWidth,i=[{x:o.left,y:o.top},{x:o.left+r,y:o.top},{x:o.left,y:o.top+s},{x:o.left+r,y:o.top+s}],a=this.paths[h].transformMatrix;for(var d=0;d<i.length;d++)n=i[d],a&&(n=e.util.transformPoint(n,a,!1)),l.push(n.x),c.push(n.y)}t.width=Math.max.apply(null,l),t.height=Math.max.apply(null,c)},drawObject:function(t){t.save(),t.translate(-this.width/2,-this.height/2);for(var e=0,i=this.paths.length;e<i;++e)this.paths[e].render(t,!0);t.restore()},isCacheDirty:function(){if(this.callSuper("isCacheDirty"))return!0;if(!this.statefullCache)return!1;for(var t=0,e=this.paths.length;t<e;t++)if(this.paths[t].isCacheDirty(!0)){var i=this._getNonTransformedDimensions();return this._cacheContext.clearRect(-i.x/2,-i.y/2,i.x,i.y),!0}return!1},_set:function(t,e){if("fill"===t&&e&&this.isSameColor())for(var i=this.paths.length;i--;)this.paths[i]._set(t,e);return this.callSuper("_set",t,e)},toObject:function(t){var e=this.paths.map(function(e){var i=e.includeDefaultValues;e.includeDefaultValues=e.group.includeDefaultValues;var n=e.toObject(t);return e.includeDefaultValues=i,n});return i(this.callSuper("toObject",["sourcePath"].concat(t)),{paths:e})},toDatalessObject:function(t){var e=this.toObject(t);return this.sourcePath&&(e.paths=this.sourcePath),e},toSVG:function(t){var e=this.getObjects(),i=this.getPointByOrigin("left","top"),n="translate("+i.x+" "+i.y+")",o=this._createBaseSVGMarkup();o.push("<g ",this.getSvgId(),'style="',this.getSvgStyles(),'" ','transform="',this.getSvgTransformMatrix(),n,this.getSvgTransform(),'" ',">\n");for(var s=0,r=e.length;s<r;s++)o.push("\t",e[s].toSVG(t));return o.push("</g>\n"),t?t(o.join("")):o.join("")},toString:function(){return"#<fabric.PathGroup ("+this.complexity()+"): { top: "+this.top+", left: "+this.left+" }>"},isSameColor:function(){var t=this.getObjects()[0].get("fill")||"";return"string"==typeof t&&(t=t.toLowerCase(),this.getObjects().every(function(e){var i=e.get("fill")||"";return"string"==typeof i&&i.toLowerCase()===t}))},complexity:function(){return this.paths.reduce(function(t,e){return t+(e&&e.complexity?e.complexity():0)},0)},getObjects:function(){return this.paths}}),e.PathGroup.fromObject=function(t,i){var n=t.paths;delete t.paths,"string"==typeof n?e.loadSVGFromURL(n,function(o){var s=n,r=e.util.groupSVGElements(o,t,s);t.paths=n,i(r)}):e.util.enlivenObjects(n,function(o){var s=new e.PathGroup(o,t);t.paths=n,i(s)})},e.PathGroup.async=!0)}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.array.min,o=e.util.array.max;if(!e.Group){var s={lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0};e.Group=e.util.createClass(e.Object,e.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,initialize:function(t,e,i){e=e||{},this._objects=[],i&&this.callSuper("initialize",e),this._objects=t||[];for(var n=this._objects.length;n--;)this._objects[n].group=this;this.originalState={},e.originX&&(this.originX=e.originX),e.originY&&(this.originY=e.originY),i?this._updateObjectsCoords(!0):(this._calcBounds(),this._updateObjectsCoords(),this.callSuper("initialize",e)),this.setCoords(),this.saveCoords()},_updateObjectsCoords:function(t){for(var e=this.getCenterPoint(),i=this._objects.length;i--;)this._updateObjectCoords(this._objects[i],e,t)},_updateObjectCoords:function(t,e,i){if(t.__origHasControls=t.hasControls,t.hasControls=!1,!i){var n=t.getLeft(),o=t.getTop();t.set({left:n-e.x,top:o-e.y}),t.setCoords(!0,!0)}},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(t){return this._restoreObjectsState(),e.util.resetObjectTransform(this),t&&(this._objects.push(t),t.group=this,t._set("canvas",this.canvas)),this.forEachObject(this._setObjectActive,this),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,this},_setObjectActive:function(t){t.set("active",!0),t.group=this},removeWithUpdate:function(t){return this._restoreObjectsState(),e.util.resetObjectTransform(this),this.forEachObject(this._setObjectActive,this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,this},_onObjectAdded:function(t){this.dirty=!0,t.group=this,t._set("canvas",this.canvas)},_onObjectRemoved:function(t){this.dirty=!0,delete t.group,t.set("active",!1)},delegatedProperties:{fill:!0,stroke:!0,strokeWidth:!0,fontFamily:!0,fontWeight:!0,fontSize:!0,fontStyle:!0,lineHeight:!0,textDecoration:!0,textAlign:!0,backgroundColor:!0},_set:function(t,e){var i=this._objects.length;if(this.delegatedProperties[t]||"canvas"===t)for(;i--;)this._objects[i].set(t,e);else for(;i--;)this._objects[i].setOnGroup(t,e);this.callSuper("_set",t,e)},toObject:function(t){var e=this.getObjects().map(function(e){var i=e.includeDefaultValues;e.includeDefaultValues=e.group.includeDefaultValues;var n=e.toObject(t);return e.includeDefaultValues=i,n});return i(this.callSuper("toObject",t),{objects:e})},render:function(t){this._transformDone=!0,this.callSuper("render",t),this._transformDone=!1},drawObject:function(t){for(var e=0,i=this._objects.length;e<i;e++)this._renderObject(this._objects[e],t)},isCacheDirty:function(){if(this.callSuper("isCacheDirty"))return!0;if(!this.statefullCache)return!1;for(var t=0,e=this._objects.length;t<e;t++)if(this._objects[t].isCacheDirty(!0)){var i=this._getNonTransformedDimensions();return this._cacheContext.clearRect(-i.x/2,-i.y/2,i.x,i.y),!0}return!1},_renderControls:function(t,e){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",t,e);for(var i=0,n=this._objects.length;i<n;i++)this._objects[i]._renderControls(t);t.restore()},_renderObject:function(t,e){if(t.visible){var i=t.hasRotatingPoint;t.hasRotatingPoint=!1,t.render(e),t.hasRotatingPoint=i}},_restoreObjectsState:function(){return this._objects.forEach(this._restoreObjectState,this),this},realizeTransform:function(t){var i=t.calcTransformMatrix(),n=e.util.qrDecompose(i),o=new e.Point(n.translateX,n.translateY);return t.flipX=!1,t.flipY=!1,t.set("scaleX",n.scaleX),t.set("scaleY",n.scaleY),t.skewX=n.skewX,t.skewY=n.skewY,t.angle=n.angle,t.setPositionByOrigin(o,"center","center"),t},_restoreObjectState:function(t){return this.realizeTransform(t),t.setCoords(),t.hasControls=t.__origHasControls,delete t.__origHasControls,t.set("active",!1),delete t.group,this},destroy:function(){return this._restoreObjectsState()},saveCoords:function(){return this._originalLeft=this.get("left"),this._originalTop=this.get("top"),this},hasMoved:function(){return this._originalLeft!==this.get("left")||this._originalTop!==this.get("top")},setObjectsCoords:function(){return this.forEachObject(function(t){t.setCoords(!0,!0)}),this},_calcBounds:function(t){for(var e,i,n,o=[],s=[],r=["tr","br","bl","tl"],a=0,l=this._objects.length,c=r.length;a<l;++a)for(e=this._objects[a],e.setCoords(!0),n=0;n<c;n++)i=r[n],o.push(e.oCoords[i].x),s.push(e.oCoords[i].y);this.set(this._getBounds(o,s,t))},_getBounds:function(t,i,s){var r=new e.Point(n(t),n(i)),a=new e.Point(o(t),o(i)),l={width:a.x-r.x||0,height:a.y-r.y||0};return s||(l.left=r.x||0,l.top=r.y||0,"center"===this.originX&&(l.left+=l.width/2),"right"===this.originX&&(l.left+=l.width),"center"===this.originY&&(l.top+=l.height/2),"bottom"===this.originY&&(l.top+=l.height)),l},toSVG:function(t){var e=this._createBaseSVGMarkup();e.push("<g ",this.getSvgId(),'transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'" style="',this.getSvgFilter(),'">\n');for(var i=0,n=this._objects.length;i<n;i++)e.push("\t",this._objects[i].toSVG(t));return e.push("</g>\n"),t?t(e.join("")):e.join("")},get:function(t){if(t in s){if(this[t])return this[t];for(var e=0,i=this._objects.length;e<i;e++)if(this._objects[e][t])return!0;return!1}return t in this.delegatedProperties?this._objects[0]&&this._objects[0].get(t):this[t]}}),e.Group.fromObject=function(t,i){e.util.enlivenObjects(t.objects,function(n){delete t.objects,i&&i(new e.Group(n,t,!0))})},e.Group.async=!0}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=fabric.util.object.extend;if(t.fabric||(t.fabric={}),t.fabric.Image)return void fabric.warn("fabric.Image is already defined.");var i=fabric.Object.prototype.stateProperties.concat();i.push("alignX","alignY","meetOrSlice"),fabric.Image=fabric.util.createClass(fabric.Object,{type:"image",crossOrigin:"",alignX:"none",alignY:"none",meetOrSlice:"meet",strokeWidth:0,_lastScaleX:1,_lastScaleY:1,minimumScaleTrigger:.5,stateProperties:i,objectCaching:!1,initialize:function(t,e,i){e||(e={}),this.filters=[],this.resizeFilters=[],this.callSuper("initialize",e),this._initElement(t,e,i)},getElement:function(){return this._element},setElement:function(t,e,i){var n,o;return this._element=t,this._originalElement=t,this._initConfig(i),0===this.resizeFilters.length?n=e:(o=this,n=function(){o.applyFilters(e,o.resizeFilters,o._filteredEl||o._originalElement,!0)}),0!==this.filters.length?this.applyFilters(n):n&&n(this),this},setCrossOrigin:function(t){return this.crossOrigin=t,this._element.crossOrigin=t,this},getOriginalSize:function(){var t=this.getElement();return{width:t.width,height:t.height}},_stroke:function(t){if(this.stroke&&0!==this.strokeWidth){var e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,-i),t.lineTo(e,-i),t.lineTo(e,i),t.lineTo(-e,i),t.lineTo(-e,-i),t.closePath()}},_renderDashedStroke:function(t){var e=-this.width/2,i=-this.height/2,n=this.width,o=this.height;t.save(),this._setStrokeStyles(t),t.beginPath(),fabric.util.drawDashedLine(t,e,i,e+n,i,this.strokeDashArray),fabric.util.drawDashedLine(t,e+n,i,e+n,i+o,this.strokeDashArray),fabric.util.drawDashedLine(t,e+n,i+o,e,i+o,this.strokeDashArray),fabric.util.drawDashedLine(t,e,i+o,e,i,this.strokeDashArray),t.closePath(),t.restore()},toObject:function(t){var i=[],n=[],o=1,s=1;this.filters.forEach(function(t){t&&("Resize"===t.type&&(o*=t.scaleX,s*=t.scaleY),i.push(t.toObject()))}),this.resizeFilters.forEach(function(t){t&&n.push(t.toObject())});var r=e(this.callSuper("toObject",["crossOrigin","alignX","alignY","meetOrSlice"].concat(t)),{src:this.getSrc(),filters:i,resizeFilters:n});return r.width/=o,r.height/=s,r},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=-this.width/2,n=-this.height/2,o="none";if(this.group&&"path-group"===this.group.type&&(i=this.left,n=this.top),"none"!==this.alignX&&"none"!==this.alignY&&(o="x"+this.alignX+"Y"+this.alignY+" "+this.meetOrSlice),e.push('<g transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'">\n',"<image ",this.getSvgId(),'xlink:href="',this.getSvgSrc(!0),'" x="',i,'" y="',n,'" style="',this.getSvgStyles(),'" width="',this.width,'" height="',this.height,'" preserveAspectRatio="',o,'"',"></image>\n"),this.stroke||this.strokeDashArray){var s=this.fill;this.fill=null,e.push("<rect ",'x="',i,'" y="',n,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'),this.fill=s}return e.push("</g>\n"),t?t(e.join("")):e.join("")},getSrc:function(t){var e=t?this._element:this._originalElement;return e?fabric.isLikelyNode?e._src:e.src:this.src||""},setSrc:function(t,e,i){fabric.util.loadImage(t,function(t){return this.setElement(t,e,i)},this,i&&i.crossOrigin)},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyFilters:function(t,e,i,n){if(e=e||this.filters,i=i||this._originalElement){var o,s,r=fabric.util.createImage(),a=this.canvas?this.canvas.getRetinaScaling():fabric.devicePixelRatio,l=this.minimumScaleTrigger/a,c=this;if(0===e.length)return this._element=i,t&&t(this),i;var h=fabric.util.createCanvasElement();return h.width=i.width,h.height=i.height,h.getContext("2d").drawImage(i,0,0,i.width,i.height),e.forEach(function(t){t&&(n?(o=c.scaleX<l?c.scaleX:1,s=c.scaleY<l?c.scaleY:1,o*a<1&&(o*=a),s*a<1&&(s*=a)):(o=t.scaleX,s=t.scaleY),t.applyTo(h,o,s),n||"Resize"!==t.type||(c.width*=t.scaleX,c.height*=t.scaleY))}),r.width=h.width,r.height=h.height,fabric.isLikelyNode?(r.src=h.toBuffer(void 0,fabric.Image.pngCompression),c._element=r,!n&&(c._filteredEl=r),t&&t(c)):(r.onload=function(){c._element=r,!n&&(c._filteredEl=r),t&&t(c),r.onload=h=null},r.src=h.toDataURL("image/png")),h}},_render:function(t,e){var i,n,o,s=this._findMargins();i=e?this.left:-this.width/2,n=e?this.top:-this.height/2,"slice"===this.meetOrSlice&&(t.beginPath(),t.rect(i,n,this.width,this.height),t.clip()),!1===this.isMoving&&this.resizeFilters.length&&this._needsResize()?(this._lastScaleX=this.scaleX,this._lastScaleY=this.scaleY,o=this.applyFilters(null,this.resizeFilters,this._filteredEl||this._originalElement,!0)):o=this._element,o&&t.drawImage(o,i+s.marginX,n+s.marginY,s.width,s.height),this._stroke(t),this._renderStroke(t)},_needsResize:function(){
return this.scaleX!==this._lastScaleX||this.scaleY!==this._lastScaleY},_findMargins:function(){var t,e,i=this.width,n=this.height,o=0,s=0;return"none"===this.alignX&&"none"===this.alignY||(t=[this.width/this._element.width,this.height/this._element.height],e="meet"===this.meetOrSlice?Math.min.apply(null,t):Math.max.apply(null,t),i=this._element.width*e,n=this._element.height*e,"Mid"===this.alignX&&(o=(this.width-i)/2),"Max"===this.alignX&&(o=this.width-i),"Mid"===this.alignY&&(s=(this.height-n)/2),"Max"===this.alignY&&(s=this.height-n)),{width:i,height:n,marginX:o,marginY:s}},_resetWidthHeight:function(){var t=this.getElement();this.set("width",t.width),this.set("height",t.height)},_initElement:function(t,e,i){this.setElement(fabric.util.getById(t),i,e),fabric.util.addClass(this.getElement(),fabric.Image.CSS_CANVAS)},_initConfig:function(t){t||(t={}),this.setOptions(t),this._setWidthHeight(t),this._element&&this.crossOrigin&&(this._element.crossOrigin=this.crossOrigin)},_initFilters:function(t,e){t&&t.length?fabric.util.enlivenObjects(t,function(t){e&&e(t)},"fabric.Image.filters"):e&&e()},_setWidthHeight:function(t){this.width="width"in t?t.width:this.getElement()?this.getElement().width||0:0,this.height="height"in t?t.height:this.getElement()?this.getElement().height||0:0}}),fabric.Image.CSS_CANVAS="canvas-img",fabric.Image.prototype.getSvgSrc=fabric.Image.prototype.getSrc,fabric.Image.fromObject=function(t,e){fabric.util.loadImage(t.src,function(i,n){return n?void(e&&e(null,n)):void fabric.Image.prototype._initFilters.call(t,t.filters,function(n){t.filters=n||[],fabric.Image.prototype._initFilters.call(t,t.resizeFilters,function(n){return t.resizeFilters=n||[],new fabric.Image(i,t,e)})})},null,t.crossOrigin)},fabric.Image.fromURL=function(t,e,i){fabric.util.loadImage(t,function(t){e&&e(new fabric.Image(t,i))},null,i&&i.crossOrigin)},fabric.Image.ATTRIBUTE_NAMES=fabric.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin".split(" ")),fabric.Image.fromElement=function(t,i,n){var o,s=fabric.parseAttributes(t,fabric.Image.ATTRIBUTE_NAMES);s.preserveAspectRatio&&(o=fabric.util.parsePreserveAspectRatioAttribute(s.preserveAspectRatio),e(s,o)),fabric.Image.fromURL(s["xlink:href"],i,e(n?fabric.util.object.clone(n):{},s))},fabric.Image.async=!0,fabric.Image.pngCompression=1}("undefined"!=typeof exports?exports:this),fabric.util.object.extend(fabric.Object.prototype,{_getAngleValueForStraighten:function(){var t=this.getAngle()%360;return t>0?90*Math.round((t-1)/90):90*Math.round(t/90)},straighten:function(){return this.setAngle(this._getAngleValueForStraighten()),this},fxStraighten:function(t){t=t||{};var e=function(){},i=t.onComplete||e,n=t.onChange||e,o=this;return fabric.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(t){o.setAngle(t),n()},onComplete:function(){o.setCoords(),i()},onStart:function(){o.set("active",!1)}}),this}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{straightenObject:function(t){return t.straighten(),this.renderAll(),this},fxStraightenObject:function(t){return t.fxStraighten({onChange:this.renderAll.bind(this)}),this}}),fabric.Image.filters=fabric.Image.filters||{},fabric.Image.filters.BaseFilter=fabric.util.createClass({type:"BaseFilter",initialize:function(t){t&&this.setOptions(t)},setOptions:function(t){for(var e in t)this[e]=t[e]},toObject:function(){return{type:this.type}},toJSON:function(){return this.toObject()}}),fabric.Image.filters.BaseFilter.fromObject=function(t,e){var i=new fabric.Image.filters[t.type](t);return e&&e(i),i},function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,o=e.util.createClass;n.Brightness=o(n.BaseFilter,{type:"Brightness",initialize:function(t){t=t||{},this.brightness=t.brightness||0},applyTo:function(t){for(var e=t.getContext("2d"),i=e.getImageData(0,0,t.width,t.height),n=i.data,o=this.brightness,s=0,r=n.length;s<r;s+=4)n[s]+=o,n[s+1]+=o,n[s+2]+=o;e.putImageData(i,0,0)},toObject:function(){return i(this.callSuper("toObject"),{brightness:this.brightness})}}),e.Image.filters.Brightness.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,o=e.util.createClass;n.Convolute=o(n.BaseFilter,{type:"Convolute",initialize:function(t){t=t||{},this.opaque=t.opaque,this.matrix=t.matrix||[0,0,0,0,1,0,0,0,0]},applyTo:function(t){for(var e,i,n,o,s,r,a,l,c,h=this.matrix,d=t.getContext("2d"),u=d.getImageData(0,0,t.width,t.height),p=Math.round(Math.sqrt(h.length)),f=Math.floor(p/2),g=u.data,v=u.width,m=u.height,b=d.createImageData(v,m),y=b.data,w=this.opaque?1:0,x=0;x<m;x++)for(var C=0;C<v;C++){s=4*(x*v+C),e=0,i=0,n=0,o=0;for(var _=0;_<p;_++)for(var T=0;T<p;T++)a=x+_-f,r=C+T-f,a<0||a>m||r<0||r>v||(l=4*(a*v+r),c=h[_*p+T],e+=g[l]*c,i+=g[l+1]*c,n+=g[l+2]*c,o+=g[l+3]*c);y[s]=e,y[s+1]=i,y[s+2]=n,y[s+3]=o+w*(255-o)}d.putImageData(b,0,0)},toObject:function(){return i(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),e.Image.filters.Convolute.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,o=e.util.createClass;n.GradientTransparency=o(n.BaseFilter,{type:"GradientTransparency",initialize:function(t){t=t||{},this.threshold=t.threshold||100},applyTo:function(t){for(var e=t.getContext("2d"),i=e.getImageData(0,0,t.width,t.height),n=i.data,o=this.threshold,s=n.length,r=0,a=n.length;r<a;r+=4)n[r+3]=o+255*(s-r)/s;e.putImageData(i,0,0)},toObject:function(){return i(this.callSuper("toObject"),{threshold:this.threshold})}}),e.Image.filters.GradientTransparency.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Grayscale=n(i.BaseFilter,{type:"Grayscale",applyTo:function(t){for(var e,i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),o=n.data,s=n.width*n.height*4,r=0;r<s;)e=(o[r]+o[r+1]+o[r+2])/3,o[r]=e,o[r+1]=e,o[r+2]=e,r+=4;i.putImageData(n,0,0)}}),e.Image.filters.Grayscale.fromObject=function(t,i){return t=t||{},t.type="Grayscale",e.Image.filters.BaseFilter.fromObject(t,i)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Invert=n(i.BaseFilter,{type:"Invert",applyTo:function(t){var e,i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),o=n.data,s=o.length;for(e=0;e<s;e+=4)o[e]=255-o[e],o[e+1]=255-o[e+1],o[e+2]=255-o[e+2];i.putImageData(n,0,0)}}),e.Image.filters.Invert.fromObject=function(t,i){return t=t||{},t.type="Invert",e.Image.filters.BaseFilter.fromObject(t,i)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,o=e.util.createClass;n.Mask=o(n.BaseFilter,{type:"Mask",initialize:function(t){t=t||{},this.mask=t.mask,this.channel=[0,1,2,3].indexOf(t.channel)>-1?t.channel:0},applyTo:function(t){if(this.mask){var i,n=t.getContext("2d"),o=n.getImageData(0,0,t.width,t.height),s=o.data,r=this.mask.getElement(),a=e.util.createCanvasElement(),l=this.channel,c=o.width*o.height*4;a.width=t.width,a.height=t.height,a.getContext("2d").drawImage(r,0,0,t.width,t.height);var h=a.getContext("2d").getImageData(0,0,t.width,t.height),d=h.data;for(i=0;i<c;i+=4)s[i+3]=d[i+l];n.putImageData(o,0,0)}},toObject:function(){return i(this.callSuper("toObject"),{mask:this.mask.toObject(),channel:this.channel})}}),e.Image.filters.Mask.fromObject=function(t,i){e.util.loadImage(t.mask.src,function(n){return t.mask=new e.Image(n,t.mask),e.Image.filters.BaseFilter.fromObject(t,i)})},e.Image.filters.Mask.async=!0}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,o=e.util.createClass;n.Noise=o(n.BaseFilter,{type:"Noise",initialize:function(t){t=t||{},this.noise=t.noise||0},applyTo:function(t){for(var e,i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),o=n.data,s=this.noise,r=0,a=o.length;r<a;r+=4)e=(.5-Math.random())*s,o[r]+=e,o[r+1]+=e,o[r+2]+=e;i.putImageData(n,0,0)},toObject:function(){return i(this.callSuper("toObject"),{noise:this.noise})}}),e.Image.filters.Noise.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,o=e.util.createClass;n.Pixelate=o(n.BaseFilter,{type:"Pixelate",initialize:function(t){t=t||{},this.blocksize=t.blocksize||4},applyTo:function(t){var e,i,n,o,s,r,a,l=t.getContext("2d"),c=l.getImageData(0,0,t.width,t.height),h=c.data,d=c.height,u=c.width;for(i=0;i<d;i+=this.blocksize)for(n=0;n<u;n+=this.blocksize){e=4*i*u+4*n,o=h[e],s=h[e+1],r=h[e+2],a=h[e+3];for(var p=i,f=i+this.blocksize;p<f;p++)for(var g=n,v=n+this.blocksize;g<v;g++)e=4*p*u+4*g,h[e]=o,h[e+1]=s,h[e+2]=r,h[e+3]=a}l.putImageData(c,0,0)},toObject:function(){return i(this.callSuper("toObject"),{blocksize:this.blocksize})}}),e.Image.filters.Pixelate.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,o=e.util.createClass;n.RemoveWhite=o(n.BaseFilter,{type:"RemoveWhite",initialize:function(t){t=t||{},this.threshold=t.threshold||30,this.distance=t.distance||20},applyTo:function(t){for(var e,i,n,o=t.getContext("2d"),s=o.getImageData(0,0,t.width,t.height),r=s.data,a=this.threshold,l=this.distance,c=255-a,h=Math.abs,d=0,u=r.length;d<u;d+=4)e=r[d],i=r[d+1],n=r[d+2],e>c&&i>c&&n>c&&h(e-i)<l&&h(e-n)<l&&h(i-n)<l&&(r[d+3]=0);o.putImageData(s,0,0)},toObject:function(){return i(this.callSuper("toObject"),{threshold:this.threshold,distance:this.distance})}}),e.Image.filters.RemoveWhite.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Sepia=n(i.BaseFilter,{type:"Sepia",applyTo:function(t){var e,i,n=t.getContext("2d"),o=n.getImageData(0,0,t.width,t.height),s=o.data,r=s.length;for(e=0;e<r;e+=4)i=.3*s[e]+.59*s[e+1]+.11*s[e+2],s[e]=i+100,s[e+1]=i+50,s[e+2]=i+255;n.putImageData(o,0,0)}}),e.Image.filters.Sepia.fromObject=function(t,i){return t=t||{},t.type="Sepia",new e.Image.filters.BaseFilter.fromObject(t,i)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Sepia2=n(i.BaseFilter,{type:"Sepia2",applyTo:function(t){var e,i,n,o,s=t.getContext("2d"),r=s.getImageData(0,0,t.width,t.height),a=r.data,l=a.length;for(e=0;e<l;e+=4)i=a[e],n=a[e+1],o=a[e+2],a[e]=(.393*i+.769*n+.189*o)/1.351,a[e+1]=(.349*i+.686*n+.168*o)/1.203,a[e+2]=(.272*i+.534*n+.131*o)/2.14;s.putImageData(r,0,0)}}),e.Image.filters.Sepia2.fromObject=function(t,i){return t=t||{},t.type="Sepia2",new e.Image.filters.BaseFilter.fromObject(t,i)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,o=e.util.createClass;n.Tint=o(n.BaseFilter,{type:"Tint",initialize:function(t){t=t||{},this.color=t.color||"#000000",this.opacity=void 0!==t.opacity?t.opacity:new e.Color(this.color).getAlpha()},applyTo:function(t){var i,n,o,s,r,a,l,c,h,d=t.getContext("2d"),u=d.getImageData(0,0,t.width,t.height),p=u.data,f=p.length;for(h=new e.Color(this.color).getSource(),n=h[0]*this.opacity,o=h[1]*this.opacity,s=h[2]*this.opacity,c=1-this.opacity,i=0;i<f;i+=4)r=p[i],a=p[i+1],l=p[i+2],p[i]=n+r*c,p[i+1]=o+a*c,p[i+2]=s+l*c;d.putImageData(u,0,0)},toObject:function(){return i(this.callSuper("toObject"),{color:this.color,opacity:this.opacity})}}),e.Image.filters.Tint.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,o=e.util.createClass;n.Multiply=o(n.BaseFilter,{type:"Multiply",initialize:function(t){t=t||{},this.color=t.color||"#000000"},applyTo:function(t){var i,n,o=t.getContext("2d"),s=o.getImageData(0,0,t.width,t.height),r=s.data,a=r.length;for(n=new e.Color(this.color).getSource(),i=0;i<a;i+=4)r[i]*=n[0]/255,r[i+1]*=n[1]/255,r[i+2]*=n[2]/255;o.putImageData(s,0,0)},toObject:function(){return i(this.callSuper("toObject"),{color:this.color})}}),e.Image.filters.Multiply.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric,i=e.Image.filters,n=e.util.createClass;i.Blend=n(i.BaseFilter,{type:"Blend",initialize:function(t){t=t||{},this.color=t.color||"#000",this.image=t.image||!1,this.mode=t.mode||"multiply",this.alpha=t.alpha||1},applyTo:function(t){var i,n,o,s,r,a,l,c,h,d,u=t.getContext("2d"),p=u.getImageData(0,0,t.width,t.height),f=p.data,g=!1;if(this.image){g=!0;var v=e.util.createCanvasElement();v.width=this.image.width,v.height=this.image.height;var m=new e.StaticCanvas(v);m.add(this.image);d=m.getContext("2d").getImageData(0,0,m.width,m.height).data}else d=new e.Color(this.color).getSource(),i=d[0]*this.alpha,n=d[1]*this.alpha,o=d[2]*this.alpha;for(var b=0,y=f.length;b<y;b+=4)switch(s=f[b],r=f[b+1],a=f[b+2],g&&(i=d[b]*this.alpha,n=d[b+1]*this.alpha,o=d[b+2]*this.alpha),this.mode){case"multiply":f[b]=s*i/255,f[b+1]=r*n/255,f[b+2]=a*o/255;break;case"screen":f[b]=1-(1-s)*(1-i),f[b+1]=1-(1-r)*(1-n),f[b+2]=1-(1-a)*(1-o);break;case"add":f[b]=Math.min(255,s+i),f[b+1]=Math.min(255,r+n),f[b+2]=Math.min(255,a+o);break;case"diff":case"difference":f[b]=Math.abs(s-i),f[b+1]=Math.abs(r-n),f[b+2]=Math.abs(a-o);break;case"subtract":l=s-i,c=r-n,h=a-o,f[b]=l<0?0:l,f[b+1]=c<0?0:c,f[b+2]=h<0?0:h;break;case"darken":f[b]=Math.min(s,i),f[b+1]=Math.min(r,n),f[b+2]=Math.min(a,o);break;case"lighten":f[b]=Math.max(s,i),f[b+1]=Math.max(r,n),f[b+2]=Math.max(a,o)}u.putImageData(p,0,0)},toObject:function(){return{color:this.color,image:this.image,mode:this.mode,alpha:this.alpha}}}),e.Image.filters.Blend.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=Math.pow,n=Math.floor,o=Math.sqrt,s=Math.abs,r=Math.max,a=Math.round,l=Math.sin,c=Math.ceil,h=e.Image.filters,d=e.util.createClass;h.Resize=d(h.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:0,scaleY:0,lanczosLobes:3,applyTo:function(t,e,i){if(1!==e||1!==i){this.rcpScaleX=1/e,this.rcpScaleY=1/i;var n,o=t.width,s=t.height,r=a(o*e),l=a(s*i);"sliceHack"===this.resizeType&&(n=this.sliceByTwo(t,o,s,r,l)),"hermite"===this.resizeType&&(n=this.hermiteFastResize(t,o,s,r,l)),"bilinear"===this.resizeType&&(n=this.bilinearFiltering(t,o,s,r,l)),"lanczos"===this.resizeType&&(n=this.lanczosResize(t,o,s,r,l)),t.width=r,t.height=l,t.getContext("2d").putImageData(n,0,0)}},sliceByTwo:function(t,i,o,s,a){var l,c=t.getContext("2d"),h=.5,d=.5,u=1,p=1,f=!1,g=!1,v=i,m=o,b=e.util.createCanvasElement(),y=b.getContext("2d");for(s=n(s),a=n(a),b.width=r(s,i),b.height=r(a,o),s>i&&(h=2,u=-1),a>o&&(d=2,p=-1),l=c.getImageData(0,0,i,o),t.width=r(s,i),t.height=r(a,o),c.putImageData(l,0,0);!f||!g;)i=v,o=m,s*u<n(v*h*u)?v=n(v*h):(v=s,f=!0),a*p<n(m*d*p)?m=n(m*d):(m=a,g=!0),l=c.getImageData(0,0,i,o),y.putImageData(l,0,0),c.clearRect(0,0,v,m),c.drawImage(b,0,0,i,o,0,0,v,m);return c.getImageData(0,0,s,a)},lanczosResize:function(t,e,r,a,h){function d(t){var l,c,u,p,E,A,O,D,j,M,I;for(S.x=(t+.5)*b,k.x=n(S.x),l=0;l<h;l++){for(S.y=(l+.5)*y,k.y=n(S.y),E=0,A=0,O=0,D=0,j=0,c=k.x-C;c<=k.x+C;c++)if(!(c<0||c>=e)){M=n(1e3*s(c-S.x)),T[M]||(T[M]={});for(var V=k.y-_;V<=k.y+_;V++)V<0||V>=r||(I=n(1e3*s(V-S.y)),T[M][I]||(T[M][I]=m(o(i(M*w,2)+i(I*x,2))/1e3)),(u=T[M][I])>0&&(p=4*(V*e+c),E+=u,A+=u*g[p],O+=u*g[p+1],D+=u*g[p+2],j+=u*g[p+3]))}p=4*(l*a+t),v[p]=A/E,v[p+1]=O/E,v[p+2]=D/E,v[p+3]=j/E}return++t<a?d(t):f}var u=t.getContext("2d"),p=u.getImageData(0,0,e,r),f=u.getImageData(0,0,a,h),g=p.data,v=f.data,m=function(t){return function(e){if(e>t)return 0;if(e*=Math.PI,s(e)<1e-16)return 1;var i=e/t;return l(e)*l(i)/e/i}}(this.lanczosLobes),b=this.rcpScaleX,y=this.rcpScaleY,w=2/this.rcpScaleX,x=2/this.rcpScaleY,C=c(b*this.lanczosLobes/2),_=c(y*this.lanczosLobes/2),T={},S={},k={};return d(0)},bilinearFiltering:function(t,e,i,o,s){var r,a,l,c,h,d,u,p,f,g,v,m,b,y=0,w=this.rcpScaleX,x=this.rcpScaleY,C=t.getContext("2d"),_=4*(e-1),T=C.getImageData(0,0,e,i),S=T.data,k=C.getImageData(0,0,o,s),E=k.data;for(u=0;u<s;u++)for(p=0;p<o;p++)for(h=n(w*p),d=n(x*u),f=w*p-h,g=x*u-d,b=4*(d*e+h),v=0;v<4;v++)r=S[b+v],a=S[b+4+v],l=S[b+_+v],c=S[b+_+4+v],m=r*(1-f)*(1-g)+a*f*(1-g)+l*g*(1-f)+c*f*g,E[y++]=m;return k},hermiteFastResize:function(t,e,i,r,a){for(var l=this.rcpScaleX,h=this.rcpScaleY,d=c(l/2),u=c(h/2),p=t.getContext("2d"),f=p.getImageData(0,0,e,i),g=f.data,v=p.getImageData(0,0,r,a),m=v.data,b=0;b<a;b++)for(var y=0;y<r;y++){for(var w=4*(y+b*r),x=0,C=0,_=0,T=0,S=0,k=0,E=0,A=(b+.5)*h,O=n(b*h);O<(b+1)*h;O++)for(var D=s(A-(O+.5))/u,j=(y+.5)*l,M=D*D,I=n(y*l);I<(y+1)*l;I++){var V=s(j-(I+.5))/d,P=o(M+V*V);P>1&&P<-1||(x=2*P*P*P-3*P*P+1)>0&&(V=4*(I+O*e),E+=x*g[V+3],_+=x,g[V+3]<255&&(x=x*g[V+3]/250),T+=x*g[V],S+=x*g[V+1],k+=x*g[V+2],C+=x)}m[w]=T/C,m[w+1]=S/C,m[w+2]=k/C,m[w+3]=E/_}return v},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),e.Image.filters.Resize.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,o=e.util.createClass;n.ColorMatrix=o(n.BaseFilter,{type:"ColorMatrix",initialize:function(t){t||(t={}),this.matrix=t.matrix||[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]},applyTo:function(t){var e,i,n,o,s,r=t.getContext("2d"),a=r.getImageData(0,0,t.width,t.height),l=a.data,c=l.length,h=this.matrix;for(e=0;e<c;e+=4)i=l[e],n=l[e+1],o=l[e+2],s=l[e+3],l[e]=i*h[0]+n*h[1]+o*h[2]+s*h[3]+h[4],l[e+1]=i*h[5]+n*h[6]+o*h[7]+s*h[8]+h[9],l[e+2]=i*h[10]+n*h[11]+o*h[12]+s*h[13]+h[14],l[e+3]=i*h[15]+n*h[16]+o*h[17]+s*h[18]+h[19];r.putImageData(a,0,0)},toObject:function(){return i(this.callSuper("toObject"),{type:this.type,matrix:this.matrix})}}),e.Image.filters.ColorMatrix.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,o=e.util.createClass;n.Contrast=o(n.BaseFilter,{type:"Contrast",initialize:function(t){t=t||{},this.contrast=t.contrast||0},applyTo:function(t){for(var e=t.getContext("2d"),i=e.getImageData(0,0,t.width,t.height),n=i.data,o=259*(this.contrast+255)/(255*(259-this.contrast)),s=0,r=n.length;s<r;s+=4)n[s]=o*(n[s]-128)+128,n[s+1]=o*(n[s+1]-128)+128,n[s+2]=o*(n[s+2]-128)+128;e.putImageData(i,0,0)},toObject:function(){return i(this.callSuper("toObject"),{contrast:this.contrast})}}),e.Image.filters.Contrast.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,o=e.util.createClass;n.Saturate=o(n.BaseFilter,{type:"Saturate",initialize:function(t){t=t||{},this.saturate=t.saturate||0},applyTo:function(t){for(var e,i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),o=n.data,s=.01*-this.saturate,r=0,a=o.length;r<a;r+=4)e=Math.max(o[r],o[r+1],o[r+2]),o[r]+=e!==o[r]?(e-o[r])*s:0,o[r+1]+=e!==o[r+1]?(e-o[r+1])*s:0,o[r+2]+=e!==o[r+2]?(e-o[r+2])*s:0;i.putImageData(n,0,0)},toObject:function(){return i(this.callSuper("toObject"),{saturate:this.saturate})}}),e.Image.filters.Saturate.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.toFixed,n=e.Object.NUM_FRACTION_DIGITS;if(e.Text)return void e.warn("fabric.Text is already defined");var o=e.Object.prototype.stateProperties.concat();o.push("fontFamily","fontWeight","fontSize","text","textDecoration","textAlign","fontStyle","lineHeight","textBackgroundColor","charSpacing");var s=e.Object.prototype.cacheProperties.concat();s.push("fontFamily","fontWeight","fontSize","text","textDecoration","textAlign","fontStyle","lineHeight","textBackgroundColor","charSpacing","styles"),e.Text=e.util.createClass(e.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",textDecoration:"",textAlign:"left",fontStyle:"",lineHeight:1.16,textBackgroundColor:"",stateProperties:o,cacheProperties:s,stroke:null,shadow:null,_fontSizeFraction:.25,_fontSizeMult:1.13,charSpacing:0,initialize:function(t,e){e=e||{},this.text=t,this.__skipDimension=!0,this.callSuper("initialize",e),this.__skipDimension=!1,this._initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},_initDimensions:function(t){this.__skipDimension||(t||(t=e.util.createCanvasElement().getContext("2d"),this._setTextStyles(t)),this._textLines=this._splitTextIntoLines(),this._clearCache(),this.width=this._getTextWidth(t)||this.cursorWidth||2,this.height=this._getTextHeight(t))},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var t=this.callSuper("_getCacheCanvasDimensions"),e=2*this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t},_render:function(t){this._setTextStyles(t),this.group&&"path-group"===this.group.type&&t.translate(this.left,this.top),this._renderTextLinesBackground(t),this._renderText(t),this._renderTextDecoration(t)},_renderText:function(t){this._renderTextFill(t),this._renderTextStroke(t)},_setTextStyles:function(t){t.textBaseline="alphabetic",t.font=this._getFontDeclaration()},_getTextHeight:function(){return this._getHeightOfSingleLine()+(this._textLines.length-1)*this._getHeightOfLine()},_getTextWidth:function(t){for(var e=this._getLineWidth(t,0),i=1,n=this._textLines.length;i<n;i++){var o=this._getLineWidth(t,i);o>e&&(e=o)}return e},_renderChars:function(t,e,i,n,o){var s,r,a=t.slice(0,-4);if(this[a].toLive){var l=-this.width/2+this[a].offsetX||0,c=-this.height/2+this[a].offsetY||0;e.save(),e.translate(l,c),n-=l,o-=c}if(0!==this.charSpacing){var h=this._getWidthOfCharSpacing();i=i.split("");for(var d=0,u=i.length;d<u;d++)s=i[d],r=e.measureText(s).width+h,e[t](s,n,o),n+=r>0?r:0}else e[t](i,n,o);this[a].toLive&&e.restore()},_renderTextLine:function(t,e,i,n,o,s){o-=this.fontSize*this._fontSizeFraction;var r=this._getLineWidth(e,s);if("justify"!==this.textAlign||this.width<r)return void this._renderChars(t,e,i,n,o,s);for(var a,l=i.split(/\s+/),c=0,h=this._getWidthOfWords(e,l.join(" "),s,0),d=this.width-h,u=l.length-1,p=u>0?d/u:0,f=0,g=0,v=l.length;g<v;g++){for(;" "===i[c]&&c<i.length;)c++;a=l[g],this._renderChars(t,e,a,n+f,o,s,c),f+=this._getWidthOfWords(e,a,s,c)+p,c+=a.length}},_getWidthOfWords:function(t,e){var i,n,o=t.measureText(e).width;return 0!==this.charSpacing&&(i=e.split("").length,n=i*this._getWidthOfCharSpacing(),o+=n),o>0?o:0},_getLeftOffset:function(){return-this.width/2},_getTopOffset:function(){return-this.height/2},isEmptyStyles:function(){return!0},_renderTextCommon:function(t,e){for(var i=0,n=this._getLeftOffset(),o=this._getTopOffset(),s=0,r=this._textLines.length;s<r;s++){var a=this._getHeightOfLine(t,s),l=a/this.lineHeight,c=this._getLineWidth(t,s),h=this._getLineLeftOffset(c);this._renderTextLine(e,t,this._textLines[s],n+h,o+i+l,s),i+=a}},_renderTextFill:function(t){!this.fill&&this.isEmptyStyles()||this._renderTextCommon(t,"fillText")},_renderTextStroke:function(t){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())},_getHeightOfLine:function(){return this._getHeightOfSingleLine()*this.lineHeight},_getHeightOfSingleLine:function(){return this.fontSize*this._fontSizeMult},_renderTextLinesBackground:function(t){if(this.textBackgroundColor){var e,i,n,o=0,s=t.fillStyle;t.fillStyle=this.textBackgroundColor;for(var r=0,a=this._textLines.length;r<a;r++)e=this._getHeightOfLine(t,r),i=this._getLineWidth(t,r),i>0&&(n=this._getLineLeftOffset(i),t.fillRect(this._getLeftOffset()+n,this._getTopOffset()+o,i,e/this.lineHeight)),o+=e;t.fillStyle=s,this._removeShadow(t)}},_getLineLeftOffset:function(t){return"center"===this.textAlign?(this.width-t)/2:"right"===this.textAlign?this.width-t:0},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[]},_shouldClearDimensionCache:function(){var t=this._forceClearCache;return t||(t=this.hasStateChanged("_dimensionAffectingProps")),t&&(this.saveState({propertySet:"_dimensionAffectingProps"}),this.dirty=!0),t},_getLineWidth:function(t,e){if(this.__lineWidths[e])return-1===this.__lineWidths[e]?this.width:this.__lineWidths[e];var i,n,o=this._textLines[e];return i=""===o?0:this._measureLine(t,e),this.__lineWidths[e]=i,i&&"justify"===this.textAlign&&(n=o.split(/\s+/),n.length>1&&(this.__lineWidths[e]=-1)),i},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},_measureLine:function(t,e){var i,n,o=this._textLines[e],s=t.measureText(o).width,r=0;return 0!==this.charSpacing&&(i=o.split("").length,r=(i-1)*this._getWidthOfCharSpacing()),n=s+r,n>0?n:0},_renderTextDecoration:function(t){if(this.textDecoration){var e=this.height/2,i=this,n=[];this.textDecoration.indexOf("underline")>-1&&n.push(.85),this.textDecoration.indexOf("line-through")>-1&&n.push(.43),this.textDecoration.indexOf("overline")>-1&&n.push(-.12),n.length>0&&function(n){var o,s,r,a,l,c,h,d=0;for(o=0,s=i._textLines.length;o<s;o++){for(l=i._getLineWidth(t,o),c=i._getLineLeftOffset(l),h=i._getHeightOfLine(t,o),r=0,a=n.length;r<a;r++)t.fillRect(i._getLeftOffset()+c,d+(i._fontSizeMult-1+n[r])*i.fontSize-e,l,i.fontSize/15);d+=h}}(n)}},_getFontDeclaration:function(){return[e.isLikelyNode?this.fontWeight:this.fontStyle,e.isLikelyNode?this.fontStyle:this.fontWeight,this.fontSize+"px",e.isLikelyNode?'"'+this.fontFamily+'"':this.fontFamily].join(" ")},render:function(t,e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&(this._setTextStyles(t),this._initDimensions(t)),this.callSuper("render",t,e)))},_splitTextIntoLines:function(){return this.text.split(this._reNewline)},toObject:function(t){var e=["text","fontSize","fontWeight","fontFamily","fontStyle","lineHeight","textDecoration","textAlign","textBackgroundColor","charSpacing"].concat(t);return this.callSuper("toObject",e)},toSVG:function(t){this.ctx||(this.ctx=e.util.createCanvasElement().getContext("2d"));var i=this._createBaseSVGMarkup(),n=this._getSVGLeftTopOffsets(this.ctx),o=this._getSVGTextAndBg(n.textTop,n.textLeft);return this._wrapSVGTextAndBg(i,o),t?t(i.join("")):i.join("")},_getSVGLeftTopOffsets:function(t){var e=this._getHeightOfLine(t,0);return{textLeft:-this.width/2+(this.group&&"path-group"===this.group.type?this.left:0),textTop:0+(this.group&&"path-group"===this.group.type?-this.top:0),lineTop:e}},_wrapSVGTextAndBg:function(t,e){var i=this.getSvgFilter(),n=""===i?"":' style="'+i+'"';t.push("\t<g ",this.getSvgId(),'transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"',n,">\n",e.textBgRects.join(""),"\t\t<text ",this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",this.textDecoration?'text-decoration="'+this.textDecoration+'" ':"",'style="',this.getSvgStyles(!0),'" >\n',e.textSpans.join(""),"\t\t</text>\n","\t</g>\n")},_getSVGTextAndBg:function(t,e){var i=[],n=[],o=0;this._setSVGBg(n);for(var s=0,r=this._textLines.length;s<r;s++)this.textBackgroundColor&&this._setSVGTextLineBg(n,s,e,t,o),this._setSVGTextLineText(s,i,o,e,t,n),o+=this._getHeightOfLine(this.ctx,s);return{textSpans:i,textBgRects:n}},_setSVGTextLineText:function(t,o,s,r,a){var l=this.fontSize*(this._fontSizeMult-this._fontSizeFraction)-a+s-this.height/2;return"justify"===this.textAlign?void this._setSVGTextLineJustifed(t,o,l,r):void o.push('\t\t\t<tspan x="',i(r+this._getLineLeftOffset(this._getLineWidth(this.ctx,t)),n),'" ','y="',i(l,n),'" ',this._getFillAttributes(this.fill),">",e.util.string.escapeXml(this._textLines[t]),"</tspan>\n")},_setSVGTextLineJustifed:function(t,o,s,r){var a=e.util.createCanvasElement().getContext("2d");this._setTextStyles(a);var l,c,h=this._textLines[t],d=h.split(/\s+/),u=this._getWidthOfWords(a,d.join("")),p=this.width-u,f=d.length-1,g=f>0?p/f:0,v=this._getFillAttributes(this.fill);for(r+=this._getLineLeftOffset(this._getLineWidth(a,t)),t=0,c=d.length;t<c;t++)l=d[t],o.push('\t\t\t<tspan x="',i(r,n),'" ','y="',i(s,n),'" ',v,">",e.util.string.escapeXml(l),"</tspan>\n"),r+=this._getWidthOfWords(a,l)+g},_setSVGTextLineBg:function(t,e,o,s,r){t.push("\t\t<rect ",this._getFillAttributes(this.textBackgroundColor),' x="',i(o+this._getLineLeftOffset(this._getLineWidth(this.ctx,e)),n),'" y="',i(r-this.height/2,n),'" width="',i(this._getLineWidth(this.ctx,e),n),'" height="',i(this._getHeightOfLine(this.ctx,e)/this.lineHeight,n),'"></rect>\n')},_setSVGBg:function(t){this.backgroundColor&&t.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',i(-this.width/2,n),'" y="',i(-this.height/2,n),'" width="',i(this.width,n),'" height="',i(this.height,n),'"></rect>\n')},_getFillAttributes:function(t){var i=t&&"string"==typeof t?new e.Color(t):"";return i&&i.getSource()&&1!==i.getAlpha()?'opacity="'+i.getAlpha()+'" fill="'+i.setAlpha(1).toRgb()+'"':'fill="'+t+'"'},_set:function(t,e){this.callSuper("_set",t,e),this._dimensionAffectingProps.indexOf(t)>-1&&(this._initDimensions(),this.setCoords())},complexity:function(){return 1}}),e.Text.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size text-decoration text-anchor".split(" ")),e.Text.DEFAULT_SVG_FONT_SIZE=16,e.Text.fromElement=function(t,i){if(!t)return null;var n=e.parseAttributes(t,e.Text.ATTRIBUTE_NAMES);i=e.util.object.extend(i?e.util.object.clone(i):{},n),i.top=i.top||0,i.left=i.left||0,"dx"in n&&(i.left+=n.dx),"dy"in n&&(i.top+=n.dy),"fontSize"in i||(i.fontSize=e.Text.DEFAULT_SVG_FONT_SIZE),i.originX||(i.originX="left");var o="";"textContent"in t?o=t.textContent:"firstChild"in t&&null!==t.firstChild&&"data"in t.firstChild&&null!==t.firstChild.data&&(o=t.firstChild.data),o=o.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var s=new e.Text(o,i),r=s.getHeight()/s.height,a=(s.height+s.strokeWidth)*s.lineHeight-s.height,l=a*r,c=s.getHeight()+l,h=0;return"left"===s.originX&&(h=s.getWidth()/2),"right"===s.originX&&(h=-s.getWidth()/2),s.set({left:s.getLeft()+h,top:s.getTop()-c/2+s.fontSize*(.18+s._fontSizeFraction)/s.lineHeight}),s},e.Text.fromObject=function(t,i,n){return e.Object._fromObject("Text",t,i,n,"text")},e.util.createAccessors(e.Text)}("undefined"!=typeof exports?exports:this),function(){var t=fabric.util.object.clone;fabric.IText=fabric.util.createClass(fabric.Text,fabric.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"#333",cursorDelay:1e3,cursorDuration:600,styles:null,caching:!0,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,
__widthOfSpace:[],initialize:function(t,e){this.styles=e?e.styles||{}:{},this.callSuper("initialize",t,e),this.initBehavior()},_clearCache:function(){this.callSuper("_clearCache"),this.__widthOfSpace=[]},isEmptyStyles:function(){if(!this.styles)return!0;var t=this.styles;for(var e in t)for(var i in t[e])for(var n in t[e][i])return!1;return!0},setSelectionStart:function(t){t=Math.max(t,0),this._updateAndFire("selectionStart",t)},setSelectionEnd:function(t){t=Math.min(t,this.text.length),this._updateAndFire("selectionEnd",t)},_updateAndFire:function(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},getSelectionStyles:function(t,e){if(2===arguments.length){for(var i=[],n=t;n<e;n++)i.push(this.getSelectionStyles(n));return i}var o=this.get2DCursorLocation(t);return this._getStyleDeclaration(o.lineIndex,o.charIndex)||{}},setSelectionStyles:function(t){if(this.selectionStart===this.selectionEnd)this._extendStyles(this.selectionStart,t);else for(var e=this.selectionStart;e<this.selectionEnd;e++)this._extendStyles(e,t);return this._forceClearCache=!0,this},_extendStyles:function(t,e){var i=this.get2DCursorLocation(t);this._getLineStyle(i.lineIndex)||this._setLineStyle(i.lineIndex,{}),this._getStyleDeclaration(i.lineIndex,i.charIndex)||this._setStyleDeclaration(i.lineIndex,i.charIndex,{}),fabric.util.object.extend(this._getStyleDeclaration(i.lineIndex,i.charIndex),e)},_initDimensions:function(t){t||this.clearContextTop(),this.callSuper("_initDimensions",t)},render:function(t,e){this.clearContextTop(),this.callSuper("render",t,e),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(t){this.callSuper("_render",t),this.ctx=t},clearContextTop:function(){if(this.active&&this.isEditing&&this.canvas&&this.canvas.contextTop){var t=this.canvas.contextTop;t.save(),t.transform.apply(t,this.canvas.viewportTransform),this.transform(t),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this._clearTextArea(t),t.restore()}},renderCursorOrSelection:function(){if(this.active&&this.isEditing){var t,e,i=this.text.split("");this.canvas&&this.canvas.contextTop?(e=this.canvas.contextTop,e.save(),e.transform.apply(e,this.canvas.viewportTransform),this.transform(e),this.transformMatrix&&e.transform.apply(e,this.transformMatrix),this._clearTextArea(e)):(e=this.ctx,e.save()),this.selectionStart===this.selectionEnd?(t=this._getCursorBoundaries(i,"cursor"),this.renderCursor(t,e)):(t=this._getCursorBoundaries(i,"selection"),this.renderSelection(i,t,e)),e.restore()}},_clearTextArea:function(t){var e=this.width+4,i=this.height+4;t.clearRect(-e/2,-i/2,e,i)},get2DCursorLocation:function(t){void 0===t&&(t=this.selectionStart);for(var e=this._textLines.length,i=0;i<e;i++){if(t<=this._textLines[i].length)return{lineIndex:i,charIndex:t};t-=this._textLines[i].length+1}return{lineIndex:i-1,charIndex:this._textLines[i-1].length<t?this._textLines[i-1].length:t}},getCurrentCharStyle:function(t,e){var i=this._getStyleDeclaration(t,0===e?0:e-1);return{fontSize:i&&i.fontSize||this.fontSize,fill:i&&i.fill||this.fill,textBackgroundColor:i&&i.textBackgroundColor||this.textBackgroundColor,textDecoration:i&&i.textDecoration||this.textDecoration,fontFamily:i&&i.fontFamily||this.fontFamily,fontWeight:i&&i.fontWeight||this.fontWeight,fontStyle:i&&i.fontStyle||this.fontStyle,stroke:i&&i.stroke||this.stroke,strokeWidth:i&&i.strokeWidth||this.strokeWidth}},getCurrentCharFontSize:function(t,e){var i=this._getStyleDeclaration(t,0===e?0:e-1);return i&&i.fontSize?i.fontSize:this.fontSize},getCurrentCharColor:function(t,e){var i=this._getStyleDeclaration(t,0===e?0:e-1);return i&&i.fill?i.fill:this.cursorColor},_getCursorBoundaries:function(t,e){var i=Math.round(this._getLeftOffset()),n=this._getTopOffset(),o=this._getCursorBoundariesOffsets(t,e);return{left:i,top:n,leftOffset:o.left+o.lineLeft,topOffset:o.top}},_getCursorBoundariesOffsets:function(t,e){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;for(var i,n=0,o=0,s=0,r=0,a=0,l=0;l<this.selectionStart;l++)"\n"===t[l]?(a=0,r+=this._getHeightOfLine(this.ctx,o),o++,s=0):(a+=this._getWidthOfChar(this.ctx,t[l],o,s),s++),n=this._getLineLeftOffset(this._getLineWidth(this.ctx,o));return"cursor"===e&&(r+=(1-this._fontSizeFraction)*this._getHeightOfLine(this.ctx,o)/this.lineHeight-this.getCurrentCharFontSize(o,s)*(1-this._fontSizeFraction)),0!==this.charSpacing&&s===this._textLines[o].length&&(a-=this._getWidthOfCharSpacing()),i={top:r,left:a>0?a:0,lineLeft:n},this.cursorOffsetCache=i,this.cursorOffsetCache},renderCursor:function(t,e){var i=this.get2DCursorLocation(),n=i.lineIndex,o=i.charIndex,s=this.getCurrentCharFontSize(n,o),r=t.leftOffset,a=this.scaleX*this.canvas.getZoom(),l=this.cursorWidth/a;e.fillStyle=this.getCurrentCharColor(n,o),e.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,e.fillRect(t.left+r-l/2,t.top+t.topOffset,l,s)},renderSelection:function(t,e,i){i.fillStyle=this.selectionColor;for(var n=this.get2DCursorLocation(this.selectionStart),o=this.get2DCursorLocation(this.selectionEnd),s=n.lineIndex,r=o.lineIndex,a=s;a<=r;a++){var l=this._getLineLeftOffset(this._getLineWidth(i,a))||0,c=this._getHeightOfLine(this.ctx,a),h=0,d=0,u=this._textLines[a];if(a===s){for(var p=0,f=u.length;p<f;p++)p>=n.charIndex&&(a!==r||p<o.charIndex)&&(d+=this._getWidthOfChar(i,u[p],a,p)),p<n.charIndex&&(l+=this._getWidthOfChar(i,u[p],a,p));p===u.length&&(d-=this._getWidthOfCharSpacing())}else if(a>s&&a<r)d+=this._getLineWidth(i,a)||5;else if(a===r){for(var g=0,v=o.charIndex;g<v;g++)d+=this._getWidthOfChar(i,u[g],a,g);o.charIndex===u.length&&(d-=this._getWidthOfCharSpacing())}h=c,(this.lineHeight<1||a===r&&this.lineHeight>1)&&(c/=this.lineHeight),i.fillRect(e.left+l,e.top+e.topOffset,d>0?d:0,c),e.topOffset+=h}},_renderChars:function(t,e,i,n,o,s,r){if(this.isEmptyStyles())return this._renderCharsFast(t,e,i,n,o);r=r||0;var a,l,c=this._getHeightOfLine(e,s),h="";e.save(),o-=c/this.lineHeight*this._fontSizeFraction;for(var d=r,u=i.length+r;d<=u;d++)a=a||this.getCurrentCharStyle(s,d),l=this.getCurrentCharStyle(s,d+1),(this._hasStyleChanged(a,l)||d===u)&&(this._renderChar(t,e,s,d-1,h,n,o,c),h="",a=l),h+=i[d-r];e.restore()},_renderCharsFast:function(t,e,i,n,o){"fillText"===t&&this.fill&&this.callSuper("_renderChars",t,e,i,n,o),"strokeText"===t&&(this.stroke&&this.strokeWidth>0||this.skipFillStrokeCheck)&&this.callSuper("_renderChars",t,e,i,n,o)},_renderChar:function(t,e,i,n,o,s,r,a){var l,c,h,d,u,p,f,g,v,m=this._getStyleDeclaration(i,n);if(m?(c=this._getHeightOfChar(e,o,i,n),d=m.stroke,h=m.fill,p=m.textDecoration):c=this.fontSize,d=(d||this.stroke)&&"strokeText"===t,h=(h||this.fill)&&"fillText"===t,m&&e.save(),l=this._applyCharStylesGetWidth(e,o,i,n,m||null),p=p||this.textDecoration,m&&m.textBackgroundColor&&this._removeShadow(e),0!==this.charSpacing){g=this._getWidthOfCharSpacing(),f=o.split(""),l=0;for(var b,y=0,w=f.length;y<w;y++)b=f[y],h&&e.fillText(b,s+l,r),d&&e.strokeText(b,s+l,r),v=e.measureText(b).width+g,l+=v>0?v:0}else h&&e.fillText(o,s,r),d&&e.strokeText(o,s,r);(p||""!==p)&&(u=this._fontSizeFraction*a/this.lineHeight,this._renderCharDecoration(e,p,s,r,u,l,c)),m&&e.restore(),e.translate(l,0)},_hasStyleChanged:function(t,e){return t.fill!==e.fill||t.fontSize!==e.fontSize||t.textBackgroundColor!==e.textBackgroundColor||t.textDecoration!==e.textDecoration||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth},_renderCharDecoration:function(t,e,i,n,o,s,r){if(e){var a,l,c=r/15,h={underline:n+r/10,"line-through":n-r*(this._fontSizeFraction+this._fontSizeMult-1)+c,overline:n-(this._fontSizeMult-this._fontSizeFraction)*r},d=["underline","line-through","overline"];for(a=0;a<d.length;a++)l=d[a],e.indexOf(l)>-1&&t.fillRect(i,h[l],s,c)}},_renderTextLine:function(t,e,i,n,o,s){this.isEmptyStyles()||(o+=this.fontSize*(this._fontSizeFraction+.03)),this.callSuper("_renderTextLine",t,e,i,n,o,s)},_renderTextDecoration:function(t){if(this.isEmptyStyles())return this.callSuper("_renderTextDecoration",t)},_renderTextLinesBackground:function(t){this.callSuper("_renderTextLinesBackground",t);var e,i,n,o,s,r,a,l,c,h,d=0,u=this._getLeftOffset(),p=this._getTopOffset(),f="";t.save();for(var g=0,v=this._textLines.length;g<v;g++)if(e=this._getHeightOfLine(t,g),""!==(o=this._textLines[g])&&this.styles&&this._getLineStyle(g)){i=this._getLineWidth(t,g),n=this._getLineLeftOffset(i),a=l=c=h=0;for(var m=0,b=o.length;m<b;m++)r=this._getStyleDeclaration(g,m)||{},f!==r.textBackgroundColor&&(h&&c&&(t.fillStyle=f,t.fillRect(a,l,c,h)),a=l=c=h=0,f=r.textBackgroundColor||""),r.textBackgroundColor?(s=o[m],f===r.textBackgroundColor&&(f=r.textBackgroundColor,a||(a=u+n+this._getWidthOfCharsAt(t,g,m)),l=p+d,c+=this._getWidthOfChar(t,s,g,m),h=e/this.lineHeight)):f="";h&&c&&(t.fillStyle=f,t.fillRect(a,l,c,h),a=l=c=h=0),d+=e}else d+=e;t.restore()},_getCacheProp:function(t,e){return t+e.fontSize+e.fontWeight+e.fontStyle},_getFontCache:function(t){return fabric.charWidthsCache[t]||(fabric.charWidthsCache[t]={}),fabric.charWidthsCache[t]},_applyCharStylesGetWidth:function(e,i,n,o,s){var r,a,l,c=s||this._getStyleDeclaration(n,o),h=t(c);if(this._applyFontStyles(h),l=this._getFontCache(h.fontFamily),a=this._getCacheProp(i,h),!c&&l[a]&&this.caching)return l[a];"string"==typeof h.shadow&&(h.shadow=new fabric.Shadow(h.shadow));var d=h.fill||this.fill;return e.fillStyle=d.toLive?d.toLive(e,this):d,h.stroke&&(e.strokeStyle=h.stroke&&h.stroke.toLive?h.stroke.toLive(e,this):h.stroke),e.lineWidth=h.strokeWidth||this.strokeWidth,e.font=this._getFontDeclaration.call(h),h.shadow&&(h.scaleX=this.scaleX,h.scaleY=this.scaleY,h.canvas=this.canvas,h.getObjectScaling=this.getObjectScaling,this._setShadow.call(h,e)),this.caching&&l[a]?l[a]:(r=e.measureText(i).width,this.caching&&(l[a]=r),r)},_applyFontStyles:function(t){t.fontFamily||(t.fontFamily=this.fontFamily),t.fontSize||(t.fontSize=this.fontSize),t.fontWeight||(t.fontWeight=this.fontWeight),t.fontStyle||(t.fontStyle=this.fontStyle)},_getStyleDeclaration:function(e,i,n){return n?this.styles[e]&&this.styles[e][i]?t(this.styles[e][i]):{}:this.styles[e]&&this.styles[e][i]?this.styles[e][i]:null},_setStyleDeclaration:function(t,e,i){this.styles[t][e]=i},_deleteStyleDeclaration:function(t,e){delete this.styles[t][e]},_getLineStyle:function(t){return this.styles[t]},_setLineStyle:function(t,e){this.styles[t]=e},_deleteLineStyle:function(t){delete this.styles[t]},_getWidthOfChar:function(t,e,i,n){if(!this._isMeasuring&&"justify"===this.textAlign&&this._reSpacesAndTabs.test(e))return this._getWidthOfSpace(t,i);t.save();var o=this._applyCharStylesGetWidth(t,e,i,n);return 0!==this.charSpacing&&(o+=this._getWidthOfCharSpacing()),t.restore(),o>0?o:0},_getHeightOfChar:function(t,e,i){var n=this._getStyleDeclaration(e,i);return n&&n.fontSize?n.fontSize:this.fontSize},_getWidthOfCharsAt:function(t,e,i){var n,o,s=0;for(n=0;n<i;n++)o=this._textLines[e][n],s+=this._getWidthOfChar(t,o,e,n);return s},_measureLine:function(t,e){this._isMeasuring=!0;var i=this._getWidthOfCharsAt(t,e,this._textLines[e].length);return 0!==this.charSpacing&&(i-=this._getWidthOfCharSpacing()),this._isMeasuring=!1,i>0?i:0},_getWidthOfSpace:function(t,e){if(this.__widthOfSpace[e])return this.__widthOfSpace[e];var i=this._textLines[e],n=this._getWidthOfWords(t,i,e,0),o=this.width-n,s=i.length-i.replace(this._reSpacesAndTabs,"").length,r=Math.max(o/s,t.measureText(" ").width);return this.__widthOfSpace[e]=r,r},_getWidthOfWords:function(t,e,i,n){for(var o=0,s=0;s<e.length;s++){var r=e[s];r.match(/\s/)||(o+=this._getWidthOfChar(t,r,i,s+n))}return o},_getHeightOfLine:function(t,e){if(this.__lineHeights[e])return this.__lineHeights[e];for(var i=this._textLines[e],n=this._getHeightOfChar(t,e,0),o=1,s=i.length;o<s;o++){var r=this._getHeightOfChar(t,e,o);r>n&&(n=r)}return this.__lineHeights[e]=n*this.lineHeight*this._fontSizeMult,this.__lineHeights[e]},_getTextHeight:function(t){for(var e,i=0,n=0,o=this._textLines.length;n<o;n++)e=this._getHeightOfLine(t,n),i+=n===o-1?e/this.lineHeight:e;return i},toObject:function(e){return fabric.util.object.extend(this.callSuper("toObject",e),{styles:t(this.styles,!0)})}}),fabric.IText.fromObject=function(t,e,i){return fabric.Object._fromObject("IText",t,e,i,"text")}}(),function(){var t=fabric.util.object.clone;fabric.util.object.extend(fabric.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var t=this;this.on("added",function(){var e=t.canvas;e&&(e._hasITextHandlers||(e._hasITextHandlers=!0,t._initCanvasHandlers(e)),e._iTextInstances=e._iTextInstances||[],e._iTextInstances.push(t))})},initRemovedHandler:function(){var t=this;this.on("removed",function(){var e=t.canvas;e&&(e._iTextInstances=e._iTextInstances||[],fabric.util.removeFromArray(e._iTextInstances,t),0===e._iTextInstances.length&&(e._hasITextHandlers=!1,t._removeCanvasHandlers(e)))})},_initCanvasHandlers:function(t){t._mouseUpITextHandler=function(){t._iTextInstances&&t._iTextInstances.forEach(function(t){t.__isMousedown=!1})}.bind(this),t.on("mouse:up",t._mouseUpITextHandler)},_removeCanvasHandlers:function(t){t.off("mouse:up",t._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(t,e,i,n){var o;return o={isAborted:!1,abort:function(){this.isAborted=!0}},t.animate("_currentCursorOpacity",e,{duration:i,onComplete:function(){o.isAborted||t[n]()},onChange:function(){t.canvas&&t.selectionStart===t.selectionEnd&&t.renderCursorOrSelection()},abort:function(){return o.isAborted}}),o},_onTickComplete:function(){var t=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){t._currentTickCompleteState=t._animateCursor(t,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(t){var e=this,i=t?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){e._tick()},i)},abortCursorAnimation:function(){var t=this._currentTickState||this._currentTickCompleteState;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,t&&this.canvas&&this.canvas.clearContext(this.canvas.contextTop||this.ctx)},selectAll:function(){this.selectionStart=0,this.selectionEnd=this.text.length,this._fireSelectionChanged(),this._updateTextarea()},getSelectedText:function(){return this.text.slice(this.selectionStart,this.selectionEnd)},findWordBoundaryLeft:function(t){var e=0,i=t-1;if(this._reSpace.test(this.text.charAt(i)))for(;this._reSpace.test(this.text.charAt(i));)e++,i--;for(;/\S/.test(this.text.charAt(i))&&i>-1;)e++,i--;return t-e},findWordBoundaryRight:function(t){var e=0,i=t;if(this._reSpace.test(this.text.charAt(i)))for(;this._reSpace.test(this.text.charAt(i));)e++,i++;for(;/\S/.test(this.text.charAt(i))&&i<this.text.length;)e++,i++;return t+e},findLineBoundaryLeft:function(t){for(var e=0,i=t-1;!/\n/.test(this.text.charAt(i))&&i>-1;)e++,i--;return t-e},findLineBoundaryRight:function(t){for(var e=0,i=t;!/\n/.test(this.text.charAt(i))&&i<this.text.length;)e++,i++;return t+e},getNumNewLinesInSelectedText:function(){for(var t=this.getSelectedText(),e=0,i=0,n=t.length;i<n;i++)"\n"===t[i]&&e++;return e},searchWordBoundary:function(t,e){for(var i=this._reSpace.test(this.text.charAt(t))?t-1:t,n=this.text.charAt(i),o=/[ \n\.,;!\?\-]/;!o.test(n)&&i>0&&i<this.text.length;)i+=e,n=this.text.charAt(i);return o.test(n)&&"\n"!==n&&(i+=1===e?0:1),i},selectWord:function(t){t=t||this.selectionStart;var e=this.searchWordBoundary(t,-1),i=this.searchWordBoundary(t,1);this.selectionStart=e,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(t){t=t||this.selectionStart;var e=this.findLineBoundaryLeft(t),i=this.findLineBoundaryRight(t);this.selectionStart=e,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea()},enterEditing:function(t){if(!this.isEditing&&this.editable)return this.canvas&&this.exitEditingOnOthers(this.canvas),this.isEditing=!0,this.selected=!0,this.initHiddenTextarea(t),this.hiddenTextarea.focus(),this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.renderAll(),this):this},exitEditingOnOthers:function(t){t._iTextInstances&&t._iTextInstances.forEach(function(t){t.selected=!1,t.isEditing&&t.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(t){if(this.__isMousedown&&this.isEditing){var e=this.getSelectionStartFromPointer(t.e),i=this.selectionStart,n=this.selectionEnd;(e===this.__selectionStartOnMouseDown&&i!==n||i!==e&&n!==e)&&(e>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=e):(this.selectionStart=e,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===i&&this.selectionEnd===n||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},_updateTextarea:function(){if(this.hiddenTextarea&&!this.inCompositionMode&&(this.cursorOffsetCache={},this.hiddenTextarea.value=this.text,this.hiddenTextarea.selectionStart=this.selectionStart,this.hiddenTextarea.selectionEnd=this.selectionEnd,this.selectionStart===this.selectionEnd)){var t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top,this.hiddenTextarea.style.fontSize=t.fontSize}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var t=this.text.split(""),e=this._getCursorBoundaries(t,"cursor"),i=this.get2DCursorLocation(),n=i.lineIndex,o=i.charIndex,s=this.getCurrentCharFontSize(n,o),r=e.leftOffset,a=this.calcTransformMatrix(),l={x:e.left+r,y:e.top+e.topOffset+s},c=this.canvas.upperCanvasEl,h=c.width-s,d=c.height-s;return l=fabric.util.transformPoint(l,a),l=fabric.util.transformPoint(l,this.canvas.viewportTransform),l.x<0&&(l.x=0),l.x>h&&(l.x=h),l.y<0&&(l.y=0),l.y>d&&(l.y=d),l.x+=this.canvas._offset.left,l.y+=this.canvas._offset.top,{left:l.x+"px",top:l.y+"px",fontSize:s}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.overCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var t=this._textBeforeEdit!==this.text;return this.selected=!1,this.isEditing=!1,this.selectable=!0,this.selectionEnd=this.selectionStart,this.hiddenTextarea&&(this.hiddenTextarea.blur&&this.hiddenTextarea.blur(),this.canvas&&this.hiddenTextarea.parentNode.removeChild(this.hiddenTextarea),this.hiddenTextarea=null),this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this.fire("editing:exited"),t&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var t in this.styles)this._textLines[t]||delete this.styles[t]},_removeCharsFromTo:function(t,e){for(;e!==t;)this._removeSingleCharAndStyle(t+1),e--;this.selectionStart=t,this.selectionEnd=t},_removeSingleCharAndStyle:function(t){var e="\n"===this.text[t-1],i=e?t:t-1;this.removeStyleObject(e,i),this.text=this.text.slice(0,t-1)+this.text.slice(t),this._textLines=this._splitTextIntoLines()},insertChars:function(t,e){var i;if(this.selectionEnd-this.selectionStart>1&&this._removeCharsFromTo(this.selectionStart,this.selectionEnd),!e&&this.isEmptyStyles())return void this.insertChar(t,!1);for(var n=0,o=t.length;n<o;n++)e&&(i=fabric.util.object.clone(fabric.copiedTextStyle[n],!0)),this.insertChar(t[n],n<o-1,i)},insertChar:function(t,e,i){var n="\n"===this.text[this.selectionStart];this.text=this.text.slice(0,this.selectionStart)+t+this.text.slice(this.selectionEnd),this._textLines=this._splitTextIntoLines(),this.insertStyleObjects(t,n,i),this.selectionStart+=t.length,this.selectionEnd=this.selectionStart,e||(this._updateTextarea(),this.setCoords(),this._fireSelectionChanged(),this.fire("changed"),this.restartCursorIfNeeded(),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.renderAll()))},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(e,i,n){this.shiftLineStyles(e,1);var o={},s={};if(this.styles[e]&&this.styles[e][i-1]&&(o=this.styles[e][i-1]),n&&o)s[0]=t(o),this.styles[e+1]=s;else{var r=!1;for(var a in this.styles[e]){var l=parseInt(a,10);l>=i&&(r=!0,s[l-i]=this.styles[e][a],delete this.styles[e][a])}r&&(this.styles[e+1]=s)}this._forceClearCache=!0},insertCharStyleObject:function(e,i,n){var o=this.styles[e],s=t(o);0!==i||n||(i=1);for(var r in s){var a=parseInt(r,10);a>=i&&(o[a+1]=s[a],s[a-1]||delete o[a])}var l=n||t(o[i-1]);l&&(this.styles[e][i]=l),this._forceClearCache=!0},insertStyleObjects:function(t,e,i){var n=this.get2DCursorLocation(),o=n.lineIndex,s=n.charIndex;this._getLineStyle(o)||this._setLineStyle(o,{}),"\n"===t?this.insertNewlineStyleObject(o,s,e):this.insertCharStyleObject(o,s,i)},shiftLineStyles:function(e,i){var n=t(this.styles);for(var o in n){var s=parseInt(o,10);s<=e&&delete n[s]}for(var o in this.styles){var s=parseInt(o,10);s>e&&(this.styles[s+i]=n[s],n[s-i]||delete this.styles[s])}},removeStyleObject:function(t,e){var i=this.get2DCursorLocation(e),n=i.lineIndex,o=i.charIndex;this._removeStyleObject(t,i,n,o)},_getTextOnPreviousLine:function(t){return this._textLines[t-1]},_removeStyleObject:function(e,i,n,o){if(e){var s=this._getTextOnPreviousLine(i.lineIndex),r=s?s.length:0;this.styles[n-1]||(this.styles[n-1]={});for(o in this.styles[n])this.styles[n-1][parseInt(o,10)+r]=this.styles[n][o];this.shiftLineStyles(i.lineIndex,-1)}else{var a=this.styles[n];a&&delete a[o];var l=t(a);for(var c in l){var h=parseInt(c,10);h>=o&&0!==h&&(a[h-1]=l[h],delete a[h])}}},insertNewline:function(){this.insertChars("\n")},setSelectionStartEndWithShift:function(t,e,i){i<=t?(e===t?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=t),this.selectionStart=i):i>t&&i<e?"right"===this._selectionDirection?this.selectionEnd=i:this.selectionStart=i:(e===t?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=e),this.selectionEnd=i)},setSelectionInBoundaries:function(){var t=this.text.length;this.selectionStart>t?this.selectionStart=t:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>t?this.selectionEnd=t:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),fabric.util.object.extend(fabric.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown.bind(this))},onMouseDown:function(t){this.__newClickTime=+new Date;var e=this.canvas.getPointer(t.e);this.isTripleClick(e)?(this.fire("tripleclick",t),this._stopEvent(t.e)):this.isDoubleClick(e)&&(this.fire("dblclick",t),this._stopEvent(t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=e,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected},isDoubleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y&&this.__lastIsEditing},isTripleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y},_stopEvent:function(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},initClicks:function(){this.on("dblclick",function(t){this.selectWord(this.getSelectionStartFromPointer(t.e))}),this.on("tripleclick",function(t){this.selectLine(this.getSelectionStartFromPointer(t.e))})},initMousedownHandler:function(){this.on("mousedown",function(t){if(this.editable){var e=this.canvas.getPointer(t.e);this.__mousedownX=e.x,this.__mousedownY=e.y,this.__isMousedown=!0,this.selected&&this.setCursorByClick(t.e),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection())}})},_isObjectMoved:function(t){var e=this.canvas.getPointer(t);return this.__mousedownX!==e.x||this.__mousedownY!==e.y},initMouseupHandler:function(){this.on("mouseup",function(t){this.__isMousedown=!1,this.editable&&!this._isObjectMoved(t.e)&&(this.__lastSelected&&!this.__corner&&(this.enterEditing(t.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()),this.selected=!0)})},setCursorByClick:function(t){var e=this.getSelectionStartFromPointer(t),i=this.selectionStart,n=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(i,n,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(t){for(var e,i=this.getLocalPointer(t),n=0,o=0,s=0,r=0,a=0,l=this._textLines.length;a<l;a++){e=this._textLines[a],s+=this._getHeightOfLine(this.ctx,a)*this.scaleY;var c=this._getLineWidth(this.ctx,a);o=this._getLineLeftOffset(c)*this.scaleX;for(var h=0,d=e.length;h<d;h++){if(n=o,o+=this._getWidthOfChar(this.ctx,e[h],a,this.flipX?d-h:h)*this.scaleX,!(s<=i.y||o<=i.x))return this._getNewSelectionStartFromOffset(i,n,o,r+a,d);r++}if(i.y<s)return this._getNewSelectionStartFromOffset(i,n,o,r+a-1,d)}return this.text.length},_getNewSelectionStartFromOffset:function(t,e,i,n,o){var s=t.x-e,r=i-t.x,a=r>s?0:1,l=n+a;return this.flipX&&(l=o-l),l>this.text.length&&(l=this.text.length),l}}),fabric.util.object.extend(fabric.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=fabric.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off");var t=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="white-space: nowrap; position: absolute; top: "+t.top+"; left: "+t.left+"; opacity: 0; width: 1px; height: 1px; z-index: -999;",fabric.document.body.appendChild(this.hiddenTextarea),fabric.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),fabric.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),fabric.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),fabric.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),fabric.util.addListener(this.hiddenTextarea,"cut",this.cut.bind(this)),fabric.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(fabric.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},_keysMap:{8:"removeChars",9:"exitEditing",27:"exitEditing",13:"insertNewline",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown",46:"forwardDelete"},_ctrlKeysMapUp:{67:"copy",88:"cut"},_ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(t){if(this.isEditing){if(t.keyCode in this._keysMap)this[this._keysMap[t.keyCode]](t);else{if(!(t.keyCode in this._ctrlKeysMapDown&&(t.ctrlKey||t.metaKey)))return;this[this._ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),t.keyCode>=33&&t.keyCode<=40?(this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.renderAll()}},onKeyUp:function(t){return!this.isEditing||this._copyDone?void(this._copyDone=!1):void(t.keyCode in this._ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this._ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.renderAll()))},onInput:function(t){if(this.isEditing&&!this.inCompositionMode){var e,i,n,o=this.selectionStart||0,s=this.selectionEnd||0,r=this.text.length,a=this.hiddenTextarea.value.length;a>r?(n="left"===this._selectionDirection?s:o,e=a-r,i=this.hiddenTextarea.value.slice(n,n+e)):(e=a-r+s-o,i=this.hiddenTextarea.value.slice(o,o+e)),this.insertChars(i),t.stopPropagation()}},onCompositionStart:function(){this.inCompositionMode=!0,this.prevCompositionLength=0,this.compositionStart=this.selectionStart},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(t){var e=t.data;this.selectionStart=this.compositionStart,this.selectionEnd=this.selectionEnd===this.selectionStart?this.compositionStart+this.prevCompositionLength:this.selectionEnd,this.insertChars(e,!1),this.prevCompositionLength=e.length},forwardDelete:function(t){if(this.selectionStart===this.selectionEnd){if(this.selectionStart===this.text.length)return;this.moveCursorRight(t)}this.removeChars(t)},copy:function(t){if(this.selectionStart!==this.selectionEnd){var e=this.getSelectedText(),i=this._getClipboardData(t);i&&i.setData("text",e),fabric.copiedText=e,fabric.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd),t.stopImmediatePropagation(),t.preventDefault(),this._copyDone=!0}},paste:function(t){var e=null,i=this._getClipboardData(t),n=!0;i?(e=i.getData("text").replace(/\r/g,""),fabric.copiedTextStyle&&fabric.copiedText===e||(n=!1)):e=fabric.copiedText,e&&this.insertChars(e,n),t.stopImmediatePropagation(),t.preventDefault()},cut:function(t){this.selectionStart!==this.selectionEnd&&(this.copy(t),this.removeChars(t))},_getClipboardData:function(t){return t&&t.clipboardData||fabric.window.clipboardData},_getWidthBeforeCursor:function(t,e){for(var i,n=this._textLines[t].slice(0,e),o=this._getLineWidth(this.ctx,t),s=this._getLineLeftOffset(o),r=0,a=n.length;r<a;r++)i=n[r],s+=this._getWidthOfChar(this.ctx,i,t,r);return s},getDownCursorOffset:function(t,e){
var i=this._getSelectionForOffset(t,e),n=this.get2DCursorLocation(i),o=n.lineIndex;if(o===this._textLines.length-1||t.metaKey||34===t.keyCode)return this.text.length-i;var s=n.charIndex,r=this._getWidthBeforeCursor(o,s),a=this._getIndexOnLine(o+1,r);return this._textLines[o].slice(s).length+a+2},_getSelectionForOffset:function(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(t,e){var i=this._getSelectionForOffset(t,e),n=this.get2DCursorLocation(i),o=n.lineIndex;if(0===o||t.metaKey||33===t.keyCode)return-i;var s=n.charIndex,r=this._getWidthBeforeCursor(o,s),a=this._getIndexOnLine(o-1,r),l=this._textLines[o].slice(0,s);return-this._textLines[o-1].length+a-l.length},_getIndexOnLine:function(t,e){for(var i,n=this._getLineWidth(this.ctx,t),o=this._textLines[t],s=this._getLineLeftOffset(n),r=s,a=0,l=0,c=o.length;l<c;l++){var h=o[l],d=this._getWidthOfChar(this.ctx,h,t,l);if((r+=d)>e){i=!0;var u=r-d,p=r,f=Math.abs(u-e);a=Math.abs(p-e)<f?l:l-1;break}}return i||(a=o.length-1),a},moveCursorDown:function(t){this.selectionStart>=this.text.length&&this.selectionEnd>=this.text.length||this._moveCursorUpOrDown("Down",t)},moveCursorUp:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",t)},_moveCursorUpOrDown:function(t,e){var i="get"+t+"CursorOffset",n=this[i](e,"right"===this._selectionDirection);e.shiftKey?this.moveCursorWithShift(n):this.moveCursorWithoutShift(n),0!==n&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(t){var e="left"===this._selectionDirection?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e),0!==t},moveCursorWithoutShift:function(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),0!==t},moveCursorLeft:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",t)},_move:function(t,e,i){var n;if(t.altKey)n=this["findWordBoundary"+i](this[e]);else{if(!t.metaKey&&35!==t.keyCode&&36!==t.keyCode)return this[e]+="Left"===i?-1:1,!0;n=this["findLineBoundary"+i](this[e])}if(void 0!==typeof n&&this[e]!==n)return this[e]=n,!0},_moveLeft:function(t,e){return this._move(t,e,"Left")},_moveRight:function(t,e){return this._move(t,e,"Right")},moveCursorLeftWithoutShift:function(t){var e=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(e=this._moveLeft(t,"selectionStart")),this.selectionEnd=this.selectionStart,e},moveCursorLeftWithShift:function(t){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(t,"selectionStart")):void 0},moveCursorRight:function(t){this.selectionStart>=this.text.length&&this.selectionEnd>=this.text.length||this._moveCursorLeftOrRight("Right",t)},_moveCursorLeftOrRight:function(t,e){var i="moveCursor"+t+"With";this._currentCursorOpacity=1,i+=e.shiftKey?"Shift":"outShift",this[i](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(t){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):this.selectionEnd!==this.text.length?(this._selectionDirection="right",this._moveRight(t,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(t){var e=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(e=this._moveRight(t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e},removeChars:function(t){this.selectionStart===this.selectionEnd?this._removeCharsNearCursor(t):this._removeCharsFromTo(this.selectionStart,this.selectionEnd),this.set("dirty",!0),this.setSelectionEnd(this.selectionStart),this._removeExtraneousStyles(),this.canvas&&this.canvas.renderAll(),this.setCoords(),this.fire("changed"),this.canvas&&this.canvas.fire("text:changed",{target:this})},_removeCharsNearCursor:function(t){if(0!==this.selectionStart)if(t.metaKey){var e=this.findLineBoundaryLeft(this.selectionStart);this._removeCharsFromTo(e,this.selectionStart),this.setSelectionStart(e)}else if(t.altKey){var i=this.findWordBoundaryLeft(this.selectionStart);this._removeCharsFromTo(i,this.selectionStart),this.setSelectionStart(i)}else this._removeSingleCharAndStyle(this.selectionStart),this.setSelectionStart(this.selectionStart-1)}}),function(){var t=fabric.util.toFixed,e=fabric.Object.NUM_FRACTION_DIGITS;fabric.util.object.extend(fabric.IText.prototype,{_setSVGTextLineText:function(t,e,i,n,o,s){this._getLineStyle(t)?this._setSVGTextLineChars(t,e,i,n,s):fabric.Text.prototype._setSVGTextLineText.call(this,t,e,i,n,o)},_setSVGTextLineChars:function(t,e,i,n,o){for(var s=this._textLines[t],r=0,a=this._getLineLeftOffset(this._getLineWidth(this.ctx,t))-this.width/2,l=this._getSVGLineTopOffset(t),c=this._getHeightOfLine(this.ctx,t),h=0,d=s.length;h<d;h++){var u=this._getStyleDeclaration(t,h)||{};e.push(this._createTextCharSpan(s[h],u,a,l.lineTop+l.offset,r));var p=this._getWidthOfChar(this.ctx,s[h],t,h);u.textBackgroundColor&&o.push(this._createTextCharBg(u,a,l.lineTop,c,p,r)),r+=p}},_getSVGLineTopOffset:function(t){for(var e=0,i=0,n=0;n<t;n++)e+=this._getHeightOfLine(this.ctx,n);return i=this._getHeightOfLine(this.ctx,n),{lineTop:e,offset:(this._fontSizeMult-this._fontSizeFraction)*i/(this.lineHeight*this._fontSizeMult)}},_createTextCharBg:function(i,n,o,s,r,a){return['\t\t<rect fill="',i.textBackgroundColor,'" x="',t(n+a,e),'" y="',t(o-this.height/2,e),'" width="',t(r,e),'" height="',t(s/this.lineHeight,e),'"></rect>\n'].join("")},_createTextCharSpan:function(i,n,o,s,r){var a=this.getSvgStyles.call(fabric.util.object.extend({visible:!0,fill:this.fill,stroke:this.stroke,type:"text",getSvgFilter:fabric.Object.prototype.getSvgFilter},n));return['\t\t\t<tspan x="',t(o+r,e),'" y="',t(s-this.height/2,e),'" ',n.fontFamily?'font-family="'+n.fontFamily.replace(/"/g,"'")+'" ':"",n.fontSize?'font-size="'+n.fontSize+'" ':"",n.fontStyle?'font-style="'+n.fontStyle+'" ':"",n.fontWeight?'font-weight="'+n.fontWeight+'" ':"",n.textDecoration?'text-decoration="'+n.textDecoration+'" ':"",'style="',a,'">',fabric.util.string.escapeXml(i),"</tspan>\n"].join("")}})}(),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Textbox=e.util.createClass(e.IText,e.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingY:!0,lockScalingFlip:!0,noScaleCache:!1,initialize:function(t,i){this.callSuper("initialize",t,i),this.setControlsVisibility(e.Textbox.getTextboxControlVisibility()),this.ctx=this.objectCaching?this._cacheContext:e.util.createCanvasElement().getContext("2d"),this._dimensionAffectingProps.push("width")},_initDimensions:function(t){this.__skipDimension||(t||(t=e.util.createCanvasElement().getContext("2d"),this._setTextStyles(t),this.clearContextTop()),this.dynamicMinWidth=0,this._textLines=this._splitTextIntoLines(t),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this._clearCache(),this.height=this._getTextHeight(t))},_generateStyleMap:function(){for(var t=0,e=0,i=0,n={},o=0;o<this._textLines.length;o++)"\n"===this.text[i]&&o>0?(e=0,i++,t++):" "===this.text[i]&&o>0&&(e++,i++),n[o]={line:t,offset:e},i+=this._textLines[o].length,e+=this._textLines[o].length;return n},_getStyleDeclaration:function(t,e,i){if(this._styleMap){var n=this._styleMap[t];if(!n)return i?{}:null;t=n.line,e=n.offset+e}return this.callSuper("_getStyleDeclaration",t,e,i)},_setStyleDeclaration:function(t,e,i){var n=this._styleMap[t];t=n.line,e=n.offset+e,this.styles[t][e]=i},_deleteStyleDeclaration:function(t,e){var i=this._styleMap[t];t=i.line,e=i.offset+e,delete this.styles[t][e]},_getLineStyle:function(t){var e=this._styleMap[t];return this.styles[e.line]},_setLineStyle:function(t,e){var i=this._styleMap[t];this.styles[i.line]=e},_deleteLineStyle:function(t){var e=this._styleMap[t];delete this.styles[e.line]},_wrapText:function(t,e){var i,n=e.split(this._reNewline),o=[];for(i=0;i<n.length;i++)o=o.concat(this._wrapLine(t,n[i],i));return o},_measureText:function(t,e,i,n){var o=0;n=n||0;for(var s=0,r=e.length;s<r;s++)o+=this._getWidthOfChar(t,e[s],i,s+n);return o},_wrapLine:function(t,e,i){for(var n=0,o=[],s="",r=e.split(" "),a="",l=0,c=0,h=0,d=0,u=!0,p=this._getWidthOfCharSpacing(),f=0;f<r.length;f++)a=r[f],c=this._measureText(t,a,i,l),l+=a.length,n+=h+c-p,n>=this.width&&!u?(o.push(s),s="",n=c,u=!0):n+=p,u||(s+=" "),s+=a,h=this._measureText(t," ",i,l),l++,u=!1,c>d&&(d=c);return f&&o.push(s),d>this.dynamicMinWidth&&(this.dynamicMinWidth=d-p),o},_splitTextIntoLines:function(t){t=t||this.ctx;var e=this.textAlign;this._styleMap=null,t.save(),this._setTextStyles(t),this.textAlign="left";var i=this._wrapText(t,this.text);return this.textAlign=e,t.restore(),this._textLines=i,this._styleMap=this._generateStyleMap(),i},setOnGroup:function(t,e){"scaleX"===t&&(this.set("scaleX",Math.abs(1/e)),this.set("width",this.get("width")*e/(void 0===this.__oldScaleX?1:this.__oldScaleX)),this.__oldScaleX=e)},get2DCursorLocation:function(t){void 0===t&&(t=this.selectionStart);for(var e=this._textLines.length,i=0,n=0;n<e;n++){var o=this._textLines[n],s=o.length;if(t<=i+s)return{lineIndex:n,charIndex:t-i};i+=s,"\n"!==this.text[i]&&" "!==this.text[i]||i++}return{lineIndex:e-1,charIndex:this._textLines[e-1].length}},_getCursorBoundariesOffsets:function(t,e){for(var i=0,n=0,o=this.get2DCursorLocation(),s=this._textLines[o.lineIndex].split(""),r=this._getLineLeftOffset(this._getLineWidth(this.ctx,o.lineIndex)),a=0;a<o.charIndex;a++)n+=this._getWidthOfChar(this.ctx,s[a],o.lineIndex,a);for(a=0;a<o.lineIndex;a++)i+=this._getHeightOfLine(this.ctx,a);return"cursor"===e&&(i+=(1-this._fontSizeFraction)*this._getHeightOfLine(this.ctx,o.lineIndex)/this.lineHeight-this.getCurrentCharFontSize(o.lineIndex,o.charIndex)*(1-this._fontSizeFraction)),{top:i,left:n,lineLeft:r}},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},toObject:function(t){return this.callSuper("toObject",["minWidth"].concat(t))}}),e.Textbox.fromObject=function(t,i,n){return e.Object._fromObject("Textbox",t,i,n,"text")},e.Textbox.getTextboxControlVisibility=function(){return{tl:!1,tr:!1,br:!1,bl:!1,ml:!0,mt:!1,mr:!0,mb:!1,mtr:!0}}}("undefined"!=typeof exports?exports:this),function(){var t=fabric.Canvas.prototype._setObjectScale;fabric.Canvas.prototype._setObjectScale=function(e,i,n,o,s,r,a){var l=i.target;if(!(l instanceof fabric.Textbox))return t.call(fabric.Canvas.prototype,e,i,n,o,s,r,a);var c=l.width*(e.x/i.scaleX/(l.width+l.strokeWidth));return c>=l.getMinWidth()?(l.set("width",c),!0):void 0},fabric.Group.prototype._refreshControlsVisibility=function(){if(void 0!==fabric.Textbox)for(var t=this._objects.length;t--;)if(this._objects[t]instanceof fabric.Textbox)return void this.setControlsVisibility(fabric.Textbox.getTextboxControlVisibility())},fabric.util.object.extend(fabric.Textbox.prototype,{_removeExtraneousStyles:function(){for(var t in this._styleMap)this._textLines[t]||delete this.styles[this._styleMap[t].line]},insertCharStyleObject:function(t,e,i){var n=this._styleMap[t];t=n.line,e=n.offset+e,fabric.IText.prototype.insertCharStyleObject.apply(this,[t,e,i])},insertNewlineStyleObject:function(t,e,i){var n=this._styleMap[t];t=n.line,e=n.offset+e,fabric.IText.prototype.insertNewlineStyleObject.apply(this,[t,e,i])},shiftLineStyles:function(t,e){t=this._styleMap[t].line,fabric.IText.prototype.shiftLineStyles.call(this,t,e)},_getTextOnPreviousLine:function(t){for(var e=this._textLines[t-1];this._styleMap[t-2]&&this._styleMap[t-2].line===this._styleMap[t-1].line;)e=this._textLines[t-2]+e,t--;return e},removeStyleObject:function(t,e){var i=this.get2DCursorLocation(e),n=this._styleMap[i.lineIndex],o=n.line,s=n.offset+i.charIndex;this._removeStyleObject(t,i,o,s)}})}(),function(){var t=fabric.IText.prototype._getNewSelectionStartFromOffset;fabric.IText.prototype._getNewSelectionStartFromOffset=function(e,i,n,o,s){o=t.call(this,e,i,n,o,s);for(var r=0,a=0,l=0;l<this._textLines.length&&!((r+=this._textLines[l].length)+a>=o);l++)"\n"!==this.text[r+a]&&" "!==this.text[r+a]||a++;return o-l+a}}(),function(){function request(t,e,i){var n=URL.parse(t);n.port||(n.port=0===n.protocol.indexOf("https:")?443:80);var o=0===n.protocol.indexOf("https:")?HTTPS:HTTP,s=o.request({hostname:n.hostname,port:n.port,path:n.path,method:"GET"},function(t){var n="";e&&t.setEncoding(e),t.on("end",function(){i(n)}),t.on("data",function(e){200===t.statusCode&&(n+=e)})});s.on("error",function(t){t.errno===process.ECONNREFUSED?fabric.log("ECONNREFUSED: connection refused to "+n.hostname+":"+n.port):fabric.log(t.message),i(null)}),s.end()}function requestFs(t,e){require("fs").readFile(t,function(t,i){if(t)throw fabric.log(t),t;e(i)})}if("undefined"==typeof document||"undefined"==typeof window){var DOMParser=require("xmldom").DOMParser,URL=require("url"),HTTP=require("http"),HTTPS=require("https"),Canvas=require("canvas"),Image=require("canvas").Image;fabric.util.loadImage=function(t,e,i){function n(n){n?(o.src=new Buffer(n,"binary"),o._src=t,e&&e.call(i,o)):(o=null,e&&e.call(i,null,!0))}var o=new Image;t&&(t instanceof Buffer||0===t.indexOf("data"))?(o.src=o._src=t,e&&e.call(i,o)):t&&0!==t.indexOf("http")?requestFs(t,n):t?request(t,"binary",n):e&&e.call(i,t)},fabric.loadSVGFromURL=function(t,e,i){t=t.replace(/^\n\s*/,"").replace(/\?.*$/,"").trim(),0!==t.indexOf("http")?requestFs(t,function(t){fabric.loadSVGFromString(t.toString(),e,i)}):request(t,"",function(t){fabric.loadSVGFromString(t,e,i)})},fabric.loadSVGFromString=function(t,e,i){var n=(new DOMParser).parseFromString(t);fabric.parseSVGDocument(n.documentElement,function(t,i){e&&e(t,i)},i)},fabric.util.getScript=function(url,callback){request(url,"",function(body){eval(body),callback&&callback()})},fabric.createCanvasForNode=function(t,e,i,n){n=n||i;var o=fabric.document.createElement("canvas"),s=new Canvas(t||600,e||600,n),r=new Canvas(t||600,e||600,n);o.style={},o.width=s.width,o.height=s.height,i=i||{},i.nodeCanvas=s,i.nodeCacheCanvas=r;var a=fabric.Canvas||fabric.StaticCanvas,l=new a(o,i);return l.nodeCanvas=s,l.nodeCacheCanvas=r,l.contextContainer=s.getContext("2d"),l.contextCache=r.getContext("2d"),l.Font=Canvas.Font,l};var originaInitStatic=fabric.StaticCanvas.prototype._initStatic;fabric.StaticCanvas.prototype._initStatic=function(t,e){t=t||fabric.document.createElement("canvas"),this.nodeCanvas=new Canvas(t.width,t.height),this.nodeCacheCanvas=new Canvas(t.width,t.height),originaInitStatic.call(this,t,e),this.contextContainer=this.nodeCanvas.getContext("2d"),this.contextCache=this.nodeCacheCanvas.getContext("2d"),this.Font=Canvas.Font},fabric.StaticCanvas.prototype.createPNGStream=function(){return this.nodeCanvas.createPNGStream()},fabric.StaticCanvas.prototype.createJPEGStream=function(t){return this.nodeCanvas.createJPEGStream(t)},fabric.StaticCanvas.prototype._initRetinaScaling=function(){if(this._isRetinaScaling())return this.lowerCanvasEl.setAttribute("width",this.width*fabric.devicePixelRatio),this.lowerCanvasEl.setAttribute("height",this.height*fabric.devicePixelRatio),this.nodeCanvas.width=this.width*fabric.devicePixelRatio,this.nodeCanvas.height=this.height*fabric.devicePixelRatio,this.contextContainer.scale(fabric.devicePixelRatio,fabric.devicePixelRatio),this},fabric.Canvas&&(fabric.Canvas.prototype._initRetinaScaling=fabric.StaticCanvas.prototype._initRetinaScaling);var origSetBackstoreDimension=fabric.StaticCanvas.prototype._setBackstoreDimension;fabric.StaticCanvas.prototype._setBackstoreDimension=function(t,e){return origSetBackstoreDimension.call(this,t,e),this.nodeCanvas[t]=e,this},fabric.Canvas&&(fabric.Canvas.prototype._setBackstoreDimension=fabric.StaticCanvas.prototype._setBackstoreDimension)}}(),define("fabric",["jquery"],function(){}),define("models/ArbitroPartidoModel",["backbone","../core/BaseModel"],function(t,e){return e.extend({urlRoot:"partidoarbitro",defaults:{partidoId:"",torneoArbitroId:"",nombre:"",paterno:"",materno:"",tipoArbitro:"PRINCIPAL"},initialize:function(){},validate:function(t){}})}),define("text!templates/private/partido/tplRowPartidoTorneoJugador.html",[],function(){return"<th><%= numeroJugador %></th>\n<td><%= jugadorNombre %></td>\n<td><%= posicionJugador %></td>"}),define("views/private/partido/RowPartidoTorneoJugadorView",["jquery","underscore","core/BaseView","text!templates/private/partido/tplRowPartidoTorneoJugador.html"],function(t,e,i,n){return i.extend({template:e.template(n),tagName:"tr",events:{},initialize:function(t){this.model=t},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}})}),define("text!templates/private/partido/tplPartidoEquipo.html",[],function(){return'<div class="panel panel-default">\n    <div class="panel-heading">\n        <h3 class="panel-title">Local</h3>\n    </div>\n    <div class="panel-body">\n        <table id="all-jugadores" class="table table-condensed">\n            <thead>\n            <tr>\n                <th>#</th>\n                <th>Jugador</th>\n                <th>Posicion</th>\n            </tr>\n            </thead>\n            <tbody>\n            </tbody>\n        </table>\n    </div>\n</div>'}),define("views/private/partido/PartidoEquipoView",["jquery","backbone","core/BaseView","models/TorneoPartidoModel","models/TorneoEquipoModel","collections/TorneoJugadoresCollection","views/private/partido/RowPartidoTorneoJugadorView","text!templates/private/partido/tplPartidoEquipo.html"],function(t,e,i,n,o,s,r,a){return i.extend({el:"#section-equipo",template:_.template(a),events:{},initialize:function(e){this.model=e.modelo,this.parent=e.parent,this.type=e.type,this.$el=t("#section-"+this.type),this.jugadores=new s,this.listenTo(this.jugadores,"add",this.agregarJugador),this.listenTo(this.jugadores,"sync",this.syncJugadores),this.render();var i=new o({id:this.model.get(this.type.toLowerCase()+"Id")});this.jugadores.setTorneoEquipo(i),this.jugadores.fetch()},render:function(){this.$el.html(this.template(this.model.toJSON()))},agregarJugador:function(t){var e=new r(t);this.$el.find("#all-jugadores").find("tbody:last").append(e.render().$el)},syncJugadores:function(){this.parent.addPlayers(this.jugadores,this.type)}})}),define("collections/ArbitrosPartidoCollection",["backbone","models/ArbitroPartidoModel"],function(t,e){return t.Collection.extend({model:e,url:function(){return"torneopartido/"+this.partido.get("id")+"/partidoarbitro"},setTorneoPartido:function(t){this.partido=t}})}),define("text!templates/private/partido/tplItemArbitroPartido.html",[],function(){return'<th><%= id %></th>\n<td><%= nombre %></td>\n<td><%= tipoArbitro %></td>\n<td>\n\n    <button id="eliminar-arbitro-partido" class="btn btn-primary btn-xs" value="<%= id %>">\n        <span class="glyphicon glyphicon-trash" aria-hidden="true" value="<%= id %>"></span>\n    </button>\n</td>\n'}),define("views/private/partido/ItemArbitroPartidoView",["jquery","backbone","marionette","bootstrap","models/ArbitroPartidoModel","text!templates/private/partido/tplItemArbitroPartido.html"],function(t,e,i,n,o,s){return i.View.extend({tagName:"tr",template:_.template(s),ui:{eliminarArbitro:"#eliminar-arbitro-partido"},events:{"click @ui.eliminarArbitro":"deleteArbitroPartido"},deleteArbitroPartido:function(){console.log("delte arbitro partido")},onRender:function(t){this.$el.html(this.template(this.model.toJSON()))}})}),define("text!templates/private/partido/tplListArbitroPartido.html",[],function(){return'\n\n<button type="button"> button </button>'}),define("views/private/partido/ListArbitroPartidoView",["jquery","backbone","marionette","bootstrap","models/TorneoArbitroModel","collections/TorneoArbitrosCollection","views/private/partido/ItemArbitroPartidoView","text!templates/private/partido/tplListArbitroPartido.html"],function(t,e,i,n,o,s,r,a){return i.CollectionView.extend({tagName:"tbody",className:"list-arbitro-partido",template:_.template(a),childView:r})}),define("text!templates/private/partido/tplPartidoArbitros.html",[],function(){return'<div class="panel panel-default">\n    <div class="panel-heading">\n        <h3 class="panel-title">Arbitros</h3>\n    </div>\n    \n    <div id="partido-arbitros" class="panel-body">\n        <table id="arbitros" class="table table-condensed">\n            <thead>\n            <tr>\n                <th>#</th>\n                <th>Arbitro</th>\n                <th>Tipo</th>\n            </tr>\n            </thead>\n            <tbody class="list-arbitros-partido">\n            </tbody>\n        </table>\n    </div>\n</div>'}),define("views/private/partido/PartidoArbitrosView",["jquery","backbone","marionette","models/ArbitroPartidoModel","collections/ArbitrosPartidoCollection","views/private/partido/ListArbitroPartidoView","text!templates/private/partido/tplPartidoArbitros.html"],function(t,e,i,n,o,s,r){return i.View.extend({el:"#section-arbitros",template:_.template(r),regions:{listBody:{el:".list-arbitros-partido",replaceElement:!0}},modelEvents:{"change:someattribute":"changeMyAttribute"},collectionEvents:{sync:"modelsChanged"},events:{},initialize:function(t){this.modelPartido=t.modelo,this.parent=t.parent,this.partidoArbitroCollection=new o,this.partidoArbitroCollection.setTorneoPartido(this.modelPartido),this.partidoArbitroCollection.fetch()},onRender:function(t){this.showChildView("listBody",new s({collection:this.partidoArbitroCollection}))},changeMyAttribute:function(){console.log("someattribute was changed")},modelsChanged:function(){console.log("models were added or removed in the collection")}})}),define("text!templates/private/partido/tplPartidoEdit.html",[],function(){return'<div class="modal fade" id="partido-create-dialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n                <h4 class="modal-title">Partido</h4>\n            </div>\n            <div class="modal-body">\n                <p>Editar Partido.</p>\n                <div class="alert alert-danger" role="alert"></div>\n                <form id="form-torneo-partido" role="form">\n                    <input id="jornada-id" type="hidden" name="jornadaId" value="<%= jornadaId %>">\n                    <input type="hidden" name="localId" value="<%= localId %>">\n                    <input type="hidden" name="visitaId" value="<%= visitaId %>">\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Local</label>\n                                <h4><%= localNombre %></h4>\n                            </div>\n                        </div>\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Visita</label>\n                                <h4><%= visitaNombre %></h4>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Cancha</label>\n                                <select class="form-control" id="select-cancha" placeholder="Cancha..." name="canchaId" value="<%= canchaId %>">\n                                </select>\n                            </div>\n                        </div>\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Horario</label>\n                                <input id="dtp-horario" class="span2 form-control" size="16" type="text" name="horarioDes" value="<%= horarioDes %>">\n                            </div>\n                        </div>\n                    </div>\n                </form>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n                <button id="btn-aceptar" type="button" class="btn btn-success">Aceptar</button>\n            </div>\n        </div>\n    </div>\n</div>\n<style>\n    .ui-datepicker-partido{\n    z-index: 100000 !important;\n    display: block;\n    }\n</style>\n\n'}),define("views/private/partido/PartidoEditView",["jquery","backbone","bootstrap","datetimepicker","core/BaseView","models/TorneoModel","collections/TorneoCanchasCollection","views/private/util/ModalGenericView","text!templates/private/partido/tplPartidoEdit.html"],function(t,e,i,n,o,s,r,a,l){return o.extend({el:"#modal-partido",template:_.template(l),events:{"click #btn-aceptar":"clickAceptar"},initialize:function(t){this.model=t.modelo,this.callbackAceptar=t.callbackAceptar,this.render(),this.canchas=new r,this.listenTo(this.canchas,"add",this.agregarCancha),this.listenTo(this.canchas,"sync",this.syncCanchas);var i=new s({id:this.model.get("torneoId")});this.canchas.setTorneo(i),this.canchas.fetch(),e.Validation.bind(this)},render:function(){this.$el.html(this.template(this.model.toJSON())),this.$("#partido-create-dialog").modal("show"),this.$(".alert-danger").hide(),this.$el.find("#dtp-horario").datetimepicker({format:"mm/dd/yyyy hh:ii"}).on("show",function(e){t(".datepicker.dropdown-menu").addClass("ui-datepicker-partido")})},agregarCancha:function(e){t("#select-cancha").append(t("<option>",{value:e.get("id"),text:e.get("canchaNombre")}))},syncCanchas:function(e){t("#select-cancha").change()},clickAceptar:function(t){var e=this.$el.find("#form-torneo-partido").serializeObject();this.model.set(e);var i=new Date(this.model.get("horarioDes"));this.model.set({horario:i.getTime()}),that=this,this.model.isValid(!0)&&this.model.save({},{wait:!0,success:function(t,e){new a({message:"Partido registrado correctamente"}),that.callbackAceptar(t)},error:function(t,e){new a({message:"Se presento un error al registrar el partido"})}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this),t("<div id='modal-partido-parent'></div>").appendTo("#modal-partido")}})}),define("text!templates/private/partido/tplItemArbitroTorneo.html",[],function(){return'<div class="form-inline">\n\t<div class="checkbox">\n    <label>\n\t\t\t\t<input class="togglecheckbox" name="toggleArbitro" type="checkbox" >\n    </label>\n  </div>\n\n  <div class="form-group">\n    <label>\n      <%= arbitroNombre %>  \n      <%= arbitroPaterno %>  \n\t\t\t<%= arbitroMaterno %>\t\n\t\t</label>\n  </div>\n\n  <div class="form-group">\n  \t<select class="list-tipo-arbitro selectpicker form-control" name="tipoArbitro" >\n\t\t\t<option value="PRINCIPAL">PRINCIPAL</option>\n\t\t\t<option value="ANOTADOR">ANOTADOR</option>\n\t\t\t<option value="CRONOMETRADOR">CRONOMETRADOR</option>\n\t\t\t<option value="AUXILIAR">AUXILIAR</option>\n\t\t</select>\n  </div>\n  <input name="torneoArbitroId" type="hidden" value="<%= id %>">\n  <input name="arbitroId" type="hidden" value="<%= arbitroId %>">\n  <input name="torneoId" type="hidden" value="<%= torneoId %>">\n  <input name="nombre" type="hidden" value="<%= arbitroNombre %>">\n  <input name="paterno" type="hidden" value="<%= arbitroPaterno %>">\n  <input name="materno" type="hidden" value="<%= arbitroMaterno %>">\n</div>'}),define("views/private/partido/ItemArbitroTorneoView",["jquery","backbone","marionette","bootstrap","models/TorneoArbitroModel","collections/TorneoArbitrosCollection","text!templates/private/partido/tplItemArbitroTorneo.html"],function(t,e,i,n,o,s,r){return i.View.extend({tagName:"li",className:"list-group-item",template:_.template(r),ui:{toggle:".toggle"},events:{"click @ui.toggle":"toggle"},toggle:function(){console.log("toggle arbitro torneo")},onRender:function(t){this.$el.html(this.template(this.model.toJSON()))}})}),define("text!templates/private/partido/tplListArbitroTorneo.html",[],function(){return""}),define("views/private/partido/ListArbitroTorneoView",["jquery","backbone","marionette","bootstrap","models/TorneoArbitroModel","collections/TorneoArbitrosCollection","views/private/partido/ItemArbitroTorneoView","text!templates/private/partido/tplListArbitroTorneo.html"],function(t,e,i,n,o,s,r,a){return i.CollectionView.extend({tagName:"ul",className:"list-group",template:_.noop,childView:r})}),define("text!templates/private/partido/tplNewArbitroPartido.html",[],function(){return'<div class="modal fade" id="new-arbitro-partido" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">\n\t\n\t<div class="modal-dialog">\n    <div class="modal-content">\n        <div class="modal-header">\n            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n            <h4 class="modal-title">Agregar Arbitros</h4>\n        </div>\n        <div class="modal-body">\n            \n            <div id="list-arbitros-torneo">\n            </div>\n            \n        </div>\n\n        <div class="modal-footer">\n            <button id="btn-cancelar-arbitro-partido" type="button" class="btn btn-default" >Cancelar</button>\n            <button id="btn-aceptar-arbitro-partido" type="button" class="btn btn-success">Aceptar</button>\n        </div>\n    </div>\n  </div>\n</div>\n'}),define("views/private/partido/NewArbitroPartidoView",["jquery","backbone","marionette","bootstrap","models/ArbitroPartidoModel","collections/TorneoArbitrosCollection","views/private/partido/ItemArbitroPartidoView","views/private/partido/ListArbitroTorneoView","text!templates/private/partido/tplNewArbitroPartido.html"],function(t,e,i,n,o,s,r,a,l){return i.View.extend({template:_.template(l),el:"#modal-partido",ui:{btnAceptar:"#btn-aceptar-arbitro-partido",btnCancelar:"#btn-cancelar-arbitro-partido"},events:{"click @ui.btnAceptar":"guardarArbitro","click @ui.btnCancelar":"cancelarDestroyView"},regions:{listBody:"#list-arbitros-torneo"},initialize:function(t){this.parentView=t.parent,this.modelPartido=t.modelo,this.model=new o,this.torneoarbitros=new s,this.torneoarbitros.setTorneo(new o({id:this.modelPartido.get("id")})),this.torneoarbitros.fetch()},cancelarDestroyView:function(){this.destroy(),t("#modal-partido-parent").append('<div id="modal-partido"></div>')},guardarArbitro:function(){var e=this.getChildView("listBody"),i=this.modelPartido.get("id");that=this,e.children.each(function(t){var e=t.$el.find("select,input").serializeObject();if(e.partidoId=i,t.$el.find(".togglecheckbox").is(":checked")&&(that.model.set(e),that.model.isValid(!0))){that.model.save().complete(function(t){that.parentView.viewPartidoArbitro.getChildView("listBody").collection.add(new o(t.responseJSON))}),t.$el.find("select,input").remove(),t.destroy()}}),this.destroy(),t("#modal-partido-parent").append('<div id="modal-partido"></div>')},onRender:function(e){this.showChildView("listBody",new a({collection:this.torneoarbitros}));var i=this;t("#new-arbitro-partido").on("hidden.bs.modal",function(e){i.destroy(),t("#modal-partido-parent").append('<div id="modal-partido"></div>')}),this.$(".alert-danger").hide(),this.$("#new-arbitro-partido").modal("show")}})}),define("text!templates/private/estadistica/tplEstadisticaResumen.html",[],function(){
return'<div class="row">\n    <div class="col-md-6">\n        <h2><%= localPuntos %></h2>\n    </div>\n    <div class="col-md-6">\n        <h2><%= visitaPuntos %></h2>\n    </div>\n</div>'}),define("views/private/estadistica/EstadisticaResumenView",["jquery","backbone","core/BaseView","text!templates/private/estadistica/tplEstadisticaResumen.html"],function(t,e,i,n){return i.extend({el:"#section-estadisticas-resumen",template:_.template(n),events:{},initialize:function(t){this.model=t,this.render()},render:function(){this.$el.html(this.template(this.model.toJSON()))}})}),define("models/estadistica/PuntoModel",["backbone"],function(t){return t.Model.extend({urlRoot:"punto",defaults:{partidoId:"",tiempoDes:"",minuto:"",segundo:"",tipo:"",tipoValor:"",origen:"",jugadorId:"",jugadorNombre:""},initialize:function(){},validation:{partidoId:{required:!0},tiempoDes:{required:!1},minuto:{required:!0},segundo:{required:!0},tipo:{required:!0},tipoValor:{required:!1},origen:{required:!0},jugadorId:{required:!0},jugadorNombre:{required:!1}}})}),define("collections/estadistica/PuntosCollection",["backbone","models/estadistica/PuntoModel"],function(t,e){return t.Collection.extend({model:e,url:function(){return"torneopartido/"+this.partido.get("id")+"/punto"},setTorneoPartido:function(t){this.partido=t}})}),define("text!templates/private/estadistica/tplRowEstadisticaPunto.html",[],function(){return'<th><%= id %></th>\n<td><%= tiempoDes %></td>\n<td><%= jugadorNombre %></td>\n<td><%= tipo %></td>\n<td>\n    <button id="eliminar-punto" class="btn btn-primary btn-xs" value="<%= id %>">\n        <span class="glyphicon glyphicon-trash" aria-hidden="true" value="<%= id %>"></span>\n    </button>\n</td>'}),define("views/private/estadistica/RowEstadisticaPuntoView",["jquery","underscore","core/BaseView","views/private/util/ModalGenericView","text!templates/private/estadistica/tplRowEstadisticaPunto.html"],function(t,e,i,n,o){return i.extend({template:e.template(o),tagName:"tr",events:{"click #eliminar-punto":"deletePunto"},initialize:function(t){this.model=t.modelo,this.parent=t.parent},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el.addClass(this.model.get("origenClass")),this},deletePunto:function(){that=this,this.model.destroy({contentType:"application/json",wait:!0,success:function(t,e){that.destroyView(),that.parent.successRemovePunto(t),new n({message:e.message})},error:function(t,e){new n({message:e.responseJSON.message})}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}})}),define("text!templates/private/estadistica/tplEstadisticaPuntos.html",[],function(){return'<div id="partido-puntos">\n    <table id="puntos" class="table table-condensed">\n        <thead>\n        <tr>\n            <th>#</th>\n            <th>Minuto</th>\n            <th>Jugador</th>\n            <th>Tipo</th>\n            <th></th>\n        </tr>\n        </thead>\n        <tbody>\n        </tbody>\n    </table>\n</div>'}),define("views/private/estadistica/EstadisticaPuntosView",["jquery","backbone","core/BaseView","collections/estadistica/PuntosCollection","views/private/estadistica/RowEstadisticaPuntoView","text!templates/private/estadistica/tplEstadisticaPuntos.html"],function(t,e,i,n,o,s){return i.extend({el:"#section-estadisticas-puntos",template:_.template(s),events:{},initialize:function(t){this.model=t.modelo,this.parent=t.parent,app.puntosPartido=new n,this.listenTo(app.puntosPartido,"add",this.agregarPunto),this.listenTo(app.puntosPartido,"sync",this.syncPuntos),this.render(),app.puntosPartido.setTorneoPartido(this.model),app.puntosPartido.fetch()},render:function(){this.$el.html(this.template(this.model.toJSON()))},agregarPunto:function(e){var i=this.generateClassByOrigenPunto(e.get("origen"));e.set({origenClass:i});var n=new o({modelo:e,parent:this.parent});t("#puntos").find("tbody:last").append(n.render().$el)},syncPuntos:function(){},generateClassByOrigenPunto:function(t){switch(t){case"LOCAL":return"success";case"VISITA":return"info"}}})}),define("models/estadistica/FaltaModel",["backbone"],function(t){return t.Model.extend({urlRoot:"falta",defaults:{partidoId:"",tiempoDes:"",minuto:"",segundo:"",tipo:"",origen:"",infractorId:"",infractorNombre:"",receptorId:"",receptorNombre:""},initialize:function(){},validation:{partidoId:{required:!0},tiempoDes:{required:!1},minuto:{required:!0},segundo:{required:!0},tipo:{required:!0},origen:{required:!0},infractorId:{required:!0},infractorNombre:{required:!1},receptorId:{required:!1},receptorNombre:{required:!1}}})}),define("collections/estadistica/FaltasCollection",["backbone","models/estadistica/FaltaModel"],function(t,e){return t.Collection.extend({model:e,url:function(){return"torneopartido/"+this.partido.get("id")+"/falta"},setTorneoPartido:function(t){this.partido=t}})}),define("text!templates/private/estadistica/tplRowEstadisticaFalta.html",[],function(){return'<th><%= id %></th>\n<td><%= tiempoDes %></td>\n<td><%= infractorNombre %></td>\n<td><%= receptorNombre %></td>\n<td><%= tipo %></td>\n<td>\n    <button id="eliminar-falta" class="btn btn-primary btn-xs" value="<%= id %>">\n        <span class="glyphicon glyphicon-trash" aria-hidden="true" value="<%= id %>"></span>\n    </button>\n</td>'}),define("views/private/estadistica/RowEstadisticaFaltaView",["jquery","underscore","core/BaseView","views/private/util/ModalGenericView","text!templates/private/estadistica/tplRowEstadisticaFalta.html"],function(t,e,i,n,o){return i.extend({template:e.template(o),tagName:"tr",events:{"click #eliminar-falta":"deleteFalta"},initialize:function(t){this.model=t.modelo,this.parent=t.parent},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el.addClass(this.model.get("origenClass")),this},deleteFalta:function(){that=this,this.model.destroy({contentType:"application/json",wait:!0,success:function(t,e){that.destroyView(),that.parent.successRemoveFalta(t),new n({message:e.message})},error:function(t,e){new n({message:e.responseJSON.message})}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}})}),define("text!templates/private/estadistica/tplEstadisticaFaltas.html",[],function(){return'<div id="partido-puntos">\n    <table id="puntos" class="table table-condensed">\n        <thead>\n        <tr>\n            <th>#</th>\n            <th>Minuto</th>\n            <th>Infractor</th>\n            <th>Receptor</th>\n            <th>Tipo</th>\n            <th></th>\n        </tr>\n        </thead>\n        <tbody>\n        </tbody>\n    </table>\n</div>'}),define("views/private/estadistica/EstadisticaFaltasView",["jquery","backbone","core/BaseView","collections/estadistica/FaltasCollection","views/private/estadistica/RowEstadisticaFaltaView","text!templates/private/estadistica/tplEstadisticaFaltas.html"],function(t,e,i,n,o,s){return i.extend({el:"#section-estadisticas-faltas",template:_.template(s),events:{},initialize:function(t){this.model=t.modelo,this.parent=t.parent,app.faltasPartido=new n,this.listenTo(app.faltasPartido,"add",this.agregarFalta),this.listenTo(app.faltasPartido,"sync",this.syncFaltas),this.render(),app.faltasPartido.setTorneoPartido(this.model),app.faltasPartido.fetch()},render:function(){this.$el.html(this.template(this.model.toJSON()))},agregarFalta:function(e){var i=this.generateClassByOrigenPunto(e.get("origen"));e.set({origenClass:i});var n=new o({modelo:e,parent:this.parent});t("#faltas").find("tbody:last").append(n.render().$el)},syncFaltas:function(){},generateClassByOrigenPunto:function(t){switch(t){case"LOCAL":return"success";case"VISITA":return"info"}}})}),define("models/estadistica/MovimientoModel",["backbone"],function(t){return t.Model.extend({urlRoot:"movimiento",defaults:{partidoId:"",tiempoDes:"",minuto:"",segundo:"",tiempo:"",tipo:"",origen:"",entraId:"",entraNombre:"",saleId:"",saleNombre:""},initialize:function(){},validation:{partidoId:{required:!0},tiempo:{required:!0},tiempoDes:{required:!1},minuto:{required:!0},segundo:{required:!0},tipo:{required:!0},origen:{required:!0},entraId:{required:!0},entraNombre:{required:!1},saleId:{required:!1},saleNombre:{required:!1}}})}),define("collections/estadistica/MovimientosCollection",["backbone","models/estadistica/MovimientoModel"],function(t,e){return t.Collection.extend({model:e,url:function(){return"torneopartido/"+this.partido.get("id")+"/movimiento"},setTorneoPartido:function(t){this.partido=t}})}),define("text!templates/private/estadistica/tplRowEstadisticaMovimiento.html",[],function(){return'<th><%= id %></th>\n<td><%= tiempoDes %></td>\n<td><%= entraNombre %></td>\n<td><%= saleNombre %></td>\n<td><%= tipo %></td>\n<td>\n    <button id="eliminar-movimiento" class="btn btn-primary btn-xs" value="<%= id %>">\n        <span class="glyphicon glyphicon-trash" aria-hidden="true" value="<%= id %>"></span>\n    </button>\n</td>'}),define("views/private/estadistica/RowEstadisticaMovimientoView",["jquery","underscore","core/BaseView","views/private/util/ModalGenericView","text!templates/private/estadistica/tplRowEstadisticaMovimiento.html"],function(t,e,i,n,o){return i.extend({template:e.template(o),tagName:"tr",events:{"click #eliminar-movimiento":"deleteMovimiento"},initialize:function(t){this.model=t.modelo,this.parent=t.parent},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el.addClass(this.model.get("origenClass")),this},deleteMovimiento:function(){that=this,this.model.destroy({contentType:"application/json",wait:!0,success:function(t,e){that.destroyView(),that.parent.successRemoveMovimiento(t),new n({message:e.message})},error:function(t,e){new n({message:e.responseJSON.message})}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}})}),define("text!templates/private/estadistica/tplEstadisticaMovimientos.html",[],function(){return'<div id="partido-movimientos">\n    <table id="movimientos" class="table table-condensed">\n        <thead>\n        <tr>\n            <th>#</th>\n            <th>Minuto</th>\n            <th>Entra</th>\n            <th>Sale</th>\n            <th>Tipo</th>\n            <th></th>\n        </tr>\n        </thead>\n        <tbody>\n        </tbody>\n    </table>\n</div>'}),define("views/private/estadistica/EstadisticaMovimientosView",["jquery","backbone","core/BaseView","collections/estadistica/MovimientosCollection","views/private/estadistica/RowEstadisticaMovimientoView","text!templates/private/estadistica/tplEstadisticaMovimientos.html"],function(t,e,i,n,o,s){return i.extend({el:"#section-estadisticas-cambios",template:_.template(s),events:{},initialize:function(t){this.model=t.modelo,this.parent=t.parent,app.movimientosPartido=new n,this.listenTo(app.movimientosPartido,"add",this.agregarMovimiento),this.listenTo(app.movimientosPartido,"sync",this.syncMovimientos),this.render(),app.movimientosPartido.setTorneoPartido(this.model),app.movimientosPartido.fetch()},render:function(){this.$el.html(this.template(this.model.toJSON()))},agregarMovimiento:function(e){var i=this.generateClassByOrigenPunto(e.get("origen"));e.set({origenClass:i});var n=new o({modelo:e,parent:this.parent});t("#movimientos").find("tbody:last").append(n.render().$el)},syncMovimientos:function(){},generateClassByOrigenPunto:function(t){switch(t){case"LOCAL":return"success";case"VISITA":return"info"}}})}),define("models/estadistica/AsistenciaModel",["backbone"],function(t){return t.Model.extend({urlRoot:"asistencia",defaults:{partidoId:"",tiempoDes:"",minuto:"",segundo:"",origen:"",asisteId:"",asisteNombre:"",asistidoId:"",asistidoNombre:""},initialize:function(){_.each(this.attributes,function(t,e){this.set(e,_.escape(t))},this)},validation:{partidoId:{required:!0},tiempoDes:{required:!1},minuto:{required:!0},segundo:{required:!0},origen:{required:!0},asisteId:{required:!0},asisteNombre:{required:!1},asistidoId:{required:!0},asistidoNombre:{required:!1}}})}),define("collections/estadistica/AsistenciasCollection",["backbone","models/estadistica/AsistenciaModel"],function(t,e){return t.Collection.extend({model:e,url:function(){return"torneopartido/"+this.partido.get("id")+"/asistencia"},setTorneoPartido:function(t){this.partido=t}})}),define("text!templates/private/estadistica/tplRowEstadisticaAsistencia.html",[],function(){return'<th><%= id %></th>\n<td><%= tiempoDes %></td>\n<td><%= asisteNombre %></td>\n<td><%= asistidoNombre %></td>\n<td>\n    <button id="eliminar-asistencia" class="btn btn-primary btn-xs" value="<%= id %>">\n        <span class="glyphicon glyphicon-trash" aria-hidden="true" value="<%= id %>"></span>\n    </button>\n</td>'}),define("views/private/estadistica/RowEstadisticaAsistenciaView",["jquery","underscore","core/BaseView","views/private/util/ModalGenericView","text!templates/private/estadistica/tplRowEstadisticaAsistencia.html"],function(t,e,i,n,o){return i.extend({template:e.template(o),tagName:"tr",events:{"click #eliminar-asistencia":"deleteAsistencia"},initialize:function(t){this.model=t.modelo,this.parent=t.parent},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el.addClass(this.model.get("origenClass")),this},deleteAsistencia:function(){that=this,this.model.destroy({contentType:"application/json",wait:!0,success:function(t,e){that.destroyView(),that.parent.successRemoveAsistencia(t),new n({message:e.message})},error:function(t,e){new n({message:e.responseJSON.message})}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}})}),define("text!templates/private/estadistica/tplEstadisticaAsistencias.html",[],function(){return'<div id="partido-asistencias">\n    <table id="asistencias" class="table table-condensed">\n        <thead>\n        <tr>\n            <th>#</th>\n            <th>Minuto</th>\n            <th>Asistente</th>\n            <th>Encestador</th>\n            <th></th>\n        </tr>\n        </thead>\n        <tbody>\n        </tbody>\n    </table>\n</div>'}),define("views/private/estadistica/EstadisticaAsistenciasView",["jquery","backbone","core/BaseView","collections/estadistica/AsistenciasCollection","views/private/estadistica/RowEstadisticaAsistenciaView","text!templates/private/estadistica/tplEstadisticaAsistencias.html"],function(t,e,i,n,o,s){return i.extend({el:"#section-estadisticas-asistencias",template:_.template(s),events:{},initialize:function(t){this.model=t.modelo,this.parent=t.parent,app.asistenciasPartido=new n,this.listenTo(app.asistenciasPartido,"add",this.agregarAsistencia),this.listenTo(app.asistenciasPartido,"sync",this.syncAsistencias),this.render(),app.asistenciasPartido.setTorneoPartido(this.model),app.asistenciasPartido.fetch()},render:function(){this.$el.html(this.template(this.model.toJSON()))},agregarAsistencia:function(e){var i=this.generateClassByOrigenPunto(e.get("origen"));e.set({origenClass:i});var n=new o({modelo:e,parent:this.parent});t("#asistencias").find("tbody:last").append(n.render().$el)},syncAsistencias:function(){},generateClassByOrigenPunto:function(t){switch(t){case"LOCAL":return"success";case"VISITA":return"info"}}})}),define("models/estadistica/BloqueoModel",["backbone"],function(t){return t.Model.extend({urlRoot:"bloqueo",defaults:{partidoId:"",tiempoDes:"",minuto:"",segundo:"",origen:"",bloqueaId:"",bloqueaNombre:"",bloqueadoId:"",bloqueadoNombre:""},initialize:function(){},validation:{partidoId:{required:!0},tiempoDes:{required:!1},minuto:{required:!0},segundo:{required:!0},origen:{required:!0},bloqueaId:{required:!0},bloqueaNombre:{required:!1},bloqueadoId:{required:!0},bloqueadoNombre:{required:!1}}})}),define("collections/estadistica/BloqueosCollection",["backbone","models/estadistica/BloqueoModel"],function(t,e){return t.Collection.extend({model:e,url:function(){return"torneopartido/"+this.partido.get("id")+"/bloqueo"},setTorneoPartido:function(t){this.partido=t}})}),define("text!templates/private/estadistica/tplRowEstadisticaBloqueo.html",[],function(){return'<th><%= id %></th>\n<td><%= tiempoDes %></td>\n<td><%= bloqueaNombre %></td>\n<td><%= bloqueadoNombre %></td>\n<td>\n    <button id="eliminar-bloqueo" class="btn btn-primary btn-xs" value="<%= id %>">\n        <span class="glyphicon glyphicon-trash" aria-hidden="true" value="<%= id %>"></span>\n    </button>\n</td>'}),define("views/private/estadistica/RowEstadisticaBloqueoView",["jquery","underscore","core/BaseView","views/private/util/ModalGenericView","text!templates/private/estadistica/tplRowEstadisticaBloqueo.html"],function(t,e,i,n,o){return i.extend({template:e.template(o),tagName:"tr",events:{"click #eliminar-bloqueo":"deleteBloqueo"},initialize:function(t){this.model=t.modelo,this.parent=t.parent},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el.addClass(this.model.get("origenClass")),this},deleteBloqueo:function(){that=this,this.model.destroy({contentType:"application/json",wait:!0,success:function(t,e){that.destroyView(),that.parent.successRemoveBloqueo(t),new n({message:e.message})},error:function(t,e){new n({message:e.responseJSON.message})}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}})}),define("text!templates/private/estadistica/tplEstadisticaBloqueos.html",[],function(){return'<div id="partido-bloqueos">\n    <table id="bloqueos" class="table table-condensed">\n        <thead>\n        <tr>\n            <th>#</th>\n            <th>Minuto</th>\n            <th>Tapon</th>\n            <th>Sobre</th>\n            <th></th>\n        </tr>\n        </thead>\n        <tbody>\n        </tbody>\n    </table>\n</div>'}),define("views/private/estadistica/EstadisticaBloqueosView",["jquery","backbone","core/BaseView","collections/estadistica/BloqueosCollection","views/private/estadistica/RowEstadisticaBloqueoView","text!templates/private/estadistica/tplEstadisticaBloqueos.html"],function(t,e,i,n,o,s){return i.extend({el:"#section-estadisticas-bloqueos",template:_.template(s),events:{},initialize:function(t){this.model=t.modelo,this.parent=t.parent,app.bloqueosPartido=new n,this.listenTo(app.bloqueosPartido,"add",this.agregarBloqueo),this.listenTo(app.bloqueosPartido,"sync",this.syncBloqueos),this.render(),app.bloqueosPartido.setTorneoPartido(this.model),app.bloqueosPartido.fetch()},render:function(){this.$el.html(this.template(this.model.toJSON()))},agregarBloqueo:function(e){var i=this.generateClassByOrigenPunto(e.get("origen"));e.set({origenClass:i});var n=new o({modelo:e,parent:this.parent});t("#bloqueos").find("tbody:last").append(n.render().$el)},syncBloqueos:function(){},generateClassByOrigenPunto:function(t){switch(t){case"LOCAL":return"success";case"VISITA":return"info"}}})}),define("models/estadistica/ReboteModel",["backbone"],function(t){return t.Model.extend({urlRoot:"rebote",defaults:{partidoId:"",tiempoDes:"",minuto:"",segundo:"",tipo:"",origen:"",jugadorId:"",jugadorNombre:""},initialize:function(){},validation:{partidoId:{required:!0},tiempoDes:{required:!1},minuto:{required:!0},segundo:{required:!0},tipo:{required:!0},origen:{required:!0},jugadorId:{required:!0},jugadorNombre:{required:!1}}})}),define("collections/estadistica/RebotesCollection",["backbone","models/estadistica/ReboteModel"],function(t,e){return t.Collection.extend({model:e,url:function(){return"torneopartido/"+this.partido.get("id")+"/rebote"},setTorneoPartido:function(t){this.partido=t}})}),define("text!templates/private/estadistica/tplRowEstadisticaRebote.html",[],function(){return'<th><%= id %></th>\n<td><%= tiempoDes %></td>\n<td><%= jugadorNombre %></td>\n<td><%= tipo %></td>\n<td>\n    <button id="eliminar-rebote" class="btn btn-primary btn-xs" value="<%= id %>">\n        <span class="glyphicon glyphicon-trash" aria-hidden="true" value="<%= id %>"></span>\n    </button>\n</td>'}),define("views/private/estadistica/RowEstadisticaReboteView",["jquery","underscore","core/BaseView","views/private/util/ModalGenericView","text!templates/private/estadistica/tplRowEstadisticaRebote.html"],function(t,e,i,n,o){return i.extend({template:e.template(o),tagName:"tr",events:{"click #eliminar-rebote":"deleteRebote"},initialize:function(t){this.model=t.modelo,this.parent=t.parent},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el.addClass(this.model.get("origenClass")),this},deleteRebote:function(){that=this,this.model.destroy({contentType:"application/json",wait:!0,success:function(t,e){that.destroyView(),that.parent.successRemoveRebote(t),new n({message:e.message})},error:function(t,e){new n({message:e.responseJSON.message})}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}})}),define("text!templates/private/estadistica/tplEstadisticaRebotes.html",[],function(){return'<div id="partido-rebotes">\n    <table id="rebotes" class="table table-condensed">\n        <thead>\n        <tr>\n            <th>#</th>\n            <th>Minuto</th>\n            <th>Jugador</th>\n            <th>Tipo</th>\n            <th></th>\n        </tr>\n        </thead>\n        <tbody>\n        </tbody>\n    </table>\n</div>'}),define("views/private/estadistica/EstadisticaRebotesView",["jquery","backbone","core/BaseView","collections/estadistica/RebotesCollection","views/private/estadistica/RowEstadisticaReboteView","text!templates/private/estadistica/tplEstadisticaRebotes.html"],function(t,e,i,n,o,s){return i.extend({el:"#section-estadisticas-rebotes",template:_.template(s),events:{},initialize:function(t){this.model=t.modelo,this.parent=t.parent,app.rebotesPartido=new n,this.listenTo(app.rebotesPartido,"add",this.agregarRebote),this.listenTo(app.rebotesPartido,"sync",this.syncRebotes),this.render(),app.rebotesPartido.setTorneoPartido(this.model),app.rebotesPartido.fetch()},render:function(){this.$el.html(this.template(this.model.toJSON()))},agregarRebote:function(e){var i=this.generateClassByOrigenRebote(e.get("origen"));e.set({origenClass:i});var n=new o({modelo:e,parent:this.parent});t("#rebotes").find("tbody:last").append(n.render().$el)},syncRebotes:function(){},generateClassByOrigenRebote:function(t){switch(t){case"LOCAL":return"success";case"VISITA":return"info"}}})}),define("models/estadistica/RoboModel",["backbone"],function(t){return t.Model.extend({urlRoot:"robo",defaults:{partidoId:"",tiempoDes:"",minuto:"",segundo:"",origen:"",robadorId:"",robadorNombre:"",perdedorId:"",perdedorNombre:""},initialize:function(){},validation:{partidoId:{required:!0},tiempoDes:{required:!1},minuto:{required:!0},segundo:{required:!0},origen:{required:!0},robadorId:{required:!0},robadorNombre:{required:!1},perdedorId:{required:!1},perdedorNombre:{required:!1}}})}),define("collections/estadistica/RobosCollection",["backbone","models/estadistica/RoboModel"],function(t,e){return t.Collection.extend({model:e,url:function(){return"torneopartido/"+this.partido.get("id")+"/robo"},setTorneoPartido:function(t){this.partido=t}})}),define("text!templates/private/estadistica/tplRowEstadisticaRobo.html",[],function(){return'<th><%= id %></th>\n<td><%= tiempoDes %></td>\n<td><%= robadorNombre %></td>\n<td><%= perdedorNombre %></td>\n<td>\n    <button id="eliminar-robo" class="btn btn-primary btn-xs" value="<%= id %>">\n        <span class="glyphicon glyphicon-trash" aria-hidden="true" value="<%= id %>"></span>\n    </button>\n</td>'}),define("views/private/estadistica/RowEstadisticaRoboView",["jquery","underscore","core/BaseView","views/private/util/ModalGenericView","text!templates/private/estadistica/tplRowEstadisticaRobo.html"],function(t,e,i,n,o){return i.extend({template:e.template(o),tagName:"tr",events:{"click #eliminar-robo":"deleteRobo"},initialize:function(t){this.model=t.modelo,this.parent=t.parent},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el.addClass(this.model.get("origenClass")),this},deleteRobo:function(){that=this,this.model.destroy({contentType:"application/json",wait:!0,success:function(t,e){that.destroyView(),that.parent.successRemoveRobo(t),new n({message:e.message})},error:function(t,e){new n({message:e.responseJSON.message})}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}})}),define("text!templates/private/estadistica/tplEstadisticaRobos.html",[],function(){return'<div id="partido-robos">\n    <table id="robos" class="table table-condensed">\n        <thead>\n        <tr>\n            <th>#</th>\n            <th>Minuto</th>\n            <th>Robo</th>\n            <th>Perdedor</th>\n            <th></th>\n        </tr>\n        </thead>\n        <tbody>\n        </tbody>\n    </table>\n</div>'}),define("views/private/estadistica/EstadisticaRobosView",["jquery","backbone","core/BaseView","collections/estadistica/RobosCollection","views/private/estadistica/RowEstadisticaRoboView","text!templates/private/estadistica/tplEstadisticaRobos.html"],function(t,e,i,n,o,s){return i.extend({el:"#section-estadisticas-robos",template:_.template(s),events:{},initialize:function(t){this.model=t.modelo,this.parent=t.parent,app.robosPartido=new n,this.listenTo(app.robosPartido,"add",this.agregarRobo),this.listenTo(app.robosPartido,"sync",this.syncRobos),this.render(),app.robosPartido.setTorneoPartido(this.model),app.robosPartido.fetch()},render:function(){this.$el.html(this.template(this.model.toJSON()))},agregarRobo:function(e){var i=this.generateClassByOrigenPunto(e.get("origen"));e.set({origenClass:i});var n=new o({modelo:e,parent:this.parent});t("#robos").find("tbody:last").append(n.render().$el)},syncRobos:function(){},generateClassByOrigenPunto:function(t){switch(t){case"LOCAL":return"success";case"VISITA":return"info"}}})}),define("models/estadistica/TipoEncesteModel",["backbone"],function(t){return t.Model.extend({urlRoot:"tipoenceste",defaults:{clave:"",descripcion:""},initialize:function(){},validation:{clave:{required:!0},descripcion:{required:!0}}})}),define("collections/estadistica/TipoEncestesCollection",["backbone","models/estadistica/TipoEncesteModel"],function(t,e){return t.Collection.extend({model:e,url:"tipoenceste"})}),define("text!templates/private/estadistica/tplPuntoCreate.html",[],function(){return'<div class="modal fade" id="punto-create-dialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n                <h4 class="modal-title">Punto</h4>\n            </div>\n            <div class="modal-body">\n                <p>Crear Punto.</p>\n                <div class="alert alert-danger" role="alert"></div>\n                <form id="form-punto" role="form">\n                    <input id="partido-id" type="hidden" name="partidoId" value="<%= partidoId %>">\n                    <input id="origen-punto" type="hidden" name="origen" value="<%= origen %>">\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Jugador</label>\n                                <select class="form-control" id="select-tirador" placeholder="Jugador..." name="jugadorId" value="<%= jugadorId %>">\n                                </select>\n                            </div>\n                        </div>\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Tipo Punto</label>\n                                <select class="form-control" id="select-tipo-enceste" placeholder="Tipo Enceste..." name="tipo" value="<%= tipo %>">\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Minuto</label>\n                                <input  type="number" min="0" max="100" step="1" class="form-control validate-number" name="minuto" value="<%= minuto %>"/>\n                            </div>\n                        </div>\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Segundo</label>\n                                <input type="number" min="0" max="59" step="1" class="form-control validate-number" name="segundo" value="<%= segundo %>"/>\n                            </div>\n                        </div>\n                    </div>\n                </form>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n                <button id="btn-aceptar" type="button" class="btn btn-success">Aceptar</button>\n            </div>\n        </div>\n    </div>\n</div>\n\n\n'}),define("views/private/estadistica/PuntoCreateView",["jquery","backbone","bootstrap","core/BaseView","models/estadistica/PuntoModel","models/TorneoEquipoModel","collections/TorneoJugadoresCollection","collections/estadistica/TipoEncestesCollection","views/private/util/ModalGenericView","text!templates/private/estadistica/tplPuntoCreate.html"],function(t,e,i,n,o,s,r,a,l,c){return n.extend({el:"#modal-partido",template:_.template(c),events:{"click #btn-aceptar":"clickAceptar","change .validate-number":"validateNumber","keyup .validate-number":"validateNumber"},initialize:function(t){this.model=new o,this.modelPartido=t.modelo,this.callbackAceptar=t.callbackAceptar,this.parent=t.parent,this.model.set({origen:t.origen}),this.model.set({partidoId:t.modelo.get("id")}),this.render(),this.tipos=new a,this.listenTo(this.tipos,"add",this.agregarTipoEnceste),this.listenTo(this.tipos,"sync",this.syncTipoEncestes),this.tipos.fetch(),this.tiradores=new r,this.listenTo(this.tiradores,"add",this.agregarTirador),this.listenTo(this.tiradores,"sync",this.syncTiradores),this.fetchJugadoresByOrigen(t.origen),e.Validation.bind(this)},fetchJugadoresByOrigen:function(t){var e;"LOCAL"==t&&(e=new s({id:this.modelPartido.get("localId")})),"VISITA"==t&&(e=new s({id:this.modelPartido.get("visitaId")})),this.tiradores.setTorneoEquipo(e),this.tiradores.fetch()},render:function(){this.$el.html(this.template(this.model.toJSON())),this.$("#punto-create-dialog").modal("show"),this.$(".alert-danger").hide()},agregarTipoEnceste:function(e){t("#select-tipo-enceste").append(t("<option>",{value:e.get("clave"),text:e.get("descripcion")}))},syncTipoEncestes:function(e){t("#select-tipo-enceste").change()},agregarTirador:function(e){t("#select-tirador").append(t("<option>",{value:e.get("id"),text:e.get("jugadorNombre")}))},syncTiradores:function(e){t("#select-tirador").change()},clickAceptar:function(t){var e=this.$el.find("#form-punto").serializeObject();this.model.set(e),that=this,this.model.isValid(!0)&&this.model.save({},{wait:!0,success:function(t,e){new l({message:"Punto registrado correctamente"}),that.callbackAceptar(t)},error:function(t,e){new l({message:"Se presento un error al registrar el punto"})}})},validateNumber:function(e){if(t.isNumeric(t(e.currentTarget).val()))if(t(e.currentTarget).val()!=t(e.currentTarget).val().replace(/[^0-9\.]/g,"")){var i=t(e.currentTarget).val().replace(/[^0-9.]/g,"");t(e.currentTarget).val(i)}else{var n=parseInt(t(e.currentTarget).attr("max")),o=parseInt(t(e.currentTarget).attr("min"))
;t(e.currentTarget).val()>n?t(e.currentTarget).val(n):t(e.currentTarget).val()<o&&t(e.currentTarget).val(o)}else{var i=t(e.currentTarget).val().replace(/[^0-9.]/g,"");t(e.currentTarget).val(i)}},destroyView:function(){t("body").removeClass("modal-open"),this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this),t("<div id='modal-partido'></div>").appendTo("#modal-partido-parent")}})}),define("models/estadistica/TipoFaltaModel",["backbone"],function(t){return t.Model.extend({urlRoot:"tipofalta",defaults:{clave:"",descripcion:""},initialize:function(){},validation:{clave:{required:!0},descripcion:{required:!0}}})}),define("collections/estadistica/TipoFaltasCollection",["backbone","models/estadistica/TipoFaltaModel"],function(t,e){return t.Collection.extend({model:e,url:"tipofalta"})}),define("text!templates/private/estadistica/tplFaltaCreate.html",[],function(){return'<div class="modal fade" id="falta-create-dialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n                <h4 class="modal-title">Falta</h4>\n            </div>\n            <div class="modal-body">\n                <p>Crear Falta.</p>\n                <div class="alert alert-danger" role="alert"></div>\n                <form id="form-falta" role="form">\n                    <input id="partido-id" type="hidden" name="partidoId" value="<%= partidoId %>">\n                    <input id="origen-falta" type="hidden" name="origen" value="<%= origen %>">\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Infractor</label>\n                                <select class="form-control" id="select-infractor" placeholder="Jugador..." name="infractorId" value="<%= infractorId %>">\n                                </select>\n                            </div>\n                        </div>\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Recibe</label>\n                                <select class="form-control" id="select-receptor" placeholder="Jugador..." name="receptorId" value="<%= receptorId %>">\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Tipo Falta</label>\n                                <select class="form-control" id="select-tipo-falta" placeholder="Tipo Falta..." name="tipo" value="<%= tipo %>">\n                                </select>\n                            </div>\n                        </div>\n                        <div class="col-xs-6">\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Minuto</label>\n                                <input  type="number" min="0" max="100" step="1" class="form-control validate-number" name="minuto" value="<%= minuto %>">\n                            </div>\n                        </div>\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Segundo</label>\n                                <input type="number" min="0" max="59" step="1" class="form-control validate-number"  name="segundo" value="<%= segundo %>">\n                            </div>\n                        </div>\n                    </div>\n                </form>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n                <button id="btn-aceptar" type="button" class="btn btn-success">Aceptar</button>\n            </div>\n        </div>\n    </div>\n</div>\n\n'}),define("views/private/estadistica/FaltaCreateView",["jquery","backbone","bootstrap","core/BaseView","models/estadistica/FaltaModel","models/TorneoEquipoModel","collections/TorneoJugadoresCollection","collections/estadistica/TipoFaltasCollection","views/private/util/ModalGenericView","text!templates/private/estadistica/tplFaltaCreate.html"],function(t,e,i,n,o,s,r,a,l,c){return n.extend({el:"#modal-partido",template:_.template(c),events:{"click #btn-aceptar":"clickAceptar","change .validate-number":"validateNumber","keyup .validate-number":"validateNumber"},initialize:function(t){this.model=new o,this.modelPartido=t.modelo,this.callbackAceptar=t.callbackAceptar,this.parent=t.parent,this.model.set({origen:t.origen}),this.model.set({partidoId:t.modelo.get("id")}),this.render(),this.tipos=new a,this.listenTo(this.tipos,"add",this.agregarTipoFalta),this.listenTo(this.tipos,"sync",this.syncTipoFaltas),this.tipos.fetch(),this.infractores=new r,this.listenTo(this.infractores,"add",this.agregarInfractor),this.listenTo(this.infractores,"sync",this.syncInfractores),this.fetchInfractoresByOrigen(t.origen),this.receptores=new r,this.listenTo(this.receptores,"add",this.agregarReceptor),this.listenTo(this.receptores,"sync",this.syncReceptores),this.fetchReceptoresByOrigen(t.origen),e.Validation.bind(this)},fetchInfractoresByOrigen:function(t){var e;"LOCAL"==t&&(e=new s({id:this.modelPartido.get("localId")})),"VISITA"==t&&(e=new s({id:this.modelPartido.get("visitaId")})),this.infractores.setTorneoEquipo(e),this.infractores.fetch()},fetchReceptoresByOrigen:function(t){var e;"VISITA"==t&&(e=new s({id:this.modelPartido.get("localId")})),"LOCAL"==t&&(e=new s({id:this.modelPartido.get("visitaId")})),this.receptores.setTorneoEquipo(e),this.receptores.fetch()},render:function(){this.$el.html(this.template(this.model.toJSON())),this.$("#falta-create-dialog").modal("show"),this.$(".alert-danger").hide()},agregarTipoFalta:function(e){t("#select-tipo-falta").append(t("<option>",{value:e.get("clave"),text:e.get("descripcion")}))},syncTipoFaltas:function(e){t("#select-tipo-falta").change()},agregarInfractor:function(e){t("#select-infractor").append(t("<option>",{value:e.get("id"),text:e.get("jugadorNombre")}))},syncInfractores:function(e){t("#select-infractor").change()},agregarReceptor:function(e){t("#select-receptor").append(t("<option>",{value:e.get("id"),text:e.get("jugadorNombre")}))},syncReceptores:function(e){t("#select-receptor").change()},clickAceptar:function(t){var e=this.$el.find("#form-falta").serializeObject();this.model.set(e),that=this,this.model.isValid(!0)&&this.model.save({},{wait:!0,success:function(t,e){new l({message:"Falta registrada correctamente"}),that.callbackAceptar(t)},error:function(t,e){new l({message:"Se presento un error al registrar la falta"})}})},validateNumber:function(e){if(t.isNumeric(t(e.currentTarget).val()))if(t(e.currentTarget).val()!=t(e.currentTarget).val().replace(/[^0-9\.]/g,"")){var i=t(e.currentTarget).val().replace(/[^0-9.]/g,"");t(e.currentTarget).val(i)}else{var n=parseInt(t(e.currentTarget).attr("max")),o=parseInt(t(e.currentTarget).attr("min"));t(e.currentTarget).val()>n?t(e.currentTarget).val(n):t(e.currentTarget).val()<o&&t(e.currentTarget).val(o)}else{var i=t(e.currentTarget).val().replace(/[^0-9.]/g,"");t(e.currentTarget).val(i)}},destroyView:function(){t("body").removeClass("modal-open"),this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this),t("<div id='modal-partido'></div>").appendTo("#modal-partido-parent")}})}),define("models/estadistica/TipoMovimientoModel",["backbone"],function(t){return t.Model.extend({urlRoot:"tipomovimiento",defaults:{clave:"",descripcion:""},initialize:function(){},validation:{clave:{required:!0},descripcion:{required:!0}}})}),define("collections/estadistica/TipoMovimientosCollection",["backbone","models/estadistica/TipoMovimientoModel"],function(t,e){return t.Collection.extend({model:e,url:"tipomovimiento"})}),define("text!templates/private/estadistica/tplMovimientoCreate.html",[],function(){return'<div class="modal fade" id="movimiento-create-dialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n                <h4 class="modal-title">Movimiento</h4>\n            </div>\n            <div class="modal-body">\n                <p>Crear Movimiento.</p>\n                <div class="alert alert-danger" role="alert"></div>\n                <form id="form-movimiento" role="form">\n                    <input id="partido-id" type="hidden" name="partidoId" value="<%= partidoId %>">\n                    <input id="origen-movimiento" type="hidden" name="origen" value="<%= origen %>">\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Entra</label>\n                                <select class="form-control" id="select-entra" placeholder="Jugador..." name="entraId" value="<%= entraId %>">\n                                </select>\n                            </div>\n                        </div>\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Sale</label>\n                                <select class="form-control" id="select-sale" placeholder="Jugador..." name="saleId" value="<%= saleId %>">\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Tipo Movimiento</label>\n                                <select class="form-control" id="select-tipo-movimiento" placeholder="Tipo Movimiento..." name="tipo" value="<%= tipo %>">\n                                </select>\n                            </div>\n                        </div>\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Tiempo</label>\n                                <input id="tiempofocus" autofocus="autofocus" placeholder="00:00" type="text" class="form-control validate-time" name="tiempo">\n                            </div>\n                        </div>\n                    </div>\n\n                    \n                </form>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n                <button id="btn-aceptar" type="button" class="btn btn-success">Aceptar</button>\n            </div>\n            <script type="text/javascript">\n                \n            <\/script>\n        </div>\n    </div>\n</div>\n\n'}),define("views/private/estadistica/MovimientoCreateView",["jquery","backbone","bootstrap","core/BaseView","models/estadistica/MovimientoModel","models/TorneoEquipoModel","collections/TorneoJugadoresCollection","collections/estadistica/TipoMovimientosCollection","views/private/util/ModalGenericView","text!templates/private/estadistica/tplMovimientoCreate.html"],function(t,e,i,n,o,s,r,a,l,c){return n.extend({el:"#modal-partido",template:_.template(c),events:{"click #btn-aceptar":"clickAceptar","change #select-entra":"changeEntra","change .validate-time":"validateTime","keyup .validate-time":"validateTime"},initialize:function(t){this.model=new o,this.modelPartido=t.modelo,this.callbackAceptar=t.callbackAceptar,this.parent=t.parent,this.origen=t.origen,this.tipo=t.tipo,this.model.set({origen:t.origen}),this.model.set({partidoId:t.modelo.get("id")}),this.render(),this.tipos=new a,this.listenTo(this.tipos,"add",this.agregarTipoMovimiento),this.listenTo(this.tipos,"sync",this.syncTipoMovimientos),this.tipos.fetch(),this.entran=new r,this.listenTo(this.entran,"add",this.agregarEntra),this.listenTo(this.entran,"sync",this.syncEntraes),this.salen=new r,this.listenTo(this.salen,"add",this.agregarSale),this.listenTo(this.salen,"sync",this.syncSalees),"DIRECT_INIT"!=this.tipo&&"DIRECT_OTHER"!=this.tipo?this.fetchSaleesByOrigen(this.origen):(this.entran.add(t.entra),"DIRECT_OTHER"==this.tipo?this.salen.add(t.sale):this.agregarSaleDefault()),e.Validation.bind(this)},fetchEntraesByOrigen:function(t){var e;"LOCAL"==t&&(e=new s({id:this.modelPartido.get("localId")})),"VISITA"==t&&(e=new s({id:this.modelPartido.get("visitaId")})),this.entran.setTorneoEquipo(e),this.entran.fetch()},fetchSaleesByOrigen:function(t){var e;"LOCAL"==t&&(e=new s({id:this.modelPartido.get("localId")})),"VISITA"==t&&(e=new s({id:this.modelPartido.get("visitaId")})),this.salen.setTorneoEquipo(e),this.salen.fetch()},render:function(){this.$el.html(this.template(this.model.toJSON())),this.$("#movimiento-create-dialog").modal("show"),this.$(".alert-danger").hide()},agregarTipoMovimiento:function(e){"DIRECT_INIT"==this.tipo&&"INICIO"!=e.get("clave")||"DIRECT_OTHER"==this.tipo&&"INICIO"==e.get("clave")||t("#select-tipo-movimiento").append(t("<option>",{value:e.get("clave"),text:e.get("descripcion")}))},syncTipoMovimientos:function(e){t("#select-tipo-movimiento").change()},agregarEntra:function(e){t("#select-entra").append(t("<option>",{value:e.get("id"),text:e.get("jugadorNombre")}))},syncEntraes:function(e){t("#select-entra").change()},changeEntra:function(e){var i=this.entran.get(t(e.target).val());t("#select-sale").html(""),that=this,this.salen.each(function(t){i.get("id")!=t.get("id")&&that.agregarSale(t)})},agregarSaleDefault:function(){t("#select-sale").append(t("<option>",{value:"",text:"Ninguno"}))},agregarSale:function(e){t("#select-sale").append(t("<option>",{value:e.get("id"),text:e.get("jugadorNombre")}))},syncSalees:function(e){t("#select-sale").change(),this.fetchEntraesByOrigen(this.origen)},validateTime:function(e){var i=t(e.currentTarget).val(),n=/^[\d:]$/,o=/^([0-9]?\d|[0-9]\d)$/,s=/^([0-9]?\d|[0-9]\d):$/,r=/^([0-9]?\d|[0-9]\d):?([0-5])$/,a=/^([0-9]?\d|[0-9]\d):?([0-5]\d)$/;if(i.length<=5&&i.length>0){var l=i.substring(i.length-1,i.length);if(n.test(l)){if(2==i.length&&(o.test(i)?t(e.currentTarget).val(i+":"):t(e.currentTarget).val("")),3==i.length&&!s.test(i)){var c=i.substring(0,i.length-1);t(e.currentTarget).val(c)}if(4==i.length&&!r.test(i)){var c=i.substring(0,i.length-1);t(e.currentTarget).val(c)}5==i.length&&(a.test(i)||t(e.currentTarget).val(""))}else{var c=i.substring(0,i.length-1);t(e.currentTarget).val(c)}}else if(i.length>0){var h=i.substring(0,5);t(e.currentTarget).val(h)}},clickAceptar:function(t){var e=this.$el.find("#form-movimiento").serializeObject(),i=e.tiempo.split(":");e.minuto=i[0],e.segundo=i[1],this.model.set(e),that=this,this.model.isValid(!0)&&this.model.save({},{wait:!0,success:function(t,e){new l({message:"Movimiento registrado correctamente"}),that.callbackAceptar(t)},error:function(t,e){new l({message:"Se presento un error al registrar el movimiento"})}})},destroyView:function(){t("body").removeClass("modal-open"),this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this),t("<div id='modal-partido'></div>").appendTo("#modal-partido-parent")}})}),define("text!templates/private/estadistica/tplAsistenciaCreate.html",[],function(){return'<div class="modal fade" id="asistencia-create-dialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n                <h4 class="modal-title">Asistencia</h4>\n            </div>\n            <div class="modal-body">\n                <p>Crear Asistencia.</p>\n                <div class="alert alert-danger" role="alert"></div>\n                <form id="form-asistencia" role="form">\n                    <input id="partido-id" type="hidden" name="partidoId" value="<%= partidoId %>">\n                    <input id="origen-asistencia" type="hidden" name="origen" value="<%= origen %>">\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Asistencia</label>\n                                <select class="form-control" id="select-asiste" placeholder="Jugador..." name="asisteId" value="<%= asisteId %>">\n                                </select>\n                            </div>\n                        </div>\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Asistido</label>\n                                <select class="form-control" id="select-asistido" placeholder="Jugador..." name="asistidoId" value="<%= asistidoId %>">\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Minuto</label>\n                                <input  type="number" min="0" max="100" step="1" class="form-control validate-number" name="minuto" value="<%= minuto %>"/>\n                            </div>\n                        </div>\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Segundo</label>\n                                <input type="number" min="0" max="59" step="1" class="form-control validate-number"  name="segundo" value="<%= segundo %>">\n                            </div>\n                        </div>\n                    </div>\n                </form>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n                <button id="btn-aceptar" type="button" class="btn btn-success">Aceptar</button>\n            </div>\n        </div>\n    </div>\n</div>\n\n'}),define("views/private/estadistica/AsistenciaCreateView",["jquery","backbone","bootstrap","core/BaseView","models/estadistica/AsistenciaModel","models/TorneoEquipoModel","collections/TorneoJugadoresCollection","views/private/util/ModalGenericView","text!templates/private/estadistica/tplAsistenciaCreate.html"],function(t,e,i,n,o,s,r,a,l){return n.extend({el:"#modal-partido",template:_.template(l),events:{"click #btn-aceptar":"clickAceptar","change #select-asiste":"changeAsiste","change .validate-number":"validateNumber","keyup .validate-number":"validateNumber"},initialize:function(t){this.model=new o,this.modelPartido=t.modelo,this.callbackAceptar=t.callbackAceptar,this.parent=t.parent,this.origen=t.origen,this.model.set({origen:t.origen}),this.model.set({partidoId:t.modelo.get("id")}),this.render(),this.asisten=new r,this.listenTo(this.asisten,"add",this.agregarAsiste),this.listenTo(this.asisten,"sync",this.syncAsistees),this.asistidon=new r,this.listenTo(this.asistidon,"add",this.agregarAsistido),this.listenTo(this.asistidon,"sync",this.syncAsistidoes),this.fetchAsistidoesByOrigen(this.origen),e.Validation.bind(this)},fetchAsisteesByOrigen:function(t){var e;"LOCAL"==t&&(e=new s({id:this.modelPartido.get("localId")})),"VISITA"==t&&(e=new s({id:this.modelPartido.get("visitaId")})),this.asisten.setTorneoEquipo(e),this.asisten.fetch()},fetchAsistidoesByOrigen:function(t){var e;"LOCAL"==t&&(e=new s({id:this.modelPartido.get("localId")})),"VISITA"==t&&(e=new s({id:this.modelPartido.get("visitaId")})),this.asistidon.setTorneoEquipo(e),this.asistidon.fetch()},render:function(){this.$el.html(this.template(this.model.toJSON())),this.$("#asistencia-create-dialog").modal("show"),this.$(".alert-danger").hide()},agregarAsiste:function(e){t("#select-asiste").append(t("<option>",{value:e.get("id"),text:e.get("jugadorNombre")}))},syncAsistees:function(e){t("#select-asiste").change()},changeAsiste:function(e){var i=this.asisten.get(t(e.target).val());t("#select-asistido").html(""),that=this,this.asistidon.each(function(t){i.get("id")!=t.get("id")&&that.agregarAsistido(t)})},agregarAsistido:function(e){t("#select-asistido").append(t("<option>",{value:e.get("id"),text:e.get("jugadorNombre")}))},syncAsistidoes:function(e){t("#select-asistido").change(),this.fetchAsisteesByOrigen(this.origen)},clickAceptar:function(t){var e=this.$el.find("#form-asistencia").serializeObject();this.model.set(e),that=this,this.model.isValid(!0)&&this.model.save({},{wait:!0,success:function(t,e){new a({message:"Asistencia registrada correctamente"}),that.callbackAceptar(t)},error:function(t,e){new a({message:"Se presento un error al registrar la asistencia"})}})},validateNumber:function(e){if(t.isNumeric(t(e.currentTarget).val()))if(t(e.currentTarget).val()!=t(e.currentTarget).val().replace(/[^0-9\.]/g,"")){var i=t(e.currentTarget).val().replace(/[^0-9.]/g,"");t(e.currentTarget).val(i)}else{var n=parseInt(t(e.currentTarget).attr("max")),o=parseInt(t(e.currentTarget).attr("min"));t(e.currentTarget).val()>n?t(e.currentTarget).val(n):t(e.currentTarget).val()<o&&t(e.currentTarget).val(o)}else{var i=t(e.currentTarget).val().replace(/[^0-9.]/g,"");t(e.currentTarget).val(i)}},destroyView:function(){t("body").removeClass("modal-open"),this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this),t("<div id='modal-partido'></div>").appendTo("#modal-partido-parent")}})}),define("text!templates/private/estadistica/tplBloqueoCreate.html",[],function(){return'<div class="modal fade" id="bloqueo-create-dialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n                <h4 class="modal-title">Bloqueo</h4>\n            </div>\n            <div class="modal-body">\n                <p>Crear Bloqueo.</p>\n                <div class="alert alert-danger" role="alert"></div>\n                <form id="form-bloqueo" role="form">\n                    <input id="partido-id" type="hidden" name="partidoId" value="<%= partidoId %>">\n                    <input id="origen-bloqueo" type="hidden" name="origen" value="<%= origen %>">\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Bloquea</label>\n                                <select class="form-control" id="select-bloquea" placeholder="Jugador..." name="bloqueaId" value="<%= bloqueaId %>">\n                                </select>\n                            </div>\n                        </div>\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Bloqueado</label>\n                                <select class="form-control" id="select-bloqueado" placeholder="Jugador..." name="bloqueadoId" value="<%= bloqueadoId %>">\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Minuto</label>\n                                <input  type="number" min="0" max="100" step="1" class="form-control validate-number" name="minuto" value="<%= minuto %>"/>\n                            </div>\n                        </div>\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Segundo</label>\n                                <input type="number" min="0" max="59" step="1" class="form-control validate-number"  name="segundo" value="<%= segundo %>">\n                            </div>\n                        </div>\n                    </div>\n                </form>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n                <button id="btn-aceptar" type="button" class="btn btn-success">Aceptar</button>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("views/private/estadistica/BloqueoCreateView",["jquery","backbone","bootstrap","core/BaseView","models/estadistica/BloqueoModel","models/TorneoEquipoModel","collections/TorneoJugadoresCollection","views/private/util/ModalGenericView","text!templates/private/estadistica/tplBloqueoCreate.html"],function(t,e,i,n,o,s,r,a,l){return n.extend({el:"#modal-partido",template:_.template(l),events:{"click #btn-aceptar":"clickAceptar","change .validate-number":"validateNumber","keyup .validate-number":"validateNumber"},initialize:function(t){this.model=new o,this.modelPartido=t.modelo,this.callbackAceptar=t.callbackAceptar,this.parent=t.parent,this.model.set({origen:t.origen}),this.model.set({partidoId:t.modelo.get("id")}),this.render(),this.bloqueadores=new r,this.listenTo(this.bloqueadores,"add",this.agregarInfractor),this.listenTo(this.bloqueadores,"sync",this.syncBloqueadores),this.fetchBloqueadoresByOrigen(t.origen),this.bloqueados=new r,this.listenTo(this.bloqueados,"add",this.agregarReceptor),this.listenTo(this.bloqueados,"sync",this.syncBloqueados),this.fetchBloqueadosByOrigen(t.origen),e.Validation.bind(this)},fetchBloqueadoresByOrigen:function(t){var e;"LOCAL"==t&&(e=new s({id:this.modelPartido.get("localId")})),"VISITA"==t&&(e=new s({id:this.modelPartido.get("visitaId")})),this.bloqueadores.setTorneoEquipo(e),this.bloqueadores.fetch()},fetchBloqueadosByOrigen:function(t){var e;"VISITA"==t&&(e=new s({id:this.modelPartido.get("localId")})),"LOCAL"==t&&(e=new s({id:this.modelPartido.get("visitaId")})),this.bloqueados.setTorneoEquipo(e),this.bloqueados.fetch()},render:function(){this.$el.html(this.template(this.model.toJSON())),this.$("#bloqueo-create-dialog").modal("show"),this.$(".alert-danger").hide()},agregarInfractor:function(e){t("#select-bloquea").append(t("<option>",{value:e.get("id"),text:e.get("jugadorNombre")}))},syncBloqueadores:function(e){t("#select-bloquea").change()},agregarReceptor:function(e){t("#select-bloqueado").append(t("<option>",{value:e.get("id"),text:e.get("jugadorNombre")}))},syncBloqueados:function(e){t("#select-bloqueado").change()},clickAceptar:function(t){var e=this.$el.find("#form-bloqueo").serializeObject();this.model.set(e),that=this,this.model.isValid(!0)&&this.model.save({},{wait:!0,success:function(t,e){new a({message:"Bloqueo registrado correctamente"}),that.callbackAceptar(t)},error:function(t,e){new a({message:"Se presento un error al registrar el bloqueo"})}})},validateNumber:function(e){if(t.isNumeric(t(e.currentTarget).val()))if(t(e.currentTarget).val()!=t(e.currentTarget).val().replace(/[^0-9\.]/g,"")){var i=t(e.currentTarget).val().replace(/[^0-9.]/g,"");t(e.currentTarget).val(i)}else{var n=parseInt(t(e.currentTarget).attr("max")),o=parseInt(t(e.currentTarget).attr("min"));t(e.currentTarget).val()>n?t(e.currentTarget).val(n):t(e.currentTarget).val()<o&&t(e.currentTarget).val(o)}else{var i=t(e.currentTarget).val().replace(/[^0-9.]/g,"");t(e.currentTarget).val(i)}},destroyView:function(){t("body").removeClass("modal-open"),this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this),t("<div id='modal-partido'></div>").appendTo("#modal-partido-parent")}})}),define("models/estadistica/TipoReboteModel",["backbone"],function(t){return t.Model.extend({urlRoot:"tiporebote",defaults:{clave:"",descripcion:""},initialize:function(){},validation:{clave:{required:!0},descripcion:{required:!0}}})}),define("collections/estadistica/TipoRebotesCollection",["backbone","models/estadistica/TipoReboteModel"],function(t,e){return t.Collection.extend({model:e,url:"tiporebote"})}),define("text!templates/private/estadistica/tplReboteCreate.html",[],function(){return'<div class="modal fade" id="rebote-create-dialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n                <h4 class="modal-title">Rebote</h4>\n            </div>\n            <div class="modal-body">\n                <p>Crear Rebote.</p>\n                <div class="alert alert-danger" role="alert"></div>\n                <form id="form-rebote" role="form">\n                    <input id="partido-id" type="hidden" name="partidoId" value="<%= partidoId %>">\n                    <input id="origen-rebote" type="hidden" name="origen" value="<%= origen %>">\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Jugador</label>\n                                <select class="form-control" id="select-jugador" placeholder="Jugador..." name="jugadorId" value="<%= jugadorId %>">\n                                </select>\n                            </div>\n                        </div>\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Tipo Rebote</label>\n                                <select class="form-control" id="select-tipo-rebote" placeholder="Tipo Rebote..." name="tipo" value="<%= tipo %>">\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Minuto</label>\n                                <input  type="number" min="0" max="100" step="1" class="form-control validate-number" name="minuto" value="<%= minuto %>"/>\n                            </div>\n                        </div>\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Segundo</label>\n                                <input type="number" min="0" max="59" step="1" class="form-control validate-number"  name="segundo" value="<%= segundo %>">\n                            </div>\n                        </div>\n                    </div>\n                </form>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n                <button id="btn-aceptar" type="button" class="btn btn-success">Aceptar</button>\n            </div>\n        </div>\n    </div>\n</div>\n\n'}),
define("views/private/estadistica/ReboteCreateView",["jquery","backbone","bootstrap","core/BaseView","models/estadistica/ReboteModel","models/TorneoEquipoModel","collections/TorneoJugadoresCollection","collections/estadistica/TipoRebotesCollection","views/private/util/ModalGenericView","text!templates/private/estadistica/tplReboteCreate.html"],function(t,e,i,n,o,s,r,a,l,c){return n.extend({el:"#modal-partido",template:_.template(c),events:{"click #btn-aceptar":"clickAceptar","change .validate-number":"validateNumber","keyup .validate-number":"validateNumber"},initialize:function(t){this.model=new o,this.modelPartido=t.modelo,this.callbackAceptar=t.callbackAceptar,this.parent=t.parent,this.model.set({origen:t.origen}),this.model.set({partidoId:t.modelo.get("id")}),this.render(),this.tipos=new a,this.listenTo(this.tipos,"add",this.agregarTipoRebote),this.listenTo(this.tipos,"sync",this.syncTipoRebotes),this.tipos.fetch(),this.jugadores=new r,this.listenTo(this.jugadores,"add",this.agregarJugador),this.listenTo(this.jugadores,"sync",this.syncJugadores),this.fetchJugadoresByOrigen(t.origen),e.Validation.bind(this)},fetchJugadoresByOrigen:function(t){var e;"LOCAL"==t&&(e=new s({id:this.modelPartido.get("localId")})),"VISITA"==t&&(e=new s({id:this.modelPartido.get("visitaId")})),this.jugadores.setTorneoEquipo(e),this.jugadores.fetch()},render:function(){this.$el.html(this.template(this.model.toJSON())),this.$("#rebote-create-dialog").modal("show"),this.$(".alert-danger").hide()},agregarTipoRebote:function(e){t("#select-tipo-rebote").append(t("<option>",{value:e.get("clave"),text:e.get("descripcion")}))},syncTipoRebotes:function(e){t("#select-tipo-rebote").change()},agregarJugador:function(e){t("#select-jugador").append(t("<option>",{value:e.get("id"),text:e.get("jugadorNombre")}))},syncJugadores:function(e){t("#select-jugador").change()},clickAceptar:function(t){var e=this.$el.find("#form-rebote").serializeObject();this.model.set(e),that=this,this.model.isValid(!0)&&this.model.save({},{wait:!0,success:function(t,e){new l({message:"Rebote registrado correctamente"}),that.callbackAceptar(t)},error:function(t,e){new l({message:"Se presento un error al registrar el rebote"})}})},validateNumber:function(e){if(t.isNumeric(t(e.currentTarget).val()))if(t(e.currentTarget).val()!=t(e.currentTarget).val().replace(/[^0-9\.]/g,"")){var i=t(e.currentTarget).val().replace(/[^0-9.]/g,"");t(e.currentTarget).val(i)}else{var n=parseInt(t(e.currentTarget).attr("max")),o=parseInt(t(e.currentTarget).attr("min"));t(e.currentTarget).val()>n?t(e.currentTarget).val(n):t(e.currentTarget).val()<o&&t(e.currentTarget).val(o)}else{var i=t(e.currentTarget).val().replace(/[^0-9.]/g,"");t(e.currentTarget).val(i)}},destroyView:function(){t("body").removeClass("modal-open"),this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this),t("<div id='modal-partido'></div>").appendTo("#modal-partido-parent")}})}),define("text!templates/private/estadistica/tplRoboCreate.html",[],function(){return'B<div class="modal fade" id="robo-create-dialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n                <h4 class="modal-title">Robo</h4>\n            </div>\n            <div class="modal-body">\n                <p>Crear Robo.</p>\n                <div class="alert alert-danger" role="alert"></div>\n                <form id="form-robo" role="form">\n                    <input id="partido-id" type="hidden" name="partidoId" value="<%= partidoId %>">\n                    <input id="origen-robo" type="hidden" name="origen" value="<%= origen %>">\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Roba</label>\n                                <select class="form-control" id="select-robo" placeholder="Jugador..." name="robadorId" value="<%= robadorId %>">\n                                </select>\n                            </div>\n                        </div>\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Pierde</label>\n                                <select class="form-control" id="select-pierde" placeholder="Jugador..." name="perdedorId" value="<%= perdedorId %>">\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Minuto</label>\n                                <input  type="number" min="0" max="100" step="1" class="form-control validate-number" name="minuto" value="<%= minuto %>"/>\n                            </div>\n                        </div>\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Segundo</label>\n                                <input type="number" min="0" max="59" step="1" class="form-control validate-number"  name="segundo" value="<%= segundo %>">\n                            </div>\n                        </div>\n                    </div>\n                </form>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n                <button id="btn-aceptar" type="button" class="btn btn-success">Aceptar</button>\n            </div>\n        </div>\n    </div>\n</div>\n\n'}),define("views/private/estadistica/RoboCreateView",["jquery","backbone","bootstrap","core/BaseView","models/estadistica/RoboModel","models/TorneoEquipoModel","collections/TorneoJugadoresCollection","views/private/util/ModalGenericView","text!templates/private/estadistica/tplRoboCreate.html"],function(t,e,i,n,o,s,r,a,l){return n.extend({el:"#modal-partido",template:_.template(l),events:{"click #btn-aceptar":"clickAceptar","change .validate-number":"validateNumber","keyup .validate-number":"validateNumber"},initialize:function(t){this.model=new o,this.modelPartido=t.modelo,this.callbackAceptar=t.callbackAceptar,this.parent=t.parent,this.model.set({origen:t.origen}),this.model.set({partidoId:t.modelo.get("id")}),this.render(),this.robadores=new r,this.listenTo(this.robadores,"add",this.agregarRobador),this.listenTo(this.robadores,"sync",this.syncRobadores),this.fetchRobadoresByOrigen(t.origen),this.perdedores=new r,this.listenTo(this.perdedores,"add",this.agregarPerdedor),this.listenTo(this.perdedores,"sync",this.syncPerdedores),this.fetchPerdedoresByOrigen(t.origen),e.Validation.bind(this)},fetchRobadoresByOrigen:function(t){var e;"LOCAL"==t&&(e=new s({id:this.modelPartido.get("localId")})),"VISITA"==t&&(e=new s({id:this.modelPartido.get("visitaId")})),this.robadores.setTorneoEquipo(e),this.robadores.fetch()},fetchPerdedoresByOrigen:function(t){var e;"VISITA"==t&&(e=new s({id:this.modelPartido.get("localId")})),"LOCAL"==t&&(e=new s({id:this.modelPartido.get("visitaId")})),this.perdedores.setTorneoEquipo(e),this.perdedores.fetch()},render:function(){this.$el.html(this.template(this.model.toJSON())),this.$("#robo-create-dialog").modal("show"),this.$(".alert-danger").hide()},agregarRobador:function(e){t("#select-robo").append(t("<option>",{value:e.get("id"),text:e.get("jugadorNombre")}))},syncRobadores:function(e){t("#select-robo").change()},agregarPerdedor:function(e){t("#select-pierde").append(t("<option>",{value:e.get("id"),text:e.get("jugadorNombre")}))},syncPerdedores:function(e){t("#select-pierde").change()},clickAceptar:function(t){var e=this.$el.find("#form-robo").serializeObject();this.model.set(e),that=this,this.model.isValid(!0)&&this.model.save({},{wait:!0,success:function(t,e){new a({message:"Robo registrado correctamente"}),that.callbackAceptar(t)},error:function(t,e){new a({message:"Se presento un error al registrar el robo"})}})},validateNumber:function(e){if(t.isNumeric(t(e.currentTarget).val()))if(t(e.currentTarget).val()!=t(e.currentTarget).val().replace(/[^0-9\.]/g,"")){var i=t(e.currentTarget).val().replace(/[^0-9.]/g,"");t(e.currentTarget).val(i)}else{var n=parseInt(t(e.currentTarget).attr("max")),o=parseInt(t(e.currentTarget).attr("min"));t(e.currentTarget).val()>n?t(e.currentTarget).val(n):t(e.currentTarget).val()<o&&t(e.currentTarget).val(o)}else{var i=t(e.currentTarget).val().replace(/[^0-9.]/g,"");t(e.currentTarget).val(i)}},destroyView:function(){t("body").removeClass("modal-open"),this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this),t("<div id='modal-partido'></div>").appendTo("#modal-partido-parent")}})}),define("text!templates/private/partido/tplPartidoAdmin.html",[],function(){return'<div class="row">\n    <div class="col-md-12">\n        <div class="panel panel-success">\n            <div class="panel-heading">\n                <h3 class="panel-title">Partido Admin</h3>\n            </div>\n\n            <div class="panel-body">\n                <div class="row">\n                    <div class="col-md-6">\n                        <div class="panel panel-default">\n                            <div class="panel-body">\n                                <div class="row">\n                                    <div class="col-md-4">\n                                        <h4><%= localAlias %></h4>\n                                        <h6><%= localNombre %></h6>\n                                    </div>\n                                    <div id="section-estadisticas-resumen" class="col-md-4">\n                                    </div>\n                                    <div class="col-md-4">\n                                        <h4><%= visitaAlias %></h4>\n                                        <h6><%= visitaNombre %></h6>\n                                    </div>\n                                </div>\n                                <div class="row">\n                                    <div class="col-md-4">\n                                        <h4><%= horarioDes %></h4>\n                                    </div>\n                                    <div class="col-md-8">\n                                        <h4><%= canchaNombre %></h4>\n                                        <h6><%= canchaDomicilio %></h6>\n                                    </div>\n                                </div>\n                                <div class="row">\n                                    <div class="col-md-12">\n                                        <div class="btn-group btn-group" role="group" aria-label="...">\n                                            <% if (statusPartido==\'PROGRAMADO\') { %>\n                                            <button id="partido-editar" type="button" class="btn btn-primary" data-toggle="tooltip" data-placement="top" title="Editar partido"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></button>\n                                            <button id="agregar-arbitro" type="button" class="btn btn-primary"><span class="glyphicon glyphicon-bullhorn" aria-hidden="true"></span></button>\n                                            <button id="partido-comenzar" type="button" class="btn btn-success"><span class="glyphicon glyphicon-play" aria-hidden="true"></span></button>\n                                            <% } %>\n                                            <% if (statusPartido==\'ENPROCESO\') { %>\n                                            <button id="partido-finalizar" type="button" class="btn btn-warning"><span class="glyphicon glyphicon-stop" aria-hidden="true"></span></button>\n                                            <% } %>\n                                            <% if (statusPartido!==\'CANCELADO\') { %>\n                                            <button id="partido-cancelar" type="button" class="btn btn-danger"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></button>\n                                            <% } %>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="col-md-6">\n                        <div class="row">\n                            <div class="col-md-12">\n                                <div class="panel panel-default">\n                                    <div class="panel-body">\n                                        <div class="row">\n                                            <div class="col-md-6">\n                                                <div class="btn-group btn-group-sm" role="group" aria-label="...">\n                                                    <% if (statusPartido==\'ENPROCESO\') { %>\n                                                    <button id="partido-puntos-local" type="button" class="btn btn-success" data-toggle="tooltip" data-placement="left" title="Tooltip on left" ><span class="glyphicon glyphicon-plus" aria-hidden="true"></span></button>\n                                                    <button id="partido-faltas-local" type="button" class="btn btn-success"><span class="glyphicon glyphicon-bookmark" aria-hidden="true"></span></button>\n                                                    <button id="partido-cambios-local" type="button" class="btn btn-success"><span class="glyphicon glyphicon-transfer" aria-hidden="true"></span></button>\n                                                    <button id="partido-asistencias-local" type="button" class="btn btn-success"><span class="glyphicon glyphicon-saved" aria-hidden="true"></span></button>\n                                                    <button id="partido-bloqueos-local" type="button" class="btn btn-success"><span class="glyphicon glyphicon-flash" aria-hidden="true"></span></button>\n                                                    <button id="partido-rebotes-local" type="button" class="btn btn-success"><span class="glyphicon glyphicon-record" aria-hidden="true"></span></button>\n                                                    <button id="partido-robos-local" type="button" class="btn btn-success"><span class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span></button>\n                                                    <% } %>\n                                                </div>\n                                            </div>\n                                            <div class="col-md-6">\n                                                <div class="btn-group btn-group-sm" role="group" aria-label="...">\n                                                    <% if (statusPartido==\'ENPROCESO\') { %>\n                                                    <button id="partido-puntos-visita" type="button" class="btn btn-info"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span></button>\n                                                    <button id="partido-faltas-visita" type="button" class="btn btn-info"><span class="glyphicon glyphicon-bookmark" aria-hidden="true"></span></button>\n                                                    <button id="partido-cambios-visita" type="button" class="btn btn-info"><span class="glyphicon glyphicon-transfer" aria-hidden="true"></span></button>\n                                                    <button id="partido-asistencias-visita" type="button" class="btn btn-info"><span class="glyphicon glyphicon-saved" aria-hidden="true"></span></button>\n                                                    <button id="partido-bloqueos-visita" type="button" class="btn btn-info"><span class="glyphicon glyphicon-flash" aria-hidden="true"></span></button>\n                                                    <button id="partido-rebotes-visita" type="button" class="btn btn-info"><span class="glyphicon glyphicon-record" aria-hidden="true"></span></button>\n                                                    <button id="partido-robos-visita" type="button" class="btn btn-info"><span class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span></button>\n                                                    <% } %>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="row">\n                            <div id="section-arbitros" class="col-md-12"/>\n                        </div>\n                    </div>\n                </div>\n                <div class="row">\n                    <div id="section-local" class="col-md-6">\n\n                    </div>\n                    <div id="section-visita" class="col-md-6">\n\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="col-md-12">\n                        <canvas id="canvas" width="640" height="372"></canvas>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="col-md-12">\n                        <div class="panel panel-default">\n                            <div class="panel-heading">\n                                <h3 class="panel-title">Estadisticas</h3>\n                            </div>\n                            <div class="panel-body">\n                                <div class="row">\n                                    <div class="col-md-12">\n                                        <ul id="estadistica-tab" class="nav nav-tabs">\n                                            <li role="presentation"><a href="#puntos">Puntos</a></li>\n                                            <li role="presentation"><a href="#faltas">Faltas</a></li>\n                                            <li role="presentation"><a href="#cambios">Cambios</a></li>\n                                            <li role="presentation"><a href="#asistencias">Asistencias</a></li>\n                                            <li role="presentation"><a href="#bloqueos">Bloqueos</a></li>\n                                            <li role="presentation"><a href="#rebotes">Rebotes</a></li>\n                                            <li role="presentation"><a href="#robos">Robos</a></li>\n                                        </ul>\n                                    </div>\n                                </div>\n                                <div class="row">\n                                    <div class="col-md-12">\n                                        <div id="my-tab-content" class="tab-content">\n                                            <div class="tab-pane" id="puntos">\n                                                <div id="section-estadisticas-puntos">\n                                                </div>\n                                            </div>\n                                            <div class="tab-pane" id="faltas">\n                                                <div id="section-estadisticas-faltas">\n                                                </div>\n                                            </div>\n                                            <div class="tab-pane" id="cambios">\n                                                <div id="section-estadisticas-cambios">\n                                                </div>\n                                            </div>\n                                            <div class="tab-pane" id="asistencias">\n                                                <div id="section-estadisticas-asistencias">\n                                                </div>\n                                            </div>\n                                            <div class="tab-pane" id="bloqueos">\n                                                <div id="section-estadisticas-bloqueos">\n                                                </div>\n                                            </div>\n                                            <div class="tab-pane" id="rebotes">\n                                                <div id="section-estadisticas-rebotes">\n                                                </div>\n                                            </div>\n                                            <div class="tab-pane" id="robos">\n                                                <div id="section-estadisticas-robos">\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div id="modal-partido-parent">\n                    <div id="modal-partido"/>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("views/private/partido/PartidoAdminView",["jquery","backbone","bootstrap","selecter","fabric","core/BaseView","models/TorneoPartidoModel","models/ArbitroPartidoModel","views/private/partido/PartidoEquipoView","views/private/partido/PartidoArbitrosView","views/private/partido/PartidoEditView","views/private/partido/NewArbitroPartidoView","views/private/estadistica/EstadisticaResumenView","views/private/estadistica/EstadisticaPuntosView","views/private/estadistica/EstadisticaFaltasView","views/private/estadistica/EstadisticaMovimientosView","views/private/estadistica/EstadisticaAsistenciasView","views/private/estadistica/EstadisticaBloqueosView","views/private/estadistica/EstadisticaRebotesView","views/private/estadistica/EstadisticaRobosView","views/private/estadistica/PuntoCreateView","views/private/estadistica/FaltaCreateView","views/private/estadistica/MovimientoCreateView","views/private/estadistica/AsistenciaCreateView","views/private/estadistica/BloqueoCreateView","views/private/estadistica/ReboteCreateView","views/private/estadistica/RoboCreateView","views/private/util/ModalGenericView","text!templates/private/partido/tplPartidoAdmin.html"],function(t,e,i,n,o,s,r,a,l,c,h,d,u,p,f,g,v,m,b,y,w,x,C,T,S,k,E,A,O){return s.extend({template:_.template(O),events:{"click #partido-editar":"partidoEditar","click #agregar-arbitro":"agregarArbitro","click #partido-comenzar":"partidoComenzar","click #partido-cancelar":"partidoCancelar","click #partido-finalizar":"partidoFinalizar","click #partido-puntos-local":"partidoPuntosLocal","click #partido-faltas-local":"partidoFaltasLocal","click #partido-cambios-local":"partidoCambiosLocal","click #partido-asistencias-local":"partidoAsistenciasLocal","click #partido-bloqueos-local":"partidoBloqueosLocal","click #partido-rebotes-local":"partidoRebotesLocal","click #partido-robos-local":"partidoRobosLocal","click #partido-puntos-visita":"partidoPuntosVisita","click #partido-faltas-visita":"partidoFaltasVisita","click #partido-cambios-visita":"partidoCambiosVisita","click #partido-asistencias-visita":"partidoAsistenciasVisita","click #partido-bloqueos-visita":"partidoBloqueosVisita","click #partido-rebotes-visita":"partidoRebotesVisita","click #partido-robos-visita":"partidoRobosVisita"},initialize:function(t){this.model=new r,this.listenTo(this.model,"sync",this.syncPartido)},render:function(){return this},syncPartido:function(){this.$el.html(this.template(this.model.toJSON())),t("#estadistica-tab a").click(function(e){e.preventDefault(),t(this).tab("show")}),this.$el.find('[data-toggle="tooltip"]').tooltip(),this.strPath="M 192.3004,118.04878 H 196.63056 V 139.6996 C 196.63056,140.89553 197.59971,141.86468 198.79564,141.86468 H 216.1163 C 217.31223,141.86468 218.28137,140.89553 218.28137,139.6996 V 118.04878 H 222.61154 C 223.80747,118.04878 224.77662,117.07964 224.77662,115.88371 V 109.38846 C 224.77662,108.19252 223.80747,107.22338 222.61154,107.22338 H 213.95121 C 213.95121,110.81065 211.04324,113.71862 207.45597,113.71862 203.8687,113.71862 200.96072,110.81065 200.96072,107.22338 H 192.3004 C 191.10446,107.22338 190.13532,108.19252 190.13532,109.38846 V 115.88371 C 190.13532,117.07964 191.10446,118.04878 192.3004,118.04878 z",this.local=new l({modelo:this.model,parent:this,type:"LOCAL"}),this.visita=new l({modelo:this.model,parent:this,type:"VISITA"}),this.viewPartidoArbitro=new c({modelo:this.model,parent:this}).render(),new p({modelo:this.model,parent:this}),new f({modelo:this.model,parent:this}),new g({modelo:this.model,parent:this}),new v({modelo:this.model,parent:this}),new m({modelo:this.model,parent:this}),new b({modelo:this.model,parent:this}),new y({modelo:this.model,parent:this}),new u(this.model),this.setUpCourt()},setIdPartido:function(t){this.model.set("id",t),this.model.fetch()},partidoEditar:function(){new h({modelo:this.model,callbackAceptar:this.successSavePartido})},successSavePartido:function(t){},agregarArbitro:function(){new d({modelo:this.model,parent:this}).render().$el},partidoPuntosLocal:function(){new w({modelo:this.model,callbackAceptar:this.successAddPunto,origen:"LOCAL",parent:this})},partidoPuntosVisita:function(){new w({modelo:this.model,callbackAceptar:this.successAddPunto,origen:"VISITA",parent:this})},successAddPunto:function(e){if("LOCAL"===e.get("origen")){var i=this.parent.model.get("localPuntos")+e.get("tipoValor");this.parent.model.set({localPuntos:i})}else{var n=this.parent.model.get("visitaPuntos")+e.get("tipoValor");this.parent.model.set({visitaPuntos:n})}t("#section-estadisticas-resumen").html(""),new u(this.parent.model),app.puntosPartido.add(e),this.destroyView()},successRemovePunto:function(e){if("LOCAL"===e.get("origen")){var i=this.model.get("localPuntos")-e.get("tipoValor");this.model.set({localPuntos:i})}else{var n=this.model.get("visitaPuntos")-e.get("tipoValor");this.model.set({visitaPuntos:n})}t("#section-estadisticas-resumen").html(""),new u(this.model),app.puntosPartido.remove(e)},partidoFaltasLocal:function(){new x({modelo:this.model,callbackAceptar:this.successAddFalta,origen:"LOCAL",parent:this})},partidoFaltasVisita:function(){new x({modelo:this.model,callbackAceptar:this.successAddFalta,origen:"VISITA",parent:this})},successAddFalta:function(t){app.faltasPartido.add(t),this.destroyView()},successRemoveFalta:function(t){app.faltasPartido.remove(t)},partidoCambiosLocal:function(){new C({modelo:this.model,callbackAceptar:this.successAddMovimiento,tipo:"MANUAL",origen:"LOCAL",parent:this})},partidoCambiosVisita:function(){new C({modelo:this.model,callbackAceptar:this.successAddMovimiento,tipo:"MANUAL",origen:"VISITA",parent:this})},partidoCambiosDirect:function(t,e,i,n){new C({modelo:this.model,callbackAceptar:this.successAddMovimiento,tipo:i,origen:n,parent:this,entra:t,sale:e})},successAddMovimiento:function(t){app.movimientosPartido.add(t),this.destroyView()},successRemoveMovimiento:function(t){app.movimientosPartido.remove(t)},partidoAsistenciasLocal:function(){new T({modelo:this.model,callbackAceptar:this.successAddAsistencia,origen:"LOCAL",parent:this})},partidoAsistenciasVisita:function(){new T({modelo:this.model,callbackAceptar:this.successAddAsistencia,origen:"VISITA",parent:this})},successAddAsistencia:function(t){app.asistenciasPartido.add(t),this.destroyView()},successRemoveAsistencia:function(t){app.asistenciasPartido.remove(t)},partidoBloqueosLocal:function(){new S({modelo:this.model,callbackAceptar:this.successAddBloqueo,origen:"LOCAL",parent:this})},partidoBloqueosVisita:function(){new S({modelo:this.model,callbackAceptar:this.successAddBloqueo,origen:"VISITA",parent:this})},successAddBloqueo:function(t){app.bloqueosPartido.add(t),this.destroyView()},successRemoveBloqueo:function(t){app.bloqueosPartido.remove(t)},partidoRebotesLocal:function(){new k({modelo:this.model,callbackAceptar:this.successAddRebote,origen:"LOCAL",parent:this})},partidoRebotesVisita:function(){new k({modelo:this.model,callbackAceptar:this.successAddRebote,origen:"VISITA",parent:this})},successAddRebote:function(t){app.rebotesPartido.add(t),this.destroyView()},successRemoveRebote:function(t){app.rebotesPartido.remove(t)},partidoRobosLocal:function(){new E({modelo:this.model,callbackAceptar:this.successAddRobo,origen:"LOCAL",parent:this})},partidoRobosVisita:function(){new E({modelo:this.model,callbackAceptar:this.successAddRobo,origen:"VISITA",parent:this})},successAddRobo:function(t){app.robosPartido.add(t),this.destroyView()},successRemoveRobo:function(t){app.robosPartido.remove(t)},partidoComenzar:function(){this.model.set({statusPartido:"ENPROCESO"}),this.saveModel()},partidoCancelar:function(){this.model.set({statusPartido:"CANCELADO"}),this.saveModel()},partidoFinalizar:function(){this.model.set({statusPartido:"FINALIZADO"}),this.saveModel()},saveModel:function(){that=this,this.model.isValid(!0)&&this.model.save({},{wait:!0,success:function(t,e){new A({message:"Partido registrado correctamente"})},error:function(t,e){new A({message:"Se presento un error al registrar el partido"})}})},setUpCourt:function(){var t=new fabric.Path(this.strPath,{});this.canvas=new fabric.Canvas("canvas");var e={left:0,top:0};this.isOver=!1;this.canvas.setBackgroundImage("img/courtbasket.png",this.canvas.renderAll.bind(this.canvas),{backgroundImageOpacity:.5,backgroundImageStretch:!1});var i=[{left:200,top:140,label:"B",type:0},{left:160,top:120,label:"AP",type:0},{left:170,top:180,label:"E",type:0},{left:120,top:110,label:"A",type:0},{left:45,top:175,label:"P",type:0},{left:this.canvas.width-t.width-200,top:140,label:"B",type:1},{left:this.canvas.width-t.width-160,top:120,label:"AP",type:1},{left:this.canvas.width-t.width-170,top:180,label:"E",type:1},{left:this.canvas.width-t.width-120,top:110,label:"A",type:1},{left:this.canvas.width-t.width-45,top:175,label:"P",type:1}];this.paths=this.addPositionBase(i),this.addStatistics(),this.canvas.renderAll();var n=this;this.canvas.on("object:moving",function(t){var e=n.paths;n.isOver&&(e=[n.pathOver]);for(path in e)if(!(2===t.target.typePosition&&1===e[path].typePosition||3===t.target.typePosition&&0===e[path].typePosition)){if(n.pathOver=e[path],t.target.left>n.pathOver.left-20&&t.target.left<n.pathOver.left+20&&t.target.top>n.pathOver.top-20&&t.target.top<n.pathOver.top+20||t.target.left>n.pathOver.left-20&&t.target.left<n.pathOver.left+20&&t.target.top>n.pathOver.top-20&&t.target.top<n.pathOver.top+20){n.pathOver.setOpacity(.5),n.pathOver.scale(1.2),n.isOver=!0,null!=n.pathOver.pathOver&&n.pathOver.pathOver.player===t.target.player&&(n.prevPathOver=n.pathOver);break}n.pathOver.setOpacity(1),n.pathOver.scale(1),n.isOver=!1}}),this.canvas.on("mouse:down",function(t){void 0!==t.target&&null!==t.target&&(e.left=t.target.left,e.top=t.target.top)});var n=this;this.canvas.on("mouse:up",function(t){if(void 0!==t.target&&null!==t.target){var i=null,o=null,s=null,r=null;n.isOver?(s="DIRECT_INIT",null!==n.pathOver.pathOver&&(void 0!=n.prevPathOver&&null!=n.prevPathOver?(n.pathOver.pathOver.left=n.prevPathOver.left,n.pathOver.pathOver.top=n.prevPathOver.top-15,n.prevPathOver.set("pathOver",n.pathOver.pathOver),n.prevPathOver=null,s=null):(n.pathOver.pathOver.left=n.pathOver.pathOver.originLeft,n.pathOver.pathOver.top=n.pathOver.pathOver.originTop,o=n.pathOver.pathOver.player,s="DIRECT_OTHER"),
n.pathOver.pathOver.setCoords()),t.target.set("left",n.pathOver.left),t.target.set("top",n.pathOver.top-15),i=t.target.player,r=t.target.typeTeam,n.pathOver.setOpacity(1),n.pathOver.scale(1),n.pathOver.set("pathOver",t.target),n.isOver=!1):(t.target.set("left",e.left),t.target.set("top",e.top)),t.target.setCoords(),n.canvas.renderAll(),null!=s&&n.partidoCambiosDirect(i,o,s,r)}})},addPositionBase:function(t){var e=[];for(pos in t){var i=new fabric.Path(this.strPath,{fill:"rgba(0,0,0,0)",stroke:"black",strokeWidth:2,originX:"center",originY:"center"}),n=new fabric.Text(t[pos].label,{fontSize:15,fill:"#000",originX:"center",originY:"center"}),o=new fabric.Group([i,n],{left:t[pos].left,top:t[pos].top,height:i.height,width:i.width,hasRotatingPoint:!1,hasBorders:!1,hasControls:!1,selectable:!1});o.item(0).left=0,o.item(0).top=0,o.item(1).left=0,o.item(1).top=4,o.set("typePosition",t[pos].type),o.set("pathOver",null),o.set("typeAction","POSITION_BASE"),this.canvas.add(o),e.push(o)}return e},addPlayers:function(t,e){var i=new fabric.Path(this.strPath,{}),n=Math.floor(this.canvas.width/2/(i.width+10)),o=(this.canvas.width/2-(n*i.width+10*(n-1)))/2,s=this.model.get(e.toLowerCase()+"Color"),r=10,a=2;"VISITA"===e&&(o+=this.canvas.width/2,a=3);var l=o;for(player in t.models){parseInt(player)>=n&&1===Math.floor((parseInt(player)+1)%n)&&(l=o,r=r+i.height+10);var c=new fabric.Path(this.strPath,{fill:s,stroke:"#000",strokeWidth:1,originX:"center",originY:"center"}),h=new fabric.Text(t.models[player].get("numeroJugador"),{fontSize:25,fill:"#000",stroke:"#fff",originX:"center",originY:"center"}),d=new fabric.Text(t.models[player].get("aliasJugador"),{fontSize:11,fill:"#000",originX:"center",originY:"bottom"}),u=new fabric.Group([c,h,d],{left:l,top:r,height:c.height+h.height,width:c.width,hasRotatingPoint:!1,hasBorders:!1,hasControls:!1});u.item(0).left=0,u.item(0).top=0,u.item(1).left=0,u.item(1).top=5,u.item(2).left=0,u.item(2).top=h.height+5,u.set("typePosition",a),u.set("typeTeam",e),u.set("originLeft",u.left),u.set("originTop",u.top),u.set("player",t.models[player]),u.set("typeAction","PLAYER"),this.canvas.add(u),l=l+c.width+10}},addStatistics:function(){var t=this;fabric.Image.fromURL("img/enceste-ok.png",function(e){e.left=t.canvas.width/2-e.width,e.top=t.canvas.height-e.height,e.hasRotatingPoint=!1,e.hasBorders=!1,e.hasControls=!1,e.selectable=!1,e.set("typeAction","ENCESTE"),t.canvas.add(e),t.paths.push(e)}),fabric.Image.fromURL("img/enceste-fail.png",function(e){e.left=t.canvas.width/2,e.top=t.canvas.height-e.height,e.hasRotatingPoint=!1,e.hasBorders=!1,e.hasControls=!1,e.selectable=!1,e.set("typeAction","ENCESTE_FAIL"),t.canvas.add(e),t.paths.push(e)})}})}),function(t,e){"function"==typeof define&&define.amd?define("bloodhound",["jquery"],function(i){return t.Bloodhound=e(i)}):"object"==typeof exports?module.exports=e(require("jquery")):t.Bloodhound=e(jQuery)}(this,function(t){var e=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return void 0===t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,i){function n(t,e){return i(e,t)}t.each(e,n)},map:t.map,filter:t.grep,every:function(e,i){var n=!0;return e?(t.each(e,function(t,o){if(!(n=i.call(null,o,t,e)))return!1}),!!n):n},some:function(e,i){var n=!1;return e?(t.each(e,function(t,o){if(n=i.call(null,o,t,e))return!1}),!!n):n},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(e){function i(){return String(e)}return t.isFunction(e)?e:i},defer:function(t){setTimeout(t,0)},debounce:function(t,e,i){var n,o;return function(){var s,r,a=this,l=arguments;return s=function(){n=null,i||(o=t.apply(a,l))},r=i&&!n,clearTimeout(n),n=setTimeout(s,e),r&&(o=t.apply(a,l)),o}},throttle:function(t,e){var i,n,o,s,r,a;return r=0,a=function(){r=new Date,o=null,s=t.apply(i,n)},function(){var l=new Date,c=e-(l-r);return i=this,n=arguments,c<=0?(clearTimeout(o),o=null,r=l,s=t.apply(i,n)):o||(o=setTimeout(a,c)),s}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},noop:function(){}}}(),i="0.11.1",n=function(){"use strict";function t(t){return t=e.toStr(t),t?t.split(/\s+/):[]}function i(t){return t=e.toStr(t),t?t.split(/\W+/):[]}function n(t){return function(i){return i=e.isArray(i)?i:[].slice.call(arguments,0),function(n){var o=[];return e.each(i,function(i){o=o.concat(t(e.toStr(n[i])))}),o}}}return{nonword:i,whitespace:t,obj:{nonword:n(i),whitespace:n(t)}}}(),o=function(){"use strict";function i(i){this.maxSize=e.isNumber(i)?i:100,this.reset(),this.maxSize<=0&&(this.set=this.get=t.noop)}function n(){this.head=this.tail=null}function o(t,e){this.key=t,this.val=e,this.prev=this.next=null}return e.mixin(i.prototype,{set:function(t,e){var i,n=this.list.tail;this.size>=this.maxSize&&(this.list.remove(n),delete this.hash[n.key],this.size--),(i=this.hash[t])?(i.val=e,this.list.moveToFront(i)):(i=new o(t,e),this.list.add(i),this.hash[t]=i,this.size++)},get:function(t){var e=this.hash[t];if(e)return this.list.moveToFront(e),e.val},reset:function(){this.size=0,this.hash={},this.list=new n}}),e.mixin(n.prototype,{add:function(t){this.head&&(t.next=this.head,this.head.prev=t),this.head=t,this.tail=this.tail||t},remove:function(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev},moveToFront:function(t){this.remove(t),this.add(t)}}),i}(),s=function(){"use strict";function i(t,i){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+e.escapeRegExChars(this.prefix)),this.ls=i||a,!this.ls&&this._noop()}function n(){return(new Date).getTime()}function o(t){return JSON.stringify(e.isUndefined(t)?null:t)}function s(e){return t.parseJSON(e)}function r(t){var e,i,n=[],o=a.length;for(e=0;e<o;e++)(i=a.key(e)).match(t)&&n.push(i.replace(t,""));return n}var a;try{a=window.localStorage,a.setItem("~~~","!"),a.removeItem("~~~")}catch(t){a=null}return e.mixin(i.prototype,{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=e.noop},_safeSet:function(t,e){try{this.ls.setItem(t,e)}catch(t){"QuotaExceededError"===t.name&&(this.clear(),this._noop())}},get:function(t){return this.isExpired(t)&&this.remove(t),s(this.ls.getItem(this._prefix(t)))},set:function(t,i,s){return e.isNumber(s)?this._safeSet(this._ttlKey(t),o(n()+s)):this.ls.removeItem(this._ttlKey(t)),this._safeSet(this._prefix(t),o(i))},remove:function(t){return this.ls.removeItem(this._ttlKey(t)),this.ls.removeItem(this._prefix(t)),this},clear:function(){var t,e=r(this.keyMatcher);for(t=e.length;t--;)this.remove(e[t]);return this},isExpired:function(t){var i=s(this.ls.getItem(this._ttlKey(t)));return!!(e.isNumber(i)&&n()>i)}}),i}(),r=function(){"use strict";function i(t){t=t||{},this.cancelled=!1,this.lastReq=null,this._send=t.transport,this._get=t.limiter?t.limiter(this._get):this._get,this._cache=!1===t.cache?new o(0):a}var n=0,s={},r=6,a=new o(10);return i.setMaxPendingRequests=function(t){r=t},i.resetCache=function(){a.reset()},e.mixin(i.prototype,{_fingerprint:function(e){return e=e||{},e.url+e.type+t.param(e.data||{})},_get:function(t,e){function i(t){e(null,t),h._cache.set(l,t)}function o(){e(!0)}function a(){n--,delete s[l],h.onDeckRequestArgs&&(h._get.apply(h,h.onDeckRequestArgs),h.onDeckRequestArgs=null)}var l,c,h=this;l=this._fingerprint(t),this.cancelled||l!==this.lastReq||((c=s[l])?c.done(i).fail(o):n<r?(n++,s[l]=this._send(t).done(i).fail(o).always(a)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(i,n){var o,s;n=n||t.noop,i=e.isString(i)?{url:i}:i||{},s=this._fingerprint(i),this.cancelled=!1,this.lastReq=s,(o=this._cache.get(s))?n(null,o):this._get(i,n)},cancel:function(){this.cancelled=!0}}),i}(),a=window.SearchIndex=function(){"use strict";function i(i){i=i||{},i.datumTokenizer&&i.queryTokenizer||t.error("datumTokenizer and queryTokenizer are both required"),this.identify=i.identify||e.stringify,this.datumTokenizer=i.datumTokenizer,this.queryTokenizer=i.queryTokenizer,this.reset()}function n(t){return t=e.filter(t,function(t){return!!t}),t=e.map(t,function(t){return t.toLowerCase()})}function o(){var t={};return t[l]=[],t[a]={},t}function s(t){for(var e={},i=[],n=0,o=t.length;n<o;n++)e[t[n]]||(e[t[n]]=!0,i.push(t[n]));return i}function r(t,e){var i=0,n=0,o=[];t=t.sort(),e=e.sort();for(var s=t.length,r=e.length;i<s&&n<r;)t[i]<e[n]?i++:t[i]>e[n]?n++:(o.push(t[i]),i++,n++);return o}var a="c",l="i";return e.mixin(i.prototype,{bootstrap:function(t){this.datums=t.datums,this.trie=t.trie},add:function(t){var i=this;t=e.isArray(t)?t:[t],e.each(t,function(t){var s,r;i.datums[s=i.identify(t)]=t,r=n(i.datumTokenizer(t)),e.each(r,function(t){var e,n,r;for(e=i.trie,n=t.split("");r=n.shift();)e=e[a][r]||(e[a][r]=o()),e[l].push(s)})})},get:function(t){var i=this;return e.map(t,function(t){return i.datums[t]})},search:function(t){var i,o,c=this;return i=n(this.queryTokenizer(t)),e.each(i,function(t){var e,i,n,s;if(o&&0===o.length)return!1;for(e=c.trie,i=t.split("");e&&(n=i.shift());)e=e[a][n];if(!e||0!==i.length)return o=[],!1;s=e[l].slice(0),o=o?r(o,s):s}),o?e.map(s(o),function(t){return c.datums[t]}):[]},all:function(){var t=[];for(var e in this.datums)t.push(this.datums[e]);return t},reset:function(){this.datums={},this.trie=o()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),i}(),l=function(){"use strict";function t(t){this.url=t.url,this.ttl=t.ttl,this.cache=t.cache,this.prepare=t.prepare,this.transform=t.transform,this.transport=t.transport,this.thumbprint=t.thumbprint,this.storage=new s(t.cacheKey)}var i;return i={data:"data",protocol:"protocol",thumbprint:"thumbprint"},e.mixin(t.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(t){this.cache&&(this.storage.set(i.data,t,this.ttl),this.storage.set(i.protocol,location.protocol,this.ttl),this.storage.set(i.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var t,e={};return this.cache?(e.data=this.storage.get(i.data),e.protocol=this.storage.get(i.protocol),e.thumbprint=this.storage.get(i.thumbprint),t=e.thumbprint!==this.thumbprint||e.protocol!==location.protocol,e.data&&!t?e.data:null):null},fromNetwork:function(t){function e(){t(!0)}function i(e){t(null,o.transform(e))}var n,o=this;t&&(n=this.prepare(this._settings()),this.transport(n).fail(e).done(i))},clear:function(){return this.storage.clear(),this}}),t}(),c=function(){"use strict";function t(t){this.url=t.url,this.prepare=t.prepare,this.transform=t.transform,this.transport=new r({cache:t.cache,limiter:t.limiter,transport:t.transport})}return e.mixin(t.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(t,e){function i(t,i){e(t?[]:o.transform(i))}var n,o=this;if(e)return t=t||"",n=this.prepare(t,this._settings()),this.transport.get(n,i)},cancelLastRequest:function(){this.transport.cancel()}}),t}(),h=function(){"use strict";function n(n){var o;return n?(o={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:e.identity,transform:e.identity,transport:null},n=e.isString(n)?{url:n}:n,n=e.mixin(o,n),!n.url&&t.error("prefetch requires url to be set"),n.transform=n.filter||n.transform,n.cacheKey=n.cacheKey||n.url,n.thumbprint=i+n.thumbprint,n.transport=n.transport?a(n.transport):t.ajax,n):null}function o(i){var n;if(i)return n={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:e.identity,transport:null},i=e.isString(i)?{url:i}:i,i=e.mixin(n,i),!i.url&&t.error("remote requires url to be set"),i.transform=i.filter||i.transform,i.prepare=s(i),i.limiter=r(i),i.transport=i.transport?a(i.transport):t.ajax,delete i.replace,delete i.wildcard,delete i.rateLimitBy,delete i.rateLimitWait,i}function s(t){function e(t,e){return e.url=s(e.url,t),e}function i(t,e){return e.url=e.url.replace(r,encodeURIComponent(t)),e}function n(t,e){return e}var o,s,r;return o=t.prepare,s=t.replace,r=t.wildcard,o||(o=s?e:t.wildcard?i:n)}function r(t){var i,n,o;return i=t.limiter,n=t.rateLimitBy,o=t.rateLimitWait,i||(i=/^throttle$/i.test(n)?function(t){return function(i){return e.throttle(i,t)}}(o):function(t){return function(i){return e.debounce(i,t)}}(o)),i}function a(i){return function(n){function o(t){e.defer(function(){r.resolve(t)})}function s(t){e.defer(function(){r.reject(t)})}var r=t.Deferred();return i(n,o,s),r}}return function(i){var s,r;return s={initialize:!0,identify:e.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null},i=e.mixin(s,i||{}),!i.datumTokenizer&&t.error("datumTokenizer is required"),!i.queryTokenizer&&t.error("queryTokenizer is required"),r=i.sorter,i.sorter=r?function(t){return t.sort(r)}:e.identity,i.local=e.isFunction(i.local)?i.local():i.local,i.prefetch=n(i.prefetch),i.remote=o(i.remote),i}}();return function(){"use strict";function i(t){t=h(t),this.sorter=t.sorter,this.identify=t.identify,this.sufficient=t.sufficient,this.local=t.local,this.remote=t.remote?new c(t.remote):null,this.prefetch=t.prefetch?new l(t.prefetch):null,this.index=new a({identify:this.identify,datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),!1!==t.initialize&&this.initialize()}var o;return o=window&&window.Bloodhound,i.noConflict=function(){return window&&(window.Bloodhound=o),i},i.tokenizers=n,e.mixin(i.prototype,{__ttAdapter:function(){function t(t,e,n){return i.search(t,e,n)}function e(t,e){return i.search(t,e)}var i=this;return this.remote?t:e},_loadPrefetch:function(){function e(t,e){if(t)return i.reject();o.add(e),o.prefetch.store(o.index.serialize()),i.resolve()}var i,n,o=this;return i=t.Deferred(),this.prefetch?(n=this.prefetch.fromCache())?(this.index.bootstrap(n),i.resolve()):this.prefetch.fromNetwork(e):i.resolve(),i.promise()},_initialize:function(){function t(){e.add(e.local)}var e=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(t),this.initPromise},initialize:function(t){return!this.initPromise||t?this._initialize():this.initPromise},add:function(t){return this.index.add(t),this},get:function(t){return t=e.isArray(t)?t:[].slice.call(arguments),this.index.get(t)},search:function(t,i,n){function o(t){var i=[];e.each(t,function(t){!e.some(s,function(e){return r.identify(t)===r.identify(e)})&&i.push(t)}),n&&n(i)}var s,r=this;return s=this.sorter(this.index.search(t)),i(this.remote?s.slice():s),this.remote&&s.length<this.sufficient?this.remote.get(t,o):this.remote&&this.remote.cancelLastRequest(),this},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return r.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),i}()}),function(t,e){"function"==typeof define&&define.amd?define("typeahead",["jquery"],function(t){return e(t)}):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(0,function(t){var e=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return void 0===t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,i){function n(t,e){return i(e,t)}t.each(e,n)},map:t.map,filter:t.grep,every:function(e,i){var n=!0;return e?(t.each(e,function(t,o){if(!(n=i.call(null,o,t,e)))return!1}),!!n):n},some:function(e,i){var n=!1;return e?(t.each(e,function(t,o){if(n=i.call(null,o,t,e))return!1}),!!n):n},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(e){function i(){return String(e)}return t.isFunction(e)?e:i},defer:function(t){setTimeout(t,0)},debounce:function(t,e,i){var n,o;return function(){var s,r,a=this,l=arguments;return s=function(){n=null,i||(o=t.apply(a,l))},r=i&&!n,clearTimeout(n),n=setTimeout(s,e),r&&(o=t.apply(a,l)),o}},throttle:function(t,e){var i,n,o,s,r,a;return r=0,a=function(){r=new Date,o=null,s=t.apply(i,n)},function(){var l=new Date,c=e-(l-r);return i=this,n=arguments,c<=0?(clearTimeout(o),o=null,r=l,s=t.apply(i,n)):o||(o=setTimeout(a,c)),s}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},noop:function(){}}}(),i=function(){"use strict";function t(t){var r,a;return a=e.mixin({},s,t),r={css:o(),classes:a,html:i(a),selectors:n(a)},{css:r.css,html:r.html,classes:r.classes,selectors:r.selectors,mixin:function(t){e.mixin(t,r)}}}function i(t){return{wrapper:'<span class="'+t.wrapper+'"></span>',menu:'<div class="'+t.menu+'"></div>'}}function n(t){var i={};return e.each(t,function(t,e){i[e]="."+t}),i}function o(){var t={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return e.isMsie()&&e.mixin(t.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),t}var s={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return t}(),n=function(){"use strict";function i(e){e&&e.el||t.error("EventBus initialized without el"),this.$el=t(e.el)}var n,o;return n="typeahead:",o={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},e.mixin(i.prototype,{_trigger:function(e,i){var o;return o=t.Event(n+e),(i=i||[]).unshift(o),this.$el.trigger.apply(this.$el,i),o},before:function(t){var e,i;return e=[].slice.call(arguments,1),i=this._trigger("before"+t,e),i.isDefaultPrevented()},trigger:function(t){var e;this._trigger(t,[].slice.call(arguments,1)),(e=o[t])&&this._trigger(e,[].slice.call(arguments,1))}}),i}(),o=function(){"use strict";function t(t,e,i,n){var o;if(!i)return this;for(e=e.split(a),i=n?r(i,n):i,this._callbacks=this._callbacks||{};o=e.shift();)this._callbacks[o]=this._callbacks[o]||{sync:[],async:[]},this._callbacks[o][t].push(i);return this}function e(e,i,n){return t.call(this,"async",e,i,n)}function i(e,i,n){return t.call(this,"sync",e,i,n)}function n(t){var e;if(!this._callbacks)return this;for(t=t.split(a);e=t.shift();)delete this._callbacks[e];return this}function o(t){var e,i,n,o,r;if(!this._callbacks)return this;for(t=t.split(a),n=[].slice.call(arguments,1);(e=t.shift())&&(i=this._callbacks[e]);)o=s(i.sync,this,[e].concat(n)),r=s(i.async,this,[e].concat(n)),o()&&l(r);return this}function s(t,e,i){function n(){for(var n,o=0,s=t.length;!n&&o<s;o+=1)n=!1===t[o].apply(e,i);return!n}return n}function r(t,e){return t.bind?t.bind(e):function(){t.apply(e,[].slice.call(arguments,0))}}var a=/\s+/,l=function(){return window.setImmediate?function(t){setImmediate(function(){t()})}:function(t){setTimeout(function(){t()},0)}}();return{onSync:i,onAsync:e,off:n,trigger:o}}(),s=function(t){"use strict";function i(t,i,n){for(var o,s=[],r=0,a=t.length;r<a;r++)s.push(e.escapeRegExChars(t[r]));return o=n?"\\b("+s.join("|")+")\\b":"("+s.join("|")+")",i?new RegExp(o):new RegExp(o,"i")}var n={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(o){function s(e){var i,n,s;return(i=a.exec(e.data))&&(s=t.createElement(o.tagName),o.className&&(s.className=o.className),n=e.splitText(i.index),n.splitText(i[0].length),s.appendChild(n.cloneNode(!0)),e.parentNode.replaceChild(s,n)),!!i}function r(t,e){for(var i,n=0;n<t.childNodes.length;n++)i=t.childNodes[n],3===i.nodeType?n+=e(i)?1:0:r(i,e)}var a;o=e.mixin({},n,o),o.node&&o.pattern&&(o.pattern=e.isArray(o.pattern)?o.pattern:[o.pattern],a=i(o.pattern,o.caseSensitive,o.wordsOnly),r(o.node,s))}}(window.document),r=function(){"use strict";function i(i,o){i=i||{},i.input||t.error("input is missing"),o.mixin(this),this.$hint=t(i.hint),this.$input=t(i.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=n(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=e.noop)}function n(e){return t('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)}function s(t,e){return i.normalizeQuery(t)===i.normalizeQuery(e)}function r(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}var a;return a={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},i.normalizeQuery=function(t){return e.toStr(t).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},e.mixin(i.prototype,o,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(t){var e=a[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(t,e){var i;switch(t){case"up":case"down":i=!r(e);break;default:i=!1}i&&e.preventDefault()},_shouldTrigger:function(t,e){var i;switch(t){case"tab":i=!r(e);break;default:i=!0}return i},_checkLanguageDirection:function(){var t=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==t&&(this.dir=t,this.$hint.attr("dir",t),this.trigger("langDirChanged",t))},_setQuery:function(t,e){var i,n;i=s(t,this.query),n=!!i&&this.query.length!==t.length,this.query=t,e||i?!e&&n&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var t,i,n,o,s=this;return t=e.bind(this._onBlur,this),i=e.bind(this._onFocus,this),n=e.bind(this._onKeydown,this),o=e.bind(this._onInput,this),this.$input.on("blur.tt",t).on("focus.tt",i).on("keydown.tt",n),!e.isMsie()||e.isMsie()>9?this.$input.on("input.tt",o):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(t){a[t.which||t.keyCode]||e.defer(e.bind(s._onInput,s,t))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(t,e){this.setInputValue(t),this._setQuery(t,e)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(t){this.$input.val(t),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(t){this.$hint.val(t)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var t,e,i,n;t=this.getInputValue(),e=this.getHint(),i=t!==e&&0===e.indexOf(t),!(n=""!==t&&i&&!this.hasOverflow())&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var t,i,n;return t=this.$input.val().length,i=this.$input[0].selectionStart,e.isNumber(i)?i===t:!document.selection||(n=document.selection.createRange(),n.moveStart("character",-t),t===n.text.length)},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=t("<div>")}}),i}(),a=function(){"use strict";function i(i,o){i=i||{},i.templates=i.templates||{},i.templates.notFound=i.templates.notFound||i.templates.empty,i.source||t.error("missing source"),i.node||t.error("missing node"),i.name&&!a(i.name)&&t.error("invalid dataset name: "+i.name),o.mixin(this),this.highlight=!!i.highlight,this.name=i.name||c(),this.limit=i.limit||5,this.displayFn=n(i.display||i.displayKey),this.templates=r(i.templates,this.displayFn),this.source=i.source.__ttAdapter?i.source.__ttAdapter():i.source,this.async=e.isUndefined(i.async)?this.source.length>2:!!i.async,this._resetLastSuggestion(),this.$el=t(i.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}function n(t){function i(e){return e[t]}return t=t||e.stringify,e.isFunction(t)?t:i}function r(i,n){function o(e){return t("<div>").text(n(e))}return{notFound:i.notFound&&e.templatify(i.notFound),pending:i.pending&&e.templatify(i.pending),header:i.header&&e.templatify(i.header),footer:i.footer&&e.templatify(i.footer),suggestion:i.suggestion||o}}function a(t){return/^[_a-zA-Z0-9-]+$/.test(t)}var l,c;return l={val:"tt-selectable-display",obj:"tt-selectable-object"},c=e.getIdGenerator(),i.extractData=function(e){var i=t(e);return i.data(l.obj)?{val:i.data(l.val)||"",obj:i.data(l.obj)||null}:null},e.mixin(i.prototype,o,{_overwrite:function(t,e){e=e||[],e.length?this._renderSuggestions(t,e):this.async&&this.templates.pending?this._renderPending(t):!this.async&&this.templates.notFound?this._renderNotFound(t):this._empty(),this.trigger("rendered",this.name,e,!1)},_append:function(t,e){e=e||[],e.length&&this.$lastSuggestion.length?this._appendSuggestions(t,e):e.length?this._renderSuggestions(t,e):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(t),this.trigger("rendered",this.name,e,!0)},_renderSuggestions:function(t,e){var i;i=this._getSuggestionsFragment(t,e),this.$lastSuggestion=i.children().last(),this.$el.html(i).prepend(this._getHeader(t,e)).append(this._getFooter(t,e))},_appendSuggestions:function(t,e){var i,n;i=this._getSuggestionsFragment(t,e),n=i.children().last(),this.$lastSuggestion.after(i),this.$lastSuggestion=n},_renderPending:function(t){var e=this.templates.pending;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_renderNotFound:function(t){var e=this.templates.notFound;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(i,n){var o,r=this;return o=document.createDocumentFragment(),e.each(n,function(e){var n,s;s=r._injectQuery(i,e),n=t(r.templates.suggestion(s)).data(l.obj,e).data(l.val,r.displayFn(e)).addClass(r.classes.suggestion+" "+r.classes.selectable),o.appendChild(n[0])}),this.highlight&&s({className:this.classes.highlight,node:o,pattern:i}),t(o)},_getFooter:function(t,e){return this.templates.footer?this.templates.footer({query:t,suggestions:e,dataset:this.name}):null},_getHeader:function(t,e){return this.templates.header?this.templates.header({query:t,suggestions:e,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=t()},_injectQuery:function(t,i){return e.isObject(i)?e.mixin({_query:t},i):i},update:function(e){function i(t){r||(r=!0,t=(t||[]).slice(0,o.limit),a=t.length,o._overwrite(e,t),a<o.limit&&o.async&&o.trigger("asyncRequested",e))}function n(i){i=i||[],!s&&a<o.limit&&(o.cancel=t.noop,a+=i.length,o._append(e,i.slice(0,o.limit-a)),o.async&&o.trigger("asyncReceived",e))}var o=this,s=!1,r=!1,a=0;this.cancel(),this.cancel=function(){s=!0,o.cancel=t.noop,o.async&&o.trigger("asyncCanceled",e)},this.source(e,i,n),!r&&i([])},cancel:t.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=t("<div>")}}),i}(),l=function(){"use strict";function i(i,n){function o(e){var i=s.$node.find(e.node).first();return e.node=i.length?i:t("<div>").appendTo(s.$node),new a(e,n)}var s=this;i=i||{},i.node||t.error("node is required"),n.mixin(this),this.$node=t(i.node),this.query=null,this.datasets=e.map(i.datasets,o)}return e.mixin(i.prototype,o,{_onSelectableClick:function(e){this.trigger("selectableClicked",t(e.currentTarget))},_onRendered:function(t,e,i,n){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",e,i,n)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){function t(t){return t.isEmpty()}return e.every(this.datasets,t)},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var t=this.getActiveSelectable();t&&t.removeClass(this.classes.cursor)},_ensureVisible:function(t){var e,i,n,o;e=t.position().top,i=e+t.outerHeight(!0),n=this.$node.scrollTop(),o=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),e<0?this.$node.scrollTop(n+e):o<i&&this.$node.scrollTop(n+(i-o))},bind:function(){var t,i=this;return t=e.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,t),e.each(this.datasets,function(t){t.onSync("asyncRequested",i._propagate,i).onSync("asyncCanceled",i._propagate,i).onSync("asyncReceived",i._propagate,i).onSync("rendered",i._onRendered,i).onSync("cleared",i._onCleared,i)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.addClass(this.classes.open)},close:function(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(t){this.$node.attr("dir",t)},selectableRelativeToCursor:function(t){var e,i,n,o;return i=this.getActiveSelectable(),e=this._getSelectables(),n=i?e.index(i):-1,o=n+t,o=(o+1)%(e.length+1)-1,o=o<-1?e.length-1:o,-1===o?null:e.eq(o)},setCursor:function(t){this._removeCursor(),(t=t&&t.first())&&(t.addClass(this.classes.cursor),this._ensureVisible(t))},getSelectableData:function(t){return t&&t.length?a.extractData(t):null},getActiveSelectable:function(){var t=this._getSelectables().filter(this.selectors.cursor).first();return t.length?t:null},getTopSelectable:function(){var t=this._getSelectables().first();return t.length?t:null},update:function(t){function i(e){e.update(t)}var n=t!==this.query;return n&&(this.query=t,e.each(this.datasets,i)),n},empty:function(){function t(t){t.clear()}e.each(this.datasets,t),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){function i(t){t.destroy()}this.$node.off(".tt"),this.$node=t("<div>"),e.each(this.datasets,i)}}),i}(),c=function(){"use strict";function t(){l.apply(this,[].slice.call(arguments,0))}
var i=l.prototype;return e.mixin(t.prototype,l.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),i.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),i.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),i._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),i._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(t){return this.$node.css("ltr"===t?this.css.ltr:this.css.rtl),i.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),t}(),h=function(){"use strict";function i(i,o){var s,r,a,l,c,h,d,u,p,f,g;i=i||{},i.input||t.error("missing input"),i.menu||t.error("missing menu"),i.eventBus||t.error("missing event bus"),o.mixin(this),this.eventBus=i.eventBus,this.minLength=e.isNumber(i.minLength)?i.minLength:1,this.input=i.input,this.menu=i.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),s=n(this,"activate","open","_onFocused"),r=n(this,"deactivate","_onBlurred"),a=n(this,"isActive","isOpen","_onEnterKeyed"),l=n(this,"isActive","isOpen","_onTabKeyed"),c=n(this,"isActive","_onEscKeyed"),h=n(this,"isActive","open","_onUpKeyed"),d=n(this,"isActive","open","_onDownKeyed"),u=n(this,"isActive","isOpen","_onLeftKeyed"),p=n(this,"isActive","isOpen","_onRightKeyed"),f=n(this,"_openIfActive","_onQueryChanged"),g=n(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",s,this).onSync("blurred",r,this).onSync("enterKeyed",a,this).onSync("tabKeyed",l,this).onSync("escKeyed",c,this).onSync("upKeyed",h,this).onSync("downKeyed",d,this).onSync("leftKeyed",u,this).onSync("rightKeyed",p,this).onSync("queryChanged",f,this).onSync("whitespaceChanged",g,this).onSync("langDirChanged",this._onLangDirChanged,this)}function n(t){var i=[].slice.call(arguments,1);return function(){var n=[].slice.call(arguments);e.each(i,function(e){return t[e].apply(t,n)})}}return e.mixin(i.prototype,{_hacks:function(){var i,n;i=this.input.$input||t("<div>"),n=this.menu.$node||t("<div>"),i.on("blur.tt",function(t){var o,s,r;o=document.activeElement,s=n.is(o),r=n.has(o).length>0,e.isMsie()&&(s||r)&&(t.preventDefault(),t.stopImmediatePropagation(),e.defer(function(){i.focus()}))}),n.on("mousedown.tt",function(t){t.preventDefault()})},_onSelectableClicked:function(t,e){this.select(e)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(t,e,i,n){this._updateHint(),this.eventBus.trigger("render",i,n,e)},_onAsyncRequested:function(t,e,i){this.eventBus.trigger("asyncrequest",i,e)},_onAsyncCanceled:function(t,e,i){this.eventBus.trigger("asynccancel",i,e)},_onAsyncReceived:function(t,e,i){this.eventBus.trigger("asyncreceive",i,e)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(t,e){var i;(i=this.menu.getActiveSelectable())&&this.select(i)&&e.preventDefault()},_onTabKeyed:function(t,e){var i;(i=this.menu.getActiveSelectable())?this.select(i)&&e.preventDefault():(i=this.menu.getTopSelectable())&&this.autocomplete(i)&&e.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function(t,e){this._minLengthMet(e)?this.menu.update(e):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(t,e){this.dir!==e&&(this.dir=e,this.menu.setLanguageDirection(e))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(t){return t=e.isString(t)?t:this.input.getQuery()||"",t.length>=this.minLength},_updateHint:function(){var t,i,n,o,s,a,l;t=this.menu.getTopSelectable(),i=this.menu.getSelectableData(t),n=this.input.getInputValue(),!i||e.isBlankString(n)||this.input.hasOverflow()?this.input.clearHint():(o=r.normalizeQuery(n),s=e.escapeRegExChars(o),a=new RegExp("^(?:"+s+")(.+$)","i"),(l=a.exec(i.val))&&this.input.setHint(n+l[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return!!this.isActive()||!(!this.isEnabled()||this.eventBus.before("active"))&&(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return!this.isActive()||!this.eventBus.before("idle")&&(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0)},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(t){this.input.setQuery(e.toStr(t))},getVal:function(){return this.input.getQuery()},select:function(t){var e=this.menu.getSelectableData(t);return!(!e||this.eventBus.before("select",e.obj))&&(this.input.setQuery(e.val,!0),this.eventBus.trigger("select",e.obj),this.close(),!0)},autocomplete:function(t){var e,i;return e=this.input.getQuery(),i=this.menu.getSelectableData(t),!(!(i&&e!==i.val)||this.eventBus.before("autocomplete",i.obj))&&(this.input.setQuery(i.val),this.eventBus.trigger("autocomplete",i.obj),!0)},moveCursor:function(t){var e,i,n,o;return e=this.input.getQuery(),i=this.menu.selectableRelativeToCursor(t),n=this.menu.getSelectableData(i),o=n?n.obj:null,!(this._minLengthMet()&&this.menu.update(e))&&!this.eventBus.before("cursorchange",o)&&(this.menu.setCursor(i),n?this.input.setInputValue(n.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",o),!0)},destroy:function(){this.input.destroy(),this.menu.destroy()}}),i}();!function(){"use strict";function o(e,i){e.each(function(){var e,n=t(this);(e=n.data(g.typeahead))&&i(e,n)})}function s(t,e){return t.clone().addClass(e.classes.hint).removeData().css(e.css.hint).css(d(t)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})}function a(t,e){t.data(g.attrs,{dir:t.attr("dir"),autocomplete:t.attr("autocomplete"),spellcheck:t.attr("spellcheck"),style:t.attr("style")}),t.addClass(e.classes.input).attr({autocomplete:"off",spellcheck:!1});try{!t.attr("dir")&&t.attr("dir","auto")}catch(t){}return t}function d(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}function u(t){var i,n;i=t.data(g.www),n=t.parent().filter(i.selectors.wrapper),e.each(t.data(g.attrs),function(i,n){e.isUndefined(i)?t.removeAttr(n):t.attr(n,i)}),t.removeData(g.typeahead).removeData(g.www).removeData(g.attr).removeClass(i.classes.input),n.length&&(t.detach().insertAfter(n),n.remove())}function p(i){var n,o;return n=e.isJQuery(i)||e.isElement(i),o=n?t(i).first():[],o.length?o:null}var f,g,v;f=t.fn.typeahead,g={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},v={initialize:function(o,d){function u(){var i,u,v,m,b,y,w,x,C,_,T;e.each(d,function(t){t.highlight=!!o.highlight}),i=t(this),u=t(f.html.wrapper),v=p(o.hint),m=p(o.menu),b=!1!==o.hint&&!v,y=!1!==o.menu&&!m,b&&(v=s(i,f)),y&&(m=t(f.html.menu).css(f.css.menu)),v&&v.val(""),i=a(i,f),(b||y)&&(u.css(f.css.wrapper),i.css(b?f.css.input:f.css.inputWithNoHint),i.wrap(u).parent().prepend(b?v:null).append(y?m:null)),T=y?c:l,w=new n({el:i}),x=new r({hint:v,input:i},f),C=new T({node:m,datasets:d},f),_=new h({input:x,menu:C,eventBus:w,minLength:o.minLength},f),i.data(g.www,f),i.data(g.typeahead,_)}var f;return d=e.isArray(d)?d:[].slice.call(arguments,1),o=o||{},f=i(o.classNames),this.each(u)},isEnabled:function(){var t;return o(this.first(),function(e){t=e.isEnabled()}),t},enable:function(){return o(this,function(t){t.enable()}),this},disable:function(){return o(this,function(t){t.disable()}),this},isActive:function(){var t;return o(this.first(),function(e){t=e.isActive()}),t},activate:function(){return o(this,function(t){t.activate()}),this},deactivate:function(){return o(this,function(t){t.deactivate()}),this},isOpen:function(){var t;return o(this.first(),function(e){t=e.isOpen()}),t},open:function(){return o(this,function(t){t.open()}),this},close:function(){return o(this,function(t){t.close()}),this},select:function(e){var i=!1,n=t(e);return o(this.first(),function(t){i=t.select(n)}),i},autocomplete:function(e){var i=!1,n=t(e);return o(this.first(),function(t){i=t.autocomplete(n)}),i},moveCursor:function(t){var e=!1;return o(this.first(),function(i){e=i.moveCursor(t)}),e},val:function(t){var e;return arguments.length?(o(this,function(e){e.setVal(t)}),this):(o(this.first(),function(t){e=t.getVal()}),e)},destroy:function(){return o(this,function(t,e){u(e),t.destroy()}),this}},t.fn.typeahead=function(t){return v[t]?v[t].apply(this,[].slice.call(arguments,1)):v.initialize.apply(this,arguments)},t.fn.typeahead.noConflict=function(){return t.fn.typeahead=f,this}}()}),define("text!templates/public/tplMain.html",[],function(){return'<div class="row">\n    <div class="col-md-12">\n      <div class="main-box">\n        <div class="panel panel-default">\n          <div class="panel-body">\n            <div class="row">\n              <div class="col-lg-4">\n\n              </div>\n              <div class="col-lg-4">\n                <div class="input-group">\n                  <input id="sel-torneo" type="text" class="form-control" placeholder="Escribe el nombre del torneo...">\n                  <span class="input-group-btn">\n                    <button id="go-torneo" class="btn btn-default" type="button">Ir</button>\n                  </span>\n                </div>\n              </div>\n              <div class="col-lg-4">\n\n              </div>\n            </div>\n          </div>\n        </div>\n\n      </div>\n    </div>\n</div>\n'}),define("views/public/MainView",["jquery","bootstrap","bloodhound","typeahead","core/BaseView","collections/TorneosCollection","text!templates/public/tplMain.html"],function(t,e,i,n,o,s,r){return o.extend({template:_.template(r),events:{"typeahead:select #sel-torneo":"selToreno","click #go-torneo":"goTorneo"},initialize:function(){this.torneos=new s,this.listenTo(this.torneos,"add",this.agregarTorneo),this.listenTo(this.torneos,"sync",this.syncTorneos),this.torneosDesc=[],this.torneo=null,this.torneos.fetch()},render:function(){return this.$el.html(this.template()),this},agregarTorneo:function(t){this.torneosDesc.push({clave:t.get("clave"),descripcion:t.get("descripcion")})},syncTorneos:function(){this.setUp()},setUp:function(){var e=new Bloodhound({datumTokenizer:function(t){return Bloodhound.tokenizers.whitespace(t.descripcion)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:this.torneosDesc});e.initialize(),t("#sel-torneo").typeahead(null,{displayKey:"descripcion",source:e.ttAdapter()})},selToreno:function(t,e){this.torneo=e},goTorneo:function(){this.torneo&&Backbone.history.navigate("torneo/"+this.torneo.clave,{trigger:!0})}})}),define("text!templates/public/tplMainNav.html",[],function(){return'<nav id="header-general" class="navbar navbar-default navbar-fixed-top" role="navigation">\n\n  <div class="row">\n  <div class="col-md-12">\n    <div class="container">\n      <div class="navbar-header">\n        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">\n          <span class="sr-only">Toggle navigation</span>\n          <span class="icon-bar"></span>\n        </button>\n        <a id="home" class="navbar-brand title-entuliga" href="#">entuliga</a>\n      </div>\n      <div id="navbar" class="collapse navbar-collapse">\n        <ul class="minus-right nav navbar-nav navbar-right">\n          <button id="signup" type="button" class="btn btn-default navbar-btn">Registrar</button>\n          <button id="signin" type="button" class="btn btn-success navbar-btn">Ingresar</button>\n        </ul>\n      </div>\n    </div>\n\n  </div>\n</div>\n</nav>\n'}),define("views/public/MainNavView",["jquery","backbone","marionette","core/BaseView","text!templates/public/tplMainNav.html","Session"],function(t,e,i,n,o,s){return i.View.extend({template:_.template(o),events:{"click #signin":"signin","click #signup":"signup","click #home":"home"},initialize:function(){},onBeforeRender:function(){},onRender:function(){},signin:function(){e.history.navigate("login",{trigger:!0})},signup:function(){e.history.navigate("signup",{trigger:!0})},home:function(){e.history.navigate("#",{trigger:!0})}})}),define("text!templates/public/torneo/tplRowJornadaPartido.html",[],function(){return'<td><%= localNombre %></td>\n<td><img class="avatar avatar-ss" src="<%= localLogo %>" /></td>\n<td><%= localPuntos %></td>\n<td> - </td>\n<td><%= visitaPuntos %></td>\n<td><img class="avatar avatar-ss" src="<%= visitaLogo %>" /></td>\n<td><%= visitaNombre %></td>\n<td><%= horarioDes %></td>\n<td><%= canchaNombre %></td>'}),define("views/public/torneo/RowJornadaPartidoView",["jquery","underscore","core/BaseView","text!templates/public/torneo/tplRowJornadaPartido.html"],function(t,e,i,n){return i.extend({template:e.template(n),tagName:"tr",events:{},initialize:function(t){this.model=t},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}})}),define("text!templates/public/torneo/tplTorneoJornada.html",[],function(){return'<div class="form-group">\n    <select class="form-control" id="select-torneo-jornada" placeholder="Jornada...">\n    </select>\n</div>\n<table id="torneo-partidos" class="table table-condensed">\n    <thead>\n    <tr>\n        <th>Local</th>\n        <th></th>\n        <th></th>\n        <th></th>\n        <th></th>\n        <th></th>\n        <th>Visita</th>\n        <th>Fecha</th>\n        <th>Lugar</th>\n    </tr>\n    </thead>\n    <tbody>\n    </tbody>\n</table>'}),define("views/public/torneo/TorneoJornadaView",["jquery","bootstrap","core/BaseView","collections/TorneoJornadasCollection","collections/TorneoPartidosCollection","views/public/torneo/RowJornadaPartidoView","text!templates/public/torneo/tplTorneoJornada.html"],function(t,e,i,n,o,s,r){return i.extend({el:"#torneo-jornadas",template:_.template(r),events:{"change #select-torneo-jornada":"changeJornada"},initialize:function(t){this.model=t,this.render(),this.torneojornadas=new n,this.torneojornadas.setTorneo(this.model),this.listenTo(this.torneojornadas,"add",this.agregarTorneoJornada),this.listenTo(this.torneojornadas,"sync",this.syncTorneoJornadas),this.torneojornadas.fetch(),this.torneopartidos=new o,this.listenTo(this.torneopartidos,"add",this.agregarTorneoPartido),this.listenTo(this.torneopartidos,"sync",this.syncTorneoPartidos)},render:function(){this.$el.html(this.template(this.model.toJSON()))},agregarTorneoJornada:function(e){t("#select-torneo-jornada").append(t("<option>",{value:e.get("id"),text:e.get("nombre")+" - "+e.get("fase")}))},syncTorneoJornadas:function(){t("#select-torneo-jornada").change()},changeJornada:function(e){var i=this.torneojornadas.get(t(e.target).val());void 0!==i&&(this.torneoJornada=i,t("#torneo-partidos").find("tbody").html(""),this.torneopartidos.setTorneoJornada(this.torneoJornada),this.torneopartidos.fetch())},agregarTorneoPartido:function(e){var i=new s(e);t("#torneo-partidos").find("tbody:last").append(i.render().$el)},syncTorneoPartidos:function(){}})}),define("models/ClasificacionModel",["backbone"],function(t){return t.Model.extend({urlRoot:"clasificacion",defaults:{},initialize:function(){}})}),define("collections/ClasificacionesCollection",["backbone","models/ClasificacionModel"],function(t,e){return t.Collection.extend({model:e,url:function(){return"torneo/"+this.torneo.get("id")+"/clasificacion"},setTorneo:function(t){this.torneo=t}})}),define("text!templates/public/torneo/tplRowEstadisticaEquipo.html",[],function(){return'<td><img class="avatar avatar-ss" src="<%= equipoLogo %>"/></td>\n<td><%= equipoNombre %></td>\n<td><%= totalJugados %></td>\n<td><%= totalGanados %></td>\n<td><%= totalPerdidos %></td>\n<td><%= totalPuntosFavor %></td>\n<td><%= totalPuntosContra %></td>\n<td><%= diferenciaPuntos %></td>'}),define("views/public/torneo/RowEstadisticaEquipoView",["jquery","underscore","core/BaseView","text!templates/public/torneo/tplRowEstadisticaEquipo.html"],function(t,e,i,n){return i.extend({template:e.template(n),tagName:"tr",events:{},initialize:function(t){this.model=t},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}})}),define("text!templates/public/torneo/tplTorneoPosiciones.html",[],function(){return'<table id="torneo-tabla-posiciones" class="table table-condensed">\n    <thead>\n    <tr>\n        <th></th>\n        <th>Equipo</th>\n        <th>PJ</th>\n        <th>PG</th>\n        <th>PP</th>\n        <th>PF</th>\n        <th>PC</th>\n        <th>Dif</th>\n    </tr>\n    </thead>\n    <tbody>\n    </tbody>\n</table>'}),define("views/public/torneo/TorneoPosicionesView",["jquery","bootstrap","core/BaseView","collections/ClasificacionesCollection","views/public/torneo/RowEstadisticaEquipoView","text!templates/public/torneo/tplTorneoPosiciones.html"],function(t,e,i,n,o,s){return i.extend({el:"#torneo-posiciones",template:_.template(s),events:{},initialize:function(t){this.model=t,this.clasificaciones=new n,this.clasificaciones.setTorneo(this.model),this.listenTo(this.clasificaciones,"add",this.agregarClasificacion),this.listenTo(this.clasificaciones,"sync",this.syncClasificaciones),this.clasificaciones.fetch(),this.render()},render:function(){this.$el.html(this.template(this.model.toJSON()))},agregarClasificacion:function(e){var i=new o(e);t("#torneo-tabla-posiciones").find("tbody:last").append(i.render().$el)},syncClasificaciones:function(){}})}),define("models/EstadisticaModel",["backbone"],function(t){return t.Model.extend({urlRoot:"estadistica",defaults:{},initialize:function(){}})}),define("collections/EstadisticasCollection",["backbone","models/EstadisticaModel"],function(t,e){return t.Collection.extend({model:e,url:function(){return"torneo/"+this.torneo.get("id")+"/estadistica"},setTorneo:function(t){this.torneo=t}})}),define("text!templates/public/torneo/tplRowEstadisticaJugador.html",[],function(){return'<td><img class="avatar avatar-ss" src="<%= fotoJugador %>" /></td>\n<td><%= nombreJugador %></td>\n<td><img class="avatar avatar-ss" src="<%= logoEquipo %>"/></td>\n<td><%= nombreEquipo %></td>\n<td><%= valor %></td>'}),define("views/public/torneo/RowEstadisticaJugadorView",["jquery","underscore","core/BaseView","text!templates/public/torneo/tplRowEstadisticaJugador.html"],function(t,e,i,n){return i.extend({template:e.template(n),tagName:"tr",events:{},initialize:function(t){this.model=t},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}})}),define("text!templates/public/torneo/tplTorneoLideres.html",[],function(){return'<div class="row">\n    <div class="col-xs-12">\n        <table id="torneo-lideres-puntos" class="table table-condensed">\n            <thead>\n            <tr>\n                <th></th>\n                <th>Jugador</th>\n                <th></th>\n                <th>Equipo</th>\n                <th>Puntos</th>\n            </tr>\n            </thead>\n            <tbody>\n            </tbody>\n        </table>\n    </div>\n</div>\n<div class="row">\n    <div class="col-xs-12">\n        <table id="torneo-lideres-rebotes" class="table table-condensed">\n            <thead>\n            <tr>\n                <th></th>\n                <th>Jugador</th>\n                <th></th>\n                <th>Equipo</th>\n                <th>Rebotes</th>\n            </tr>\n            </thead>\n            <tbody>\n            </tbody>\n        </table>\n    </div>\n</div>\n<div class="row">\n    <div class="col-xs-12">\n        <table id="torneo-lideres-asistencias" class="table table-condensed">\n            <thead>\n            <tr>\n                <th></th>\n                <th>Jugador</th>\n                <th></th>\n                <th>Equipo</th>\n                <th>Asistencia</th>\n            </tr>\n            </thead>\n            <tbody>\n            </tbody>\n        </table>\n    </div>\n</div>\n<div class="row">\n    <div class="col-xs-12">\n        <table id="torneo-lideres-bloqueos" class="table table-condensed">\n            <thead>\n            <tr>\n                <th></th>\n                <th>Jugador</th>\n                <th></th>\n                <th>Equipo</th>\n                <th>Bloqueos</th>\n            </tr>\n            </thead>\n            <tbody>\n            </tbody>\n        </table>\n    </div>\n</div>\n<div class="row">\n    <div class="col-xs-12">\n        <table id="torneo-lideres-robos" class="table table-condensed">\n            <thead>\n            <tr>\n                <th></th>\n                <th>Jugador</th>\n                <th></th>\n                <th>Equipo</th>\n                <th>Robos</th>\n            </tr>\n            </thead>\n            <tbody>\n            </tbody>\n        </table>\n    </div>\n</div>'}),define("views/public/torneo/TorneoLideresView",["jquery","bootstrap","core/BaseView","collections/EstadisticasCollection","views/public/torneo/RowEstadisticaJugadorView","text!templates/public/torneo/tplTorneoLideres.html"],function(t,e,i,n,o,s){return i.extend({el:"#torneo-lideres",template:_.template(s),events:{},initialize:function(t){this.model=t,this.lideres=new n,this.lideres.setTorneo(this.model),this.listenTo(this.lideres,"add",this.agregarLider),this.listenTo(this.lideres,"sync",this.syncLideres),this.lideres.fetch(),this.render(),this.hideTables()},render:function(){this.$el.html(this.template(this.model.toJSON()))},agregarLider:function(e){var i=new o(e),n=this.getTableByTipoEstadistica(e.get("tipo"));t("#"+n).show(),t("#"+n).find("tbody:last").append(i.render().$el)},syncLideres:function(){},hideTables:function(){t("#torneo-lideres-puntos").hide(),t("#torneo-lideres-rebotes").hide(),t("#torneo-lideres-asistencias").hide(),t("#torneo-lideres-bloqueos").hide(),t("#torneo-lideres-robos").hide()},getTableByTipoEstadistica:function(t){switch(t){case 1:return"torneo-lideres-puntos";case 2:return"torneo-lideres-rebotes";case 3:return"torneo-lideres-asistencias";case 4:return"torneo-lideres-bloqueos";case 5:return"torneo-lideres-robos"}}})}),define("text!templates/public/torneo/tplTorneoLanding.html",[],function(){return'<div class="row">\n    <div class="col-md-12">\n      <div class="main-box">\n        <div class="panel panel-info">\n            <div class="panel-body">\n                <div class="row">\n                    <div class="col-md-6">\n                        <div class="panel panel-default">\n                            <div id="liga-detail" class="panel-body">\n                                <h4 class="list-group-item-heading"><%= nombre %></h4>\n                                <p class="list-group-item-text"><%= descripcion %></p>\n                                <p class="list-group-item-text"><%= fechaInicioDes %> - <%= fechaFinDes %></p>\n                                <p class="list-group-item-text"><%= status %></p>\n                            </div>\n                        </div>\n                        <div class="panel panel-default">\n                            <div class="panel-heading">\n                                <h3 class="panel-title">Lideres</h3>\n                            </div>\n                            <div id="torneo-lideres" class="panel-body">\n                            </div>\n                        </div>\n                    </div>\n                    <div class="col-md-6">\n                        <div class="panel panel-default">\n                            <div class="panel-heading">\n                                <h3 class="panel-title">Posiciones</h3>\n                            </div>\n                            <div id="torneo-posiciones" class="panel-body">\n                            </div>\n                        </div>\n                        <div class="panel panel-default">\n                            <div class="panel-heading">\n                                <h3 class="panel-title">Jornada</h3>\n                            </div>\n                            <div id="torneo-jornadas" class="panel-body">\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n      </div>\n    </div>\n</div>\n'}),define("views/public/torneo/TorneoLandingView",["jquery","bootstrap","core/BaseView","models/TorneoModel","views/public/torneo/TorneoJornadaView","views/public/torneo/TorneoPosicionesView","views/public/torneo/TorneoLideresView","text!templates/public/torneo/tplTorneoLanding.html"],function(t,e,i,n,o,s,r,a){return i.extend({template:_.template(a),events:{},initialize:function(t){console.log(t),this.model=new n,this.model.set({id:t.clave}),this.listenTo(this.model,"sync",this.syncTorneoSuccess),this.model.fetch()},render:function(){return this},syncTorneoSuccess:function(){this.$el.html(this.template(this.model.toJSON())),new o(this.model),new r(this.model),new s(this.model)}})}),function(t){"function"==typeof define&&define.amd?define("subroute",["underscore","backbone"],t):"object"==typeof exports?module.exports=t(require("underscore"),require("backbone")):t(_,Backbone)}(function(t,e){return e.SubRoute=e.Router.extend({constructor:function(i,n){this.routes=t.clone(this.routes)||{},this.prefix=i=i||"",this.separator="/"===i.slice(-1)?"":"/",this.createTrailingSlashRoutes=n&&n.createTrailingSlashRoutes,e.Router.prototype.constructor.call(this,n);var o;o=e.history.fragment?e.history.getFragment(e.history.fragment):e.history.getHash(),t.every(this.routes,function(t,i){return!o.match(e.Router.prototype._routeToRegExp(i))||(e.history.loadUrl(o),!1)},this),this.postInitialize&&this.postInitialize(n)},navigate:function(t,i){"/"!=t.substr(0,1)&&0!==t.indexOf(this.prefix.substr(0,this.prefix.length-1))&&(t=this.prefix+(t?this.separator:"")+t),e.Router.prototype.navigate.call(this,t,i)},route:function(t,i,n){"/"===t.substr(0)&&(t=t.substr(1,t.length));var o=this.prefix;return t&&t.length>0&&(this.prefix.length>0&&(o+=this.separator),o+=t),this.createTrailingSlashRoutes&&(this.routes[o+"/"]=i,e.Router.prototype.route.call(this,o+"/",i,n)),delete this.routes[t],this.routes[o]=i,e.Router.prototype.route.call(this,o,i,n)}}),e.SubRoute}),define("routers/DashboardRoute",["jquery","backbone","marionette","subroute"],function(t,e,i,n){return e.SubRoute.extend({routes:{"":"dashboard",config:"configDashboard"},dashboard:function(t){console.log("index dashboard")},configDashboard:function(){console.log("config dashboard")},initialize:function(){}})}),define("router",["jquery","underscore","backbone","core/BaseRouter","views/LoginView","views/SignupView","views/TokenValidateView","views/TokenChangePassView","views/private/perfil/PerfilAdminView","views/private/MainAdminNavView","views/private/LigaAdminView","views/private/TorneoAdminView","views/private/EquipoAdminView","views/private/JugadorAdminView","views/private/ArbitroAdminView","views/private/CanchaAdminView","views/private/partido/PartidoAdminView","views/public/MainView","views/public/MainNavView","views/public/torneo/TorneoLandingView","Session","routers/DashboardRoute"],function(t,e,i,n,o,s,r,a,l,c,h,d,u,p,f,g,v,m,b,y,w,x){return n.extend({routes:{"":"main","/":"main","/#":"main",login:"login",signup:"signup","token/:token":"token","change/:token":"changeToken",admin:"admin","admin/perfil":"adminPerfil","admin/ligas":"adminLigas","admin/torneos":"adminTorneos","admin/torneos/:liga":"adminTorneos","admin/equipos":"adminEquipos","admin/jugadores":"adminJugadores","admin/arbitros":"adminArbitros","admin/canchas":"adminCanchas","admin/partido/:partido":"adminPartido","torneo/:clave":"publicTorneo"},requresAuth:["#admin"],preventAccessWhenAuth:["#login"],initialize:function(){},before:function(t,n){console.log("berore router");var o=w.get("authenticated"),s=i.history.location.hash,r=s.indexOf(this.requresAuth)>-1,a=e.contains(this.preventAccessWhenAuth,s);console.log(a),r&&!o?i.history.navigate("login",{trigger:!0}):o&&a&&i.history.navigate("",{trigger:!0})},after:function(){console.log("after router")},changeView:function(e){!function(e){this.currentView&&this.currentView.close(),this.currentView=e,t("#container-body").html(e.render().$el)}(e)},main:function(){var t=new m;this.changeView(t),new c},login:function(){var t=new o;this.changeView(t)},signup:function(){var t=new s;this.changeView(t)},token:function(t){new b;var e=new r({token:t});this.changeView(e)},changeToken:function(t){new b;var e=new a({token:t});this.changeView(e)},admin:function(){var t=new l;this.changeView(t),new c},adminPerfil:function(){var t=new l;this.changeView(t),new c},adminLigas:function(){var t=new h;this.changeView(t),new c},adminTorneos:function(){var t=new d;this.changeView(t),new c},adminEquipos:function(){var t=new u;this.changeView(t),new c},adminJugadores:function(){var t=new p;this.changeView(t),new c},adminArbitros:function(){var t=new f;this.changeView(t),new c},adminCanchas:function(){var t=new g;this.changeView(t),new c},adminPartido:function(t){var e=new v;e.setIdPartido(t),this.changeView(e),new c},publicTorneo:function(t){console.log("Selection: "+t);var e=new y({clave:t});this.changeView(e)}})}),define("text!templates/tplRoot.html",[],function(){return'<div id="header-region">\n  <nav id="header-general" class="navbar navbar-default navbar-fixed-top" role="navigation">\n\n  </nav>\n</div>\n<div id="container-region">\n  <div class="container">\n    <div class="starter-template">\n      <div id="container-body">\n\n      </div>\n    </div>\n  </div>\n\n</div>\n<div id="footer-region">\n  <footer class="footer">\n    <div class="container">\n        <div class="row">\n          <div class="span3 pull-right">\n          </div>\n          <div class="span6 pull-left">\n            <span class="small">\n              Design by CodigoArtesanal | Copyright © 2017 entuliga. All Rights Reserved.\n            </span>\n          </div>\n        </div>\n    </div>\n  </footer>\n\n  <div id="modal-generic">\n  </div>\n</div>\n'}),define("views/RootView",["jquery","backbone","marionette","bootstrap","text!templates/tplRoot.html","views/public/MainNavView"],function(t,e,i,n,o,s){return i.View.extend({template:_.template(o),regions:{headerWrap:"#header-region",containerWrap:"#container-region",footerWrap:"#footer-region"},onRender:function(){this.showChildView("headerWrap",new s)}})}),define("text!templates/private/tplRootAdmin.html",[],function(){
return'<div id="header-region">\n  <nav id="header-general" class="navbar navbar-default navbar-fixed-top" role="navigation">\n\n  </nav>\n</div>\n<div id="container-region">\n  <div class="container">\n    <div class="starter-template">\n      <div id="container-body">\n\n      </div>\n    </div>\n  </div>\n\n</div>\n<div id="footer-region">\n  <footer class="footer">\n    <div class="container">\n        <div class="row">\n          <div class="span3 pull-right">\n          </div>\n          <div class="span6 pull-left">\n            <span class="small">\n              Design by CodigoArtesanal | Copyright © 2017 entuliga. All Rights Reserved.\n            </span>\n          </div>\n        </div>\n    </div>\n  </footer>\n\n  <div id="modal-generic">\n  </div>\n</div>\n'}),define("views/RootAdminView",["jquery","backbone","marionette","bootstrap","text!templates/private/tplRootAdmin.html","views/private/MainAdminNavView"],function(t,e,i,n,o,s){return i.View.extend({template:_.template(o),regions:{headerWrap:"#header-region",containerWrap:"#container-region",footerWrap:"#footer-region"},onRender:function(){this.showChildView("headerWrap",new s)}})}),define("controllers/DashBoardController",["jquery","backbone","marionette","subroute"],function(t,e,i,n){return i.Object.extend({initialize:function(){},showuser:function(){}})}),define("app",["jquery","backbone","marionette","backboneValidation","jquerycookie","jquerySerializeObject","router","Session","models/UserTokenModel","views/public/MainNavView","views/RootView","views/RootAdminView","controllers/DashBoardController","jscookie"],function(t,e,i,n,o,s,r,a,l,c,h,d,u,p){var f=t('<div class="modal fade" data-keyboard="false" tabindex="-1"><div class="modal-base"><img src="img/basket.gif" height="150px" width="150px" style="display: block; margin: auto;"/></div></div>'),g=0;return i.Application.extend({region:"#app",initialize:function(){console.log("initialize marionette"),this.controllers={dashboard:new u},this.modeltoken=new l},onBeforeStart:function(){console.log("onBeforeStart marionette")},onStart:function(){console.log("onStart marionette");if(void 0!==p.get("auth_token")){this.showView(new d);var i=JSON.parse(t.cookie("auth_token"));null!=i&&(t.ajaxSetup({headers:{"X-Auth-Token":i.token}}),a.set("authenticated",!0),a.set("username",i.username))}else t.ajaxSettings.headers=[],a.set("authenticated",!1),this.showView(new h);new r;e.history.start(),t.ajaxSetup({cache:!1,beforeSend:function(){f.modal("show"),g+=1},complete:function(){g<=1&&f.modal("hide"),g-=1},statusCode:{401:function(){console.log("ERROR 401")},403:function(){console.log("ERROR 403")}}}),_.extend(e.Validation.callbacks,{valid:function(t,e,i){var n=t.$("[name="+e+"]"),o=n.closest(".form-group");o.removeClass("has-error"),o.find(".help-block").html("").addClass("hidden")},invalid:function(t,e,i,n){var o=t.$("[name="+e+"]"),s=o.closest(".form-group");s.addClass("has-error"),s.find(".help-block").html(i).removeClass("hidden")}}),t.fn.serializeObject=function(){"use strict";var e={},i=function(i,n){var o=e[n.name];void 0!==o&&null!==o?t.isArray(o)?o.push(n.value):e[n.name]=[o,n.value]:e[n.name]=n.value};return t.each(this.serializeArray(),i),e};var n=e.sync;e.sync=function(t,e,i){return i.beforeSend=function(){this.url="http://localhost:8090/"+this.url},n.call(this,t,e,i)}}})}),require.config({shim:{underscore:{exports:"_"},backbone:{deps:["underscore","jquery"],exports:"Backbone"},backboneValidation:{deps:["jquery","underscore","backbone"],exports:"Backbone.Validation"},marionette:{deps:["jquery","underscore","backbone"],exports:"Mn"},bootstrap:{deps:["jquery"]},selecter:{deps:["jquery"]},jquerycookie:{deps:["jquery"]},jquerySerializeObject:{deps:["jquery"]},datetimepicker:{deps:["jquery"]},bloodhound:{deps:["jquery"]},typeahead:{deps:["jquery"]},fabric:{deps:["jquery"]}},paths:{backbone:"vendor/backbone/backbone-min",jquery:"vendor/jquery/jquery",underscore:"vendor/underscore/underscore-min",marionette:"vendor/backbone/backbone-marionette/backbone.marionette","backbone.radio":"vendor/backbone/backbone-radio/backbone.radio.min",subroute:"vendor/backbone/backbone-subroute/backbone.subroute.min",jquerycookie:"vendor/jquery/cookie/jquery.cookie",jscookie:"vendor/js-cookie/js.cookie",jquerySerializeObject:"vendor/jquery/serializeObject/jquery.serializeObject.min",backboneValidation:"vendor/backbone/backbone-validation/backbone-validation-amd-min",text:"vendor/requirejs-text/text",bootstrap:"vendor/bootstrap/bootstrap",selecter:"vendor/bootstrap/select/bootstrap-select.min",datetimepicker:"vendor/bootstrap/datetimepicker/bootstrap-datetimepicker",dateformat:"vendor/date-format/date.format",bloodhound:"vendor/typeahead/bloodhound",typeahead:"vendor/typeahead/typeahead.jquery",fabric:"vendor/fabric/fabric.min"}}),require(["app","session"],function(t,e){console.log("**Main**");var i=new t;i.ADN="ADN",i.start()}),define("main",function(){});