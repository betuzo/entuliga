/*!
 * jQuery JavaScript Library v1.11.0
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-01-23T21:02Z
 */

/*!
 * Sizzle CSS Selector Engine v1.10.16
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-01-13
 */

//     Underscore.js 1.8.3
//     http://underscorejs.org
//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

//# sourceMappingURL=backbone-min.map;
// Backbone.Validation v0.11.5
//
// Copyright (c) 2011-2015 Thomas Pedersen
// Distributed under MIT License
//
// Documentation and full license available at:
// http://thedersen.com/projects/backbone-validation

/*!
 * jQuery Cookie Plugin v1.4.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */

/**
 * @license RequireJS text 2.0.12 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/*!
 * Bootstrap v3.3.1 (http://getbootstrap.com)
 * Copyright 2011-2017 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */

/* ========================================================================
 * Bootstrap: transition.js v3.3.1
 * http://getbootstrap.com/javascript/#transitions
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: alert.js v3.3.1
 * http://getbootstrap.com/javascript/#alerts
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: button.js v3.3.1
 * http://getbootstrap.com/javascript/#buttons
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: carousel.js v3.3.1
 * http://getbootstrap.com/javascript/#carousel
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: collapse.js v3.3.1
 * http://getbootstrap.com/javascript/#collapse
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: dropdown.js v3.3.1
 * http://getbootstrap.com/javascript/#dropdowns
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: modal.js v3.3.1
 * http://getbootstrap.com/javascript/#modals
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: tooltip.js v3.3.1
 * http://getbootstrap.com/javascript/#tooltip
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: popover.js v3.3.1
 * http://getbootstrap.com/javascript/#popovers
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: scrollspy.js v3.3.1
 * http://getbootstrap.com/javascript/#scrollspy
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: tab.js v3.3.1
 * http://getbootstrap.com/javascript/#tabs
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: affix.js v3.3.1
 * http://getbootstrap.com/javascript/#affix
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/*!
 * Bootstrap-select v1.6.4 (http://silviomoreto.github.io/bootstrap-select)
 *
 * Copyright 2013-2015 bootstrap-select
 * Licensed under MIT (https://github.com/silviomoreto/bootstrap-select/blob/master/LICENSE)
 */

/*
 * Date Format 1.2.3
 * (c) 2007-2009 Steven Levithan <stevenlevithan.com>
 * MIT license
 *
 * Includes enhancements by Scott Trenda <scott.trenda.net>
 * and Kris Kowal <cixar.com/~kris.kowal/>
 *
 * Accepts a date, a mask, or a date and a mask.
 * Returns a formatted version of the given date.
 * The date defaults to the current date/time.
 * The mask defaults to dateFormat.masks.default.
 */

/* =========================================================
 * bootstrap-datetimepicker.js
 * =========================================================
 * Copyright 2012 Stefan Petre
 *
 * Improvements by Andrew Rowls
 * Improvements by Sébastien Malot
 * Improvements by Yun Lai
 * Improvements by Kenneth Henderick
 * Improvements by CuGBabyBeaR
 * Improvements by Christian Vaas
 *
 * Project URL : http://www.malot.fr/bootstrap-datetimepicker
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */

/*!
 * typeahead.js 0.11.1
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT
 */

if(function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function i(t){var e=t.length,i=ot.type(t);return"function"===i||ot.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t}function n(t,e,i){if(ot.isFunction(e))return ot.grep(t,function(t,n){return!!e.call(t,n,t)!==i});if(e.nodeType)return ot.grep(t,function(t){return t===e!==i});if("string"==typeof e){if(pt.test(e))return ot.filter(e,t,i);e=ot.filter(e,t)}return ot.grep(t,function(t){return ot.inArray(t,e)>=0!==i})}function s(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function o(t){var e=xt[t]={};return ot.each(t.match(wt)||[],function(t,i){e[i]=!0}),e}function r(){gt.addEventListener?(gt.removeEventListener("DOMContentLoaded",a,!1),t.removeEventListener("load",a,!1)):(gt.detachEvent("onreadystatechange",a),t.detachEvent("onload",a))}function a(){(gt.addEventListener||"load"===event.type||"complete"===gt.readyState)&&(r(),ot.ready())}function l(t,e,i){if(void 0===i&&1===t.nodeType){var n="data-"+e.replace(kt,"-$1").toLowerCase();if(i=t.getAttribute(n),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:St.test(i)?ot.parseJSON(i):i}catch(s){}ot.data(t,e,i)}else i=void 0}return i}function c(t){var e;for(e in t)if(("data"!==e||!ot.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function d(t,e,i,n){if(ot.acceptData(t)){var s,o,r=ot.expando,a=t.nodeType,l=a?ot.cache:t,c=a?t[r]:t[r]&&r;if(c&&l[c]&&(n||l[c].data)||void 0!==i||"string"!=typeof e)return c||(c=a?t[r]=X.pop()||ot.guid++:r),l[c]||(l[c]=a?{}:{toJSON:ot.noop}),("object"==typeof e||"function"==typeof e)&&(n?l[c]=ot.extend(l[c],e):l[c].data=ot.extend(l[c].data,e)),o=l[c],n||(o.data||(o.data={}),o=o.data),void 0!==i&&(o[ot.camelCase(e)]=i),"string"==typeof e?(s=o[e],null==s&&(s=o[ot.camelCase(e)])):s=o,s}}function h(t,e,i){if(ot.acceptData(t)){var n,s,o=t.nodeType,r=o?ot.cache:t,a=o?t[ot.expando]:ot.expando;if(r[a]){if(e&&(n=i?r[a]:r[a].data)){ot.isArray(e)?e=e.concat(ot.map(e,ot.camelCase)):e in n?e=[e]:(e=ot.camelCase(e),e=e in n?[e]:e.split(" ")),s=e.length;for(;s--;)delete n[e[s]];if(i?!c(n):!ot.isEmptyObject(n))return}(i||(delete r[a].data,c(r[a])))&&(o?ot.cleanData([t],!0):nt.deleteExpando||r!=r.window?delete r[a]:r[a]=null)}}}function u(){return!0}function p(){return!1}function f(){try{return gt.activeElement}catch(t){}}function g(t){var e=Vt.split("|"),i=t.createDocumentFragment();if(i.createElement)for(;e.length;)i.createElement(e.pop());return i}function m(t,e){var i,n,s=0,o=typeof t.getElementsByTagName!==Tt?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!==Tt?t.querySelectorAll(e||"*"):void 0;if(!o)for(o=[],i=t.childNodes||t;null!=(n=i[s]);s++)!e||ot.nodeName(n,e)?o.push(n):ot.merge(o,m(n,e));return void 0===e||e&&ot.nodeName(t,e)?ot.merge([t],o):o}function v(t){jt.test(t.type)&&(t.defaultChecked=t.checked)}function b(t,e){return ot.nodeName(t,"table")&&ot.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function y(t){return t.type=(null!==ot.find.attr(t,"type"))+"/"+t.type,t}function w(t){var e=Xt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function x(t,e){for(var i,n=0;null!=(i=t[n]);n++)ot._data(i,"globalEval",!e||ot._data(e[n],"globalEval"))}function C(t,e){if(1===e.nodeType&&ot.hasData(t)){var i,n,s,o=ot._data(t),r=ot._data(e,o),a=o.events;if(a){delete r.handle,r.events={};for(i in a)for(n=0,s=a[i].length;s>n;n++)ot.event.add(e,i,a[i][n])}r.data&&(r.data=ot.extend({},r.data))}}function _(t,e){var i,n,s;if(1===e.nodeType){if(i=e.nodeName.toLowerCase(),!nt.noCloneEvent&&e[ot.expando]){s=ot._data(e);for(n in s.events)ot.removeEvent(e,n,s.handle);e.removeAttribute(ot.expando)}"script"===i&&e.text!==t.text?(y(e).text=t.text,w(e)):"object"===i?(e.parentNode&&(e.outerHTML=t.outerHTML),nt.html5Clone&&t.innerHTML&&!ot.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===i&&jt.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===i?e.defaultSelected=e.selected=t.defaultSelected:("input"===i||"textarea"===i)&&(e.defaultValue=t.defaultValue)}}function T(e,i){var n=ot(i.createElement(e)).appendTo(i.body),s=t.getDefaultComputedStyle?t.getDefaultComputedStyle(n[0]).display:ot.css(n[0],"display");return n.detach(),s}function S(t){var e=gt,i=te[t];return i||(i=T(t,e),"none"!==i&&i||(Zt=(Zt||ot("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=(Zt[0].contentWindow||Zt[0].contentDocument).document,e.write(),e.close(),i=T(t,e),Zt.detach()),te[t]=i),i}function k(t,e){return{get:function(){var i=t();if(null!=i)return i?void delete this.get:(this.get=e).apply(this,arguments)}}}function O(t,e){if(e in t)return e;for(var i=e.charAt(0).toUpperCase()+e.slice(1),n=e,s=pe.length;s--;)if(e=pe[s]+i,e in t)return e;return n}function A(t,e){for(var i,n,s,o=[],r=0,a=t.length;a>r;r++)n=t[r],n.style&&(o[r]=ot._data(n,"olddisplay"),i=n.style.display,e?(o[r]||"none"!==i||(n.style.display=""),""===n.style.display&&Dt(n)&&(o[r]=ot._data(n,"olddisplay",S(n.nodeName)))):o[r]||(s=Dt(n),(i&&"none"!==i||!s)&&ot._data(n,"olddisplay",s?i:ot.css(n,"display"))));for(r=0;a>r;r++)n=t[r],n.style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?o[r]||"":"none"));return t}function D(t,e,i){var n=ce.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function E(t,e,i,n,s){for(var o=i===(n?"border":"content")?4:"width"===e?1:0,r=0;4>o;o+=2)"margin"===i&&(r+=ot.css(t,i+At[o],!0,s)),n?("content"===i&&(r-=ot.css(t,"padding"+At[o],!0,s)),"margin"!==i&&(r-=ot.css(t,"border"+At[o]+"Width",!0,s))):(r+=ot.css(t,"padding"+At[o],!0,s),"padding"!==i&&(r+=ot.css(t,"border"+At[o]+"Width",!0,s)));return r}function j(t,e,i){var n=!0,s="width"===e?t.offsetWidth:t.offsetHeight,o=ee(t),r=nt.boxSizing()&&"border-box"===ot.css(t,"boxSizing",!1,o);if(0>=s||null==s){if(s=ie(t,e,o),(0>s||null==s)&&(s=t.style[e]),se.test(s))return s;n=r&&(nt.boxSizingReliable()||s===t.style[e]),s=parseFloat(s)||0}return s+E(t,e,i||(r?"border":"content"),n,o)+"px"}function M(t,e,i,n,s){return new M.prototype.init(t,e,i,n,s)}function I(){return setTimeout(function(){fe=void 0}),fe=ot.now()}function P(t,e){var i,n={height:t},s=0;for(e=e?1:0;4>s;s+=2-e)i=At[s],n["margin"+i]=n["padding"+i]=t;return e&&(n.opacity=n.width=t),n}function L(t,e,i){for(var n,s=(we[e]||[]).concat(we["*"]),o=0,r=s.length;r>o;o++)if(n=s[o].call(i,e,t))return n}function F(t,e,i){var n,s,o,r,a,l,c,d,h=this,u={},p=t.style,f=t.nodeType&&Dt(t),g=ot._data(t,"fxshow");i.queue||(a=ot._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,ot.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],c=ot.css(t,"display"),d=S(t.nodeName),"none"===c&&(c=d),"inline"===c&&"none"===ot.css(t,"float")&&(nt.inlineBlockNeedsLayout&&"inline"!==d?p.zoom=1:p.display="inline-block")),i.overflow&&(p.overflow="hidden",nt.shrinkWrapBlocks()||h.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(n in e)if(s=e[n],me.exec(s)){if(delete e[n],o=o||"toggle"===s,s===(f?"hide":"show")){if("show"!==s||!g||void 0===g[n])continue;f=!0}u[n]=g&&g[n]||ot.style(t,n)}if(!ot.isEmptyObject(u)){g?"hidden"in g&&(f=g.hidden):g=ot._data(t,"fxshow",{}),o&&(g.hidden=!f),f?ot(t).show():h.done(function(){ot(t).hide()}),h.done(function(){var e;ot._removeData(t,"fxshow");for(e in u)ot.style(t,e,u[e])});for(n in u)r=L(f?g[n]:0,n,h),n in g||(g[n]=r.start,f&&(r.end=r.start,r.start="width"===n||"height"===n?1:0))}}function V(t,e){var i,n,s,o,r;for(i in t)if(n=ot.camelCase(i),s=e[n],o=t[i],ot.isArray(o)&&(s=o[1],o=t[i]=o[0]),i!==n&&(t[n]=o,delete t[i]),r=ot.cssHooks[n],r&&"expand"in r){o=r.expand(o),delete t[n];for(i in o)i in t||(t[i]=o[i],e[i]=s)}else e[n]=s}function q(t,e,i){var n,s,o=0,r=ye.length,a=ot.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var e=fe||I(),i=Math.max(0,c.startTime+c.duration-e),n=i/c.duration||0,o=1-n,r=0,l=c.tweens.length;l>r;r++)c.tweens[r].run(o);return a.notifyWith(t,[c,o,i]),1>o&&l?i:(a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:ot.extend({},e),opts:ot.extend(!0,{specialEasing:{}},i),originalProperties:e,originalOptions:i,startTime:fe||I(),duration:i.duration,tweens:[],createTween:function(e,i){var n=ot.Tween(t,c.opts,e,i,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var i=0,n=e?c.tweens.length:0;if(s)return this;for(s=!0;n>i;i++)c.tweens[i].run(1);return e?a.resolveWith(t,[c,e]):a.rejectWith(t,[c,e]),this}}),d=c.props;for(V(d,c.opts.specialEasing);r>o;o++)if(n=ye[o].call(c,t,d,c.opts))return n;return ot.map(d,L,c),ot.isFunction(c.opts.start)&&c.opts.start.call(t,c),ot.fx.timer(ot.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function N(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,s=0,o=e.toLowerCase().match(wt)||[];if(ot.isFunction(i))for(;n=o[s++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function R(t,e,i,n){function s(a){var l;return o[a]=!0,ot.each(t[a]||[],function(t,a){var c=a(e,i,n);return"string"!=typeof c||r||o[c]?r?!(l=c):void 0:(e.dataTypes.unshift(c),s(c),!1)}),l}var o={},r=t===Ue;return s(e.dataTypes[0])||!o["*"]&&s("*")}function $(t,e){var i,n,s=ot.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((s[n]?t:i||(i={}))[n]=e[n]);return i&&ot.extend(!0,t,i),t}function B(t,e,i){for(var n,s,o,r,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===s&&(s=t.mimeType||e.getResponseHeader("Content-Type"));if(s)for(r in a)if(a[r]&&a[r].test(s)){l.unshift(r);break}if(l[0]in i)o=l[0];else{for(r in i){if(!l[0]||t.converters[r+" "+l[0]]){o=r;break}n||(n=r)}o=o||n}return o?(o!==l[0]&&l.unshift(o),i[o]):void 0}function z(t,e,i,n){var s,o,r,a,l,c={},d=t.dataTypes.slice();if(d[1])for(r in t.converters)c[r.toLowerCase()]=t.converters[r];for(o=d.shift();o;)if(t.responseFields[o]&&(i[t.responseFields[o]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=d.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(r=c[l+" "+o]||c["* "+o],!r)for(s in c)if(a=s.split(" "),a[1]===o&&(r=c[l+" "+a[0]]||c["* "+a[0]])){r===!0?r=c[s]:c[s]!==!0&&(o=a[0],d.unshift(a[1]));break}if(r!==!0)if(r&&t["throws"])e=r(e);else try{e=r(e)}catch(h){return{state:"parsererror",error:r?h:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}function U(t,e,i,n){var s;if(ot.isArray(e))ot.each(e,function(e,s){i||Xe.test(t)?n(t,s):U(t+"["+("object"==typeof s?e:"")+"]",s,i,n)});else if(i||"object"!==ot.type(e))n(t,e);else for(s in e)U(t+"["+s+"]",e[s],i,n)}function H(){try{return new t.XMLHttpRequest}catch(e){}}function W(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function J(t){return ot.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}var X=[],G=X.slice,Y=X.concat,K=X.push,Q=X.indexOf,Z={},tt=Z.toString,et=Z.hasOwnProperty,it="".trim,nt={},st="1.11.0",ot=function(t,e){return new ot.fn.init(t,e)},rt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,at=/^-ms-/,lt=/-([\da-z])/gi,ct=function(t,e){return e.toUpperCase()};ot.fn=ot.prototype={jquery:st,constructor:ot,selector:"",length:0,toArray:function(){return G.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:G.call(this)},pushStack:function(t){var e=ot.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return ot.each(this,t,e)},map:function(t){return this.pushStack(ot.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(G.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(0>t?e:0);return this.pushStack(i>=0&&e>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:K,sort:X.sort,splice:X.splice},ot.extend=ot.fn.extend=function(){var t,e,i,n,s,o,r=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof r&&(c=r,r=arguments[a]||{},a++),"object"==typeof r||ot.isFunction(r)||(r={}),a===l&&(r=this,a--);l>a;a++)if(null!=(s=arguments[a]))for(n in s)t=r[n],i=s[n],r!==i&&(c&&i&&(ot.isPlainObject(i)||(e=ot.isArray(i)))?(e?(e=!1,o=t&&ot.isArray(t)?t:[]):o=t&&ot.isPlainObject(t)?t:{},r[n]=ot.extend(c,o,i)):void 0!==i&&(r[n]=i));return r},ot.extend({expando:"jQuery"+(st+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===ot.type(t)},isArray:Array.isArray||function(t){return"array"===ot.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return t-parseFloat(t)>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==ot.type(t)||t.nodeType||ot.isWindow(t))return!1;try{if(t.constructor&&!et.call(t,"constructor")&&!et.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}if(nt.ownLast)for(e in t)return et.call(t,e);for(e in t);return void 0===e||et.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?Z[tt.call(t)]||"object":typeof t},globalEval:function(e){e&&ot.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(at,"ms-").replace(lt,ct)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var s,o=0,r=t.length,a=i(t);if(n){if(a)for(;r>o&&(s=e.apply(t[o],n),s!==!1);o++);else for(o in t)if(s=e.apply(t[o],n),s===!1)break}else if(a)for(;r>o&&(s=e.call(t[o],o,t[o]),s!==!1);o++);else for(o in t)if(s=e.call(t[o],o,t[o]),s===!1)break;return t},trim:it&&!it.call("\ufeff ")?function(t){return null==t?"":it.call(t)}:function(t){return null==t?"":(t+"").replace(rt,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?ot.merge(n,"string"==typeof t?[t]:t):K.call(n,t)),n},inArray:function(t,e,i){var n;if(e){if(Q)return Q.call(e,t,i);for(n=e.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in e&&e[i]===t)return i}return-1},merge:function(t,e){for(var i=+e.length,n=0,s=t.length;i>n;)t[s++]=e[n++];if(i!==i)for(;void 0!==e[n];)t[s++]=e[n++];return t.length=s,t},grep:function(t,e,i){for(var n,s=[],o=0,r=t.length,a=!i;r>o;o++)n=!e(t[o],o),n!==a&&s.push(t[o]);return s},map:function(t,e,n){var s,o=0,r=t.length,a=i(t),l=[];if(a)for(;r>o;o++)s=e(t[o],o,n),null!=s&&l.push(s);else for(o in t)s=e(t[o],o,n),null!=s&&l.push(s);return Y.apply([],l)},guid:1,proxy:function(t,e){var i,n,s;return"string"==typeof e&&(s=t[e],e=t,t=s),ot.isFunction(t)?(i=G.call(arguments,2),n=function(){return t.apply(e||this,i.concat(G.call(arguments)))},n.guid=t.guid=t.guid||ot.guid++,n):void 0},now:function(){return+new Date},support:nt}),ot.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Z["[object "+e+"]"]=e.toLowerCase()});var dt=function(t){function e(t,e,i,n){var s,o,r,a,l,c,h,f,g,m;if((e?e.ownerDocument||e:R)!==M&&j(e),e=e||M,i=i||[],!t||"string"!=typeof t)return i;if(1!==(a=e.nodeType)&&9!==a)return[];if(P&&!n){if(s=bt.exec(t))if(r=s[1]){if(9===a){if(o=e.getElementById(r),!o||!o.parentNode)return i;if(o.id===r)return i.push(o),i}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(r))&&q(e,o)&&o.id===r)return i.push(o),i}else{if(s[2])return Z.apply(i,e.getElementsByTagName(t)),i;if((r=s[3])&&_.getElementsByClassName&&e.getElementsByClassName)return Z.apply(i,e.getElementsByClassName(r)),i}if(_.qsa&&(!L||!L.test(t))){if(f=h=N,g=e,m=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(c=u(t),(h=e.getAttribute("id"))?f=h.replace(wt,"\\$&"):e.setAttribute("id",f),f="[id='"+f+"'] ",l=c.length;l--;)c[l]=f+p(c[l]);g=yt.test(t)&&d(e.parentNode)||e,m=c.join(",")}if(m)try{return Z.apply(i,g.querySelectorAll(m)),i}catch(v){}finally{h||e.removeAttribute("id")}}}return x(t.replace(lt,"$1"),e,i,n)}function i(){function t(i,n){return e.push(i+" ")>T.cacheLength&&delete t[e.shift()],t[i+" "]=n}var e=[];return t}function n(t){return t[N]=!0,t}function s(t){var e=M.createElement("div");try{return!!t(e)}catch(i){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var i=t.split("|"),n=t.length;n--;)T.attrHandle[i[n]]=e}function r(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||X)-(~t.sourceIndex||X);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function a(t){return function(e){var i=e.nodeName.toLowerCase();return"input"===i&&e.type===t}}function l(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function c(t){return n(function(e){return e=+e,n(function(i,n){for(var s,o=t([],i.length,e),r=o.length;r--;)i[s=o[r]]&&(i[s]=!(n[s]=i[s]))})})}function d(t){return t&&typeof t.getElementsByTagName!==J&&t}function h(){}function u(t,i){var n,s,o,r,a,l,c,d=U[t+" "];if(d)return i?0:d.slice(0);for(a=t,l=[],c=T.preFilter;a;){(!n||(s=ct.exec(a)))&&(s&&(a=a.slice(s[0].length)||a),l.push(o=[])),n=!1,(s=dt.exec(a))&&(n=s.shift(),o.push({value:n,type:s[0].replace(lt," ")}),a=a.slice(n.length));for(r in T.filter)!(s=ft[r].exec(a))||c[r]&&!(s=c[r](s))||(n=s.shift(),o.push({value:n,type:r,matches:s}),a=a.slice(n.length));if(!n)break}return i?a.length:a?e.error(t):U(t,l).slice(0)}function p(t){for(var e=0,i=t.length,n="";i>e;e++)n+=t[e].value;return n}function f(t,e,i){var n=e.dir,s=i&&"parentNode"===n,o=B++;return e.first?function(e,i,o){for(;e=e[n];)if(1===e.nodeType||s)return t(e,i,o)}:function(e,i,r){var a,l,c=[$,o];if(r){for(;e=e[n];)if((1===e.nodeType||s)&&t(e,i,r))return!0}else for(;e=e[n];)if(1===e.nodeType||s){if(l=e[N]||(e[N]={}),(a=l[n])&&a[0]===$&&a[1]===o)return c[2]=a[2];if(l[n]=c,c[2]=t(e,i,r))return!0}}}function g(t){return t.length>1?function(e,i,n){for(var s=t.length;s--;)if(!t[s](e,i,n))return!1;return!0}:t[0]}function m(t,e,i,n,s){for(var o,r=[],a=0,l=t.length,c=null!=e;l>a;a++)(o=t[a])&&(!i||i(o,n,s))&&(r.push(o),c&&e.push(a));return r}function v(t,e,i,s,o,r){return s&&!s[N]&&(s=v(s)),o&&!o[N]&&(o=v(o,r)),n(function(n,r,a,l){var c,d,h,u=[],p=[],f=r.length,g=n||w(e||"*",a.nodeType?[a]:a,[]),v=!t||!n&&e?g:m(g,u,t,a,l),b=i?o||(n?t:f||s)?[]:r:v;if(i&&i(v,b,a,l),s)for(c=m(b,p),s(c,[],a,l),d=c.length;d--;)(h=c[d])&&(b[p[d]]=!(v[p[d]]=h));if(n){if(o||t){if(o){for(c=[],d=b.length;d--;)(h=b[d])&&c.push(v[d]=h);o(null,b=[],c,l)}for(d=b.length;d--;)(h=b[d])&&(c=o?et.call(n,h):u[d])>-1&&(n[c]=!(r[c]=h))}}else b=m(b===r?b.splice(f,b.length):b),o?o(null,r,b,l):Z.apply(r,b)})}function b(t){for(var e,i,n,s=t.length,o=T.relative[t[0].type],r=o||T.relative[" "],a=o?1:0,l=f(function(t){return t===e},r,!0),c=f(function(t){return et.call(e,t)>-1},r,!0),d=[function(t,i,n){return!o&&(n||i!==A)||((e=i).nodeType?l(t,i,n):c(t,i,n))}];s>a;a++)if(i=T.relative[t[a].type])d=[f(g(d),i)];else{if(i=T.filter[t[a].type].apply(null,t[a].matches),i[N]){for(n=++a;s>n&&!T.relative[t[n].type];n++);return v(a>1&&g(d),a>1&&p(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(lt,"$1"),i,n>a&&b(t.slice(a,n)),s>n&&b(t=t.slice(n)),s>n&&p(t))}d.push(i)}return g(d)}function y(t,i){var s=i.length>0,o=t.length>0,r=function(n,r,a,l,c){var d,h,u,p=0,f="0",g=n&&[],v=[],b=A,y=n||o&&T.find.TAG("*",c),w=$+=null==b?1:Math.random()||.1,x=y.length;for(c&&(A=r!==M&&r);f!==x&&null!=(d=y[f]);f++){if(o&&d){for(h=0;u=t[h++];)if(u(d,r,a)){l.push(d);break}c&&($=w)}s&&((d=!u&&d)&&p--,n&&g.push(d))}if(p+=f,s&&f!==p){for(h=0;u=i[h++];)u(g,v,r,a);if(n){if(p>0)for(;f--;)g[f]||v[f]||(v[f]=K.call(l));v=m(v)}Z.apply(l,v),c&&!n&&v.length>0&&p+i.length>1&&e.uniqueSort(l)}return c&&($=w,A=b),g};return s?n(r):r}function w(t,i,n){for(var s=0,o=i.length;o>s;s++)e(t,i[s],n);return n}function x(t,e,i,n){var s,o,r,a,l,c=u(t);if(!n&&1===c.length){if(o=c[0]=c[0].slice(0),o.length>2&&"ID"===(r=o[0]).type&&_.getById&&9===e.nodeType&&P&&T.relative[o[1].type]){if(e=(T.find.ID(r.matches[0].replace(xt,Ct),e)||[])[0],!e)return i;t=t.slice(o.shift().value.length)}for(s=ft.needsContext.test(t)?0:o.length;s--&&(r=o[s],!T.relative[a=r.type]);)if((l=T.find[a])&&(n=l(r.matches[0].replace(xt,Ct),yt.test(o[0].type)&&d(e.parentNode)||e))){if(o.splice(s,1),t=n.length&&p(o),!t)return Z.apply(i,n),i;break}}return O(t,c)(n,e,!P,i,yt.test(t)&&d(e.parentNode)||e),i}var C,_,T,S,k,O,A,D,E,j,M,I,P,L,F,V,q,N="sizzle"+-new Date,R=t.document,$=0,B=0,z=i(),U=i(),H=i(),W=function(t,e){return t===e&&(E=!0),0},J="undefined",X=1<<31,G={}.hasOwnProperty,Y=[],K=Y.pop,Q=Y.push,Z=Y.push,tt=Y.slice,et=Y.indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(this[e]===t)return e;return-1},it="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",st="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ot=st.replace("w","w#"),rt="\\["+nt+"*("+st+")"+nt+"*(?:([*^$|!~]?=)"+nt+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ot+")|)|)"+nt+"*\\]",at=":("+st+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+rt.replace(3,8)+")*)|.*)\\)|)",lt=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),ct=new RegExp("^"+nt+"*,"+nt+"*"),dt=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ht=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),ut=new RegExp(at),pt=new RegExp("^"+ot+"$"),ft={ID:new RegExp("^#("+st+")"),CLASS:new RegExp("^\\.("+st+")"),TAG:new RegExp("^("+st.replace("w","w*")+")"),ATTR:new RegExp("^"+rt),PSEUDO:new RegExp("^"+at),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+it+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},gt=/^(?:input|select|textarea|button)$/i,mt=/^h\d$/i,vt=/^[^{]+\{\s*\[native \w/,bt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,wt=/'|\\/g,xt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),Ct=function(t,e,i){var n="0x"+e-65536;return n!==n||i?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{Z.apply(Y=tt.call(R.childNodes),R.childNodes),Y[R.childNodes.length].nodeType}catch(_t){Z={apply:Y.length?function(t,e){Q.apply(t,tt.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}_=e.support={},k=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},j=e.setDocument=function(t){var e,i=t?t.ownerDocument||t:R,n=i.defaultView;return i!==M&&9===i.nodeType&&i.documentElement?(M=i,I=i.documentElement,P=!k(i),n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",function(){j()},!1):n.attachEvent&&n.attachEvent("onunload",function(){j()})),_.attributes=s(function(t){return t.className="i",!t.getAttribute("className")}),_.getElementsByTagName=s(function(t){return t.appendChild(i.createComment("")),!t.getElementsByTagName("*").length}),_.getElementsByClassName=vt.test(i.getElementsByClassName)&&s(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),_.getById=s(function(t){return I.appendChild(t).id=N,!i.getElementsByName||!i.getElementsByName(N).length}),_.getById?(T.find.ID=function(t,e){if(typeof e.getElementById!==J&&P){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}},T.filter.ID=function(t){var e=t.replace(xt,Ct);return function(t){return t.getAttribute("id")===e}}):(delete T.find.ID,T.filter.ID=function(t){var e=t.replace(xt,Ct);return function(t){var i=typeof t.getAttributeNode!==J&&t.getAttributeNode("id");return i&&i.value===e}}),T.find.TAG=_.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==J?e.getElementsByTagName(t):void 0}:function(t,e){var i,n=[],s=0,o=e.getElementsByTagName(t);if("*"===t){for(;i=o[s++];)1===i.nodeType&&n.push(i);return n}return o},T.find.CLASS=_.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==J&&P?e.getElementsByClassName(t):void 0},F=[],L=[],(_.qsa=vt.test(i.querySelectorAll))&&(s(function(t){t.innerHTML="<select t=''><option selected=''></option></select>",t.querySelectorAll("[t^='']").length&&L.push("[*^$]="+nt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||L.push("\\["+nt+"*(?:value|"+it+")"),t.querySelectorAll(":checked").length||L.push(":checked")}),s(function(t){var e=i.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&L.push("name"+nt+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||L.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),L.push(",.*:")})),(_.matchesSelector=vt.test(V=I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&s(function(t){_.disconnectedMatch=V.call(t,"div"),V.call(t,"[s!='']:x"),F.push("!=",at)}),L=L.length&&new RegExp(L.join("|")),F=F.length&&new RegExp(F.join("|")),e=vt.test(I.compareDocumentPosition),q=e||vt.test(I.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},W=e?function(t,e){if(t===e)return E=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!_.sortDetached&&e.compareDocumentPosition(t)===n?t===i||t.ownerDocument===R&&q(R,t)?-1:e===i||e.ownerDocument===R&&q(R,e)?1:D?et.call(D,t)-et.call(D,e):0:4&n?-1:1)}:function(t,e){if(t===e)return E=!0,0;var n,s=0,o=t.parentNode,a=e.parentNode,l=[t],c=[e];if(!o||!a)return t===i?-1:e===i?1:o?-1:a?1:D?et.call(D,t)-et.call(D,e):0;if(o===a)return r(t,e);for(n=t;n=n.parentNode;)l.unshift(n);for(n=e;n=n.parentNode;)c.unshift(n);for(;l[s]===c[s];)s++;return s?r(l[s],c[s]):l[s]===R?-1:c[s]===R?1:0},i):M},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==M&&j(t),i=i.replace(ht,"='$1']"),_.matchesSelector&&P&&(!F||!F.test(i))&&(!L||!L.test(i)))try{var n=V.call(t,i);if(n||_.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(s){}return e(i,M,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==M&&j(t),q(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==M&&j(t);var i=T.attrHandle[e.toLowerCase()],n=i&&G.call(T.attrHandle,e.toLowerCase())?i(t,e,!P):void 0;return void 0!==n?n:_.attributes||!P?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],n=0,s=0;if(E=!_.detectDuplicates,D=!_.sortStable&&t.slice(0),t.sort(W),E){for(;e=t[s++];)e===t[s]&&(n=i.push(s));for(;n--;)t.splice(i[n],1)}return D=null,t},S=e.getText=function(t){var e,i="",n=0,s=t.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=S(t)}else if(3===s||4===s)return t.nodeValue}else for(;e=t[n++];)i+=S(e);return i},T=e.selectors={cacheLength:50,createPseudo:n,match:ft,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(xt,Ct),t[3]=(t[4]||t[5]||"").replace(xt,Ct),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[5]&&t[2];return ft.CHILD.test(t[0])?null:(t[3]&&void 0!==t[4]?t[2]=t[4]:i&&ut.test(i)&&(e=u(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(xt,Ct).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=z[t+" "];return e||(e=new RegExp("(^|"+nt+")"+t+"("+nt+"|$)"))&&z(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==J&&t.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(s){var o=e.attr(s,t);return null==o?"!="===i:i?(o+="","="===i?o===n:"!="===i?o!==n:"^="===i?n&&0===o.indexOf(n):"*="===i?n&&o.indexOf(n)>-1:"$="===i?n&&o.slice(-n.length)===n:"~="===i?(" "+o+" ").indexOf(n)>-1:"|="===i?o===n||o.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(t,e,i,n,s){var o="nth"!==t.slice(0,3),r="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===s?function(t){return!!t.parentNode}:function(e,i,l){var c,d,h,u,p,f,g=o!==r?"nextSibling":"previousSibling",m=e.parentNode,v=a&&e.nodeName.toLowerCase(),b=!l&&!a;if(m){if(o){for(;g;){for(h=e;h=h[g];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[r?m.firstChild:m.lastChild],r&&b){for(d=m[N]||(m[N]={}),c=d[t]||[],p=c[0]===$&&c[1],u=c[0]===$&&c[2],h=p&&m.childNodes[p];h=++p&&h&&h[g]||(u=p=0)||f.pop();)if(1===h.nodeType&&++u&&h===e){d[t]=[$,p,u];break}}else if(b&&(c=(e[N]||(e[N]={}))[t])&&c[0]===$)u=c[1];else for(;(h=++p&&h&&h[g]||(u=p=0)||f.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++u||(b&&((h[N]||(h[N]={}))[t]=[$,u]),h!==e)););return u-=s,u===n||u%n===0&&u/n>=0}}},PSEUDO:function(t,i){var s,o=T.pseudos[t]||T.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[N]?o(i):o.length>1?(s=[t,t,"",i],T.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,s=o(t,i),r=s.length;r--;)n=et.call(t,s[r]),t[n]=!(e[n]=s[r])}):function(t){return o(t,0,s)}):o}},pseudos:{not:n(function(t){var e=[],i=[],s=O(t.replace(lt,"$1"));return s[N]?n(function(t,e,i,n){for(var o,r=s(t,null,n,[]),a=t.length;a--;)(o=r[a])&&(t[a]=!(e[a]=o))}):function(t,n,o){return e[0]=t,s(e,null,o,i),!i.pop()}}),has:n(function(t){return function(i){return e(t,i).length>0}}),contains:n(function(t){return function(e){return(e.textContent||e.innerText||S(e)).indexOf(t)>-1}}),lang:n(function(t){return pt.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(xt,Ct).toLowerCase(),function(e){var i;do if(i=P?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return i=i.toLowerCase(),i===t||0===i.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===I},focus:function(t){return t===M.activeElement&&(!M.hasFocus||M.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!T.pseudos.empty(t)},header:function(t){return mt.test(t.nodeName)},input:function(t){return gt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:c(function(){return[0]}),last:c(function(t,e){
return[e-1]}),eq:c(function(t,e,i){return[0>i?i+e:i]}),even:c(function(t,e){for(var i=0;e>i;i+=2)t.push(i);return t}),odd:c(function(t,e){for(var i=1;e>i;i+=2)t.push(i);return t}),lt:c(function(t,e,i){for(var n=0>i?i+e:i;--n>=0;)t.push(n);return t}),gt:c(function(t,e,i){for(var n=0>i?i+e:i;++n<e;)t.push(n);return t})}},T.pseudos.nth=T.pseudos.eq;for(C in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})T.pseudos[C]=a(C);for(C in{submit:!0,reset:!0})T.pseudos[C]=l(C);return h.prototype=T.filters=T.pseudos,T.setFilters=new h,O=e.compile=function(t,e){var i,n=[],s=[],o=H[t+" "];if(!o){for(e||(e=u(t)),i=e.length;i--;)o=b(e[i]),o[N]?n.push(o):s.push(o);o=H(t,y(s,n))}return o},_.sortStable=N.split("").sort(W).join("")===N,_.detectDuplicates=!!E,j(),_.sortDetached=s(function(t){return 1&t.compareDocumentPosition(M.createElement("div"))}),s(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,i){return i?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),_.attributes&&s(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,i){return i||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),s(function(t){return null==t.getAttribute("disabled")})||o(it,function(t,e,i){var n;return i?void 0:t[e]===!0?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(t);ot.find=dt,ot.expr=dt.selectors,ot.expr[":"]=ot.expr.pseudos,ot.unique=dt.uniqueSort,ot.text=dt.getText,ot.isXMLDoc=dt.isXML,ot.contains=dt.contains;var ht=ot.expr.match.needsContext,ut=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,pt=/^.[^:#\[\.,]*$/;ot.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?ot.find.matchesSelector(n,t)?[n]:[]:ot.find.matches(t,ot.grep(e,function(t){return 1===t.nodeType}))},ot.fn.extend({find:function(t){var e,i=[],n=this,s=n.length;if("string"!=typeof t)return this.pushStack(ot(t).filter(function(){for(e=0;s>e;e++)if(ot.contains(n[e],this))return!0}));for(e=0;s>e;e++)ot.find(t,n[e],i);return i=this.pushStack(s>1?ot.unique(i):i),i.selector=this.selector?this.selector+" "+t:t,i},filter:function(t){return this.pushStack(n(this,t||[],!1))},not:function(t){return this.pushStack(n(this,t||[],!0))},is:function(t){return!!n(this,"string"==typeof t&&ht.test(t)?ot(t):t||[],!1).length}});var ft,gt=t.document,mt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,vt=ot.fn.init=function(t,e){var i,n;if(!t)return this;if("string"==typeof t){if(i="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:mt.exec(t),!i||!i[1]&&e)return!e||e.jquery?(e||ft).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof ot?e[0]:e,ot.merge(this,ot.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:gt,!0)),ut.test(i[1])&&ot.isPlainObject(e))for(i in e)ot.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}if(n=gt.getElementById(i[2]),n&&n.parentNode){if(n.id!==i[2])return ft.find(t);this.length=1,this[0]=n}return this.context=gt,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):ot.isFunction(t)?"undefined"!=typeof ft.ready?ft.ready(t):t(ot):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),ot.makeArray(t,this))};vt.prototype=ot.fn,ft=ot(gt);var bt=/^(?:parents|prev(?:Until|All))/,yt={children:!0,contents:!0,next:!0,prev:!0};ot.extend({dir:function(t,e,i){for(var n=[],s=t[e];s&&9!==s.nodeType&&(void 0===i||1!==s.nodeType||!ot(s).is(i));)1===s.nodeType&&n.push(s),s=s[e];return n},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}}),ot.fn.extend({has:function(t){var e,i=ot(t,this),n=i.length;return this.filter(function(){for(e=0;n>e;e++)if(ot.contains(this,i[e]))return!0})},closest:function(t,e){for(var i,n=0,s=this.length,o=[],r=ht.test(t)||"string"!=typeof t?ot(t,e||this.context):0;s>n;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(r?r.index(i)>-1:1===i.nodeType&&ot.find.matchesSelector(i,t))){o.push(i);break}return this.pushStack(o.length>1?ot.unique(o):o)},index:function(t){return t?"string"==typeof t?ot.inArray(this[0],ot(t)):ot.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(ot.unique(ot.merge(this.get(),ot(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),ot.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return ot.dir(t,"parentNode")},parentsUntil:function(t,e,i){return ot.dir(t,"parentNode",i)},next:function(t){return s(t,"nextSibling")},prev:function(t){return s(t,"previousSibling")},nextAll:function(t){return ot.dir(t,"nextSibling")},prevAll:function(t){return ot.dir(t,"previousSibling")},nextUntil:function(t,e,i){return ot.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return ot.dir(t,"previousSibling",i)},siblings:function(t){return ot.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return ot.sibling(t.firstChild)},contents:function(t){return ot.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:ot.merge([],t.childNodes)}},function(t,e){ot.fn[t]=function(i,n){var s=ot.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(s=ot.filter(n,s)),this.length>1&&(yt[t]||(s=ot.unique(s)),bt.test(t)&&(s=s.reverse())),this.pushStack(s)}});var wt=/\S+/g,xt={};ot.Callbacks=function(t){t="string"==typeof t?xt[t]||o(t):ot.extend({},t);var e,i,n,s,r,a,l=[],c=!t.once&&[],d=function(o){for(i=t.memory&&o,n=!0,r=a||0,a=0,s=l.length,e=!0;l&&s>r;r++)if(l[r].apply(o[0],o[1])===!1&&t.stopOnFalse){i=!1;break}e=!1,l&&(c?c.length&&d(c.shift()):i?l=[]:h.disable())},h={add:function(){if(l){var n=l.length;!function o(e){ot.each(e,function(e,i){var n=ot.type(i);"function"===n?t.unique&&h.has(i)||l.push(i):i&&i.length&&"string"!==n&&o(i)})}(arguments),e?s=l.length:i&&(a=n,d(i))}return this},remove:function(){return l&&ot.each(arguments,function(t,i){for(var n;(n=ot.inArray(i,l,n))>-1;)l.splice(n,1),e&&(s>=n&&s--,r>=n&&r--)}),this},has:function(t){return t?ot.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],s=0,this},disable:function(){return l=c=i=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,i||h.disable(),this},locked:function(){return!c},fireWith:function(t,i){return!l||n&&!c||(i=i||[],i=[t,i.slice?i.slice():i],e?c.push(i):d(i)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!n}};return h},ot.extend({Deferred:function(t){var e=[["resolve","done",ot.Callbacks("once memory"),"resolved"],["reject","fail",ot.Callbacks("once memory"),"rejected"],["notify","progress",ot.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var t=arguments;return ot.Deferred(function(i){ot.each(e,function(e,o){var r=ot.isFunction(t[e])&&t[e];s[o[1]](function(){var t=r&&r.apply(this,arguments);t&&ot.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[o[0]+"With"](this===n?i.promise():this,r?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?ot.extend(t,n):n}},s={};return n.pipe=n.then,ot.each(e,function(t,o){var r=o[2],a=o[3];n[o[1]]=r.add,a&&r.add(function(){i=a},e[1^t][2].disable,e[2][2].lock),s[o[0]]=function(){return s[o[0]+"With"](this===s?n:this,arguments),this},s[o[0]+"With"]=r.fireWith}),n.promise(s),t&&t.call(s,s),s},when:function(t){var e,i,n,s=0,o=G.call(arguments),r=o.length,a=1!==r||t&&ot.isFunction(t.promise)?r:0,l=1===a?t:ot.Deferred(),c=function(t,i,n){return function(s){i[t]=this,n[t]=arguments.length>1?G.call(arguments):s,n===e?l.notifyWith(i,n):--a||l.resolveWith(i,n)}};if(r>1)for(e=new Array(r),i=new Array(r),n=new Array(r);r>s;s++)o[s]&&ot.isFunction(o[s].promise)?o[s].promise().done(c(s,n,o)).fail(l.reject).progress(c(s,i,e)):--a;return a||l.resolveWith(n,o),l.promise()}});var Ct;ot.fn.ready=function(t){return ot.ready.promise().done(t),this},ot.extend({isReady:!1,readyWait:1,holdReady:function(t){t?ot.readyWait++:ot.ready(!0)},ready:function(t){if(t===!0?!--ot.readyWait:!ot.isReady){if(!gt.body)return setTimeout(ot.ready);ot.isReady=!0,t!==!0&&--ot.readyWait>0||(Ct.resolveWith(gt,[ot]),ot.fn.trigger&&ot(gt).trigger("ready").off("ready"))}}}),ot.ready.promise=function(e){if(!Ct)if(Ct=ot.Deferred(),"complete"===gt.readyState)setTimeout(ot.ready);else if(gt.addEventListener)gt.addEventListener("DOMContentLoaded",a,!1),t.addEventListener("load",a,!1);else{gt.attachEvent("onreadystatechange",a),t.attachEvent("onload",a);var i=!1;try{i=null==t.frameElement&&gt.documentElement}catch(n){}i&&i.doScroll&&!function s(){if(!ot.isReady){try{i.doScroll("left")}catch(t){return setTimeout(s,50)}r(),ot.ready()}}()}return Ct.promise(e)};var _t,Tt="undefined";for(_t in ot(nt))break;nt.ownLast="0"!==_t,nt.inlineBlockNeedsLayout=!1,ot(function(){var t,e,i=gt.getElementsByTagName("body")[0];i&&(t=gt.createElement("div"),t.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",e=gt.createElement("div"),i.appendChild(t).appendChild(e),typeof e.style.zoom!==Tt&&(e.style.cssText="border:0;margin:0;width:1px;padding:1px;display:inline;zoom:1",(nt.inlineBlockNeedsLayout=3===e.offsetWidth)&&(i.style.zoom=1)),i.removeChild(t),t=e=null)}),function(){var t=gt.createElement("div");if(null==nt.deleteExpando){nt.deleteExpando=!0;try{delete t.test}catch(e){nt.deleteExpando=!1}}t=null}(),ot.acceptData=function(t){var e=ot.noData[(t.nodeName+" ").toLowerCase()],i=+t.nodeType||1;return 1!==i&&9!==i?!1:!e||e!==!0&&t.getAttribute("classid")===e};var St=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,kt=/([A-Z])/g;ot.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return t=t.nodeType?ot.cache[t[ot.expando]]:t[ot.expando],!!t&&!c(t)},data:function(t,e,i){return d(t,e,i)},removeData:function(t,e){return h(t,e)},_data:function(t,e,i){return d(t,e,i,!0)},_removeData:function(t,e){return h(t,e,!0)}}),ot.fn.extend({data:function(t,e){var i,n,s,o=this[0],r=o&&o.attributes;if(void 0===t){if(this.length&&(s=ot.data(o),1===o.nodeType&&!ot._data(o,"parsedAttrs"))){for(i=r.length;i--;)n=r[i].name,0===n.indexOf("data-")&&(n=ot.camelCase(n.slice(5)),l(o,n,s[n]));ot._data(o,"parsedAttrs",!0)}return s}return"object"==typeof t?this.each(function(){ot.data(this,t)}):arguments.length>1?this.each(function(){ot.data(this,t,e)}):o?l(o,t,ot.data(o,t)):void 0},removeData:function(t){return this.each(function(){ot.removeData(this,t)})}}),ot.extend({queue:function(t,e,i){var n;return t?(e=(e||"fx")+"queue",n=ot._data(t,e),i&&(!n||ot.isArray(i)?n=ot._data(t,e,ot.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(t,e){e=e||"fx";var i=ot.queue(t,e),n=i.length,s=i.shift(),o=ot._queueHooks(t,e),r=function(){ot.dequeue(t,e)};"inprogress"===s&&(s=i.shift(),n--),s&&("fx"===e&&i.unshift("inprogress"),delete o.stop,s.call(t,r,o)),!n&&o&&o.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return ot._data(t,i)||ot._data(t,i,{empty:ot.Callbacks("once memory").add(function(){ot._removeData(t,e+"queue"),ot._removeData(t,i)})})}}),ot.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?ot.queue(this[0],t):void 0===e?this:this.each(function(){var i=ot.queue(this,t,e);ot._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&ot.dequeue(this,t)})},dequeue:function(t){return this.each(function(){ot.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,s=ot.Deferred(),o=this,r=this.length,a=function(){--n||s.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";r--;)i=ot._data(o[r],t+"queueHooks"),i&&i.empty&&(n++,i.empty.add(a));return a(),s.promise(e)}});var Ot=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,At=["Top","Right","Bottom","Left"],Dt=function(t,e){return t=e||t,"none"===ot.css(t,"display")||!ot.contains(t.ownerDocument,t)},Et=ot.access=function(t,e,i,n,s,o,r){var a=0,l=t.length,c=null==i;if("object"===ot.type(i)){s=!0;for(a in i)ot.access(t,e,a,i[a],!0,o,r)}else if(void 0!==n&&(s=!0,ot.isFunction(n)||(r=!0),c&&(r?(e.call(t,n),e=null):(c=e,e=function(t,e,i){return c.call(ot(t),i)})),e))for(;l>a;a++)e(t[a],i,r?n:n.call(t[a],a,e(t[a],i)));return s?t:c?e.call(t):l?e(t[0],i):o},jt=/^(?:checkbox|radio)$/i;!function(){var t=gt.createDocumentFragment(),e=gt.createElement("div"),i=gt.createElement("input");if(e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a>",nt.leadingWhitespace=3===e.firstChild.nodeType,nt.tbody=!e.getElementsByTagName("tbody").length,nt.htmlSerialize=!!e.getElementsByTagName("link").length,nt.html5Clone="<:nav></:nav>"!==gt.createElement("nav").cloneNode(!0).outerHTML,i.type="checkbox",i.checked=!0,t.appendChild(i),nt.appendChecked=i.checked,e.innerHTML="<textarea>x</textarea>",nt.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,t.appendChild(e),e.innerHTML="<input type='radio' checked='checked' name='t'/>",nt.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,nt.noCloneEvent=!0,e.attachEvent&&(e.attachEvent("onclick",function(){nt.noCloneEvent=!1}),e.cloneNode(!0).click()),null==nt.deleteExpando){nt.deleteExpando=!0;try{delete e.test}catch(n){nt.deleteExpando=!1}}t=e=i=null}(),function(){var e,i,n=gt.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})i="on"+e,(nt[e+"Bubbles"]=i in t)||(n.setAttribute(i,"t"),nt[e+"Bubbles"]=n.attributes[i].expando===!1);n=null}();var Mt=/^(?:input|select|textarea)$/i,It=/^key/,Pt=/^(?:mouse|contextmenu)|click/,Lt=/^(?:focusinfocus|focusoutblur)$/,Ft=/^([^.]*)(?:\.(.+)|)$/;ot.event={global:{},add:function(t,e,i,n,s){var o,r,a,l,c,d,h,u,p,f,g,m=ot._data(t);if(m){for(i.handler&&(l=i,i=l.handler,s=l.selector),i.guid||(i.guid=ot.guid++),(r=m.events)||(r=m.events={}),(d=m.handle)||(d=m.handle=function(t){return typeof ot===Tt||t&&ot.event.triggered===t.type?void 0:ot.event.dispatch.apply(d.elem,arguments)},d.elem=t),e=(e||"").match(wt)||[""],a=e.length;a--;)o=Ft.exec(e[a])||[],p=g=o[1],f=(o[2]||"").split(".").sort(),p&&(c=ot.event.special[p]||{},p=(s?c.delegateType:c.bindType)||p,c=ot.event.special[p]||{},h=ot.extend({type:p,origType:g,data:n,handler:i,guid:i.guid,selector:s,needsContext:s&&ot.expr.match.needsContext.test(s),namespace:f.join(".")},l),(u=r[p])||(u=r[p]=[],u.delegateCount=0,c.setup&&c.setup.call(t,n,f,d)!==!1||(t.addEventListener?t.addEventListener(p,d,!1):t.attachEvent&&t.attachEvent("on"+p,d))),c.add&&(c.add.call(t,h),h.handler.guid||(h.handler.guid=i.guid)),s?u.splice(u.delegateCount++,0,h):u.push(h),ot.event.global[p]=!0);t=null}},remove:function(t,e,i,n,s){var o,r,a,l,c,d,h,u,p,f,g,m=ot.hasData(t)&&ot._data(t);if(m&&(d=m.events)){for(e=(e||"").match(wt)||[""],c=e.length;c--;)if(a=Ft.exec(e[c])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p){for(h=ot.event.special[p]||{},p=(n?h.delegateType:h.bindType)||p,u=d[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=u.length;o--;)r=u[o],!s&&g!==r.origType||i&&i.guid!==r.guid||a&&!a.test(r.namespace)||n&&n!==r.selector&&("**"!==n||!r.selector)||(u.splice(o,1),r.selector&&u.delegateCount--,h.remove&&h.remove.call(t,r));l&&!u.length&&(h.teardown&&h.teardown.call(t,f,m.handle)!==!1||ot.removeEvent(t,p,m.handle),delete d[p])}else for(p in d)ot.event.remove(t,p+e[c],i,n,!0);ot.isEmptyObject(d)&&(delete m.handle,ot._removeData(t,"events"))}},trigger:function(e,i,n,s){var o,r,a,l,c,d,h,u=[n||gt],p=et.call(e,"type")?e.type:e,f=et.call(e,"namespace")?e.namespace.split("."):[];if(a=d=n=n||gt,3!==n.nodeType&&8!==n.nodeType&&!Lt.test(p+ot.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),r=p.indexOf(":")<0&&"on"+p,e=e[ot.expando]?e:new ot.Event(p,"object"==typeof e&&e),e.isTrigger=s?2:3,e.namespace=f.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:ot.makeArray(i,[e]),c=ot.event.special[p]||{},s||!c.trigger||c.trigger.apply(n,i)!==!1)){if(!s&&!c.noBubble&&!ot.isWindow(n)){for(l=c.delegateType||p,Lt.test(l+p)||(a=a.parentNode);a;a=a.parentNode)u.push(a),d=a;d===(n.ownerDocument||gt)&&u.push(d.defaultView||d.parentWindow||t)}for(h=0;(a=u[h++])&&!e.isPropagationStopped();)e.type=h>1?l:c.bindType||p,o=(ot._data(a,"events")||{})[e.type]&&ot._data(a,"handle"),o&&o.apply(a,i),o=r&&a[r],o&&o.apply&&ot.acceptData(a)&&(e.result=o.apply(a,i),e.result===!1&&e.preventDefault());if(e.type=p,!s&&!e.isDefaultPrevented()&&(!c._default||c._default.apply(u.pop(),i)===!1)&&ot.acceptData(n)&&r&&n[p]&&!ot.isWindow(n)){d=n[r],d&&(n[r]=null),ot.event.triggered=p;try{n[p]()}catch(g){}ot.event.triggered=void 0,d&&(n[r]=d)}return e.result}},dispatch:function(t){t=ot.event.fix(t);var e,i,n,s,o,r=[],a=G.call(arguments),l=(ot._data(this,"events")||{})[t.type]||[],c=ot.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,t)!==!1){for(r=ot.event.handlers.call(this,t,l),e=0;(s=r[e++])&&!t.isPropagationStopped();)for(t.currentTarget=s.elem,o=0;(n=s.handlers[o++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(n.namespace))&&(t.handleObj=n,t.data=n.data,i=((ot.event.special[n.origType]||{}).handle||n.handler).apply(s.elem,a),void 0!==i&&(t.result=i)===!1&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,s,o,r=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==t.type)){for(s=[],o=0;a>o;o++)n=e[o],i=n.selector+" ",void 0===s[i]&&(s[i]=n.needsContext?ot(i,this).index(l)>=0:ot.find(i,this,null,[l]).length),s[i]&&s.push(n);s.length&&r.push({elem:l,handlers:s})}return a<e.length&&r.push({elem:this,handlers:e.slice(a)}),r},fix:function(t){if(t[ot.expando])return t;var e,i,n,s=t.type,o=t,r=this.fixHooks[s];for(r||(this.fixHooks[s]=r=Pt.test(s)?this.mouseHooks:It.test(s)?this.keyHooks:{}),n=r.props?this.props.concat(r.props):this.props,t=new ot.Event(o),e=n.length;e--;)i=n[e],t[i]=o[i];return t.target||(t.target=o.srcElement||gt),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,r.filter?r.filter(t,o):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,s,o=e.button,r=e.fromElement;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||gt,s=n.documentElement,i=n.body,t.pageX=e.clientX+(s&&s.scrollLeft||i&&i.scrollLeft||0)-(s&&s.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(s&&s.scrollTop||i&&i.scrollTop||0)-(s&&s.clientTop||i&&i.clientTop||0)),!t.relatedTarget&&r&&(t.relatedTarget=r===t.target?e.toElement:r),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==f()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return ot.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(t){return ot.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i,n){var s=ot.extend(new ot.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?ot.event.trigger(s,null,e):ot.event.dispatch.call(e,s),s.isDefaultPrevented()&&i.preventDefault()}},ot.removeEvent=gt.removeEventListener?function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)}:function(t,e,i){var n="on"+e;t.detachEvent&&(typeof t[n]===Tt&&(t[n]=null),t.detachEvent(n,i))},ot.Event=function(t,e){return this instanceof ot.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&(t.returnValue===!1||t.getPreventDefault&&t.getPreventDefault())?u:p):this.type=t,e&&ot.extend(this,e),this.timeStamp=t&&t.timeStamp||ot.now(),void(this[ot.expando]=!0)):new ot.Event(t,e)},ot.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=u,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=u,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=u,this.stopPropagation()}},ot.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){ot.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,s=t.relatedTarget,o=t.handleObj;return(!s||s!==n&&!ot.contains(n,s))&&(t.type=o.origType,i=o.handler.apply(this,arguments),t.type=e),i}}}),nt.submitBubbles||(ot.event.special.submit={setup:function(){return ot.nodeName(this,"form")?!1:void ot.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,i=ot.nodeName(e,"input")||ot.nodeName(e,"button")?e.form:void 0;i&&!ot._data(i,"submitBubbles")&&(ot.event.add(i,"submit._submit",function(t){t._submit_bubble=!0}),ot._data(i,"submitBubbles",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&ot.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return ot.nodeName(this,"form")?!1:void ot.event.remove(this,"._submit")}}),nt.changeBubbles||(ot.event.special.change={setup:function(){return Mt.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ot.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),ot.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),ot.event.simulate("change",this,t,!0)})),!1):void ot.event.add(this,"beforeactivate._change",function(t){var e=t.target;Mt.test(e.nodeName)&&!ot._data(e,"changeBubbles")&&(ot.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||ot.event.simulate("change",this.parentNode,t,!0)}),ot._data(e,"changeBubbles",!0))})},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return ot.event.remove(this,"._change"),!Mt.test(this.nodeName)}}),nt.focusinBubbles||ot.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){ot.event.simulate(e,t.target,ot.event.fix(t),!0)};ot.event.special[e]={setup:function(){var n=this.ownerDocument||this,s=ot._data(n,e);s||n.addEventListener(t,i,!0),ot._data(n,e,(s||0)+1)},teardown:function(){var n=this.ownerDocument||this,s=ot._data(n,e)-1;s?ot._data(n,e,s):(n.removeEventListener(t,i,!0),ot._removeData(n,e))}}}),ot.fn.extend({on:function(t,e,i,n,s){var o,r;if("object"==typeof t){"string"!=typeof e&&(i=i||e,e=void 0);for(o in t)this.on(o,e,i,t[o],s);return this}if(null==i&&null==n?(n=e,i=e=void 0):null==n&&("string"==typeof e?(n=i,i=void 0):(n=i,i=e,e=void 0)),n===!1)n=p;else if(!n)return this;return 1===s&&(r=n,n=function(t){return ot().off(t),r.apply(this,arguments)},n.guid=r.guid||(r.guid=ot.guid++)),this.each(function(){ot.event.add(this,t,n,i,e)})},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,e,i){var n,s;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,ot(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(s in t)this.off(s,e,t[s]);return this}return(e===!1||"function"==typeof e)&&(i=e,e=void 0),i===!1&&(i=p),this.each(function(){ot.event.remove(this,t,i,e)})},trigger:function(t,e){return this.each(function(){ot.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];return i?ot.event.trigger(t,e,i,!0):void 0}});var Vt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",qt=/ jQuery\d+="(?:null|\d+)"/g,Nt=new RegExp("<(?:"+Vt+")[\\s/>]","i"),Rt=/^\s+/,$t=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Bt=/<([\w:]+)/,zt=/<tbody/i,Ut=/<|&#?\w+;/,Ht=/<(?:script|style|link)/i,Wt=/checked\s*(?:[^=]|=\s*.checked.)/i,Jt=/^$|\/(?:java|ecma)script/i,Xt=/^true\/(.*)/,Gt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Yt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:nt.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Kt=g(gt),Qt=Kt.appendChild(gt.createElement("div"));Yt.optgroup=Yt.option,Yt.tbody=Yt.tfoot=Yt.colgroup=Yt.caption=Yt.thead,Yt.th=Yt.td,ot.extend({clone:function(t,e,i){var n,s,o,r,a,l=ot.contains(t.ownerDocument,t);if(nt.html5Clone||ot.isXMLDoc(t)||!Nt.test("<"+t.nodeName+">")?o=t.cloneNode(!0):(Qt.innerHTML=t.outerHTML,Qt.removeChild(o=Qt.firstChild)),!(nt.noCloneEvent&&nt.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||ot.isXMLDoc(t)))for(n=m(o),a=m(t),r=0;null!=(s=a[r]);++r)n[r]&&_(s,n[r]);if(e)if(i)for(a=a||m(t),n=n||m(o),r=0;null!=(s=a[r]);r++)C(s,n[r]);else C(t,o);return n=m(o,"script"),n.length>0&&x(n,!l&&m(t,"script")),n=a=s=null,o},buildFragment:function(t,e,i,n){for(var s,o,r,a,l,c,d,h=t.length,u=g(e),p=[],f=0;h>f;f++)if(o=t[f],o||0===o)if("object"===ot.type(o))ot.merge(p,o.nodeType?[o]:o);else if(Ut.test(o)){for(a=a||u.appendChild(e.createElement("div")),l=(Bt.exec(o)||["",""])[1].toLowerCase(),d=Yt[l]||Yt._default,a.innerHTML=d[1]+o.replace($t,"<$1></$2>")+d[2],s=d[0];s--;)a=a.lastChild;if(!nt.leadingWhitespace&&Rt.test(o)&&p.push(e.createTextNode(Rt.exec(o)[0])),!nt.tbody)for(o="table"!==l||zt.test(o)?"<table>"!==d[1]||zt.test(o)?0:a:a.firstChild,s=o&&o.childNodes.length;s--;)ot.nodeName(c=o.childNodes[s],"tbody")&&!c.childNodes.length&&o.removeChild(c);for(ot.merge(p,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=u.lastChild}else p.push(e.createTextNode(o));for(a&&u.removeChild(a),nt.appendChecked||ot.grep(m(p,"input"),v),f=0;o=p[f++];)if((!n||-1===ot.inArray(o,n))&&(r=ot.contains(o.ownerDocument,o),a=m(u.appendChild(o),"script"),r&&x(a),i))for(s=0;o=a[s++];)Jt.test(o.type||"")&&i.push(o);return a=null,u},cleanData:function(t,e){for(var i,n,s,o,r=0,a=ot.expando,l=ot.cache,c=nt.deleteExpando,d=ot.event.special;null!=(i=t[r]);r++)if((e||ot.acceptData(i))&&(s=i[a],o=s&&l[s])){if(o.events)for(n in o.events)d[n]?ot.event.remove(i,n):ot.removeEvent(i,n,o.handle);l[s]&&(delete l[s],c?delete i[a]:typeof i.removeAttribute!==Tt?i.removeAttribute(a):i[a]=null,X.push(s))}}}),ot.fn.extend({text:function(t){return Et(this,function(t){return void 0===t?ot.text(this):this.empty().append((this[0]&&this[0].ownerDocument||gt).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=b(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=b(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var i,n=t?ot.filter(t,this):this,s=0;null!=(i=n[s]);s++)e||1!==i.nodeType||ot.cleanData(m(i)),i.parentNode&&(e&&ot.contains(i.ownerDocument,i)&&x(m(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&ot.cleanData(m(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&ot.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return ot.clone(this,t,e)})},html:function(t){return Et(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(qt,""):void 0;if("string"==typeof t&&!Ht.test(t)&&(nt.htmlSerialize||!Nt.test(t))&&(nt.leadingWhitespace||!Rt.test(t))&&!Yt[(Bt.exec(t)||["",""])[1].toLowerCase()]){t=t.replace($t,"<$1></$2>");try{for(;n>i;i++)e=this[i]||{},1===e.nodeType&&(ot.cleanData(m(e,!1)),e.innerHTML=t);e=0}catch(s){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,ot.cleanData(m(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=Y.apply([],t);var i,n,s,o,r,a,l=0,c=this.length,d=this,h=c-1,u=t[0],p=ot.isFunction(u);if(p||c>1&&"string"==typeof u&&!nt.checkClone&&Wt.test(u))return this.each(function(i){var n=d.eq(i);p&&(t[0]=u.call(this,i,n.html())),n.domManip(t,e)});if(c&&(a=ot.buildFragment(t,this[0].ownerDocument,!1,this),i=a.firstChild,1===a.childNodes.length&&(a=i),i)){for(o=ot.map(m(a,"script"),y),s=o.length;c>l;l++)n=a,l!==h&&(n=ot.clone(n,!0,!0),s&&ot.merge(o,m(n,"script"))),e.call(this[l],n,l);if(s)for(r=o[o.length-1].ownerDocument,ot.map(o,w),l=0;s>l;l++)n=o[l],Jt.test(n.type||"")&&!ot._data(n,"globalEval")&&ot.contains(r,n)&&(n.src?ot._evalUrl&&ot._evalUrl(n.src):ot.globalEval((n.text||n.textContent||n.innerHTML||"").replace(Gt,"")));a=i=null}return this}}),ot.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){ot.fn[t]=function(t){for(var i,n=0,s=[],o=ot(t),r=o.length-1;r>=n;n++)i=n===r?this:this.clone(!0),ot(o[n])[e](i),K.apply(s,i.get());return this.pushStack(s)}});var Zt,te={};!function(){var t,e,i=gt.createElement("div"),n="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";i.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",t=i.getElementsByTagName("a")[0],t.style.cssText="float:left;opacity:.5",nt.opacity=/^0.5/.test(t.style.opacity),nt.cssFloat=!!t.style.cssFloat,i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",nt.clearCloneStyle="content-box"===i.style.backgroundClip,t=i=null,nt.shrinkWrapBlocks=function(){var t,i,s,o;if(null==e){if(t=gt.getElementsByTagName("body")[0],!t)return;o="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",i=gt.createElement("div"),s=gt.createElement("div"),t.appendChild(i).appendChild(s),e=!1,typeof s.style.zoom!==Tt&&(s.style.cssText=n+";width:1px;padding:1px;zoom:1",s.innerHTML="<div></div>",s.firstChild.style.width="5px",e=3!==s.offsetWidth),t.removeChild(i),t=i=s=null}return e}}();var ee,ie,ne=/^margin/,se=new RegExp("^("+Ot+")(?!px)[a-z%]+$","i"),oe=/^(top|right|bottom|left)$/;t.getComputedStyle?(ee=function(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)},ie=function(t,e,i){var n,s,o,r,a=t.style;return i=i||ee(t),r=i?i.getPropertyValue(e)||i[e]:void 0,i&&(""!==r||ot.contains(t.ownerDocument,t)||(r=ot.style(t,e)),se.test(r)&&ne.test(e)&&(n=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,
r=i.width,a.width=n,a.minWidth=s,a.maxWidth=o)),void 0===r?r:r+""}):gt.documentElement.currentStyle&&(ee=function(t){return t.currentStyle},ie=function(t,e,i){var n,s,o,r,a=t.style;return i=i||ee(t),r=i?i[e]:void 0,null==r&&a&&a[e]&&(r=a[e]),se.test(r)&&!oe.test(e)&&(n=a.left,s=t.runtimeStyle,o=s&&s.left,o&&(s.left=t.currentStyle.left),a.left="fontSize"===e?"1em":r,r=a.pixelLeft+"px",a.left=n,o&&(s.left=o)),void 0===r?r:r+""||"auto"}),function(){function e(){var e,i,n=gt.getElementsByTagName("body")[0];n&&(e=gt.createElement("div"),i=gt.createElement("div"),e.style.cssText=c,n.appendChild(e).appendChild(i),i.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;display:block;padding:1px;border:1px;width:4px;margin-top:1%;top:1%",ot.swap(n,null!=n.style.zoom?{zoom:1}:{},function(){s=4===i.offsetWidth}),o=!0,r=!1,a=!0,t.getComputedStyle&&(r="1%"!==(t.getComputedStyle(i,null)||{}).top,o="4px"===(t.getComputedStyle(i,null)||{width:"4px"}).width),n.removeChild(e),i=n=null)}var i,n,s,o,r,a,l=gt.createElement("div"),c="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",d="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";l.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=l.getElementsByTagName("a")[0],i.style.cssText="float:left;opacity:.5",nt.opacity=/^0.5/.test(i.style.opacity),nt.cssFloat=!!i.style.cssFloat,l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",nt.clearCloneStyle="content-box"===l.style.backgroundClip,i=l=null,ot.extend(nt,{reliableHiddenOffsets:function(){if(null!=n)return n;var t,e,i,s=gt.createElement("div"),o=gt.getElementsByTagName("body")[0];if(o)return s.setAttribute("className","t"),s.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",t=gt.createElement("div"),t.style.cssText=c,o.appendChild(t).appendChild(s),s.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=s.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",i=0===e[0].offsetHeight,e[0].style.display="",e[1].style.display="none",n=i&&0===e[0].offsetHeight,o.removeChild(t),s=o=null,n},boxSizing:function(){return null==s&&e(),s},boxSizingReliable:function(){return null==o&&e(),o},pixelPosition:function(){return null==r&&e(),r},reliableMarginRight:function(){var e,i,n,s;if(null==a&&t.getComputedStyle){if(e=gt.getElementsByTagName("body")[0],!e)return;i=gt.createElement("div"),n=gt.createElement("div"),i.style.cssText=c,e.appendChild(i).appendChild(n),s=n.appendChild(gt.createElement("div")),s.style.cssText=n.style.cssText=d,s.style.marginRight=s.style.width="0",n.style.width="1px",a=!parseFloat((t.getComputedStyle(s,null)||{}).marginRight),e.removeChild(i)}return a}})}(),ot.swap=function(t,e,i,n){var s,o,r={};for(o in e)r[o]=t.style[o],t.style[o]=e[o];s=i.apply(t,n||[]);for(o in e)t.style[o]=r[o];return s};var re=/alpha\([^)]*\)/i,ae=/opacity\s*=\s*([^)]*)/,le=/^(none|table(?!-c[ea]).+)/,ce=new RegExp("^("+Ot+")(.*)$","i"),de=new RegExp("^([+-])=("+Ot+")","i"),he={position:"absolute",visibility:"hidden",display:"block"},ue={letterSpacing:0,fontWeight:400},pe=["Webkit","O","Moz","ms"];ot.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=ie(t,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":nt.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var s,o,r,a=ot.camelCase(e),l=t.style;if(e=ot.cssProps[a]||(ot.cssProps[a]=O(l,a)),r=ot.cssHooks[e]||ot.cssHooks[a],void 0===i)return r&&"get"in r&&void 0!==(s=r.get(t,!1,n))?s:l[e];if(o=typeof i,"string"===o&&(s=de.exec(i))&&(i=(s[1]+1)*s[2]+parseFloat(ot.css(t,e)),o="number"),null!=i&&i===i&&("number"!==o||ot.cssNumber[a]||(i+="px"),nt.clearCloneStyle||""!==i||0!==e.indexOf("background")||(l[e]="inherit"),!(r&&"set"in r&&void 0===(i=r.set(t,i,n)))))try{l[e]="",l[e]=i}catch(c){}}},css:function(t,e,i,n){var s,o,r,a=ot.camelCase(e);return e=ot.cssProps[a]||(ot.cssProps[a]=O(t.style,a)),r=ot.cssHooks[e]||ot.cssHooks[a],r&&"get"in r&&(o=r.get(t,!0,i)),void 0===o&&(o=ie(t,e,n)),"normal"===o&&e in ue&&(o=ue[e]),""===i||i?(s=parseFloat(o),i===!0||ot.isNumeric(s)?s||0:o):o}}),ot.each(["height","width"],function(t,e){ot.cssHooks[e]={get:function(t,i,n){return i?0===t.offsetWidth&&le.test(ot.css(t,"display"))?ot.swap(t,he,function(){return j(t,e,n)}):j(t,e,n):void 0},set:function(t,i,n){var s=n&&ee(t);return D(t,i,n?E(t,e,n,nt.boxSizing()&&"border-box"===ot.css(t,"boxSizing",!1,s),s):0)}}}),nt.opacity||(ot.cssHooks.opacity={get:function(t,e){return ae.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var i=t.style,n=t.currentStyle,s=ot.isNumeric(e)?"alpha(opacity="+100*e+")":"",o=n&&n.filter||i.filter||"";i.zoom=1,(e>=1||""===e)&&""===ot.trim(o.replace(re,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===e||n&&!n.filter)||(i.filter=re.test(o)?o.replace(re,s):o+" "+s)}}),ot.cssHooks.marginRight=k(nt.reliableMarginRight,function(t,e){return e?ot.swap(t,{display:"inline-block"},ie,[t,"marginRight"]):void 0}),ot.each({margin:"",padding:"",border:"Width"},function(t,e){ot.cssHooks[t+e]={expand:function(i){for(var n=0,s={},o="string"==typeof i?i.split(" "):[i];4>n;n++)s[t+At[n]+e]=o[n]||o[n-2]||o[0];return s}},ne.test(t)||(ot.cssHooks[t+e].set=D)}),ot.fn.extend({css:function(t,e){return Et(this,function(t,e,i){var n,s,o={},r=0;if(ot.isArray(e)){for(n=ee(t),s=e.length;s>r;r++)o[e[r]]=ot.css(t,e[r],!1,n);return o}return void 0!==i?ot.style(t,e,i):ot.css(t,e)},t,e,arguments.length>1)},show:function(){return A(this,!0)},hide:function(){return A(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Dt(this)?ot(this).show():ot(this).hide()})}}),ot.Tween=M,M.prototype={constructor:M,init:function(t,e,i,n,s,o){this.elem=t,this.prop=i,this.easing=s||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=o||(ot.cssNumber[i]?"":"px")},cur:function(){var t=M.propHooks[this.prop];return t&&t.get?t.get(this):M.propHooks._default.get(this)},run:function(t){var e,i=M.propHooks[this.prop];return this.options.duration?this.pos=e=ot.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):M.propHooks._default.set(this),this}},M.prototype.init.prototype=M.prototype,M.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=ot.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){ot.fx.step[t.prop]?ot.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[ot.cssProps[t.prop]]||ot.cssHooks[t.prop])?ot.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},M.propHooks.scrollTop=M.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},ot.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},ot.fx=M.prototype.init,ot.fx.step={};var fe,ge,me=/^(?:toggle|show|hide)$/,ve=new RegExp("^(?:([+-])=|)("+Ot+")([a-z%]*)$","i"),be=/queueHooks$/,ye=[F],we={"*":[function(t,e){var i=this.createTween(t,e),n=i.cur(),s=ve.exec(e),o=s&&s[3]||(ot.cssNumber[t]?"":"px"),r=(ot.cssNumber[t]||"px"!==o&&+n)&&ve.exec(ot.css(i.elem,t)),a=1,l=20;if(r&&r[3]!==o){o=o||r[3],s=s||[],r=+n||1;do a=a||".5",r/=a,ot.style(i.elem,t,r+o);while(a!==(a=i.cur()/n)&&1!==a&&--l)}return s&&(r=i.start=+r||+n||0,i.unit=o,i.end=s[1]?r+(s[1]+1)*s[2]:+s[2]),i}]};ot.Animation=ot.extend(q,{tweener:function(t,e){ot.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var i,n=0,s=t.length;s>n;n++)i=t[n],we[i]=we[i]||[],we[i].unshift(e)},prefilter:function(t,e){e?ye.unshift(t):ye.push(t)}}),ot.speed=function(t,e,i){var n=t&&"object"==typeof t?ot.extend({},t):{complete:i||!i&&e||ot.isFunction(t)&&t,duration:t,easing:i&&e||e&&!ot.isFunction(e)&&e};return n.duration=ot.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in ot.fx.speeds?ot.fx.speeds[n.duration]:ot.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){ot.isFunction(n.old)&&n.old.call(this),n.queue&&ot.dequeue(this,n.queue)},n},ot.fn.extend({fadeTo:function(t,e,i,n){return this.filter(Dt).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var s=ot.isEmptyObject(t),o=ot.speed(e,i,n),r=function(){var e=q(this,ot.extend({},t),o);(s||ot._data(this,"finish"))&&e.stop(!0)};return r.finish=r,s||o.queue===!1?this.each(r):this.queue(o.queue,r)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,s=null!=t&&t+"queueHooks",o=ot.timers,r=ot._data(this);if(s)r[s]&&r[s].stop&&n(r[s]);else for(s in r)r[s]&&r[s].stop&&be.test(s)&&n(r[s]);for(s=o.length;s--;)o[s].elem!==this||null!=t&&o[s].queue!==t||(o[s].anim.stop(i),e=!1,o.splice(s,1));(e||!i)&&ot.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,i=ot._data(this),n=i[t+"queue"],s=i[t+"queueHooks"],o=ot.timers,r=n?n.length:0;for(i.finish=!0,ot.queue(this,t,[]),s&&s.stop&&s.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;r>e;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),ot.each(["toggle","show","hide"],function(t,e){var i=ot.fn[e];ot.fn[e]=function(t,n,s){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(P(e,!0),t,n,s)}}),ot.each({slideDown:P("show"),slideUp:P("hide"),slideToggle:P("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){ot.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),ot.timers=[],ot.fx.tick=function(){var t,e=ot.timers,i=0;for(fe=ot.now();i<e.length;i++)t=e[i],t()||e[i]!==t||e.splice(i--,1);e.length||ot.fx.stop(),fe=void 0},ot.fx.timer=function(t){ot.timers.push(t),t()?ot.fx.start():ot.timers.pop()},ot.fx.interval=13,ot.fx.start=function(){ge||(ge=setInterval(ot.fx.tick,ot.fx.interval))},ot.fx.stop=function(){clearInterval(ge),ge=null},ot.fx.speeds={slow:600,fast:200,_default:400},ot.fn.delay=function(t,e){return t=ot.fx?ot.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var n=setTimeout(e,t);i.stop=function(){clearTimeout(n)}})},function(){var t,e,i,n,s=gt.createElement("div");s.setAttribute("className","t"),s.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",t=s.getElementsByTagName("a")[0],i=gt.createElement("select"),n=i.appendChild(gt.createElement("option")),e=s.getElementsByTagName("input")[0],t.style.cssText="top:1px",nt.getSetAttribute="t"!==s.className,nt.style=/top/.test(t.getAttribute("style")),nt.hrefNormalized="/a"===t.getAttribute("href"),nt.checkOn=!!e.value,nt.optSelected=n.selected,nt.enctype=!!gt.createElement("form").enctype,i.disabled=!0,nt.optDisabled=!n.disabled,e=gt.createElement("input"),e.setAttribute("value",""),nt.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),nt.radioValue="t"===e.value,t=e=i=n=s=null}();var xe=/\r/g;ot.fn.extend({val:function(t){var e,i,n,s=this[0];{if(arguments.length)return n=ot.isFunction(t),this.each(function(i){var s;1===this.nodeType&&(s=n?t.call(this,i,ot(this).val()):t,null==s?s="":"number"==typeof s?s+="":ot.isArray(s)&&(s=ot.map(s,function(t){return null==t?"":t+""})),e=ot.valHooks[this.type]||ot.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,s,"value")||(this.value=s))});if(s)return e=ot.valHooks[s.type]||ot.valHooks[s.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(i=e.get(s,"value"))?i:(i=s.value,"string"==typeof i?i.replace(xe,""):null==i?"":i)}}}),ot.extend({valHooks:{option:{get:function(t){var e=ot.find.attr(t,"value");return null!=e?e:ot.text(t)}},select:{get:function(t){for(var e,i,n=t.options,s=t.selectedIndex,o="select-one"===t.type||0>s,r=o?null:[],a=o?s+1:n.length,l=0>s?a:o?s:0;a>l;l++)if(i=n[l],(i.selected||l===s)&&(nt.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!ot.nodeName(i.parentNode,"optgroup"))){if(e=ot(i).val(),o)return e;r.push(e)}return r},set:function(t,e){for(var i,n,s=t.options,o=ot.makeArray(e),r=s.length;r--;)if(n=s[r],ot.inArray(ot.valHooks.option.get(n),o)>=0)try{n.selected=i=!0}catch(a){n.scrollHeight}else n.selected=!1;return i||(t.selectedIndex=-1),s}}}}),ot.each(["radio","checkbox"],function(){ot.valHooks[this]={set:function(t,e){return ot.isArray(e)?t.checked=ot.inArray(ot(t).val(),e)>=0:void 0}},nt.checkOn||(ot.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var Ce,_e,Te=ot.expr.attrHandle,Se=/^(?:checked|selected)$/i,ke=nt.getSetAttribute,Oe=nt.input;ot.fn.extend({attr:function(t,e){return Et(this,ot.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){ot.removeAttr(this,t)})}}),ot.extend({attr:function(t,e,i){var n,s,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return typeof t.getAttribute===Tt?ot.prop(t,e,i):(1===o&&ot.isXMLDoc(t)||(e=e.toLowerCase(),n=ot.attrHooks[e]||(ot.expr.match.bool.test(e)?_e:Ce)),void 0===i?n&&"get"in n&&null!==(s=n.get(t,e))?s:(s=ot.find.attr(t,e),null==s?void 0:s):null!==i?n&&"set"in n&&void 0!==(s=n.set(t,i,e))?s:(t.setAttribute(e,i+""),i):void ot.removeAttr(t,e))},removeAttr:function(t,e){var i,n,s=0,o=e&&e.match(wt);if(o&&1===t.nodeType)for(;i=o[s++];)n=ot.propFix[i]||i,ot.expr.match.bool.test(i)?Oe&&ke||!Se.test(i)?t[n]=!1:t[ot.camelCase("default-"+i)]=t[n]=!1:ot.attr(t,i,""),t.removeAttribute(ke?i:n)},attrHooks:{type:{set:function(t,e){if(!nt.radioValue&&"radio"===e&&ot.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}}}),_e={set:function(t,e,i){return e===!1?ot.removeAttr(t,i):Oe&&ke||!Se.test(i)?t.setAttribute(!ke&&ot.propFix[i]||i,i):t[ot.camelCase("default-"+i)]=t[i]=!0,i}},ot.each(ot.expr.match.bool.source.match(/\w+/g),function(t,e){var i=Te[e]||ot.find.attr;Te[e]=Oe&&ke||!Se.test(e)?function(t,e,n){var s,o;return n||(o=Te[e],Te[e]=s,s=null!=i(t,e,n)?e.toLowerCase():null,Te[e]=o),s}:function(t,e,i){return i?void 0:t[ot.camelCase("default-"+e)]?e.toLowerCase():null}}),Oe&&ke||(ot.attrHooks.value={set:function(t,e,i){return ot.nodeName(t,"input")?void(t.defaultValue=e):Ce&&Ce.set(t,e,i)}}),ke||(Ce={set:function(t,e,i){var n=t.getAttributeNode(i);return n||t.setAttributeNode(n=t.ownerDocument.createAttribute(i)),n.value=e+="","value"===i||e===t.getAttribute(i)?e:void 0}},Te.id=Te.name=Te.coords=function(t,e,i){var n;return i?void 0:(n=t.getAttributeNode(e))&&""!==n.value?n.value:null},ot.valHooks.button={get:function(t,e){var i=t.getAttributeNode(e);return i&&i.specified?i.value:void 0},set:Ce.set},ot.attrHooks.contenteditable={set:function(t,e,i){Ce.set(t,""===e?!1:e,i)}},ot.each(["width","height"],function(t,e){ot.attrHooks[e]={set:function(t,i){return""===i?(t.setAttribute(e,"auto"),i):void 0}}})),nt.style||(ot.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var Ae=/^(?:input|select|textarea|button|object)$/i,De=/^(?:a|area)$/i;ot.fn.extend({prop:function(t,e){return Et(this,ot.prop,t,e,arguments.length>1)},removeProp:function(t){return t=ot.propFix[t]||t,this.each(function(){try{this[t]=void 0,delete this[t]}catch(e){}})}}),ot.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,i){var n,s,o,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return o=1!==r||!ot.isXMLDoc(t),o&&(e=ot.propFix[e]||e,s=ot.propHooks[e]),void 0!==i?s&&"set"in s&&void 0!==(n=s.set(t,i,e))?n:t[e]=i:s&&"get"in s&&null!==(n=s.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=ot.find.attr(t,"tabindex");return e?parseInt(e,10):Ae.test(t.nodeName)||De.test(t.nodeName)&&t.href?0:-1}}}}),nt.hrefNormalized||ot.each(["href","src"],function(t,e){ot.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),nt.optSelected||(ot.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),ot.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ot.propFix[this.toLowerCase()]=this}),nt.enctype||(ot.propFix.enctype="encoding");var Ee=/[\t\r\n\f]/g;ot.fn.extend({addClass:function(t){var e,i,n,s,o,r,a=0,l=this.length,c="string"==typeof t&&t;if(ot.isFunction(t))return this.each(function(e){ot(this).addClass(t.call(this,e,this.className))});if(c)for(e=(t||"").match(wt)||[];l>a;a++)if(i=this[a],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Ee," "):" ")){for(o=0;s=e[o++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");r=ot.trim(n),i.className!==r&&(i.className=r)}return this},removeClass:function(t){var e,i,n,s,o,r,a=0,l=this.length,c=0===arguments.length||"string"==typeof t&&t;if(ot.isFunction(t))return this.each(function(e){ot(this).removeClass(t.call(this,e,this.className))});if(c)for(e=(t||"").match(wt)||[];l>a;a++)if(i=this[a],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Ee," "):"")){for(o=0;s=e[o++];)for(;n.indexOf(" "+s+" ")>=0;)n=n.replace(" "+s+" "," ");r=t?ot.trim(n):"",i.className!==r&&(i.className=r)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):ot.isFunction(t)?this.each(function(i){ot(this).toggleClass(t.call(this,i,this.className,e),e)}):this.each(function(){if("string"===i)for(var e,n=0,s=ot(this),o=t.match(wt)||[];e=o[n++];)s.hasClass(e)?s.removeClass(e):s.addClass(e);else(i===Tt||"boolean"===i)&&(this.className&&ot._data(this,"__className__",this.className),this.className=this.className||t===!1?"":ot._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(Ee," ").indexOf(e)>=0)return!0;return!1}}),ot.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){ot.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),ot.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}});var je=ot.now(),Me=/\?/,Ie=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;ot.parseJSON=function(e){if(t.JSON&&t.JSON.parse)return t.JSON.parse(e+"");var i,n=null,s=ot.trim(e+"");return s&&!ot.trim(s.replace(Ie,function(t,e,s,o){return i&&e&&(n=0),0===n?t:(i=s||e,n+=!o-!s,"")}))?Function("return "+s)():ot.error("Invalid JSON: "+e)},ot.parseXML=function(e){var i,n;if(!e||"string"!=typeof e)return null;try{t.DOMParser?(n=new DOMParser,i=n.parseFromString(e,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(e))}catch(s){i=void 0}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||ot.error("Invalid XML: "+e),i};var Pe,Le,Fe=/#.*$/,Ve=/([?&])_=[^&]*/,qe=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ne=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Re=/^(?:GET|HEAD)$/,$e=/^\/\//,Be=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ze={},Ue={},He="*/".concat("*");try{Le=location.href}catch(We){Le=gt.createElement("a"),Le.href="",Le=Le.href}Pe=Be.exec(Le.toLowerCase())||[],ot.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Le,type:"GET",isLocal:Ne.test(Pe[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":He,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ot.parseJSON,"text xml":ot.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?$($(t,ot.ajaxSettings),e):$(ot.ajaxSettings,t)},ajaxPrefilter:N(ze),ajaxTransport:N(Ue),ajax:function(t,e){function i(t,e,i,n){var s,d,v,b,w,C=e;2!==y&&(y=2,a&&clearTimeout(a),c=void 0,r=n||"",x.readyState=t>0?4:0,s=t>=200&&300>t||304===t,i&&(b=B(h,x,i)),b=z(h,b,x,s),s?(h.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(ot.lastModified[o]=w),w=x.getResponseHeader("etag"),w&&(ot.etag[o]=w)),204===t||"HEAD"===h.type?C="nocontent":304===t?C="notmodified":(C=b.state,d=b.data,v=b.error,s=!v)):(v=C,(t||!C)&&(C="error",0>t&&(t=0))),x.status=t,x.statusText=(e||C)+"",s?f.resolveWith(u,[d,C,x]):f.rejectWith(u,[x,C,v]),x.statusCode(m),m=void 0,l&&p.trigger(s?"ajaxSuccess":"ajaxError",[x,h,s?d:v]),g.fireWith(u,[x,C]),l&&(p.trigger("ajaxComplete",[x,h]),--ot.active||ot.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,s,o,r,a,l,c,d,h=ot.ajaxSetup({},e),u=h.context||h,p=h.context&&(u.nodeType||u.jquery)?ot(u):ot.event,f=ot.Deferred(),g=ot.Callbacks("once memory"),m=h.statusCode||{},v={},b={},y=0,w="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===y){if(!d)for(d={};e=qe.exec(r);)d[e[1].toLowerCase()]=e[2];e=d[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===y?r:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return y||(t=b[i]=b[i]||t,v[t]=e),this},overrideMimeType:function(t){return y||(h.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>y)for(e in t)m[e]=[m[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||w;return c&&c.abort(e),i(0,e),this}};if(f.promise(x).complete=g.add,x.success=x.done,x.error=x.fail,h.url=((t||h.url||Le)+"").replace(Fe,"").replace($e,Pe[1]+"//"),h.type=e.method||e.type||h.method||h.type,h.dataTypes=ot.trim(h.dataType||"*").toLowerCase().match(wt)||[""],null==h.crossDomain&&(n=Be.exec(h.url.toLowerCase()),h.crossDomain=!(!n||n[1]===Pe[1]&&n[2]===Pe[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(Pe[3]||("http:"===Pe[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=ot.param(h.data,h.traditional)),R(ze,h,e,x),2===y)return x;l=h.global,l&&0===ot.active++&&ot.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Re.test(h.type),o=h.url,h.hasContent||(h.data&&(o=h.url+=(Me.test(o)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=Ve.test(o)?o.replace(Ve,"$1_="+je++):o+(Me.test(o)?"&":"?")+"_="+je++)),h.ifModified&&(ot.lastModified[o]&&x.setRequestHeader("If-Modified-Since",ot.lastModified[o]),ot.etag[o]&&x.setRequestHeader("If-None-Match",ot.etag[o])),(h.data&&h.hasContent&&h.contentType!==!1||e.contentType)&&x.setRequestHeader("Content-Type",h.contentType),x.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+He+"; q=0.01":""):h.accepts["*"]);for(s in h.headers)x.setRequestHeader(s,h.headers[s]);if(h.beforeSend&&(h.beforeSend.call(u,x,h)===!1||2===y))return x.abort();w="abort";for(s in{success:1,error:1,complete:1})x[s](h[s]);if(c=R(Ue,h,e,x)){x.readyState=1,l&&p.trigger("ajaxSend",[x,h]),h.async&&h.timeout>0&&(a=setTimeout(function(){x.abort("timeout")},h.timeout));try{y=1,c.send(v,i)}catch(C){if(!(2>y))throw C;i(-1,C)}}else i(-1,"No Transport");return x},getJSON:function(t,e,i){return ot.get(t,e,i,"json")},getScript:function(t,e){return ot.get(t,void 0,e,"script")}}),ot.each(["get","post"],function(t,e){ot[e]=function(t,i,n,s){return ot.isFunction(i)&&(s=s||n,n=i,i=void 0),ot.ajax({url:t,type:e,dataType:s,data:i,success:n})}}),ot.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){ot.fn[e]=function(t){return this.on(e,t)}}),ot._evalUrl=function(t){return ot.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},ot.fn.extend({wrapAll:function(t){if(ot.isFunction(t))return this.each(function(e){ot(this).wrapAll(t.call(this,e))});if(this[0]){var e=ot(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return ot.isFunction(t)?this.each(function(e){ot(this).wrapInner(t.call(this,e))}):this.each(function(){var e=ot(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=ot.isFunction(t);return this.each(function(i){ot(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){ot.nodeName(this,"body")||ot(this).replaceWith(this.childNodes)}).end()}}),ot.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!nt.reliableHiddenOffsets()&&"none"===(t.style&&t.style.display||ot.css(t,"display"))},ot.expr.filters.visible=function(t){return!ot.expr.filters.hidden(t)};var Je=/%20/g,Xe=/\[\]$/,Ge=/\r?\n/g,Ye=/^(?:submit|button|image|reset|file)$/i,Ke=/^(?:input|select|textarea|keygen)/i;ot.param=function(t,e){var i,n=[],s=function(t,e){e=ot.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=ot.ajaxSettings&&ot.ajaxSettings.traditional),ot.isArray(t)||t.jquery&&!ot.isPlainObject(t))ot.each(t,function(){s(this.name,this.value)});else for(i in t)U(i,t[i],e,s);return n.join("&").replace(Je,"+")},ot.fn.extend({serialize:function(){return ot.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=ot.prop(this,"elements");return t?ot.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!ot(this).is(":disabled")&&Ke.test(this.nodeName)&&!Ye.test(t)&&(this.checked||!jt.test(t))}).map(function(t,e){var i=ot(this).val();return null==i?null:ot.isArray(i)?ot.map(i,function(t){return{name:e.name,value:t.replace(Ge,"\r\n")}}):{name:e.name,value:i.replace(Ge,"\r\n")}}).get()}}),ot.ajaxSettings.xhr=void 0!==t.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&H()||W()}:H;var Qe=0,Ze={},ti=ot.ajaxSettings.xhr();t.ActiveXObject&&ot(t).on("unload",function(){for(var t in Ze)Ze[t](void 0,!0)}),nt.cors=!!ti&&"withCredentials"in ti,ti=nt.ajax=!!ti,ti&&ot.ajaxTransport(function(t){if(!t.crossDomain||nt.cors){var e;return{send:function(i,n){var s,o=t.xhr(),r=++Qe;if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)o[s]=t.xhrFields[s];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(s in i)void 0!==i[s]&&o.setRequestHeader(s,i[s]+"");o.send(t.hasContent&&t.data||null),e=function(i,s){var a,l,c;if(e&&(s||4===o.readyState))if(delete Ze[r],e=void 0,o.onreadystatechange=ot.noop,s)4!==o.readyState&&o.abort();else{c={},a=o.status,"string"==typeof o.responseText&&(c.text=o.responseText);try{l=o.statusText}catch(d){l=""}a||!t.isLocal||t.crossDomain?1223===a&&(a=204):a=c.text?200:404}c&&n(a,l,c,o.getAllResponseHeaders())},t.async?4===o.readyState?setTimeout(e):o.onreadystatechange=Ze[r]=e:e()},abort:function(){e&&e(void 0,!0)}}}}),ot.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return ot.globalEval(t),t}}}),ot.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),ot.ajaxTransport("script",function(t){if(t.crossDomain){var e,i=gt.head||ot("head")[0]||gt.documentElement;return{send:function(n,s){e=gt.createElement("script"),e.async=!0,t.scriptCharset&&(e.charset=t.scriptCharset),e.src=t.url,e.onload=e.onreadystatechange=function(t,i){(i||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,i||s(200,"success"))},i.insertBefore(e,i.firstChild)},abort:function(){e&&e.onload(void 0,!0)}}}});var ei=[],ii=/(=)\?(?=&|$)|\?\?/;ot.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=ei.pop()||ot.expando+"_"+je++;return this[t]=!0,t}}),ot.ajaxPrefilter("json jsonp",function(e,i,n){var s,o,r,a=e.jsonp!==!1&&(ii.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&ii.test(e.data)&&"data");return a||"jsonp"===e.dataTypes[0]?(s=e.jsonpCallback=ot.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(ii,"$1"+s):e.jsonp!==!1&&(e.url+=(Me.test(e.url)?"&":"?")+e.jsonp+"="+s),e.converters["script json"]=function(){return r||ot.error(s+" was not called"),r[0]},e.dataTypes[0]="json",o=t[s],t[s]=function(){r=arguments},n.always(function(){t[s]=o,e[s]&&(e.jsonpCallback=i.jsonpCallback,ei.push(s)),r&&ot.isFunction(o)&&o(r[0]),r=o=void 0}),"script"):void 0}),ot.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||gt;var n=ut.exec(t),s=!i&&[];return n?[e.createElement(n[1])]:(n=ot.buildFragment([t],e,s),s&&s.length&&ot(s).remove(),ot.merge([],n.childNodes))};var ni=ot.fn.load;ot.fn.load=function(t,e,i){if("string"!=typeof t&&ni)return ni.apply(this,arguments);var n,s,o,r=this,a=t.indexOf(" ");return a>=0&&(n=t.slice(a,t.length),t=t.slice(0,a)),ot.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(o="POST"),r.length>0&&ot.ajax({url:t,type:o,dataType:"html",data:e}).done(function(t){s=arguments,r.html(n?ot("<div>").append(ot.parseHTML(t)).find(n):t)}).complete(i&&function(t,e){r.each(i,s||[t.responseText,e,t])}),this},ot.expr.filters.animated=function(t){return ot.grep(ot.timers,function(e){return t===e.elem}).length};var si=t.document.documentElement;ot.offset={setOffset:function(t,e,i){var n,s,o,r,a,l,c,d=ot.css(t,"position"),h=ot(t),u={};"static"===d&&(t.style.position="relative"),a=h.offset(),o=ot.css(t,"top"),l=ot.css(t,"left"),c=("absolute"===d||"fixed"===d)&&ot.inArray("auto",[o,l])>-1,c?(n=h.position(),r=n.top,s=n.left):(r=parseFloat(o)||0,s=parseFloat(l)||0),ot.isFunction(e)&&(e=e.call(t,i,a)),null!=e.top&&(u.top=e.top-a.top+r),null!=e.left&&(u.left=e.left-a.left+s),"using"in e?e.using.call(t,u):h.css(u)}},ot.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){ot.offset.setOffset(this,t,e)});var e,i,n={top:0,left:0},s=this[0],o=s&&s.ownerDocument;if(o)return e=o.documentElement,ot.contains(e,s)?(typeof s.getBoundingClientRect!==Tt&&(n=s.getBoundingClientRect()),i=J(o),{top:n.top+(i.pageYOffset||e.scrollTop)-(e.clientTop||0),left:n.left+(i.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):n},position:function(){if(this[0]){var t,e,i={top:0,left:0},n=this[0];return"fixed"===ot.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),ot.nodeName(t[0],"html")||(i=t.offset()),i.top+=ot.css(t[0],"borderTopWidth",!0),i.left+=ot.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-ot.css(n,"marginTop",!0),left:e.left-i.left-ot.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||si;t&&!ot.nodeName(t,"html")&&"static"===ot.css(t,"position");)t=t.offsetParent;return t||si})}}),ot.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i=/Y/.test(e);ot.fn[t]=function(n){return Et(this,function(t,n,s){var o=J(t);return void 0===s?o?e in o?o[e]:o.document.documentElement[n]:t[n]:void(o?o.scrollTo(i?ot(o).scrollLeft():s,i?s:ot(o).scrollTop()):t[n]=s);
},t,n,arguments.length,null)}}),ot.each(["top","left"],function(t,e){ot.cssHooks[e]=k(nt.pixelPosition,function(t,i){return i?(i=ie(t,e),se.test(i)?ot(t).position()[e]+"px":i):void 0})}),ot.each({Height:"height",Width:"width"},function(t,e){ot.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){ot.fn[n]=function(n,s){var o=arguments.length&&(i||"boolean"!=typeof n),r=i||(n===!0||s===!0?"margin":"border");return Et(this,function(e,i,n){var s;return ot.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+t],s["scroll"+t],e.body["offset"+t],s["offset"+t],s["client"+t])):void 0===n?ot.css(e,i,r):ot.style(e,i,n,r)},e,o?n:void 0,o,null)}})}),ot.fn.size=function(){return this.length},ot.fn.andSelf=ot.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ot});var oi=t.jQuery,ri=t.$;return ot.noConflict=function(e){return t.$===ot&&(t.$=ri),e&&t.jQuery===ot&&(t.jQuery=oi),ot},typeof e===Tt&&(t.jQuery=t.$=ot),ot}),function(){function t(t){function e(e,i,n,s,o,r){for(;o>=0&&r>o;o+=t){var a=s?s[o]:o;n=i(n,e[a],a,e)}return n}return function(i,n,s,o){n=y(n,o,4);var r=!k(i)&&b.keys(i),a=(r||i).length,l=t>0?0:a-1;return arguments.length<3&&(s=i[r?r[l]:l],l+=t),e(i,n,s,r,l,a)}}function e(t){return function(e,i,n){i=w(i,n);for(var s=S(e),o=t>0?0:s-1;o>=0&&s>o;o+=t)if(i(e[o],o,e))return o;return-1}}function i(t,e,i){return function(n,s,o){var r=0,a=S(n);if("number"==typeof o)t>0?r=o>=0?o:Math.max(o+a,r):a=o>=0?Math.min(o+1,a):o+a+1;else if(i&&o&&a)return o=i(n,s),n[o]===s?o:-1;if(s!==s)return o=e(d.call(n,r,a),b.isNaN),o>=0?o+r:-1;for(o=t>0?r:a-1;o>=0&&a>o;o+=t)if(n[o]===s)return o;return-1}}function n(t,e){var i=j.length,n=t.constructor,s=b.isFunction(n)&&n.prototype||a,o="constructor";for(b.has(t,o)&&!b.contains(e,o)&&e.push(o);i--;)o=j[i],o in t&&t[o]!==s[o]&&!b.contains(e,o)&&e.push(o)}var s=this,o=s._,r=Array.prototype,a=Object.prototype,l=Function.prototype,c=r.push,d=r.slice,h=a.toString,u=a.hasOwnProperty,p=Array.isArray,f=Object.keys,g=l.bind,m=Object.create,v=function(){},b=function(t){return t instanceof b?t:this instanceof b?void(this._wrapped=t):new b(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=b),exports._=b):s._=b,b.VERSION="1.8.3";var y=function(t,e,i){if(void 0===e)return t;switch(null==i?3:i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,s){return t.call(e,i,n,s)};case 4:return function(i,n,s,o){return t.call(e,i,n,s,o)}}return function(){return t.apply(e,arguments)}},w=function(t,e,i){return null==t?b.identity:b.isFunction(t)?y(t,e,i):b.isObject(t)?b.matcher(t):b.property(t)};b.iteratee=function(t,e){return w(t,e,1/0)};var x=function(t,e){return function(i){var n=arguments.length;if(2>n||null==i)return i;for(var s=1;n>s;s++)for(var o=arguments[s],r=t(o),a=r.length,l=0;a>l;l++){var c=r[l];e&&void 0!==i[c]||(i[c]=o[c])}return i}},C=function(t){if(!b.isObject(t))return{};if(m)return m(t);v.prototype=t;var e=new v;return v.prototype=null,e},_=function(t){return function(e){return null==e?void 0:e[t]}},T=Math.pow(2,53)-1,S=_("length"),k=function(t){var e=S(t);return"number"==typeof e&&e>=0&&T>=e};b.each=b.forEach=function(t,e,i){e=y(e,i);var n,s;if(k(t))for(n=0,s=t.length;s>n;n++)e(t[n],n,t);else{var o=b.keys(t);for(n=0,s=o.length;s>n;n++)e(t[o[n]],o[n],t)}return t},b.map=b.collect=function(t,e,i){e=w(e,i);for(var n=!k(t)&&b.keys(t),s=(n||t).length,o=Array(s),r=0;s>r;r++){var a=n?n[r]:r;o[r]=e(t[a],a,t)}return o},b.reduce=b.foldl=b.inject=t(1),b.reduceRight=b.foldr=t(-1),b.find=b.detect=function(t,e,i){var n;return n=k(t)?b.findIndex(t,e,i):b.findKey(t,e,i),void 0!==n&&-1!==n?t[n]:void 0},b.filter=b.select=function(t,e,i){var n=[];return e=w(e,i),b.each(t,function(t,i,s){e(t,i,s)&&n.push(t)}),n},b.reject=function(t,e,i){return b.filter(t,b.negate(w(e)),i)},b.every=b.all=function(t,e,i){e=w(e,i);for(var n=!k(t)&&b.keys(t),s=(n||t).length,o=0;s>o;o++){var r=n?n[o]:o;if(!e(t[r],r,t))return!1}return!0},b.some=b.any=function(t,e,i){e=w(e,i);for(var n=!k(t)&&b.keys(t),s=(n||t).length,o=0;s>o;o++){var r=n?n[o]:o;if(e(t[r],r,t))return!0}return!1},b.contains=b.includes=b.include=function(t,e,i,n){return k(t)||(t=b.values(t)),("number"!=typeof i||n)&&(i=0),b.indexOf(t,e,i)>=0},b.invoke=function(t,e){var i=d.call(arguments,2),n=b.isFunction(e);return b.map(t,function(t){var s=n?e:t[e];return null==s?s:s.apply(t,i)})},b.pluck=function(t,e){return b.map(t,b.property(e))},b.where=function(t,e){return b.filter(t,b.matcher(e))},b.findWhere=function(t,e){return b.find(t,b.matcher(e))},b.max=function(t,e,i){var n,s,o=-1/0,r=-1/0;if(null==e&&null!=t){t=k(t)?t:b.values(t);for(var a=0,l=t.length;l>a;a++)n=t[a],n>o&&(o=n)}else e=w(e,i),b.each(t,function(t,i,n){s=e(t,i,n),(s>r||s===-1/0&&o===-1/0)&&(o=t,r=s)});return o},b.min=function(t,e,i){var n,s,o=1/0,r=1/0;if(null==e&&null!=t){t=k(t)?t:b.values(t);for(var a=0,l=t.length;l>a;a++)n=t[a],o>n&&(o=n)}else e=w(e,i),b.each(t,function(t,i,n){s=e(t,i,n),(r>s||1/0===s&&1/0===o)&&(o=t,r=s)});return o},b.shuffle=function(t){for(var e,i=k(t)?t:b.values(t),n=i.length,s=Array(n),o=0;n>o;o++)e=b.random(0,o),e!==o&&(s[o]=s[e]),s[e]=i[o];return s},b.sample=function(t,e,i){return null==e||i?(k(t)||(t=b.values(t)),t[b.random(t.length-1)]):b.shuffle(t).slice(0,Math.max(0,e))},b.sortBy=function(t,e,i){return e=w(e,i),b.pluck(b.map(t,function(t,i,n){return{value:t,index:i,criteria:e(t,i,n)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return t.index-e.index}),"value")};var O=function(t){return function(e,i,n){var s={};return i=w(i,n),b.each(e,function(n,o){var r=i(n,o,e);t(s,n,r)}),s}};b.groupBy=O(function(t,e,i){b.has(t,i)?t[i].push(e):t[i]=[e]}),b.indexBy=O(function(t,e,i){t[i]=e}),b.countBy=O(function(t,e,i){b.has(t,i)?t[i]++:t[i]=1}),b.toArray=function(t){return t?b.isArray(t)?d.call(t):k(t)?b.map(t,b.identity):b.values(t):[]},b.size=function(t){return null==t?0:k(t)?t.length:b.keys(t).length},b.partition=function(t,e,i){e=w(e,i);var n=[],s=[];return b.each(t,function(t,i,o){(e(t,i,o)?n:s).push(t)}),[n,s]},b.first=b.head=b.take=function(t,e,i){return null==t?void 0:null==e||i?t[0]:b.initial(t,t.length-e)},b.initial=function(t,e,i){return d.call(t,0,Math.max(0,t.length-(null==e||i?1:e)))},b.last=function(t,e,i){return null==t?void 0:null==e||i?t[t.length-1]:b.rest(t,Math.max(0,t.length-e))},b.rest=b.tail=b.drop=function(t,e,i){return d.call(t,null==e||i?1:e)},b.compact=function(t){return b.filter(t,b.identity)};var A=function(t,e,i,n){for(var s=[],o=0,r=n||0,a=S(t);a>r;r++){var l=t[r];if(k(l)&&(b.isArray(l)||b.isArguments(l))){e||(l=A(l,e,i));var c=0,d=l.length;for(s.length+=d;d>c;)s[o++]=l[c++]}else i||(s[o++]=l)}return s};b.flatten=function(t,e){return A(t,e,!1)},b.without=function(t){return b.difference(t,d.call(arguments,1))},b.uniq=b.unique=function(t,e,i,n){b.isBoolean(e)||(n=i,i=e,e=!1),null!=i&&(i=w(i,n));for(var s=[],o=[],r=0,a=S(t);a>r;r++){var l=t[r],c=i?i(l,r,t):l;e?(r&&o===c||s.push(l),o=c):i?b.contains(o,c)||(o.push(c),s.push(l)):b.contains(s,l)||s.push(l)}return s},b.union=function(){return b.uniq(A(arguments,!0,!0))},b.intersection=function(t){for(var e=[],i=arguments.length,n=0,s=S(t);s>n;n++){var o=t[n];if(!b.contains(e,o)){for(var r=1;i>r&&b.contains(arguments[r],o);r++);r===i&&e.push(o)}}return e},b.difference=function(t){var e=A(arguments,!0,!0,1);return b.filter(t,function(t){return!b.contains(e,t)})},b.zip=function(){return b.unzip(arguments)},b.unzip=function(t){for(var e=t&&b.max(t,S).length||0,i=Array(e),n=0;e>n;n++)i[n]=b.pluck(t,n);return i},b.object=function(t,e){for(var i={},n=0,s=S(t);s>n;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},b.findIndex=e(1),b.findLastIndex=e(-1),b.sortedIndex=function(t,e,i,n){i=w(i,n,1);for(var s=i(e),o=0,r=S(t);r>o;){var a=Math.floor((o+r)/2);i(t[a])<s?o=a+1:r=a}return o},b.indexOf=i(1,b.findIndex,b.sortedIndex),b.lastIndexOf=i(-1,b.findLastIndex),b.range=function(t,e,i){null==e&&(e=t||0,t=0),i=i||1;for(var n=Math.max(Math.ceil((e-t)/i),0),s=Array(n),o=0;n>o;o++,t+=i)s[o]=t;return s};var D=function(t,e,i,n,s){if(!(n instanceof e))return t.apply(i,s);var o=C(t.prototype),r=t.apply(o,s);return b.isObject(r)?r:o};b.bind=function(t,e){if(g&&t.bind===g)return g.apply(t,d.call(arguments,1));if(!b.isFunction(t))throw new TypeError("Bind must be called on a function");var i=d.call(arguments,2),n=function(){return D(t,n,e,this,i.concat(d.call(arguments)))};return n},b.partial=function(t){var e=d.call(arguments,1),i=function(){for(var n=0,s=e.length,o=Array(s),r=0;s>r;r++)o[r]=e[r]===b?arguments[n++]:e[r];for(;n<arguments.length;)o.push(arguments[n++]);return D(t,i,this,this,o)};return i},b.bindAll=function(t){var e,i,n=arguments.length;if(1>=n)throw new Error("bindAll must be passed function names");for(e=1;n>e;e++)i=arguments[e],t[i]=b.bind(t[i],t);return t},b.memoize=function(t,e){var i=function(n){var s=i.cache,o=""+(e?e.apply(this,arguments):n);return b.has(s,o)||(s[o]=t.apply(this,arguments)),s[o]};return i.cache={},i},b.delay=function(t,e){var i=d.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},b.defer=b.partial(b.delay,b,1),b.throttle=function(t,e,i){var n,s,o,r=null,a=0;i||(i={});var l=function(){a=i.leading===!1?0:b.now(),r=null,o=t.apply(n,s),r||(n=s=null)};return function(){var c=b.now();a||i.leading!==!1||(a=c);var d=e-(c-a);return n=this,s=arguments,0>=d||d>e?(r&&(clearTimeout(r),r=null),a=c,o=t.apply(n,s),r||(n=s=null)):r||i.trailing===!1||(r=setTimeout(l,d)),o}},b.debounce=function(t,e,i){var n,s,o,r,a,l=function(){var c=b.now()-r;e>c&&c>=0?n=setTimeout(l,e-c):(n=null,i||(a=t.apply(o,s),n||(o=s=null)))};return function(){o=this,s=arguments,r=b.now();var c=i&&!n;return n||(n=setTimeout(l,e)),c&&(a=t.apply(o,s),o=s=null),a}},b.wrap=function(t,e){return b.partial(e,t)},b.negate=function(t){return function(){return!t.apply(this,arguments)}},b.compose=function(){var t=arguments,e=t.length-1;return function(){for(var i=e,n=t[e].apply(this,arguments);i--;)n=t[i].call(this,n);return n}},b.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},b.before=function(t,e){var i;return function(){return--t>0&&(i=e.apply(this,arguments)),1>=t&&(e=null),i}},b.once=b.partial(b.before,2);var E=!{toString:null}.propertyIsEnumerable("toString"),j=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];b.keys=function(t){if(!b.isObject(t))return[];if(f)return f(t);var e=[];for(var i in t)b.has(t,i)&&e.push(i);return E&&n(t,e),e},b.allKeys=function(t){if(!b.isObject(t))return[];var e=[];for(var i in t)e.push(i);return E&&n(t,e),e},b.values=function(t){for(var e=b.keys(t),i=e.length,n=Array(i),s=0;i>s;s++)n[s]=t[e[s]];return n},b.mapObject=function(t,e,i){e=w(e,i);for(var n,s=b.keys(t),o=s.length,r={},a=0;o>a;a++)n=s[a],r[n]=e(t[n],n,t);return r},b.pairs=function(t){for(var e=b.keys(t),i=e.length,n=Array(i),s=0;i>s;s++)n[s]=[e[s],t[e[s]]];return n},b.invert=function(t){for(var e={},i=b.keys(t),n=0,s=i.length;s>n;n++)e[t[i[n]]]=i[n];return e},b.functions=b.methods=function(t){var e=[];for(var i in t)b.isFunction(t[i])&&e.push(i);return e.sort()},b.extend=x(b.allKeys),b.extendOwn=b.assign=x(b.keys),b.findKey=function(t,e,i){e=w(e,i);for(var n,s=b.keys(t),o=0,r=s.length;r>o;o++)if(n=s[o],e(t[n],n,t))return n},b.pick=function(t,e,i){var n,s,o={},r=t;if(null==r)return o;b.isFunction(e)?(s=b.allKeys(r),n=y(e,i)):(s=A(arguments,!1,!1,1),n=function(t,e,i){return e in i},r=Object(r));for(var a=0,l=s.length;l>a;a++){var c=s[a],d=r[c];n(d,c,r)&&(o[c]=d)}return o},b.omit=function(t,e,i){if(b.isFunction(e))e=b.negate(e);else{var n=b.map(A(arguments,!1,!1,1),String);e=function(t,e){return!b.contains(n,e)}}return b.pick(t,e,i)},b.defaults=x(b.allKeys,!0),b.create=function(t,e){var i=C(t);return e&&b.extendOwn(i,e),i},b.clone=function(t){return b.isObject(t)?b.isArray(t)?t.slice():b.extend({},t):t},b.tap=function(t,e){return e(t),t},b.isMatch=function(t,e){var i=b.keys(e),n=i.length;if(null==t)return!n;for(var s=Object(t),o=0;n>o;o++){var r=i[o];if(e[r]!==s[r]||!(r in s))return!1}return!0};var M=function(t,e,i,n){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof b&&(t=t._wrapped),e instanceof b&&(e=e._wrapped);var s=h.call(t);if(s!==h.call(e))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var o="[object Array]"===s;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var r=t.constructor,a=e.constructor;if(r!==a&&!(b.isFunction(r)&&r instanceof r&&b.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}i=i||[],n=n||[];for(var l=i.length;l--;)if(i[l]===t)return n[l]===e;if(i.push(t),n.push(e),o){if(l=t.length,l!==e.length)return!1;for(;l--;)if(!M(t[l],e[l],i,n))return!1}else{var c,d=b.keys(t);if(l=d.length,b.keys(e).length!==l)return!1;for(;l--;)if(c=d[l],!b.has(e,c)||!M(t[c],e[c],i,n))return!1}return i.pop(),n.pop(),!0};b.isEqual=function(t,e){return M(t,e)},b.isEmpty=function(t){return null==t?!0:k(t)&&(b.isArray(t)||b.isString(t)||b.isArguments(t))?0===t.length:0===b.keys(t).length},b.isElement=function(t){return!(!t||1!==t.nodeType)},b.isArray=p||function(t){return"[object Array]"===h.call(t)},b.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},b.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){b["is"+t]=function(e){return h.call(e)==="[object "+t+"]"}}),b.isArguments(arguments)||(b.isArguments=function(t){return b.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(b.isFunction=function(t){return"function"==typeof t||!1}),b.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},b.isNaN=function(t){return b.isNumber(t)&&t!==+t},b.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===h.call(t)},b.isNull=function(t){return null===t},b.isUndefined=function(t){return void 0===t},b.has=function(t,e){return null!=t&&u.call(t,e)},b.noConflict=function(){return s._=o,this},b.identity=function(t){return t},b.constant=function(t){return function(){return t}},b.noop=function(){},b.property=_,b.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},b.matcher=b.matches=function(t){return t=b.extendOwn({},t),function(e){return b.isMatch(e,t)}},b.times=function(t,e,i){var n=Array(Math.max(0,t));e=y(e,i,1);for(var s=0;t>s;s++)n[s]=e(s);return n},b.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},b.now=Date.now||function(){return(new Date).getTime()};var I={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},P=b.invert(I),L=function(t){var e=function(e){return t[e]},i="(?:"+b.keys(t).join("|")+")",n=RegExp(i),s=RegExp(i,"g");return function(t){return t=null==t?"":""+t,n.test(t)?t.replace(s,e):t}};b.escape=L(I),b.unescape=L(P),b.result=function(t,e,i){var n=null==t?void 0:t[e];return void 0===n&&(n=i),b.isFunction(n)?n.call(t):n};var F=0;b.uniqueId=function(t){var e=++F+"";return t?t+e:e},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var V=/(.)^/,q={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\u2028|\u2029/g,R=function(t){return"\\"+q[t]};b.template=function(t,e,i){!e&&i&&(e=i),e=b.defaults({},e,b.templateSettings);var n=RegExp([(e.escape||V).source,(e.interpolate||V).source,(e.evaluate||V).source].join("|")+"|$","g"),s=0,o="__p+='";t.replace(n,function(e,i,n,r,a){return o+=t.slice(s,a).replace(N,R),s=a+e.length,i?o+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?o+="'+\n((__t=("+n+"))==null?'':__t)+\n'":r&&(o+="';\n"+r+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var r=new Function(e.variable||"obj","_",o)}catch(a){throw a.source=o,a}var l=function(t){return r.call(this,t,b)},c=e.variable||"obj";return l.source="function("+c+"){\n"+o+"}",l},b.chain=function(t){var e=b(t);return e._chain=!0,e};var $=function(t,e){return t._chain?b(e).chain():e};b.mixin=function(t){b.each(b.functions(t),function(e){var i=b[e]=t[e];b.prototype[e]=function(){var t=[this._wrapped];return c.apply(t,arguments),$(this,i.apply(b,t))}})},b.mixin(b),b.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=r[t];b.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!==t&&"splice"!==t||0!==i.length||delete i[0],$(this,i)}}),b.each(["concat","join","slice"],function(t){var e=r[t];b.prototype[t]=function(){return $(this,e.apply(this._wrapped,arguments))}}),b.prototype.value=function(){return this._wrapped},b.prototype.valueOf=b.prototype.toJSON=b.prototype.value,b.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return b})}.call(this),function(t){var e="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global;if("function"==typeof define&&define.amd)define("backbone",["underscore","jquery","exports"],function(i,n,s){e.Backbone=t(e,s,i,n)});else if("undefined"!=typeof exports){var i,n=require("underscore");try{i=require("jquery")}catch(s){}t(e,exports,n,i)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(function(t,e,i,n){var s=t.Backbone,o=Array.prototype.slice;e.VERSION="1.3.3",e.$=n,e.noConflict=function(){return t.Backbone=s,this},e.emulateHTTP=!1,e.emulateJSON=!1;var r=function(t,e,n){switch(t){case 1:return function(){return i[e](this[n])};case 2:return function(t){return i[e](this[n],t)};case 3:return function(t,s){return i[e](this[n],l(t,this),s)};case 4:return function(t,s,o){return i[e](this[n],l(t,this),s,o)};default:return function(){var t=o.call(arguments);return t.unshift(this[n]),i[e].apply(i,t)}}},a=function(t,e,n){i.each(e,function(e,s){i[s]&&(t.prototype[s]=r(e,s,n))})},l=function(t,e){return i.isFunction(t)?t:i.isObject(t)&&!e._isModel(t)?c(t):i.isString(t)?function(e){return e.get(t)}:t},c=function(t){var e=i.matches(t);return function(t){return e(t.attributes)}},d=e.Events={},h=/\s+/,u=function(t,e,n,s,o){var r,a=0;if(n&&"object"==typeof n){void 0!==s&&"context"in o&&void 0===o.context&&(o.context=s);for(r=i.keys(n);a<r.length;a++)e=u(t,e,r[a],n[r[a]],o)}else if(n&&h.test(n))for(r=n.split(h);a<r.length;a++)e=t(e,r[a],s,o);else e=t(e,n,s,o);return e};d.on=function(t,e,i){return p(this,t,e,i)};var p=function(t,e,i,n,s){if(t._events=u(f,t._events||{},e,i,{context:n,ctx:t,listening:s}),s){var o=t._listeners||(t._listeners={});o[s.id]=s}return t};d.listenTo=function(t,e,n){if(!t)return this;var s=t._listenId||(t._listenId=i.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),r=o[s];if(!r){var a=this._listenId||(this._listenId=i.uniqueId("l"));r=o[s]={obj:t,objId:s,id:a,listeningTo:o,count:0}}return p(t,e,n,this,r),this};var f=function(t,e,i,n){if(i){var s=t[e]||(t[e]=[]),o=n.context,r=n.ctx,a=n.listening;a&&a.count++,s.push({callback:i,context:o,ctx:o||r,listening:a})}return t};d.off=function(t,e,i){return this._events?(this._events=u(g,this._events,t,e,{context:i,listeners:this._listeners}),this):this},d.stopListening=function(t,e,n){var s=this._listeningTo;if(!s)return this;for(var o=t?[t._listenId]:i.keys(s),r=0;r<o.length;r++){var a=s[o[r]];if(!a)break;a.obj.off(e,n,this)}return this};var g=function(t,e,n,s){if(t){var o,r=0,a=s.context,l=s.listeners;if(e||n||a){for(var c=e?[e]:i.keys(t);r<c.length;r++){e=c[r];var d=t[e];if(!d)break;for(var h=[],u=0;u<d.length;u++){var p=d[u];n&&n!==p.callback&&n!==p.callback._callback||a&&a!==p.context?h.push(p):(o=p.listening,o&&0===--o.count&&(delete l[o.id],delete o.listeningTo[o.objId]))}h.length?t[e]=h:delete t[e]}return t}for(var f=i.keys(l);r<f.length;r++)o=l[f[r]],delete l[o.id],delete o.listeningTo[o.objId]}};d.once=function(t,e,n){var s=u(m,{},t,e,i.bind(this.off,this));return"string"==typeof t&&null==n&&(e=void 0),this.on(s,e,n)},d.listenToOnce=function(t,e,n){var s=u(m,{},e,n,i.bind(this.stopListening,this,t));return this.listenTo(t,s)};var m=function(t,e,n,s){if(n){var o=t[e]=i.once(function(){s(e,o),n.apply(this,arguments)});o._callback=n}return t};d.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),i=Array(e),n=0;e>n;n++)i[n]=arguments[n+1];return u(v,this._events,t,void 0,i),this};var v=function(t,e,i,n){if(t){var s=t[e],o=t.all;s&&o&&(o=o.slice()),s&&b(s,n),o&&b(o,[e].concat(n))}return t},b=function(t,e){var i,n=-1,s=t.length,o=e[0],r=e[1],a=e[2];switch(e.length){case 0:for(;++n<s;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<s;)(i=t[n]).callback.call(i.ctx,o);return;case 2:for(;++n<s;)(i=t[n]).callback.call(i.ctx,o,r);return;case 3:for(;++n<s;)(i=t[n]).callback.call(i.ctx,o,r,a);return;default:for(;++n<s;)(i=t[n]).callback.apply(i.ctx,e);return}};d.bind=d.on,d.unbind=d.off,i.extend(e,d);var y=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{});var s=i.result(this,"defaults");n=i.defaults(i.extend({},s,n),s),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(y.prototype,d,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!i.iteratee(t,this)(this.attributes)},set:function(t,e,n){if(null==t)return this;var s;if("object"==typeof t?(s=t,n=e):(s={})[t]=e,n||(n={}),!this._validate(s,n))return!1;var o=n.unset,r=n.silent,a=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=i.clone(this.attributes),this.changed={});var c=this.attributes,d=this.changed,h=this._previousAttributes;for(var u in s)e=s[u],i.isEqual(c[u],e)||a.push(u),i.isEqual(h[u],e)?delete d[u]:d[u]=e,o?delete c[u]:c[u]=e;if(this.idAttribute in s&&(this.id=this.get(this.idAttribute)),!r){a.length&&(this._pending=n);for(var p=0;p<a.length;p++)this.trigger("change:"+a[p],this,c[a[p]],n)}if(l)return this;if(!r)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?i.clone(this.changed):!1;var e=this._changing?this._previousAttributes:this.attributes,n={};for(var s in t){var o=t[s];i.isEqual(e[s],o)||(n[s]=o)}return i.size(n)?n:!1},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=i.extend({parse:!0},t);var e=this,n=t.success;return t.success=function(i){var s=t.parse?e.parse(i,t):i;return e.set(s,t)?(n&&n.call(t.context,e,i,t),void e.trigger("sync",e,i,t)):!1},$(this,t),this.sync("read",this,t)},save:function(t,e,n){var s;null==t||"object"==typeof t?(s=t,n=e):(s={})[t]=e,n=i.extend({validate:!0,parse:!0},n);var o=n.wait;if(s&&!o){if(!this.set(s,n))return!1}else if(!this._validate(s,n))return!1;var r=this,a=n.success,l=this.attributes;n.success=function(t){r.attributes=l;var e=n.parse?r.parse(t,n):t;return o&&(e=i.extend({},s,e)),e&&!r.set(e,n)?!1:(a&&a.call(n.context,r,t,n),void r.trigger("sync",r,t,n))},$(this,n),s&&o&&(this.attributes=i.extend({},l,s));var c=this.isNew()?"create":n.patch?"patch":"update";"patch"!==c||n.attrs||(n.attrs=s);var d=this.sync(c,this,n);return this.attributes=l,d},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,s=t.wait,o=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(i){s&&o(),n&&n.call(t.context,e,i,t),e.isNew()||e.trigger("sync",e,i,t)};var r=!1;return this.isNew()?i.defer(t.success):($(this,t),r=this.sync("delete",this,t)),s||o(),r},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||R();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1):!0}});var w={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};a(y,w,"attributes");var x=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},C={add:!0,remove:!0,merge:!0},_={add:!0,remove:!1},T=function(t,e,i){i=Math.min(Math.max(i,0),t.length);var n,s=Array(t.length-i),o=e.length;for(n=0;n<s.length;n++)s[n]=t[n+i];for(n=0;o>n;n++)t[n+i]=e[n];for(n=0;n<s.length;n++)t[n+o+i]=s[n]};i.extend(x.prototype,d,{model:y,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,_))},remove:function(t,e){e=i.extend({},e);var n=!i.isArray(t);t=n?[t]:t.slice();var s=this._removeModels(t,e);return!e.silent&&s.length&&(e.changes={added:[],merged:[],removed:s},this.trigger("update",this,e)),n?s[0]:s},set:function(t,e){if(null!=t){e=i.extend({},C,e),e.parse&&!this._isModel(t)&&(t=this.parse(t,e)||[]);var n=!i.isArray(t);t=n?[t]:t.slice();var s=e.at;null!=s&&(s=+s),s>this.length&&(s=this.length),0>s&&(s+=this.length+1);var o,r,a=[],l=[],c=[],d=[],h={},u=e.add,p=e.merge,f=e.remove,g=!1,m=this.comparator&&null==s&&e.sort!==!1,v=i.isString(this.comparator)?this.comparator:null;for(r=0;r<t.length;r++){o=t[r];var b=this.get(o);if(b){if(p&&o!==b){var y=this._isModel(o)?o.attributes:o;e.parse&&(y=b.parse(y,e)),b.set(y,e),c.push(b),m&&!g&&(g=b.hasChanged(v))}h[b.cid]||(h[b.cid]=!0,a.push(b)),t[r]=b}else u&&(o=t[r]=this._prepareModel(o,e),o&&(l.push(o),this._addReference(o,e),h[o.cid]=!0,a.push(o)))}if(f){for(r=0;r<this.length;r++)o=this.models[r],h[o.cid]||d.push(o);d.length&&this._removeModels(d,e)}var w=!1,x=!m&&u&&f;if(a.length&&x?(w=this.length!==a.length||i.some(this.models,function(t,e){return t!==a[e]}),this.models.length=0,T(this.models,a,0),this.length=this.models.length):l.length&&(m&&(g=!0),T(this.models,l,null==s?this.length:s),this.length=this.models.length),g&&this.sort({silent:!0}),!e.silent){for(r=0;r<l.length;r++)null!=s&&(e.index=s+r),o=l[r],o.trigger("add",o,this,e);(g||w)&&this.trigger("sort",this,e),(l.length||d.length||c.length)&&(e.changes={added:l,removed:d,merged:c},this.trigger("update",this,e))}return n?t[0]:t}},reset:function(t,e){e=e?i.clone(e):{};for(var n=0;n<this.models.length;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return o.apply(this.models,arguments)},get:function(t){return null!=t?this._byId[t]||this._byId[this.modelId(t.attributes||t)]||t.cid&&this._byId[t.cid]:void 0},has:function(t){return null!=this.get(t)},at:function(t){return 0>t&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var n=e.length;return i.isFunction(e)&&(e=i.bind(e,this)),1===n||i.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return this.map(t+"")},fetch:function(t){t=i.extend({parse:!0},t);var e=t.success,n=this;return t.success=function(i){var s=t.reset?"reset":"set";n[s](i,t),e&&e.call(t.context,n,i,t),n.trigger("sync",n,i,t)},$(this,t),this.sync("read",this,t)},create:function(t,e){e=e?i.clone(e):{};var n=e.wait;if(t=this._prepareModel(t,e),!t)return!1;n||this.add(t,e);var s=this,o=e.success;return e.success=function(t,e,i){n&&s.add(t,i),o&&o.call(i.context,t,e,i)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_removeModels:function(t,e){for(var i=[],n=0;n<t.length;n++){var s=this.get(t[n]);if(s){var o=this.indexOf(s);this.models.splice(o,1),this.length--,delete this._byId[s.cid];var r=this.modelId(s.attributes);null!=r&&delete this._byId[r],e.silent||(e.index=o,s.trigger("remove",s,this,e)),i.push(s),this._removeReference(s,e)}}return i},_isModel:function(t){return t instanceof y},_addReference:function(t,e){this._byId[t.cid]=t;var i=this.modelId(t.attributes);null!=i&&(this._byId[i]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var i=this.modelId(t.attributes);null!=i&&delete this._byId[i],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){if(e){if(("add"===t||"remove"===t)&&i!==this)return;if("destroy"===t&&this.remove(e,n),"change"===t){var s=this.modelId(e.previousAttributes()),o=this.modelId(e.attributes);s!==o&&(null!=s&&delete this._byId[s],null!=o&&(this._byId[o]=e))}}this.trigger.apply(this,arguments)}});var S={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3};a(x,S,"models");var k=e.View=function(t){this.cid=i.uniqueId("view"),i.extend(this,i.pick(t,A)),this._ensureElement(),this.initialize.apply(this,arguments)},O=/^(\S+)\s*(.*)$/,A=["model","collection","el","id","attributes","className","tagName","events"];i.extend(k.prototype,d,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=i.result(this,"events")),!t)return this;this.undelegateEvents();
for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[n]),n){var s=e.match(O);this.delegate(s[1],s[2],i.bind(n,this))}}return this},delegate:function(t,e,i){return this.$el.on(t+".delegateEvents"+this.cid,e,i),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,i){return this.$el.off(t+".delegateEvents"+this.cid,e,i),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"));else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t["class"]=i.result(this,"className")),this.setElement(this._createElement(i.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,n,s){var o=D[t];i.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var r={type:o,dataType:"json"};if(s.url||(r.url=i.result(n,"url")||R()),null!=s.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(r.contentType="application/json",r.data=JSON.stringify(s.attrs||n.toJSON(s))),s.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),s.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){r.type="POST",s.emulateJSON&&(r.data._method=o);var a=s.beforeSend;s.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",o),a?a.apply(this,arguments):void 0}}"GET"===r.type||s.emulateJSON||(r.processData=!1);var l=s.error;s.error=function(t,e,i){s.textStatus=e,s.errorThrown=i,l&&l.call(s.context,t,e,i)};var c=s.xhr=e.ajax(i.extend(r,s));return n.trigger("request",n,c,s),c};var D={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var E=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},j=/\((.*?)\)/g,M=/(\(\?)?:\w+/g,I=/\*\w+/g,P=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(E.prototype,d,{initialize:function(){},route:function(t,n,s){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(s=n,n=""),s||(s=this[n]);var o=this;return e.history.route(t,function(i){var r=o._extractParameters(t,i);o.execute(s,r,n)!==!1&&(o.trigger.apply(o,["route:"+n].concat(r)),o.trigger("route",n,r),e.history.trigger("route",o,n,r))}),this},execute:function(t,e,i){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(P,"\\$&").replace(j,"(?:$1)?").replace(M,function(t,e){return e?t:"([^/?]+)"}).replace(I,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var L=e.History=function(){this.handlers=[],this.checkUrl=i.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},F=/^[#\/]|\s+$/g,V=/^\/+|\/+$/g,q=/#.*$/;L.started=!1,i.extend(L.prototype,d,{interval:50,atRoot:function(){var t=this.location.pathname.replace(/[^\/]$/,"$&/");return t===this.root&&!this.getSearch()},matchRoot:function(){var t=this.decodeFragment(this.location.pathname),e=t.slice(0,this.root.length-1)+"/";return e===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(F,"")},start:function(t){if(L.started)throw new Error("Backbone.history has already been started");if(L.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(V,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var n=document.body,s=n.insertBefore(this.iframe,n.firstChild).contentWindow;s.document.open(),s.document.close(),s.location.hash="#"+this.fragment}var o=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};return this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.options.silent?void 0:this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),L.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(t){return this.matchRoot()?(t=this.fragment=this.getFragment(t),i.some(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})):!1},navigate:function(t,e){if(!L.started)return!1;e&&e!==!0||(e={trigger:!!e}),t=this.getFragment(t||"");var i=this.root;(""===t||"?"===t.charAt(0))&&(i=i.slice(0,-1)||"/");var n=i+t;if(t=this.decodeFragment(t.replace(q,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var s=this.iframe.contentWindow;e.replace||(s.document.open(),s.document.close()),this._updateHash(s.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new L;var N=function(t,e){var n,s=this;return n=t&&i.has(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},i.extend(n,s,e),n.prototype=i.create(s.prototype,t),n.prototype.constructor=n,n.__super__=s.prototype,n};y.extend=x.extend=E.extend=k.extend=L.extend=N;var R=function(){throw new Error('A "url" property or function must be specified')},$=function(t,e){var i=e.error;e.error=function(n){i&&i.call(e.context,t,n,e),t.trigger("error",t,n,e)}};return e}),Backbone.Validation=function(t){"use strict";var e={forceUpdate:!1,selector:"name",labelFormatter:"sentenceCase",valid:Function.prototype,invalid:Function.prototype},i={formatLabel:function(t,i){return l[e.labelFormatter](t,i)},format:function(){var t=Array.prototype.slice.call(arguments),e=t.shift();return e.replace(/\{(\d+)\}/g,function(e,i){return"undefined"!=typeof t[i]?t[i]:e})}},n=function(e,i,s){return i=i||{},s=s||"",t.each(e,function(o,r){e.hasOwnProperty(r)&&(o&&t.isArray(o)?t.forEach(o,function(t,e){n(t,i,s+r+"."+e+"."),i[s+r+"."+e]=t}):o&&"object"==typeof o&&o.constructor===Object&&n(o,i,s+r+"."),i[s+r]=o)}),i},s=function(){var s=function(e,i){return i=i||t.keys(t.result(e,"validation")||{}),t.reduce(i,function(t,e){return t[e]=void 0,t},{})},r=function(e,i){var n=e.attributes;return t.isFunction(n)?n=n(i):t.isString(n)&&t.isFunction(c[n])&&(n=c[n](i)),t.isArray(n)?n:void 0},a=function(e,i){var n=e.validation?t.result(e,"validation")[i]||{}:{};return(t.isFunction(n)||t.isString(n))&&(n={fn:n}),t.isArray(n)||(n=[n]),t.reduce(n,function(e,i){return t.each(t.without(t.keys(i),"msg"),function(t){e.push({fn:d[t],val:i[t],msg:i.msg})}),e},[])},l=function(e,n,s,o){return t.reduce(a(e,n),function(r,a){var l=t.extend({},i,d),c=a.fn.call(l,s,n,a.val,e,o);return c===!1||r===!1?!1:c&&!r?t.result(a,"msg")||c:r},"")},h=function(e,i,n){var s,o={},r=!0,a=t.clone(i);return t.each(n,function(t,i){s=l(e,i,t,a),s&&(o[i]=s,r=!1)}),{invalidAttrs:o,isValid:r}},u=function(e,i){return{preValidate:function(e,i){var n,s=this,o={};return t.isObject(e)?(t.each(e,function(t,e){n=s.preValidate(e,t),n&&(o[e]=n)}),t.isEmpty(o)?void 0:o):l(this,e,i,t.extend({},this.attributes))},isValid:function(s){var o,a,c,d;return s=s||r(i,e),t.isString(s)?a=[s]:t.isArray(s)&&(a=s),a&&(o=n(this.attributes),t.each(this.associatedViews,function(e){t.each(a,function(n){c=l(this,n,o[n],t.extend({},this.attributes)),c?(i.invalid(e,n,c,i.selector),d=d||{},d[n]=c):i.valid(e,n,i.selector)},this)},this)),s===!0&&(d=this.validate()),d&&this.trigger("invalid",this,d,{validationError:d}),a?!d:this.validation?this._isValid:!0},validate:function(o,a){var l=this,c=!o,d=t.extend({},i,a),u=s(l,r(i,e)),p=t.extend({},u,l.attributes,o),f=n(p),g=o?n(o):f,m=h(l,p,t.pick(f,t.keys(u)));return l._isValid=m.isValid,t.each(l.associatedViews,function(e){t.each(u,function(t,i){var n=m.invalidAttrs.hasOwnProperty(i),s=g.hasOwnProperty(i);n||d.valid(e,i,d.selector),n&&(s||c)&&d.invalid(e,i,m.invalidAttrs[i],d.selector)})}),t.defer(function(){l.trigger("validated",l._isValid,l,m.invalidAttrs),l.trigger("validated:"+(l._isValid?"valid":"invalid"),l,m.invalidAttrs)}),!d.forceUpdate&&t.intersection(t.keys(m.invalidAttrs),t.keys(g)).length>0?m.invalidAttrs:void 0}}},p=function(e,i,n){i.associatedViews?i.associatedViews.push(e):i.associatedViews=[e],t.extend(i,u(e,n))},f=function(e,i){i&&e.associatedViews&&e.associatedViews.length>1?e.associatedViews=t.without(e.associatedViews,i):(delete e.validate,delete e.preValidate,delete e.isValid,delete e.associatedViews)},g=function(t){p(this.view,t,this.options)},m=function(t){f(t)};return{version:"0.11.3",configure:function(i){t.extend(e,i)},bind:function(i,n){n=t.extend({},e,o,n);var s=n.model||i.model,r=n.collection||i.collection;if("undefined"==typeof s&&"undefined"==typeof r)throw"Before you execute the binding your view must have a model or a collection.\nSee http://thedersen.com/projects/backbone-validation/#using-form-model-validation for more information.";s?p(i,s,n):r&&(r.each(function(t){p(i,t,n)}),r.bind("add",g,{view:i,options:n}),r.bind("remove",m))},unbind:function(e,i){i=t.extend({},i);var n=i.model||e.model,s=i.collection||e.collection;n?f(n,e):s&&(s.each(function(t){f(t,e)}),s.unbind("add",g),s.unbind("remove",m))},mixin:u(null,e)}}(),o=s.callbacks={valid:function(t,e,i){t.$("["+i+'~="'+e+'"]').removeClass("invalid").removeAttr("data-error")},invalid:function(t,e,i,n){t.$("["+n+'~="'+e+'"]').addClass("invalid").attr("data-error",i)}},r=s.patterns={digits:/^\d+$/,number:/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i},a=s.messages={required:"{0} is required",acceptance:"{0} must be accepted",min:"{0} must be greater than or equal to {1}",max:"{0} must be less than or equal to {1}",range:"{0} must be between {1} and {2}",length:"{0} must be {1} characters",minLength:"{0} must be at least {1} characters",maxLength:"{0} must be at most {1} characters",rangeLength:"{0} must be between {1} and {2} characters",oneOf:"{0} must be one of: {1}",equalTo:"{0} must be the same as {1}",digits:"{0} must only contain digits",number:"{0} must be a number",email:"{0} must be a valid email",url:"{0} must be a valid url",inlinePattern:"{0} is invalid"},l=s.labelFormatters={none:function(t){return t},sentenceCase:function(t){return t.replace(/(?:^\w|[A-Z]|\b\w)/g,function(t,e){return 0===e?t.toUpperCase():" "+t.toLowerCase()}).replace(/_/g," ")},label:function(t,e){return e.labels&&e.labels[t]||l.sentenceCase(t,e)}},c=s.attributeLoaders={inputNames:function(t){var e=[];return t&&t.$("form [name]").each(function(){/^(?:input|select|textarea)$/i.test(this.nodeName)&&this.name&&"submit"!==this.type&&-1===e.indexOf(this.name)&&e.push(this.name)}),e}},d=s.validators=function(){var e=String.prototype.trim?function(t){return null===t?"":String.prototype.trim.call(t)}:function(t){var e=/^\s+/,i=/\s+$/;return null===t?"":t.toString().replace(e,"").replace(i,"")},i=function(e){return t.isNumber(e)||t.isString(e)&&e.match(r.number)},n=function(i){return!(t.isNull(i)||t.isUndefined(i)||t.isString(i)&&""===e(i)||t.isArray(i)&&t.isEmpty(i))};return{fn:function(e,i,n,s,o){return t.isString(n)&&(n=s[n]),n.call(s,e,i,o)},required:function(e,i,s,o,r){var l=t.isFunction(s)?s.call(o,e,i,r):s;return l||n(e)?l&&!n(e)?this.format(a.required,this.formatLabel(i,o)):void 0:!1},acceptance:function(e,i,n,s){return"true"===e||t.isBoolean(e)&&e!==!1?void 0:this.format(a.acceptance,this.formatLabel(i,s))},min:function(t,e,n,s){return!i(t)||n>t?this.format(a.min,this.formatLabel(e,s),n):void 0},max:function(t,e,n,s){return!i(t)||t>n?this.format(a.max,this.formatLabel(e,s),n):void 0},range:function(t,e,n,s){return!i(t)||t<n[0]||t>n[1]?this.format(a.range,this.formatLabel(e,s),n[0],n[1]):void 0},length:function(e,i,n,s){return t.isString(e)&&e.length===n?void 0:this.format(a.length,this.formatLabel(i,s),n)},minLength:function(e,i,n,s){return!t.isString(e)||e.length<n?this.format(a.minLength,this.formatLabel(i,s),n):void 0},maxLength:function(e,i,n,s){return!t.isString(e)||e.length>n?this.format(a.maxLength,this.formatLabel(i,s),n):void 0},rangeLength:function(e,i,n,s){return!t.isString(e)||e.length<n[0]||e.length>n[1]?this.format(a.rangeLength,this.formatLabel(i,s),n[0],n[1]):void 0},oneOf:function(e,i,n,s){return t.include(n,e)?void 0:this.format(a.oneOf,this.formatLabel(i,s),n.join(", "))},equalTo:function(t,e,i,n,s){return t!==s[i]?this.format(a.equalTo,this.formatLabel(e,n),this.formatLabel(i,n)):void 0},pattern:function(t,e,i,s){return n(t)&&t.toString().match(r[i]||i)?void 0:this.format(a[i]||a.inlinePattern,this.formatLabel(e,s),i)}}}();return t.each(d,function(e,n){d[n]=t.bind(d[n],t.extend({},i,d))}),s}(_),define("backboneValidation",["backbone"],function(){}),function(t){"function"==typeof define&&define.amd?define("jquerycookie",["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){function e(t){return a.raw?t:encodeURIComponent(t)}function i(t){return a.raw?t:decodeURIComponent(t)}function n(t){return e(a.json?JSON.stringify(t):String(t))}function s(t){0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return t=decodeURIComponent(t.replace(r," ")),a.json?JSON.parse(t):t}catch(e){}}function o(e,i){var n=a.raw?e:s(e);return t.isFunction(i)?i(n):n}var r=/\+/g,a=t.cookie=function(s,r,l){if(void 0!==r&&!t.isFunction(r)){if(l=t.extend({},a.defaults,l),"number"==typeof l.expires){var c=l.expires,d=l.expires=new Date;d.setTime(+d+864e5*c)}return document.cookie=[e(s),"=",n(r),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var h=s?void 0:{},u=document.cookie?document.cookie.split("; "):[],p=0,f=u.length;f>p;p++){var g=u[p].split("="),m=i(g.shift()),v=g.join("=");if(s&&s===m){h=o(v,r);break}s||void 0===(v=o(v))||(h[m]=v)}return h};a.defaults={},t.removeCookie=function(e,i){return void 0===t.cookie(e)?!1:(t.cookie(e,"",t.extend({},i,{expires:-1})),!t.cookie(e))}}),$.fn.serializeObject=function(){"use strict";var t={},e=function(e,i){var n=t[i.name];"undefined"!=typeof n&&null!==n?$.isArray(n)?n.push(i.value):t[i.name]=[n,i.value]:t[i.name]=i.value};return $.each(this.serializeArray(),e),t},define("jquerySerializeObject",["jquery"],function(){}),define("core/BaseRouter",["underscore","backbone"],function(t,e){var i=e.Router.extend({before:function(t,e){},after:function(t,e){},route:function(i,n,s){t.isRegExp(i)||(i=this._routeToRegExp(i)),t.isFunction(n)&&(s=n,n=""),s||(s=this[n]);var o=this;return e.history.route(i,function(t){var r=o._extractParameters(i,t),a=function(){s&&s.apply(o,r),o.trigger.apply(o,["route:"+n].concat(r)),o.trigger("route",n,r),e.history.trigger("route",o,n,r),o.after.apply(o,r)};o.before.apply(o,[r,a])}),this}});return i}),define("core/BaseView",["underscore","backbone"],function(t,e){var i=e.View.extend({close:function(){this.childViews&&this.childViews.close(),this.remove()},destroyView:function(){"undefined"!==this.model&&this.model.off(),this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this)},disabledAction:function(t){$(".action-entuliga").prop("disabled",t)}});return i}),define("models/UserModel",["backbone"],function(t){var e=t.Model.extend({urlRoot:"user",defaults:{username:"",password:"",passwordConfirm:""},initialize:function(){},validation:{username:[{required:!0,maxLength:50,msg:"El campo es requerido"},{pattern:"email",msg:"Por favor especifique un email correcto....."}],password:{required:!0,pattern:/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{4,8}$/,msg:"El password debe tener por lo menos una letra mayuscula, una minuscula y un numero"},passwordConfirm:{required:!0,equalTo:"password",msg:"El password no coincide"}}});return e}),define("text",["module"],function(t){"use strict";var e,i,n,s,o,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],a=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,d=c&&location.protocol&&location.protocol.replace(/\:/,""),h=c&&location.hostname,u=c&&(location.port||void 0),p={},f=t.config&&t.config()||{};return e={version:"2.0.12",strip:function(t){if(t){t=t.replace(a,"");var e=t.match(l);e&&(t=e[1])}else t="";return t},jsEscape:function(t){return t.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:f.createXhr||function(){var t,e,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(e=0;3>e;e+=1){i=r[e];try{t=new ActiveXObject(i)}catch(n){}if(t){r=[i];break}}return t},parseName:function(t){var e,i,n,s=!1,o=t.indexOf("."),r=0===t.indexOf("./")||0===t.indexOf("../");return-1!==o&&(!r||o>1)?(e=t.substring(0,o),i=t.substring(o+1,t.length)):e=t,n=i||e,o=n.indexOf("!"),-1!==o&&(s="strip"===n.substring(o+1),n=n.substring(0,o),i?i=n:e=n),{moduleName:e,ext:i,strip:s}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(t,i,n,s){var o,r,a,l=e.xdRegExp.exec(t);return l?(o=l[2],r=l[3],r=r.split(":"),a=r[1],r=r[0],!(o&&o!==i||r&&r.toLowerCase()!==n.toLowerCase()||(a||r)&&a!==s)):!0},finishLoad:function(t,i,n,s){n=i?e.strip(n):n,f.isBuild&&(p[t]=n),s(n)},load:function(t,i,n,s){if(s&&s.isBuild&&!s.inlineText)return void n();f.isBuild=s&&s.isBuild;var o=e.parseName(t),r=o.moduleName+(o.ext?"."+o.ext:""),a=i.toUrl(r),l=f.useXhr||e.useXhr;return 0===a.indexOf("empty:")?void n():void(!c||l(a,d,h,u)?e.get(a,function(i){e.finishLoad(t,o.strip,i,n)},function(t){n.error&&n.error(t)}):i([r],function(t){e.finishLoad(o.moduleName+"."+o.ext,o.strip,t,n)}))},write:function(t,i,n,s){if(p.hasOwnProperty(i)){var o=e.jsEscape(p[i]);n.asModule(t+"!"+i,"define(function () { return '"+o+"';});\n")}},writeFile:function(t,i,n,s,o){var r=e.parseName(i),a=r.ext?"."+r.ext:"",l=r.moduleName+a,c=n.toUrl(r.moduleName+a)+".js";e.load(l,n,function(i){var n=function(t){return s(c,t)};n.asModule=function(t,e){return s.asModule(t,c,e)},e.write(t,l,n,o)},o)}},"node"===f.env||!f.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(i=require.nodeRequire("fs"),e.get=function(t,e,n){try{var s=i.readFileSync(t,"utf8");0===s.indexOf("\ufeff")&&(s=s.substring(1)),e(s)}catch(o){n&&n(o)}}):"xhr"===f.env||!f.env&&e.createXhr()?e.get=function(t,i,n,s){var o,r=e.createXhr();if(r.open("GET",t,!0),s)for(o in s)s.hasOwnProperty(o)&&r.setRequestHeader(o.toLowerCase(),s[o]);f.onXhr&&f.onXhr(r,t),r.onreadystatechange=function(e){var s,o;4===r.readyState&&(s=r.status||0,s>399&&600>s?(o=new Error(t+" HTTP status: "+s),o.xhr=r,n&&n(o)):i(r.responseText),f.onXhrComplete&&f.onXhrComplete(r,t))},r.send(null)}:"rhino"===f.env||!f.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?e.get=function(t,e){var i,n,s="utf-8",o=new java.io.File(t),r=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),s)),l="";try{for(i=new java.lang.StringBuffer,n=a.readLine(),n&&n.length()&&65279===n.charAt(0)&&(n=n.substring(1)),null!==n&&i.append(n);null!==(n=a.readLine());)i.append(r),i.append(n);l=String(i.toString())}finally{a.close()}e(l)}:("xpconnect"===f.env||!f.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(n=Components.classes,s=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),o="@mozilla.org/windows-registry-key;1"in n,e.get=function(t,e){var i,r,a,l={};o&&(t=t.replace(/\//g,"\\")),a=new FileUtils.File(t);try{i=n["@mozilla.org/network/file-input-stream;1"].createInstance(s.nsIFileInputStream),i.init(a,1,0,!1),r=n["@mozilla.org/intl/converter-input-stream;1"].createInstance(s.nsIConverterInputStream),r.init(i,"utf-8",i.available(),s.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),r.readString(i.available(),l),r.close(),i.close(),e(l.value)}catch(c){throw new Error((a&&a.path||"")+": "+c)}}),e}),define("text!templates/tplLogin.html",[],function(){return'\n<div class="row login-box">\n  <div class="center-box-login">\n    <div class="panel panel-default">\n      <form id="form-login" role="form" class="form-login">\n          <div class="form-login-heading">\n            <h3 class="text-center">Bienvenido a entuliga!</h3>\n          </div>\n          <div class="row">\n              <div class="col-xs-12">\n                  <div class="form-group">\n                      <label>Email</label>\n                      <input class="form-control" placeholder="Email" type="text" name="username" value="<%= username %>">\n                      <p class="help-block"></p>\n                  </div>\n              </div>\n          </div>\n          <div class="row">\n              <div class="col-xs-12">\n                  <div class="form-group">\n                      <label>Password</label>\n                      <input class="form-control" placeholder="Password" type="password" name="password" value="<%= password %>" >\n                      <p class="help-block"></p>\n                  </div>\n              </div>\n          </div>\n          <div class="row">\n              <div class="col-xs-12">\n                  <div class="form-group">\n                      <label>Recordarme</label>\n                      <input id="remember" type="checkbox" value="remember-me" checked="true">\n                      <p class="help-block"></p>\n                  </div>\n              </div>\n          </div>\n          <button type="button" class="btn btn-lg btn-primary btn-block">Login</button>\n      </form>\n\n\n    </div>\n\n\n\n  </div>\n</div>\n'}),define("models/util/ModalGenericModel",["backbone"],function(t){var e=t.Model.extend({urlRoot:"modal",defaults:{},initialize:function(){}});return e}),define("text!templates/private/util/tplModalGeneric.html",[],function(){return'<div class="modal fade" id="modal-generic-dialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <!-- dialog body -->\n            <div class="modal-body">\n                <button type="button" class="close" data-dismiss="modal">&times;</button>\n                <%= message %>\n            </div>\n            <!-- dialog buttons -->\n            <div class="modal-footer">\n                <button id="mg-btn-cancel" data-bb-handler="cancel" type="button" class="btn btn-default"><%= labelCancel %></button>\n                <button id="mg-btn-confirm" data-bb-handler="confirm" type="button" class="btn btn-primary"><%= labelConfirm %></button>\n            </div>\n        </div>\n    </div>\n</div>'}),define("views/private/util/ModalGenericView",["jquery","backbone","core/BaseView","models/util/ModalGenericModel","text!templates/private/util/tplModalGeneric.html"],function(t,e,i,n,s){var o=i.extend({el:"#modal-generic",template:_.template(s),events:{"click #mg-btn-cancel":"clickCancel","click #mg-btn-confirm":"clickConfirm"},initialize:function(t){this.model=new n,this.callbackCancel=t.callbackCancel,this.callbackConfirm=t.callbackConfirm,"undefined"==typeof t.type&&(t.type="alert"),"undefined"==typeof t.message&&(t.message=" "),"undefined"==typeof t.labelCancel&&(t.labelCancel="Cancel"),"undefined"==typeof t.labelConfirm&&(t.labelConfirm="OK"),this.model.set({message:t.message,labelCancel:t.labelCancel,labelConfirm:t.labelConfirm}),this.type=t.type,this.render()},render:function(){this.$el.html(this.template(this.model.toJSON())),this.btnCancel=this.$el.find("#mg-btn-cancel"),this.btnConfirm=this.$el.find("#mg-btn-confirm"),"confirm"==this.type?this.btnCancel.show():this.btnCancel.hide(),this.$("#modal-generic-dialog").modal({backdrop:"static",keyboard:!1})},clickCancel:function(t){this.$("#modal-generic-dialog").modal("hide"),"function"==typeof this.callbackCancel&&this.callbackCancel(t),this.undelegateEvents()},clickConfirm:function(t){this.$("#modal-generic-dialog").modal("hide"),"function"==typeof this.callbackConfirm&&this.callbackConfirm(t),this.undelegateEvents()}});return o}),define("Session",["jquery","backbone","jquerycookie","views/private/util/ModalGenericView"],function(t,e,i,n){var s=e.Model.extend({url:"session/login",defaults:{username:"",password:""},initialize:function(){this.set("authenticated",!1)},validation:{username:{required:!0,pattern:"email",msg:"Por favor especifique un email correcto"},password:{required:!0,pattern:/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{4,8}$/,msg:"El password debe tener por lo menos una letra mayuscula, una minuscula y un numero"}},login:function(e,i,s,o){var r=e,a=this;this.save({username:i,password:s},{wait:!0,success:function(e,n){a.set("authenticated",!0),a.set("username",i),o&&t.cookie("auth_token",JSON.stringify({username:i,token:e.get("token")})),t.ajaxSetup({headers:{"X-Auth-Token":e.get("token")}}),console.log("Successfully saved!"),r()},error:function(e,i){a.set("authenticated",!1),a.set("username",""),t.removeCookie("auth_token"),new n({message:"Usuario y/o contraseña incorrecta"})}})},logout:function(e){var i=this,n=e,o=new s;o.save({username:this.get("username"),logout:"logout"},{wait:!0,success:function(e,s){i.clear(),t.ajaxSetup({headers:{"X-Auth-Token":""}}),o.set("username",""),t.removeCookie("auth_token"),console.log("Successfully saved!"),n()},error:function(t,e){console.log(t.toJSON()),console.log("error.responseText")}})}});return new s}),define("views/LoginView",["jquery","core/BaseView","backbone","backboneValidation","jquerySerializeObject","models/UserModel","text!templates/tplLogin.html","Session"],function(t,e,i,n,s,o,r,a){var l=e.extend({template:_.template(r),events:{"click .btn.btn-lg.btn-primary.btn-block":"login"},initialize:function(){this.$el.find(".tip").tooltip(),console.log("initialize login"),this.model=new o,Backbone.Validation.bind(this,{valid:function(t,e,i){var n=t.$("[name="+e+"]"),s=n.closest(".form-group");t.model.preValidate(e,n.val())||(s.removeClass("has-error"),s.addClass("has-success"))},invalid:function(t,e,i,n){var s=t.$("[name="+e+"]"),o=s.closest(".form-group");s.popover({content:i,placement:"left"}),s.popover("show"),o.addClass("has-error")}})},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},remove:function(){return Backbone.Validation.unbind(this),Backbone.View.prototype.remove.apply(this,arguments)},login:function(){var e=this.$el.find("#form-login").serializeObject();if(this.model.set(e),this.model.set({passwordConfirm:this.model.get("password")}),this.model.isValid(!0)){var i=this.model.get("username"),n=this.model.get("password"),s=t("#remember").is(":checked");a.login(function(t){Backbone.history.navigate("admin",{trigger:!0})},i,n,s)}}});return l}),define("text!templates/tplSignup.html",[],function(){return'<div class="row signup-wrap">\n  <div class="center-box-login">\n\n    <div class="panel panel-default">\n      <form id="form-user" role="form" class="form-signup">\n        <div class="form-signup-heading">\n          <h3 class="text-center">Bienvenido a entuliga!</h3>\n        </div>\n\n        <div class="row">\n            <div class="col-xs-12">\n                <div class="form-group">\n                    <label>Email</label>\n                    <input class="form-control signup-username" placeholder="Email" type="text" name="username" value="<%= username %>">\n                </div>\n            </div>\n\n        </div>\n        <div class="row">\n            <div class="col-xs-12">\n                <div class="form-group">\n                    <label>Password</label>\n                    <input class="form-control signup-pass" placeholder="Password" type="password" name="password" value="<%= password %>">\n                </div>\n            </div>\n        </div>\n\n        <div class="row">\n            <div class="col-xs-12">\n                <div class="form-group">\n                    <label>Confirm Password</label>\n                    <input class="form-control signup-pass-confirm" placeholder="Confirm Password" type="password" name="passwordConfirm" value="<%= passwordConfirm %>">\n                </div>\n            </div>\n        </div>\n        <button id="btn-ok" type="button" class="btn btn-lg btn-primary btn-block">Registrar</button>\n      </form>\n    </div>\n  </div>\n</div>\n';
}),define("views/SignupView",["jquery","core/BaseView","backbone","backboneValidation","jquerySerializeObject","models/UserModel","views/private/util/ModalGenericView","text!templates/tplSignup.html"],function(t,e,i,n,s,o,r,a){var l=e.extend({template:_.template(a),events:{"click #btn-ok":"signup","focus .signup-username":"showDetailsUsername","focusout .signup-username":"hideDetailsUsername","focus .signup-pass":"showDetailsPass","focusout .signup-pass":"hideDetailsPass","focus .signup-pass-confirm":"showDetailsPassConfirm","focusout .signup-pass-confirm":"hideDetailsPassConfirm"},initialize:function(){this.model=new o,this.model.once("sync",this.saveUserSuccess),this.model.once("error",this.saveUserError),this.$("input[name='username']").focus(),Backbone.Validation.bind(this,{valid:function(t,e,i){var n=t.$("[name="+e+"]"),s=n.closest(".form-group");t.model.preValidate(e,n.val())||(s.removeClass("has-error"),s.addClass("has-success"))},invalid:function(t,e,i,n){var s=t.$("[name="+e+"]"),o=s.closest(".form-group");s.popover({content:i,placement:"left"}),s.popover("show"),o.addClass("has-error")}}),app.that=this},onDomRefresh:function(){this.focusFirstInput()},focusFirstInput:function(){this.$(":input:visible:enabled:first").focus()},render:function(){return this.$("[name=username]").focus(),this.$el.html(this.template(this.model.toJSON())),this},signup:function(){var t=this.$el.find("#form-user").serializeObject();this.model.set(t),this.model.isValid(!0)&&this.model.save()},saveUserSuccess:function(t,e,i){console.log("OPTIONS",i),console.log("RESPONSE",e),console.log("MODEL",t),"undefined"!=typeof app.that&&(new r({message:"Revise su email, para confirmar su registro"}),app.that.destroyView(),delete app.that)},saveUserError:function(t,e,i){new r({message:"Se presento un error al registrar el usuario"})},showDetailsUsername:function(){this.model.preValidate("username",this.$(".signup-username").val()),this.$(".signup-username").popover({content:"Ingresa tu dirección de correo electronico.",placement:"left"}),this.$(".signup-username").popover("show")},hideDetailsUsername:function(){this.$(".signup-username").popover("destroy")},showDetailsPass:function(){this.$(".signup-pass").popover({content:"El password debe tener por lo menos una letra mayuscula, una minuscula y un numero",placement:"left"}),this.$(".signup-pass").popover("show")},hideDetailsPass:function(){this.$(".signup-pass").popover("destroy")},showDetailsPassConfirm:function(){this.$(".signup-pass-confirm").popover({content:"Confirmar password",placement:"left"}),this.$(".signup-pass-confirm").popover("show")},hideDetailsPassConfirm:function(){this.$(".signup-pass-confirm").popover("destroy")}});return l}),define("models/UserTokenModel",["backbone"],function(t){var e=t.Model.extend({urlRoot:"usertoken",defaults:{token:"",username:"",tipo:"",fechaVigencia:(new Date).getTime()+5},isAuthorized:function(){return Boolean(this.get("token"))},validation:{token:{required:!0},username:{required:!0,pattern:"email"},tipo:{required:!0},fechaVigencia:{required:!0}}});return e}),define("text!templates/tplTokenChangePass.html",[],function(){return'<div class="row">\n    <div class="col-md-12">\n        <form id="form-user" role="form">\n            <p>Especifica tu nuevo password</p>\n            <div class="row">\n                <div class="col-xs-6">\n                    <div class="form-group">\n                        <label>Password</label>\n                        <input class="form-control" placeholder="Password" type="password" name="password" value="<%= password %>">\n                        <p class="help-block"></p>\n                    </div>\n                </div>\n            </div>\n            <div class="row">\n                <div class="col-xs-6">\n                    <div class="form-group">\n                        <label>Confirm Password</label>\n                        <input class="form-control" placeholder="Confirm Password" type="password" name="passwordConfirm" value="<%= passwordConfirm %>">\n                        <p class="help-block"></p>\n                    </div>\n                </div>\n            </div>\n            <div class="row">\n                <div class="modal-footer">\n                    <button id="btn-ok" type="button" class="btn btn-success">Cambiar Password</button>\n                </div>\n            </div>\n        </form>\n    </div>\n</div>'}),define("views/TokenChangePassView",["jquery","core/BaseView","models/UserModel","views/private/util/ModalGenericView","text!templates/tplTokenChangePass.html"],function(t,e,i,n,s){var o=e.extend({template:_.template(s),events:{"click #btn-ok":"changePass"},initialize:function(t){this.model=new i,this.listenTo(this.model,"sync",this.syncUserToken),this.listenTo(this.model,"error",this.errorUserToken),this.model.set({id:"no-replay@entuliga.com",username:"no-replay@entuliga.com",token:t.token}),Backbone.Validation.bind(this)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},changePass:function(){var t=this.$el.find("#form-user").serializeObject();this.model.set(t),this.model.isValid(!0)&&this.model.save()},syncUserToken:function(){new n({message:"Su password se ha restaurado",callbackConfirm:function(t){Backbone.history.navigate("login",{trigger:!0})}})},errorUserToken:function(t,e){new n({message:e.responseJSON.message})}});return o}),define("text!templates/tplTokenValidate.html",[],function(){return'<div class="row">\n    <div class="col-md-12">\n        <div class="jumbotron">\n            <h1>¡Bienvenido a entuliga.com!</h1>\n            <p>Hola <%= username %>, ya estas registrado, puedes utilizar la plataforma.</p>\n        </div>\n    </div>\n</div>'}),define("text!templates/tplTokenInValid.html",[],function(){return'<div class="row">\n    <div class="col-md-12">\n        <div class="jumbotron">\n            <p>Se presento un error en la plataforma: <%= message %></p>\n        </div>\n    </div>\n</div>'}),define("views/TokenValidateView",["jquery","core/BaseView","models/UserTokenModel","views/TokenChangePassView","text!templates/tplTokenValidate.html","text!templates/tplTokenInValid.html"],function(t,e,i,n,s,o){var r=e.extend({template:_.template(s),templateInValid:_.template(o),events:{"click #btn-ok":"changePass"},initialize:function(t){this.model=new i,this.listenTo(this.model,"sync",this.syncUserToken),this.listenTo(this.model,"error",this.errorUserToken),this.model.set({id:t.token}),this.model.fetch(),Backbone.Validation.bind(this)},render:function(){return this},syncUserToken:function(){"VALID_EMAIL"===this.model.get("tipo")?this.$el.html(this.template(this.model.toJSON())):this.$el.html(this.templateInValid({message:"Token no valido."}))},errorUserToken:function(t,e){this.$el.html(this.templateInValid(e.responseJSON))}});return r}),define("text!templates/private/perfil/tplPerfilAdmin.html",[],function(){return'<div class="row">\n    <div class="col-md-12">\n      <div class="main-box">\n        <div class="panel panel-primary">\n\n            <div class="panel-heading">\n                <h3 class="panel-title">Perfil de <%= username %></h3>\n            </div>\n            <div class="panel-body">\n                <div class="row">\n                    <div class="col-md-12">\n                        <div class="jumbotron">\n                            <h1>¡Bienvenido a entuliga.com!</h1>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n      </div>\n\n    </div>\n</div>\n'}),define("views/private/perfil/PerfilAdminView",["jquery","backbone","core/BaseView","models/UserModel","views/private/util/ModalGenericView","text!templates/private/perfil/tplPerfilAdmin.html","Session"],function(t,e,i,n,s,o,r){var a=i.extend({template:_.template(o),events:{},initialize:function(){this.model=new n,this.listenTo(this.model,"sync",this.saveUserSuccess),this.listenTo(this.model,"error",this.saveUserError),this.model.set({id:r.get("username")}),this.model.fetch()},render:function(){return this},saveUserSuccess:function(t,e,i){this.$el.html(this.template(this.model.toJSON()))},saveUserError:function(t,e,i){new s({message:e.responseJSON.message})}});return a}),define("text!templates/private/tplMainAdminNav.html",[],function(){return'<div class="container">\n    <div class="container-fluid">\n        <div class="navbar-header">\n            <a id="home" class="navbar-brand title-entuliga" href="#">entuliga</a>\n        </div>\n        <div class="collapse navbar-collapse">\n            <ul class="nav navbar-nav menu-liga">\n                <li class=" nav-item-entuliga">\n                    <a href="#admin/perfil">Perfil</a>\n                </li>\n                <li class="nav-item-entuliga">\n                    <a href="#admin/ligas">Ligas</a>\n                </li>\n                <li class="nav-item-entuliga">\n                    <a href="#admin/torneos">Torneos</a>\n                </li>\n                <li class="nav-item-entuliga">\n                    <a href="#admin/equipos">Equipos</a>\n                </li>\n                <li class="nav-item-entuliga">\n                    <a href="#admin/jugadores">Jugadores</a>\n                </li>\n                <li class="nav-item-entuliga">\n                    <a href="#admin/arbitros">Arbitros</a>\n                </li>\n                <li class="nav-item-entuliga">\n                    <a href="#admin/canchas">Canchas</a>\n                </li>\n            </ul>\n            <p class="nav navbar-right">\n                <button id="logout" type="button" class="btn btn-danger navbar-btn">Salir</button>\n            </p>\n        </div>\n    </div>\n</div>\n'}),define("views/private/MainAdminNavView",["jquery","core/BaseView","text!templates/private/tplMainAdminNav.html","Session"],function(t,e,i,n){var s=e.extend({el:t("#hotel-nav"),template:_.template(i),events:{"click #logout":"logout","click #home":"homeAdmin","click li.nav-item-entuliga":"activeMenu"},initialize:function(){this.render()},render:function(){return this.$el.html(this.template()),this},logout:function(){n.logout(function(t){Backbone.history.navigate("",{trigger:!0})})},homeAdmin:function(){Backbone.history.navigate("admin",{trigger:!0})},activeMenu:function(e){console.log("click"),console.log(e),console.log(t(e.target).parent()),t(e.target).parent().addClass("active")},destroy_view:function(){console.log("remove"),this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}});return s}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one("bsTransitionEnd",function(){i=!0});var s=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(s,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),s=i.data("bs.alert");s||i.data("bs.alert",s=new n(this)),"string"==typeof e&&s[e].call(i)})}var i='[data-dismiss="alert"]',n=function(e){t(e).on("click",i,this.close)};n.VERSION="3.3.1",n.TRANSITION_DURATION=150,n.prototype.close=function(e){function i(){r.detach().trigger("closed.bs.alert").remove()}var s=t(this),o=s.attr("data-target");o||(o=s.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,""));var r=t(o);e&&e.preventDefault(),r.length||(r=s.closest(".alert")),r.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(r.removeClass("in"),t.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i())};var s=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=s,this},t(document).on("click.bs.alert.data-api",i,n.prototype.close)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.button"),o="object"==typeof e&&e;s||n.data("bs.button",s=new i(this,o)),"toggle"==e?s.toggle():e&&s.setState(e)})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.3.1",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",n=this.$element,s=n.is("input")?"val":"html",o=n.data();e+="Text",null==o.resetText&&n.data("resetText",n[s]()),setTimeout(t.proxy(function(){n[s](null==o[e]?this.options[e]:o[e]),"loadingText"==e?(this.isLoading=!0,n.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")&&(i.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&i.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));t&&this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var n=t(i.target);n.hasClass("btn")||(n=n.closest(".btn")),e.call(n,"toggle"),i.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.carousel"),o=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e),r="string"==typeof e?e:o.slide;s||n.data("bs.carousel",s=new i(this,o)),"number"==typeof e?s.to(e):r?s[r]():o.interval&&s.pause().cycle()})}var i=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=this.sliding=this.interval=this.$active=this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};i.VERSION="3.3.1",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.getItemForDirection=function(t,e){var i="prev"==t?-1:1,n=this.getItemIndex(e),s=(n+i)%this.$items.length;return this.$items.eq(s)},i.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",this.$items.eq(t))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(e,n){var s=this.$element.find(".item.active"),o=n||this.getItemForDirection(e,s),r=this.interval,a="next"==e?"left":"right",l="next"==e?"first":"last",c=this;if(!o.length){if(!this.options.wrap)return;o=this.$element.find(".item")[l]()}if(o.hasClass("active"))return this.sliding=!1;var d=o[0],h=t.Event("slide.bs.carousel",{relatedTarget:d,direction:a});if(this.$element.trigger(h),!h.isDefaultPrevented()){if(this.sliding=!0,r&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var u=t(this.$indicators.children()[this.getItemIndex(o)]);u&&u.addClass("active")}var p=t.Event("slid.bs.carousel",{relatedTarget:d,direction:a});return t.support.transition&&this.$element.hasClass("slide")?(o.addClass(e),o[0].offsetWidth,s.addClass(a),o.addClass(a),s.one("bsTransitionEnd",function(){o.removeClass([e,a].join(" ")).addClass("active"),s.removeClass(["active",a].join(" ")),c.sliding=!1,setTimeout(function(){c.$element.trigger(p)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(s.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(p)),r&&this.cycle(),this}};var n=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this};var s=function(i){var n,s=t(this),o=t(s.attr("data-target")||(n=s.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(o.hasClass("carousel")){var r=t.extend({},o.data(),s.data()),a=s.attr("data-slide-to");a&&(r.interval=!1),e.call(o,r),a&&o.data("bs.carousel").to(a),i.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",s).on("click.bs.carousel.data-api","[data-slide-to]",s),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),+function(t){"use strict";function e(e){var i,n=e.attr("data-target")||(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return t(n)}function i(e){return this.each(function(){var i=t(this),s=i.data("bs.collapse"),o=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e);!s&&o.toggle&&"show"==e&&(o.toggle=!1),s||i.data("bs.collapse",s=new n(this,o)),"string"==typeof e&&s[e]()})}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.$trigger=t(this.options.trigger).filter('[href="#'+e.id+'"], [data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};n.VERSION="3.3.1",n.TRANSITION_DURATION=350,n.DEFAULTS={toggle:!0,trigger:'[data-toggle="collapse"]'},n.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,s=this.$parent&&this.$parent.find("> .panel").children(".in, .collapsing");if(!(s&&s.length&&(e=s.data("bs.collapse"),e&&e.transitioning))){var o=t.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){s&&s.length&&(i.call(s,"hide"),e||s.data("bs.collapse",null));var r=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[r](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[r](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return a.call(this);var l=t.camelCase(["scroll",r].join("-"));this.$element.one("bsTransitionEnd",t.proxy(a,this)).emulateTransitionEnd(n.TRANSITION_DURATION)[r](this.$element[0][l])}}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var s=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[i](0).one("bsTransitionEnd",t.proxy(s,this)).emulateTransitionEnd(n.TRANSITION_DURATION):s.call(this)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},n.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(i,n){var s=t(n);this.addAriaAndCollapsedClass(e(s),s)},this)).end()},n.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var s=t.fn.collapse;t.fn.collapse=i,t.fn.collapse.Constructor=n,t.fn.collapse.noConflict=function(){return t.fn.collapse=s,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(n){var s=t(this);s.attr("data-target")||n.preventDefault();var o=e(s),r=o.data("bs.collapse"),a=r?"toggle":t.extend({},s.data(),{trigger:this});i.call(o,a)})}(jQuery),+function(t){"use strict";function e(e){e&&3===e.which||(t(s).remove(),t(o).each(function(){var n=t(this),s=i(n),o={relatedTarget:this};s.hasClass("open")&&(s.trigger(e=t.Event("hide.bs.dropdown",o)),e.isDefaultPrevented()||(n.attr("aria-expanded","false"),s.removeClass("open").trigger("hidden.bs.dropdown",o)))}))}function i(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&t(i);return n&&n.length?n:e.parent()}function n(e){return this.each(function(){var i=t(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new r(this)),"string"==typeof e&&n[e].call(i)})}var s=".dropdown-backdrop",o='[data-toggle="dropdown"]',r=function(e){t(e).on("click.bs.dropdown",this.toggle)};r.VERSION="3.3.1",r.prototype.toggle=function(n){var s=t(this);if(!s.is(".disabled, :disabled")){var o=i(s),r=o.hasClass("open");if(e(),!r){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var a={relatedTarget:this};if(o.trigger(n=t.Event("show.bs.dropdown",a)),n.isDefaultPrevented())return;s.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger("shown.bs.dropdown",a)}return!1}},r.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var n=t(this);if(e.preventDefault(),e.stopPropagation(),!n.is(".disabled, :disabled")){var s=i(n),r=s.hasClass("open");if(!r&&27!=e.which||r&&27==e.which)return 27==e.which&&s.find(o).trigger("focus"),n.trigger("click");var a=" li:not(.divider):visible a",l=s.find('[role="menu"]'+a+', [role="listbox"]'+a);if(l.length){var c=l.index(e.target);38==e.which&&c>0&&c--,40==e.which&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var a=t.fn.dropdown;t.fn.dropdown=n,t.fn.dropdown.Constructor=r,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=a,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",o,r.prototype.toggle).on("keydown.bs.dropdown.data-api",o,r.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',r.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',r.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e,n){return this.each(function(){var s=t(this),o=s.data("bs.modal"),r=t.extend({},i.DEFAULTS,s.data(),"object"==typeof e&&e);o||s.data("bs.modal",o=new i(this,r)),"string"==typeof e?o[e](n):r.show&&o.show(n)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.1",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var n=this,s=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(s),this.isShown||s.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var s=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.options.backdrop&&n.adjustBackdrop(),n.adjustDialog(),s&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var o=t.Event("shown.bs.modal",{relatedTarget:e});s?n.$element.find(".modal-dialog").one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(i.TRANSITION_DURATION):n.$element.trigger("focus").trigger(o)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var n=this,s=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=t.support.transition&&s;if(this.$backdrop=t('<div class="modal-backdrop '+s+'" />').prependTo(this.$element).on("click.dismiss.bs.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;o?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var r=function(){n.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",r).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):r()}else e&&e()},i.prototype.handleUpdate=function(){this.options.backdrop&&this.adjustBackdrop(),this.adjustDialog()},i.prototype.adjustBackdrop=function(){this.$backdrop.css("height",0).css("height",this.$element[0].scrollHeight)},i.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){this.bodyIsOverflowing=document.body.scrollHeight>document.documentElement.clientHeight,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var n=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=t(this),s=n.attr("href"),o=t(n.attr("data-target")||s&&s.replace(/.*(?=#[^\s]+$)/,"")),r=o.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(s)&&s},o.data(),n.data());n.is("a")&&i.preventDefault(),o.one("show.bs.modal",function(t){t.isDefaultPrevented()||o.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),e.call(o,r,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.tooltip"),o="object"==typeof e&&e,r=o&&o.selector;(s||"destroy"!=e)&&(r?(s||n.data("bs.tooltip",s={}),s[r]||(s[r]=new i(this,o))):s||n.data("bs.tooltip",s=new i(this,o)),"string"==typeof e&&s[e]())})}var i=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};i.VERSION="3.3.1",i.TRANSITION_DURATION=150,i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(e,i,n){this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport);for(var s=this.options.trigger.split(" "),o=s.length;o--;){var r=s[o];if("click"==r)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=r){var a="hover"==r?"mouseenter":"focusin",l="hover"==r?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},i.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,n){i[t]!=n&&(e[t]=n)}),e},i.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i&&i.$tip&&i.$tip.is(":visible")?void(i.hoverState="in"):(i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},i.prototype.leave=function(e){
var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide()},i.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var n=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!n)return;var s=this,o=this.tip(),r=this.getUID(this.type);this.setContent(),o.attr("id",r),this.$element.attr("aria-describedby",r),this.options.animation&&o.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(a);c&&(a=a.replace(l,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element);var d=this.getPosition(),h=o[0].offsetWidth,u=o[0].offsetHeight;if(c){var p=a,f=this.options.container?t(this.options.container):this.$element.parent(),g=this.getPosition(f);a="bottom"==a&&d.bottom+u>g.bottom?"top":"top"==a&&d.top-u<g.top?"bottom":"right"==a&&d.right+h>g.width?"left":"left"==a&&d.left-h<g.left?"right":a,o.removeClass(p).addClass(a)}var m=this.getCalculatedOffset(a,d,h,u);this.applyPlacement(m,a);var v=function(){var t=s.hoverState;s.$element.trigger("shown.bs."+s.type),s.hoverState=null,"out"==t&&s.leave(s)};t.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",v).emulateTransitionEnd(i.TRANSITION_DURATION):v()}},i.prototype.applyPlacement=function(e,i){var n=this.tip(),s=n[0].offsetWidth,o=n[0].offsetHeight,r=parseInt(n.css("margin-top"),10),a=parseInt(n.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(a)&&(a=0),e.top=e.top+r,e.left=e.left+a,t.offset.setOffset(n[0],t.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),n.addClass("in");var l=n[0].offsetWidth,c=n[0].offsetHeight;"top"==i&&c!=o&&(e.top=e.top+o-c);var d=this.getViewportAdjustedDelta(i,e,l,c);d.left?e.left+=d.left:e.top+=d.top;var h=/top|bottom/.test(i),u=h?2*d.left-s+l:2*d.top-o+c,p=h?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(u,n[0][p],h)},i.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},i.prototype.hide=function(e){function n(){"in"!=s.hoverState&&o.detach(),s.$element.removeAttr("aria-describedby").trigger("hidden.bs."+s.type),e&&e()}var s=this,o=this.tip(),r=t.Event("hide.bs."+this.type);return this.$element.trigger(r),r.isDefaultPrevented()?void 0:(o.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n(),this.hoverState=null,this)},i.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(e){e=e||this.$element;var i=e[0],n="BODY"==i.tagName,s=i.getBoundingClientRect();null==s.width&&(s=t.extend({},s,{width:s.right-s.left,height:s.bottom-s.top}));var o=n?{top:0,left:0}:e.offset(),r={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},a=n?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},s,r,a,o)},i.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},i.prototype.getViewportAdjustedDelta=function(t,e,i,n){var s={top:0,left:0};if(!this.$viewport)return s;var o=this.options.viewport&&this.options.viewport.padding||0,r=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-o-r.scroll,l=e.top+o-r.scroll+n;a<r.top?s.top=r.top-a:l>r.top+r.height&&(s.top=r.top+r.height-l)}else{var c=e.left-o,d=e.left+o+i;c<r.left?s.left=r.left-c:d>r.width&&(s.left=r.left+r.width-d)}return s},i.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},i.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},i.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(e){var i=this;e&&(i=t(e.currentTarget).data("bs."+this.type),i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type)})};var n=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=i,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.popover"),o="object"==typeof e&&e,r=o&&o.selector;(s||"destroy"!=e)&&(r?(s||n.data("bs.popover",s={}),s[r]||(s[r]=new i(this,o))):s||n.data("bs.popover",s=new i(this,o)),"string"==typeof e&&s[e]())})}var i=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.3.1",i.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},i.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var n=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=i,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(jQuery),+function(t){"use strict";function e(i,n){var s=t.proxy(this.process,this);this.$body=t("body"),this.$scrollElement=t(t(i).is("body")?window:i),this.options=t.extend({},e.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",s),this.refresh(),this.process()}function i(i){return this.each(function(){var n=t(this),s=n.data("bs.scrollspy"),o="object"==typeof i&&i;s||n.data("bs.scrollspy",s=new e(this,o)),"string"==typeof i&&s[i]()})}e.VERSION="3.3.1",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e="offset",i=0;t.isWindow(this.$scrollElement[0])||(e="position",i=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var n=this;this.$body.find(this.selector).map(function(){var n=t(this),s=n.data("target")||n.attr("href"),o=/^#./.test(s)&&t(s);return o&&o.length&&o.is(":visible")&&[[o[e]().top+i,s]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),s=this.offsets,o=this.targets,r=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=n)return r!=(t=o[o.length-1])&&this.activate(t);if(r&&e<s[0])return this.activeTarget=null,this.clear();for(t=s.length;t--;)r!=o[t]&&e>=s[t]&&(!s[t+1]||e<=s[t+1])&&this.activate(o[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var n=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.tab");s||n.data("bs.tab",s=new i(this)),"string"==typeof e&&s[e]()})}var i=function(e){this.element=t(e)};i.VERSION="3.3.1",i.TRANSITION_DURATION=150,i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),n=e.data("target");if(n||(n=e.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var s=i.find(".active:last a"),o=t.Event("hide.bs.tab",{relatedTarget:e[0]}),r=t.Event("show.bs.tab",{relatedTarget:s[0]});if(s.trigger(o),e.trigger(r),!r.isDefaultPrevented()&&!o.isDefaultPrevented()){var a=t(n);this.activate(e.closest("li"),i),this.activate(a,a.parent(),function(){s.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:s[0]})})}}},i.prototype.activate=function(e,n,s){function o(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),s&&s()}var r=n.find("> .active"),a=s&&t.support.transition&&(r.length&&r.hasClass("fade")||!!n.find("> .fade").length);r.length&&a?r.one("bsTransitionEnd",o).emulateTransitionEnd(i.TRANSITION_DURATION):o(),r.removeClass("in")};var n=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=n,this};var s=function(i){i.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',s).on("click.bs.tab.data-api",'[data-toggle="pill"]',s)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.affix"),o="object"==typeof e&&e;s||n.data("bs.affix",s=new i(this,o)),"string"==typeof e&&s[e]()})}var i=function(e,n){this.options=t.extend({},i.DEFAULTS,n),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.3.1",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(t,e,i,n){var s=this.$target.scrollTop(),o=this.$element.offset(),r=this.$target.height();if(null!=i&&"top"==this.affixed)return i>s?"top":!1;if("bottom"==this.affixed)return null!=i?s+this.unpin<=o.top?!1:"bottom":t-n>=s+r?!1:"bottom";var a=null==this.affixed,l=a?s:o.top,c=a?r:e;return null!=i&&i>=l?"top":null!=n&&l+c>=t-n?"bottom":!1},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),n=this.options.offset,s=n.top,o=n.bottom,r=t("body").height();"object"!=typeof n&&(o=s=n),"function"==typeof s&&(s=n.top(this.$element)),"function"==typeof o&&(o=n.bottom(this.$element));var a=this.getState(r,e,s,o);if(this.affixed!=a){null!=this.unpin&&this.$element.css("top","");var l="affix"+(a?"-"+a:""),c=t.Event(l+".bs.affix");if(this.$element.trigger(c),c.isDefaultPrevented())return;this.affixed=a,this.unpin="bottom"==a?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==a&&this.$element.offset({top:r-e-o})}};var n=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),n=i.data();n.offset=n.offset||{},null!=n.offsetBottom&&(n.offset.bottom=n.offsetBottom),null!=n.offsetTop&&(n.offset.top=n.offsetTop),e.call(i,n)})})}(jQuery),define("bootstrap",["jquery"],function(){}),!function(t){"use strict";function e(e){var i=[{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xC7-\xE7]/g,ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}];return t.each(i,function(){e=e.replace(this.re,this.ch)}),e}function i(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i="(?:"+Object.keys(e).join("|")+")",n=new RegExp(i),s=new RegExp(i,"g"),o=null==t?"":""+t;return n.test(o)?o.replace(s,function(t){return e[t]}):o}function n(e,i){var n=arguments,o=e,r=i;[].shift.apply(n);var a,l=this.each(function(){var e=t(this);if(e.is("select")){var i=e.data("selectpicker"),l="object"==typeof o&&o;if(i){if(l)for(var c in l)l.hasOwnProperty(c)&&(i.options[c]=l[c])}else{var d=t.extend({},s.DEFAULTS,t.fn.selectpicker.defaults||{},e.data(),l);e.data("selectpicker",i=new s(this,d,r))}"string"==typeof o&&(a=i[o]instanceof Function?i[o].apply(i,n):i.options[o])}});return"undefined"!=typeof a?a:l}String.prototype.includes||!function(){var t={}.toString,e=function(){try{var t={},e=Object.defineProperty,i=e(t,t,t)&&e}catch(n){}return i}(),i="".indexOf,n=function(e){if(null==this)throw TypeError();var n=String(this);if(e&&"[object RegExp]"==t.call(e))throw TypeError();var s=n.length,o=String(e),r=o.length,a=arguments.length>1?arguments[1]:void 0,l=a?Number(a):0;l!=l&&(l=0);var c=Math.min(Math.max(l,0),s);return r+c>s?!1:-1!=i.call(n,o,l)};e?e(String.prototype,"includes",{value:n,configurable:!0,writable:!0}):String.prototype.includes=n}(),String.prototype.startsWith||!function(){var t=function(){try{var t={},e=Object.defineProperty,i=e(t,t,t)&&e}catch(n){}return i}(),e={}.toString,i=function(t){if(null==this)throw TypeError();var i=String(this);if(t&&"[object RegExp]"==e.call(t))throw TypeError();var n=i.length,s=String(t),o=s.length,r=arguments.length>1?arguments[1]:void 0,a=r?Number(r):0;a!=a&&(a=0);var l=Math.min(Math.max(a,0),n);if(o+l>n)return!1;for(var c=-1;++c<o;)if(i.charCodeAt(l+c)!=s.charCodeAt(c))return!1;return!0};t?t(String.prototype,"startsWith",{value:i,configurable:!0,writable:!0}):String.prototype.startsWith=i}(),t.expr[":"].icontains=function(e,i,n){var s=t(e),o=(s.data("tokens")||s.text()).toUpperCase();return o.includes(n[3].toUpperCase())},t.expr[":"].ibegins=function(e,i,n){var s=t(e),o=(s.data("tokens")||s.text()).toUpperCase();return o.startsWith(n[3].toUpperCase())},t.expr[":"].aicontains=function(e,i,n){var s=t(e),o=(s.data("tokens")||s.data("normalizedText")||s.text()).toUpperCase();return o.includes(o,n[3])},t.expr[":"].aibegins=function(e,i,n){var s=t(e),o=(s.data("tokens")||s.data("normalizedText")||s.text()).toUpperCase();return o.startsWith(n[3].toUpperCase())};var s=function(e,i,n){n&&(n.stopPropagation(),n.preventDefault()),this.$element=t(e),this.$newElement=null,this.$button=null,this.$menu=null,this.$lis=null,this.options=i,null===this.options.title&&(this.options.title=this.$element.attr("title")),this.val=s.prototype.val,this.render=s.prototype.render,this.refresh=s.prototype.refresh,this.setStyle=s.prototype.setStyle,this.selectAll=s.prototype.selectAll,this.deselectAll=s.prototype.deselectAll,this.destroy=s.prototype.remove,this.remove=s.prototype.remove,this.show=s.prototype.show,this.hide=s.prototype.hide,this.init()};s.VERSION="1.6.4",s.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(t){return 1==t?"{0} item selected":"{0} items selected"},maxOptionsText:function(t,e){return[1==t?"Limit reached ({n} item max)":"Limit reached ({n} items max)",1==e?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",doneButton:!1,doneButtonText:"Close",multipleSeparator:", ",style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:"glyphicon",tickIcon:"glyphicon-ok",maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1},s.prototype={constructor:s,init:function(){var e=this,i=this.$element.attr("id");this.$element.hide(),this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$newElement=this.createView(),this.$element.after(this.$newElement),this.$button=this.$newElement.children("button"),this.$menu=this.$newElement.children(".dropdown-menu"),this.$searchbox=this.$menu.find("input"),this.options.dropdownAlignRight&&this.$menu.addClass("dropdown-menu-right"),"undefined"!=typeof i&&(this.$button.attr("data-id",i),t('label[for="'+i+'"]').click(function(t){t.preventDefault(),e.$button.focus()})),this.checkDisabled(),this.clickListener(),this.options.liveSearch&&this.liveSearchListener(),this.render(),this.liHeight(),this.setStyle(),this.setWidth(),this.options.container&&this.selectPosition(),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile()},createDropdown:function(){var e=this.multiple?" show-tick":"",n=this.$element.parent().hasClass("input-group")?" input-group-btn":"",s=this.autofocus?" autofocus":"",o=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"",r=this.options.liveSearch?'<div class="bs-searchbox"><input type="text" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+i(this.options.liveSearchPlaceholder)+'"')+"></div>":"",a=this.multiple&&this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-group-sm btn-block"><button class="actions-btn bs-select-all btn btn-default">'+this.options.selectAllText+'</button><button class="actions-btn bs-deselect-all btn btn-default">'+this.options.deselectAllText+"</button></div></div>":"",l=this.multiple&&this.options.doneButton?'<div class="bs-donebutton"><div class="btn-group btn-block"><button class="btn btn-sm btn-default">'+this.options.doneButtonText+"</button></div></div>":"",c='<div class="btn-group bootstrap-select'+e+n+'"><button type="button" class="btn dropdown-toggle" data-toggle="dropdown"'+s+'><span class="filter-option pull-left"></span>&nbsp;<span class="caret"></span></button><div class="dropdown-menu open">'+o+r+a+'<ul class="dropdown-menu inner" role="menu"></ul>'+l+"</div></div>";return t(c)},createView:function(){var t=this.createDropdown(),e=this.createLi();return t.find("ul").append(e),t},reloadLi:function(){this.destroyLi();var t=this.createLi();this.$menu.find("ul").append(t)},destroyLi:function(){this.$menu.find("li").remove()},createLi:function(){var n=this,s=[],o=0,r=function(t,e,i,n){return"<li"+("undefined"!=typeof i&""!==i?' class="'+i+'"':"")+("undefined"!=typeof e&null!==e?' data-original-index="'+e+'"':"")+("undefined"!=typeof n&null!==n?'data-optgroup="'+n+'"':"")+">"+t+"</li>"},a=function(t,s,o,r){return'<a tabindex="0"'+("undefined"!=typeof s?' class="'+s+'"':"")+("undefined"!=typeof o?' style="'+o+'"':"")+' data-normalized-text="'+e(i(t))+'"'+("undefined"!=typeof r||null!==r?' data-tokens="'+r+'"':"")+">"+t+'<span class="'+n.options.iconBase+" "+n.options.tickIcon+' check-mark"></span></a>'};return this.$element.find("option").each(function(e){var i=t(this),l=i.attr("class")||"",c=i.attr("style"),d=i.data("content")?i.data("content"):i.html(),h=i.data("tokens")?i.data("tokens"):null,u="undefined"!=typeof i.data("subtext")?'<small class="text-muted">'+i.data("subtext")+"</small>":"",p="undefined"!=typeof i.data("icon")?'<span class="'+n.options.iconBase+" "+i.data("icon")+'"></span> ':"",f=i.is(":disabled")||i.parent().is(":disabled");if(""!==p&&f&&(p="<span>"+p+"</span>"),i.data("content")||(d=p+'<span class="text">'+d+u+"</span>"),!n.options.hideDisabled||!f)if(i.parent().is("optgroup")&&i.data("divider")!==!0){if(0===i.index()){o+=1;var g=i.parent().attr("label"),m="undefined"!=typeof i.parent().data("subtext")?'<small class="text-muted">'+i.parent().data("subtext")+"</small>":"",v=i.parent().data("icon")?'<span class="'+n.options.iconBase+" "+i.parent().data("icon")+'"></span> ':"";g=v+'<span class="text">'+g+m+"</span>",0!==e&&s.length>0&&s.push(r("",null,"divider",o+"div")),s.push(r(g,null,"dropdown-header",o))}s.push(r(a(d,"opt "+l,c,h),e,"",o))}else i.data("divider")===!0?s.push(r("",e,"divider")):i.data("hidden")===!0?s.push(r(a(d,l,c,h),e,"hidden is-hidden")):(i.prev().is("optgroup")&&s.push(r("",null,"divider",o+"div")),s.push(r(a(d,l,c,h),e)))}),this.multiple||0!==this.$element.find("option:selected").length||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),t(s.join(""))},findLis:function(){return null==this.$lis&&(this.$lis=this.$menu.find("li")),this.$lis},render:function(e){var i=this;e!==!1&&this.$element.find("option").each(function(e){i.setDisabled(e,t(this).is(":disabled")||t(this).parent().is(":disabled")),i.setSelected(e,t(this).is(":selected"))}),this.tabIndex();var n=this.options.hideDisabled?":enabled":"",s=this.$element.find("option:selected"+n).map(function(){var e,n=t(this),s=n.data("icon")&&i.options.showIcon?'<i class="'+i.options.iconBase+" "+n.data("icon")+'"></i> ':"";return e=i.options.showSubtext&&n.data("subtext")&&!i.multiple?' <small class="text-muted">'+n.data("subtext")+"</small>":"","undefined"!=typeof n.attr("title")?n.attr("title"):n.data("content")&&i.options.showContent?n.data("content"):s+n.html()+e}).toArray(),o=this.multiple?s.join(this.options.multipleSeparator):s[0];if(this.multiple&&this.options.selectedTextFormat.indexOf("count")>-1){var r=this.options.selectedTextFormat.split(">");if(r.length>1&&s.length>r[1]||1==r.length&&s.length>=2){n=this.options.hideDisabled?", [disabled]":"";var a=this.$element.find("option").not('[data-divider="true"], [data-hidden="true"]'+n).length,l="function"==typeof this.options.countSelectedText?this.options.countSelectedText(s.length,a):this.options.countSelectedText;o=l.replace("{0}",s.length.toString()).replace("{1}",a.toString())}}void 0==this.options.title&&(this.options.title=this.$element.attr("title")),"static"==this.options.selectedTextFormat&&(o=this.options.title),o||(o="undefined"!=typeof this.options.title?this.options.title:this.options.noneSelectedText),this.$button.attr("title",t.trim(o.replace(/<[^>]*>?/g,""))),this.$button.children(".filter-option").html(o)},setStyle:function(t,e){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|validate\[.*\]/gi,""));var i=t?t:this.options.style;"add"==e?this.$button.addClass(i):"remove"==e?this.$button.removeClass(i):(this.$button.removeClass(this.options.style),this.$button.addClass(i))},liHeight:function(){if(this.options.size!==!1){var t=this.$menu.parent().clone().children(".dropdown-toggle").prop("autofocus",!1).end().appendTo("body"),e=t.addClass("open").children(".dropdown-menu"),i=e.find("li").not(".divider, .dropdown-header").filter(":visible").children("a").outerHeight(),n=this.options.header?e.find(".popover-title").outerHeight():0,s=this.options.liveSearch?e.find(".bs-searchbox").outerHeight():0,o=this.options.actionsBox?e.find(".bs-actionsbox").outerHeight():0,r=this.multiple?e.find(".bs-donebutton").outerHeight():0;t.remove(),this.$newElement.data("liHeight",i).data("headerHeight",n).data("searchHeight",s).data("actionsHeight",o).data("doneButtonHeight",r)}},setSize:function(){this.findLis();var e,i,n,s=this,o=this.$menu,r=o.children(".inner"),a=this.$newElement.outerHeight(),l=this.$newElement.data("liHeight"),c=this.$newElement.data("headerHeight"),d=this.$newElement.data("searchHeight"),h=this.$newElement.data("actionsHeight"),u=this.$newElement.data("doneButtonHeight"),p=this.$lis.filter(".divider").outerHeight(!0),f=parseInt(o.css("padding-top"))+parseInt(o.css("padding-bottom"))+parseInt(o.css("border-top-width"))+parseInt(o.css("border-bottom-width")),g=this.options.hideDisabled?".disabled":"",m=t(window),v=f+parseInt(o.css("margin-top"))+parseInt(o.css("margin-bottom"))+2,b=function(){i=s.$newElement.offset().top-m.scrollTop(),n=m.height()-i-a};if(b(),this.options.header&&o.css("padding-top",0),"auto"==this.options.size){var y=function(){var t,a=s.$lis.not(".hidden");b(),e=n-v,s.options.dropupAuto&&s.$newElement.toggleClass("dropup",i>n&&e-v<o.height()),s.$newElement.hasClass("dropup")&&(e=i-v),t=a.length+a.filter(".dropdown-header").length>3?3*l+v-2:0,o.css({"max-height":e+"px",overflow:"hidden","min-height":t+c+d+h+u+"px"}),r.css({"max-height":e-c-d-h-u-f+"px","overflow-y":"auto","min-height":Math.max(t-f,0)+"px"})};y(),this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",y),m.off("resize.getSize scroll.getSize").on("resize.getSize scroll.getSize",y)}else if(this.options.size&&"auto"!=this.options.size&&o.find("li").not(g).length>this.options.size){var w=this.$lis.not(".divider").not(g).children().slice(0,this.options.size).last().parent().index(),x=this.$lis.slice(0,w+1).filter(".divider").length;e=l*this.options.size+x*p+f,s.options.dropupAuto&&this.$newElement.toggleClass("dropup",i>n&&e<o.height()),o.css({"max-height":e+c+d+h+u+"px",overflow:"hidden"}),r.css({"max-height":e-f+"px","overflow-y":"auto"})}},setWidth:function(){if("auto"==this.options.width){this.$menu.css("min-width","0");var t=this.$newElement.clone().appendTo("body"),e=t.children(".dropdown-menu").css("width"),i=t.css("width","auto").children("button").css("width");t.remove(),this.$newElement.css("width",Math.max(parseInt(e),parseInt(i))+"px")}else"fit"==this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width",""));this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){var e,i,n=this,s="<div />",o=t(s),r=function(t){o.addClass(t.attr("class").replace(/form-control/gi,"")).toggleClass("dropup",t.hasClass("dropup")),e=t.offset(),i=t.hasClass("dropup")?0:t[0].offsetHeight,o.css({top:e.top+i,left:e.left,width:t[0].offsetWidth,position:"absolute"})};this.$newElement.on("click",function(){n.isDisabled()||(r(t(this)),o.appendTo(n.options.container),o.toggleClass("open",!t(this).hasClass("open")),o.append(n.$menu))}),t(window).on("resize scroll",function(){r(n.$newElement)}),t("html").on("click",function(e){t(e.target).closest(n.$newElement).length<1&&o.removeClass("open")})},setSelected:function(t,e){this.findLis(),this.$lis.filter('[data-original-index="'+t+'"]').toggleClass("selected",e)},setDisabled:function(t,e){this.findLis(),e?this.$lis.filter('[data-original-index="'+t+'"]').addClass("disabled").children("a").attr("href","#").attr("tabindex",-1):this.$lis.filter('[data-original-index="'+t+'"]').removeClass("disabled").children("a").removeAttr("href").attr("tabindex",0)},isDisabled:function(){return this.$element.is(":disabled")},checkDisabled:function(){var t=this;this.isDisabled()?this.$button.addClass("disabled").attr("tabindex",-1):(this.$button.hasClass("disabled")&&this.$button.removeClass("disabled"),-1!=this.$button.attr("tabindex")||this.$element.data("tabindex")||this.$button.removeAttr("tabindex")),this.$button.click(function(){return!t.isDisabled()})},tabIndex:function(){this.$element.is("[tabindex]")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex")))},clickListener:function(){var e=this;this.$newElement.on("touchstart.dropdown",".dropdown-menu",function(t){t.stopPropagation()}),this.$newElement.on("click",function(){e.setSize(),e.options.liveSearch||e.multiple||setTimeout(function(){e.$menu.find(".selected a").focus()},10)}),this.$menu.on("click","li a",function(i){var n=t(this),s=n.parent().data("originalIndex"),o=e.$element.val(),r=e.$element.prop("selectedIndex");if(e.multiple&&i.stopPropagation(),i.preventDefault(),!e.isDisabled()&&!n.parent().hasClass("disabled")){var a=e.$element.find("option"),l=a.eq(s),c=l.prop("selected"),d=l.parent("optgroup"),h=e.options.maxOptions,u=d.data("maxOptions")||!1;if(e.multiple){if(l.prop("selected",!c),e.setSelected(s,!c),n.blur(),h!==!1||u!==!1){var p=h<a.filter(":selected").length,f=u<d.find("option:selected").length;if(h&&p||u&&f)if(h&&1==h)a.prop("selected",!1),l.prop("selected",!0),e.$menu.find(".selected").removeClass("selected"),e.setSelected(s,!0);else if(u&&1==u){d.find("option:selected").prop("selected",!1),l.prop("selected",!0);var g=n.data("optgroup");e.$menu.find(".selected").has('a[data-optgroup="'+g+'"]').removeClass("selected"),e.setSelected(s,!0)}else{var m="function"==typeof e.options.maxOptionsText?e.options.maxOptionsText(h,u):e.options.maxOptionsText,v=m[0].replace("{n}",h),b=m[1].replace("{n}",u),y=t('<div class="notify"></div>');m[2]&&(v=v.replace("{var}",m[2][h>1?0:1]),b=b.replace("{var}",m[2][u>1?0:1])),l.prop("selected",!1),e.$menu.append(y),h&&p&&(y.append(t("<div>"+v+"</div>")),e.$element.trigger("maxReached.bs.select")),u&&f&&(y.append(t("<div>"+b+"</div>")),e.$element.trigger("maxReachedGrp.bs.select")),setTimeout(function(){e.setSelected(s,!1)},10),y.delay(750).fadeOut(300,function(){t(this).remove()})}}}else a.prop("selected",!1),l.prop("selected",!0),e.$menu.find(".selected").removeClass("selected"),e.setSelected(s,!0);e.multiple?e.options.liveSearch&&e.$searchbox.focus():e.$button.focus(),(o!=e.$element.val()&&e.multiple||r!=e.$element.prop("selectedIndex")&&!e.multiple)&&e.$element.change();
}}),this.$menu.on("click","li.disabled a, .popover-title, .popover-title :not(.close)",function(t){t.currentTarget==this&&(t.preventDefault(),t.stopPropagation(),e.options.liveSearch?e.$searchbox.focus():e.$button.focus())}),this.$menu.on("click","li.divider, li.dropdown-header",function(t){t.preventDefault(),t.stopPropagation(),e.options.liveSearch?e.$searchbox.focus():e.$button.focus()}),this.$menu.on("click",".popover-title .close",function(){e.$button.focus()}),this.$searchbox.on("click",function(t){t.stopPropagation()}),this.$menu.on("click",".actions-btn",function(i){e.options.liveSearch?e.$searchbox.focus():e.$button.focus(),i.preventDefault(),i.stopPropagation(),t(this).hasClass("bs-select-all")?e.selectAll():e.deselectAll(),e.$element.change()}),this.$element.change(function(){e.render(!1)})},liveSearchListener:function(){var n=this,s=t('<li class="no-results"></li>');this.$newElement.on("click.dropdown.data-api touchstart.dropdown.data-api",function(){n.$menu.find(".active").removeClass("active"),n.$searchbox.val()&&(n.$searchbox.val(""),n.$lis.not(".is-hidden").removeClass("hidden"),s.parent().length&&s.remove()),n.multiple||n.$menu.find(".selected").addClass("active"),setTimeout(function(){n.$searchbox.focus()},10)}),this.$searchbox.on("click.dropdown.data-api focus.dropdown.data-api touchend.dropdown.data-api",function(t){t.stopPropagation()}),this.$searchbox.on("input propertychange",function(){if(n.$searchbox.val()){var o=n.$lis.not(".is-hidden").removeClass("hidden").children("a");o=o.not(n.options.liveSearchNormalize?":a"+n._searchStyle()+"("+e(n.$searchbox.val())+")":":"+n._searchStyle()+"("+n.$searchbox.val()+")"),o.parent().addClass("hidden"),n.$lis.filter(".dropdown-header").each(function(){var e=t(this),i=e.data("optgroup");0===n.$lis.filter("[data-optgroup="+i+"]").not(e).not(".hidden").length&&(e.addClass("hidden"),n.$lis.filter("[data-optgroup="+i+"div]").addClass("hidden"))});var r=n.$lis.not(".hidden");r.each(function(e){var i=t(this);i.hasClass("divider")&&(i.index()===r.eq(0).index()||i.index()===r.last().index()||r.eq(e+1).hasClass("divider"))&&i.addClass("hidden")}),n.$lis.not(".hidden, .no-results").length?s.parent().length&&s.remove():(s.parent().length&&s.remove(),s.html(n.options.noneResultsText.replace("{0}",'"'+i(n.$searchbox.val())+'"')).show(),n.$menu.append(s))}else n.$lis.not(".is-hidden").removeClass("hidden"),s.parent().length&&s.remove();n.$lis.filter(".active").removeClass("active"),n.$lis.not(".hidden, .divider, .dropdown-header").eq(0).addClass("active").children("a").focus(),t(this).focus()})},_searchStyle:function(){var t="icontains";switch(this.options.liveSearchStyle){case"begins":case"startsWith":t="ibegins";break;case"contains":}return t},val:function(t){return"undefined"!=typeof t?(this.$element.val(t),this.render(),this.$element):this.$element.val()},selectAll:function(){this.findLis(),this.$element.find("option:enabled").not("[data-divider], [data-hidden]").prop("selected",!0),this.$lis.not(".divider, .dropdown-header, .disabled, .hidden").addClass("selected"),this.render(!1)},deselectAll:function(){this.findLis(),this.$element.find("option:enabled").not("[data-divider], [data-hidden]").prop("selected",!1),this.$lis.not(".divider, .dropdown-header, .disabled, .hidden").removeClass("selected"),this.render(!1)},keydown:function(i){var n,s,o,r,a,l,c,d,h,u=t(this),p=u.is("input")?u.parent().parent():u.parent(),f=p.data("this"),g={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};if(f.options.liveSearch&&(p=u.parent().parent()),f.options.container&&(p=f.$menu),n=t("[role=menu] li a",p),h=f.$menu.parent().hasClass("open"),!h&&/([0-9]|[A-z])/.test(String.fromCharCode(i.keyCode))&&(f.options.container?f.$newElement.trigger("click"):(f.setSize(),f.$menu.parent().addClass("open"),h=!0),f.$searchbox.focus()),f.options.liveSearch&&(/(^9$|27)/.test(i.keyCode.toString(10))&&h&&0===f.$menu.find(".active").length&&(i.preventDefault(),f.$menu.parent().removeClass("open"),f.$button.focus()),n=t("[role=menu] li:not(.divider):not(.dropdown-header):visible a",p),u.val()||/(38|40)/.test(i.keyCode.toString(10))||0===n.filter(".active").length&&(n=f.$newElement.find("li a"),n=n.filter(f.options.liveSearchNormalize?":a"+f._searchStyle()+"("+e(g[i.keyCode])+")":":"+f._searchStyle()+"("+g[i.keyCode]+")"))),n.length){if(/(38|40)/.test(i.keyCode.toString(10)))s=n.index(n.filter(":focus")),r=n.parent(":not(.disabled):visible").first().index(),a=n.parent(":not(.disabled):visible").last().index(),o=n.eq(s).parent().nextAll(":not(.disabled):visible").eq(0).index(),l=n.eq(s).parent().prevAll(":not(.disabled):visible").eq(0).index(),c=n.eq(o).parent().prevAll(":not(.disabled):visible").eq(0).index(),f.options.liveSearch&&(n.each(function(e){t(this).hasClass("disabled")||t(this).data("index",e)}),s=n.index(n.filter(".active")),r=n.filter(":not(.disabled):visible").first().data("index"),a=n.filter(":not(.disabled):visible").last().data("index"),o=n.eq(s).nextAll(":not(.disabled):visible").eq(0).data("index"),l=n.eq(s).prevAll(":not(.disabled):visible").eq(0).data("index"),c=n.eq(o).prevAll(":not(.disabled):visible").eq(0).data("index")),d=u.data("prevIndex"),38==i.keyCode?(f.options.liveSearch&&(s-=1),s!=c&&s>l&&(s=l),r>s&&(s=r),s==d&&(s=a)):40==i.keyCode&&(f.options.liveSearch&&(s+=1),-1==s&&(s=0),s!=c&&o>s&&(s=o),s>a&&(s=a),s==d&&(s=r)),u.data("prevIndex",s),f.options.liveSearch?(i.preventDefault(),u.hasClass("dropdown-toggle")||(n.removeClass("active"),n.eq(s).addClass("active").children("a").focus(),u.focus())):n.eq(s).focus();else if(!u.is("input")){var m,v,b=[];n.each(function(){t(this).parent().hasClass("disabled")||t.trim(t(this).text().toLowerCase()).substring(0,1)==g[i.keyCode]&&b.push(t(this).parent().index())}),m=t(document).data("keycount"),m++,t(document).data("keycount",m),v=t.trim(t(":focus").text().toLowerCase()).substring(0,1),v!=g[i.keyCode]?(m=1,t(document).data("keycount",m)):m>=b.length&&(t(document).data("keycount",0),m>b.length&&(m=1)),n.eq(b[m-1]).focus()}if((/(13|32)/.test(i.keyCode.toString(10))||/(^9$)/.test(i.keyCode.toString(10))&&f.options.selectOnTab)&&h){if(/(32)/.test(i.keyCode.toString(10))||i.preventDefault(),f.options.liveSearch)/(32)/.test(i.keyCode.toString(10))||(f.$menu.find(".active a").click(),u.focus());else{var y=t(":focus");y.click(),y.focus(),i.preventDefault()}t(document).data("keycount",0)}(/(^9$|27)/.test(i.keyCode.toString(10))&&h&&(f.multiple||f.options.liveSearch)||/(27)/.test(i.keyCode.toString(10))&&!h)&&(f.$menu.parent().removeClass("open"),f.$button.focus())}},mobile:function(){this.$element.addClass("mobile-device").appendTo(this.$newElement),this.options.container&&this.$menu.hide()},refresh:function(){this.$lis=null,this.reloadLi(),this.render(),this.setWidth(),this.setStyle(),this.checkDisabled(),this.liHeight()},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()}};var o=t.fn.selectpicker;t.fn.selectpicker=n,t.fn.selectpicker.Constructor=s,t.fn.selectpicker.noConflict=function(){return t.fn.selectpicker=o,this},t(document).data("keycount",0).on("keydown",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bs-searchbox input",s.prototype.keydown).on("focusin.modal",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bs-searchbox input",function(t){t.stopPropagation()}),t(window).on("load.bs.select.data-api",function(){t(".selectpicker").each(function(){var e=t(this);n.call(e,e.data())})})}(jQuery),define("selecter",["jquery"],function(){}),define("models/LigaModel",["backbone"],function(t){var e=t.Model.extend({urlRoot:"liga",defaults:{nombre:"",nombreCompleto:"",telefono:"",calle:"",noExterior:"",noInterior:"",codigoPostal:"",coloniaId:"",coloniaDesc:"",municipioDesc:"",estadoDesc:"",paisDesc:"",longitude:"",latitude:""},initialize:function(){_.each(this.attributes,function(t,e){this.set(e,this.sanitize(t))},this)},sanitize:function(t){return _.escape(t)},validation:{nombre:{required:!0},nombreCompleto:{required:!0},telefono:{minLength:8},calle:{required:!0},noExterior:{required:!0},noInterior:{required:!1},codigoPostal:{required:!0},coloniaId:{required:!0},longitude:{required:!1},latitude:{required:!1}}});return e}),define("collections/LigasCollection",["backbone","models/LigaModel"],function(t,e){var i=t.Collection.extend({model:e,url:"liga"});return i}),define("text!templates/private/tplLigaDetail.html",[],function(){return'<h4 class="list-group-item-heading"><%= nombre %></h4>\n<p class="list-group-item-text"><%= nombreCompleto %></p>\n<p class="list-group-item-text"><%= telefono %></p>\n<p class="list-group-item-text"><%= calle %> <%= noExterior %> <%= noInterior %> <%= coloniaDesc %></p>\n<p class="list-group-item-text"><%= municipioDesc %> <%= estadoDesc %> <%= paisDesc %></p>\n<p class="list-group-item-text"><%= latitude %> <%= longitude %></p>'}),define("views/private/LigaDetailView",["jquery","backbone","core/BaseView","text!templates/private/tplLigaDetail.html"],function(t,e,i,n){var s=i.extend({template:_.template(n),events:{},initialize:function(){},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}});return s}),define("models/PaisModel",["backbone"],function(t){var e=t.Model.extend({urlRoot:"pais",defaults:{},initialize:function(){},validate:function(t){return t.nombre?void 0:"Debe tener una nombre."}});return e}),define("collections/PaisesCollection",["backbone","models/PaisModel"],function(t,e){var i=t.Collection.extend({model:e,url:"pais"});return i}),define("models/EstadoModel",["backbone"],function(t){var e=t.Model.extend({urlRoot:"estado",defaults:{},initialize:function(){},validate:function(t){return t.nombre?t.idPais?void 0:"Debe tener un idPais.":"Debe tener una nombre."}});return e}),define("collections/EstadosCollection",["backbone","models/EstadoModel"],function(t,e){var i=t.Collection.extend({model:e,url:function(){return"pais/"+this.pais.id+"/estado"},setPais:function(t){this.pais=t}});return i}),define("models/MunicipioModel",["backbone"],function(t){var e=t.Model.extend({urlRoot:"municipio",defaults:{},initialize:function(){},validate:function(t){return t.nombre?t.idEstado?void 0:"Debe tener un idEstado.":"Debe tener una nombre."}});return e}),define("collections/MunicipiosCollection",["backbone","models/MunicipioModel"],function(t,e){var i=t.Collection.extend({model:e,url:function(){return"estado/"+this.estado.id+"/municipio"},setEstado:function(t){this.estado=t}});return i}),define("models/ColoniaModel",["backbone"],function(t){var e=t.Model.extend({urlRoot:"colonia",defaults:{},initialize:function(){},validate:function(t){return t.nombre?t.idMunicipio?void 0:"Debe tener un idMunicipio.":"Debe tener una nombre."}});return e}),define("collections/ColoniasCollection",["backbone","models/ColoniaModel"],function(t,e){var i=t.Collection.extend({model:e,url:function(){return"municipio/"+this.municipio.id+"/colonia"},setMunicipio:function(t){this.municipio=t}});return i}),define("text!templates/private/tplMainColoniaAdmin.html",[],function(){return'<div class="modal fade" id="colonia-dialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close close-entuliga" data-dismiss="modal" aria-hidden="true">×</button>\n                <h4 class="modal-title">Colonia</h4>\n            </div>\n            <div class="modal-body">\n                <p>Seleccione la país, estado, municipio y colonia.</p>\n                <div class="alert alert-danger" role="alert"></div>\n                <div class="row">\n                    <div class="col-xs-6">\n                        <label>País</label>\n                        <select class="form-control" id="input-pais" placeholder="País...">\n                        </select>\n                    </div>\n                    <div class="col-xs-6">\n                        <label>Estado</label>\n                        <select class="form-control" id="input-estado" placeholder="Estado...">\n                        </select>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="col-xs-6">\n                        <label>Municipio</label>\n                        <select class="form-control" id="input-municipio" placeholder="Municipio...">\n                        </select>\n                    </div>\n                    <div class="col-xs-6">\n                        <label>Colonia</label>\n                        <select class="form-control" id="input-colonia" placeholder="Colonia...">\n                        </select>\n                    </div>\n                </div>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default close-entuliga" data-dismiss="modal">Cancelar</button>\n                <button id="btn-aceptar" type="button" class="btn btn-success">Aceptar</button>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("views/private/MainColoniaAdminView",["jquery","bootstrap","core/BaseView","collections/PaisesCollection","collections/EstadosCollection","collections/MunicipiosCollection","collections/ColoniasCollection","text!templates/private/tplMainColoniaAdmin.html"],function(t,e,i,n,s,o,r,a){var l=i.extend({el:"#modal-colonia",template:_.template(a),events:{"change #input-pais":"changePais","change #input-estado":"changeEstado","change #input-municipio":"changeMunicipio","click #btn-aceptar":"clickAceptar","click .close-entuliga":"clickClose"},initialize:function(t){this.callbackAceptar=t,this.render(),this.paises=new n,this.listenTo(this.paises,"add",this.agregarPais),this.listenTo(this.paises,"sync",this.syncPaises),this.estados=new s,this.listenTo(this.estados,"add",this.agregarEstado),this.listenTo(this.estados,"sync",this.syncEstados),this.municipios=new o,this.listenTo(this.municipios,"add",this.agregarMunicipio),this.listenTo(this.municipios,"sync",this.syncMunicipios),this.colonias=new r,this.listenTo(this.colonias,"add",this.agregarColonia),this.listenTo(this.colonias,"sync",this.syncColonias),this.paises.fetch()},render:function(){return this.$el.html(this.template()),this.$("#colonia-dialog").modal({backdrop:"static",keyboard:!1}),this.$(".alert-danger").hide(),this},agregarPais:function(e){t("#input-pais").append(t("<option>",{value:e.get("id"),text:e.get("nombre")}))},syncPaises:function(){t("#input-pais").change()},agregarEstado:function(e){t("#input-estado").append(t("<option>",{value:e.get("id"),text:e.get("nombre")}))},syncEstados:function(){t("#input-estado").change()},agregarMunicipio:function(e){t("#input-municipio").append(t("<option>",{value:e.get("id"),text:e.get("nombre")}))},syncMunicipios:function(){t("#input-municipio").change()},agregarColonia:function(e){t("#input-colonia").append(t("<option>",{value:e.get("id"),text:e.get("nombre")}))},syncColonias:function(){t("#input-colonia").change()},changePais:function(e){var i=this.paises.get(t(e.target).val());t("#input-estado").html(""),this.estados.setPais(i),this.estados.fetch()},changeEstado:function(e){var i=this.estados.get(t(e.target).val());t("#input-municipio").html(""),this.municipios.setEstado(i),this.municipios.fetch()},changeMunicipio:function(e){var i=this.municipios.get(t(e.target).val());t("#input-colonia").html(""),this.colonias.setMunicipio(i),this.colonias.fetch()},clickAceptar:function(e){var i=t("#input-colonia").val();if("undefined"==i||""==i)this.$(".alert-danger").show(),this.$(".alert-danger").html("Debe seleccionar una colonia");else{var n=this.colonias.get(i);this.callbackAceptar(n),this.$("#colonia-dialog").modal("hide"),this.undelegateEvents()}},clickClose:function(){this.undelegateEvents()}});return l}),define("text!templates/private/tplLigaEdit.html",[],function(){return'<form id="form-liga" role="form">\n    <p>Detalle Liga.</p>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Nombre</label>\n                <input class="form-control" placeholder="Nombre" type="text" name="nombre" value="<%= nombre %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Nombre Oficial</label>\n                <input class="form-control" placeholder="Nombre Oficial" type="text" name="nombreCompleto" value="<%= nombreCompleto %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Telefono</label>\n                <input class="form-control" placeholder="Telefono" type="text" name="telefono" value="<%= telefono %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Calle</label>\n                <input class="form-control" placeholder="Calle" type="text" name="calle" value="<%= calle %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>No Exterior</label>\n                <input class="form-control" placeholder="No Exterior" type="text" name="noExterior" value="<%= noExterior %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>No Interior</label>\n                <input class="form-control" placeholder="No Interior" type="text" name="noInterior" value="<%= noInterior %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Codigo Postal</label>\n                <input class="form-control" placeholder="Codigo Postal" type="text" name="codigoPostal" value="<%= codigoPostal %>">\n\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Colonia</label>\n                <div class="input-group">\n                    <input id="liga-colonia-id" type="hidden" name="coloniaId" value="<%= coloniaId %>">\n                    <input id="liga-colonia-desc" class="form-control" placeholder="Colonia" type="text" name="coloniaDesc" value="<%= coloniaDesc %>">\n                    <div class="input-group-btn">\n                        <button id="colonia-buscar" type="button" class="btn btn-primary">Buscar</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Latitude</label>\n                <input class="form-control" placeholder="Latitude" type="text" name="latitude" value="<%= latitude %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Longitude</label>\n                <input class="form-control" placeholder="Longitude" type="text" name="longitude" value="<%= longitude %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="modal-footer">\n            <button id="btn-cancel" type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n            <button id="btn-ok" type="button" class="btn btn-success">Guardar</button>\n        </div>\n    </div>\n</form>\n<div id="modal-colonia">\n</div>'}),define("views/private/LigaEditView",["jquery","backbone","backboneValidation","jquerySerializeObject","models/LigaModel","core/BaseView","views/private/MainColoniaAdminView","views/private/util/ModalGenericView","text!templates/private/tplLigaEdit.html"],function(t,e,i,n,s,o,r,a,l){var c=o.extend({template:_.template(l),events:{"click #colonia-buscar":"buscarColonia","click #btn-ok":"saveLiga","click #btn-cancel":"cancelLiga"},initialize:function(t){"new"==t.tipo?this.model=new s:this.model=t.modelo,this.model.once("sync",this.saveLigaSuccess),this.model.once("error",this.saveLigaError),e.Validation.bind(this),app.that=this},remove:function(){return e.Validation.unbind(this),e.View.prototype.remove.apply(this,arguments)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},buscarColonia:function(){new r(this.selectColonia)},selectColonia:function(e){t("#liga-colonia-id").val(e.get("id")),t("#liga-colonia-desc").val(e.get("nombre"))},cancelLiga:function(){new a({type:"confirm",labelConfirm:"Si",labelCancel:"No",message:"¿Desea cancelar la acción?",callbackConfirm:function(t){app.that.disabledAction(!1),app.that.destroyView(),delete app.that}})},saveLiga:function(){var t=this.$el.find("#form-liga").serializeObject();for(var e in t)t.hasOwnProperty(e)&&(t[e]=_.escape(t[e]));this.model.set(t),this.model.isValid(!0)&&this.model.save()},saveLigaSuccess:function(e,i,n){app.ligas.add(e),"undefined"!=typeof app.that&&(app.that.disabledAction(!1),new a({message:"Liga guardada correctamente"}),app.that.destroyView(),delete app.that,1==app.ligas.length&&t("#select-liga").change())},saveLigaError:function(t,e,i){new a({message:"Se presento un error al registrar la liga"})}});return c}),define("text!templates/private/tplLigaAdmin.html",[],function(){return'<div class="row">\n    <div class="col-md-12">\n      <div class="main-box">\n        <div class="panel panel-success">\n            <div class="panel-heading">\n                <h3 class="panel-title">Liga Admin</h3>\n            </div>\n            <div class="panel-body">\n                <div class="row">\n                  <div class="col-md-6">\n                    <div class="form-inline">\n                      <div class="form-group">\n                        <label for="select-liga">Selecciona una liga</label>\n                        <select name="select-liga" class="form-control action-entuliga" id="select-liga" placeholder="Liga...">\n                        </select>\n                      </div>\n                    </div>\n\n                      <div class="panel panel-default">\n                          <div id="liga-detail" class="panel-body">\n                          </div>\n                      </div>\n                      <div class="btn-group-horizontal" role="group" aria-label="...">\n                          <button id="liga-nuevo" type="button" class="btn btn-primary action-entuliga">Registrar</button>\n                          <button id="liga-editar" type="button" class="btn btn-primary action-entuliga">Editar</button>\n                          <button id="liga-borrar" type="button" class="btn btn-danger action-entuliga">\n                              <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>\n                          </button>\n                      </div>\n                    </div>\n                    <div class="col-md-6">\n                        <div class="panel panel-default">\n                            <div class="panel-heading">\n                                <h3 class="panel-title">Liga</h3>\n                            </div>\n                            <div id="liga-edit" class="panel-body">\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n      </div>\n    </div>\n</div>\n'}),define("views/private/LigaAdminView",["jquery","backbone","bootstrap","selecter","core/BaseView","collections/LigasCollection","views/private/LigaDetailView","views/private/LigaEditView","views/private/util/ModalGenericView","text!templates/private/tplLigaAdmin.html"],function(t,e,i,n,s,o,r,a,l,c){var d=s.extend({template:_.template(c),events:{"change #select-liga":"changeLiga","click #liga-nuevo":"newLiga","click #liga-editar":"editLiga","click #liga-borrar":"deleteLiga"},initialize:function(){app.ligas=new o,this.listenTo(app.ligas,"add",this.agregarLiga),this.listenTo(app.ligas,"sync",this.syncLigas),app.ligas.fetch()},render:function(){return this.$el.html(this.template()),this.$el.find(".selecter_liga").select(),this},changeLiga:function(e){var i=app.ligas.get(t(e.target).val());"undefined"!=typeof i?(this.ligaDetailView=new r({model:i}),t("#liga-detail").html(this.ligaDetailView.render().$el),t("#liga-editar").removeAttr("disabled"),t("#liga-borrar").removeAttr("disabled")):("undefined"!=typeof this.ligaDetailView&&this.ligaDetailView.destroyView(),t("#liga-editar").attr("disabled",!0),t("#liga-borrar").attr("disabled",!0))},newLiga:function(){this.disabledAction(!0);var e=new a({tipo:"new",modelo:null});t("#liga-edit").html(e.render().$el)},editLiga:function(){this.disabledAction(!0);var e=app.ligas.get(t("#select-liga").val()),i=new a({tipo:"edit",modelo:e});t("#liga-edit").html(i.render().$el)},deleteLiga:function(){var e=app.ligas.get(t("#select-liga").val());e.destroy({wait:!0,success:function(e,i){new l({message:i.message}),i.result&&(t("#select-liga option:selected").remove(),t("#select-liga").change())},error:function(t,e){new l({message:e.responseJSON.message})}})},agregarLiga:function(e){t("#select-liga").append(t("<option>",{value:e.get("id"),text:e.get("nombre")}))},syncLigas:function(){t("#select-liga").change()}});return d});var dateFormat=function(){var t=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,e=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,i=/[^-+\dA-Z]/g,n=function(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t};return function(s,o,r){var a=dateFormat;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(s)||/\d/.test(s)||(o=s,s=void 0),s=s?new Date(s):new Date,isNaN(s))throw SyntaxError("invalid date");o=String(a.masks[o]||o||a.masks["default"]),"UTC:"==o.slice(0,4)&&(o=o.slice(4),r=!0);var l=r?"getUTC":"get",c=s[l+"Date"](),d=s[l+"Day"](),h=s[l+"Month"](),u=s[l+"FullYear"](),p=s[l+"Hours"](),f=s[l+"Minutes"](),g=s[l+"Seconds"](),m=s[l+"Milliseconds"](),v=r?0:s.getTimezoneOffset(),b={d:c,dd:n(c),ddd:a.i18n.dayNames[d],dddd:a.i18n.dayNames[d+7],m:h+1,mm:n(h+1),mmm:a.i18n.monthNames[h],mmmm:a.i18n.monthNames[h+12],yy:String(u).slice(2),yyyy:u,h:p%12||12,hh:n(p%12||12),H:p,HH:n(p),M:f,MM:n(f),s:g,ss:n(g),l:n(m,3),L:n(m>99?Math.round(m/10):m),t:12>p?"a":"p",tt:12>p?"am":"pm",T:12>p?"A":"P",TT:12>p?"AM":"PM",Z:r?"UTC":(String(s).match(e)||[""]).pop().replace(i,""),o:(v>0?"-":"+")+n(100*Math.floor(Math.abs(v)/60)+Math.abs(v)%60,4),S:["th","st","nd","rd"][c%10>3?0:(c%100-c%10!=10)*c%10]};return o.replace(t,function(t){return t in b?b[t]:t.slice(1,t.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},Date.prototype.format=function(t,e){return dateFormat(this,t,e)},define("dateformat",function(){}),define("core/BaseModel",["underscore","backbone"],function(t,e){var i=e.Model.extend({defaults:{},initialize:function(){t.each(this.attributes,function(e,i){this.set(i,t.escape(e))},this)}});return i}),define("models/TorneoModel",["backbone","dateformat","../core/BaseModel"],function(t,e,i){var n=i.extend({urlRoot:"torneo",defaults:{ligaId:"",nombre:"",descripcion:"",fechaInicio:(new Date).getTime(),fechaInicioDes:(new Date).format("mm/dd/yyyy"),fechaFin:(new Date).getTime(),fechaFinDes:(new Date).format("mm/dd/yyyy"),status:"ENPROCESO"},validation:{ligaId:{required:!0},nombre:{required:!0},descripcion:{required:!0},fechaInicio:{required:!0},fechaFin:{required:!0},status:{required:!0}}});return n}),define("collections/TorneosCollection",["backbone","models/TorneoModel"],function(t,e){var i=t.Collection.extend({model:e,url:function(){return null!=this.liga&&"undefined"!=this.liga?"liga/"+this.liga.get("id")+"/torneo":"torneo"},setLiga:function(t){this.liga=t}});return i}),define("models/TorneoEquipoModel",["backbone"],function(t){var e=t.Model.extend({urlRoot:"torneoequipo",defaults:{statusEquipo:"INSCRITO"},initialize:function(){},validate:function(t){return t.torneoId?t.equipoId?t.statusEquipo?void 0:"Debe tener un Status.":"Debe tener un Equipo.":"Debe tener un Torneo."}});return e}),define("collections/TorneoEquiposCollection",["backbone","models/TorneoEquipoModel"],function(t,e){var i=t.Collection.extend({model:e,url:function(){return"torneo/"+this.torneo.get("id")+"/equipo"},setTorneo:function(t){this.torneo=t}});return i}),define("models/EquipoModel",["backbone","../core/BaseModel"],function(t,e){var i=e.extend({urlRoot:"equipo",defaults:{nombre:"",aliasEquipo:"",logoEquipo:"novalid"},validation:{nombre:{required:!0},aliasEquipo:{required:!0},logoEquipo:{required:!0}}});return i}),define("collections/EquiposCollection",["backbone","models/EquipoModel"],function(t,e){var i=t.Collection.extend({model:e,url:function(){return"like"==this.tipo?"equipo/search/"+this.criterio:"equipo"},setTipo:function(t){this.tipo=t},setCriterio:function(t){this.criterio=t}});return i}),define("text!templates/private/tplEquipoSearch.html",[],function(){return'<div class="modal fade" id="equipo-search-dialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n                <h4 class="modal-title">Equipo</h4>\n            </div>\n            <div class="modal-body">\n                <p>Seleccione Equipo.</p>\n                <div class="alert alert-danger" role="alert"></div>\n                <div class="form-group">\n                    <input id="text-busqueda" type="text" class="form-control" placeholder="Buscar por..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">\n                    <div id="result-search" class="list-group">\n                    </div>\n                </div>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n                <button id="btn-aceptar" type="button" class="btn btn-success">Aceptar</button>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("views/private/EquipoSearchView",["jquery","bootstrap","core/BaseView","collections/EquiposCollection","text!templates/private/tplEquipoSearch.html"],function(t,e,i,n,s){var o=i.extend({el:"#modal-equipo-search",template:_.template(s),events:{"keydown #text-busqueda":"changeBuscar","click #btn-aceptar":"clickAceptar","click .list-group-item":"clickItemSearch"},initialize:function(t){this.callbackAceptar=t.callbackAceptar,this.model=t.modelo,this.render(),this.equipos=new n,this.listenTo(this.equipos,"add",this.agregarEquipo),this.listenTo(this.equipos,"sync",this.syncEquipos)},render:function(){this.$el.html(this.template()),
this.$("#equipo-search-dialog").modal("show"),this.$(".alert-danger").hide()},agregarEquipo:function(t){},syncEquipos:function(){t("#result-search").html(""),this.equipos.forEach(function(e){var i="<a class='equipos list-group-item' id='"+e.get("id")+"'>"+e.get("nombre")+"</a>";t(i).appendTo("#result-search")})},changeBuscar:function(e){var i=t("#text-busqueda").val(),n=this.model.get("id");""!=i&&"undefined"!=i&&i.length>2&&(t("#result-search").html(""),this.equipos.setTipo("like"),this.equipos.setCriterio(i),this.equipos.fetch({data:{tipo:"notInTorneoAndContainName",idTorneo:n},processData:!0}))},clickAceptar:function(e){var i=t(".equipos.list-group-item.active").attr("id");if("undefined"==i||void 0==i||""==i)this.$(".alert-danger").show(),this.$(".alert-danger").html("Debe seleccionar un equipo");else{var n=this.equipos.get(i);this.callbackAceptar(n)}},clickItemSearch:function(e){t(".equipos.list-group-item").removeClass("active"),t(e.target).addClass("active")},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}});return o}),define("text!templates/private/tplRowTorneoEquipo.html",[],function(){return'<th><%= id %></th>\n<td><%= equipoNombre %></td>\n<td><%= statusEquipo %></td>\n<td>\n    <button id="eliminar-equipo" class="btn btn-primary btn-xs" value="<%= id %>">\n        <span class="glyphicon glyphicon-trash" aria-hidden="true" value="<%= id %>"></span>\n    </button>\n</td>'}),define("views/private/RowTorneoEquipoView",["jquery","underscore","core/BaseView","views/private/util/ModalGenericView","text!templates/private/tplRowTorneoEquipo.html"],function(t,e,i,n,s){var o=i.extend({template:e.template(s),tagName:"tr",events:{"click #eliminar-equipo":"deleteEquipo"},initialize:function(t){this.model=t},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},deleteEquipo:function(){that=this,this.model.destroy({contentType:"application/json",wait:!0,success:function(t,e){that.destroyView(),new n({message:e.message})},error:function(t,e){new n({message:e.responseJSON.message})}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}});return o}),define("text!templates/private/tplTorneoEquipoAdmin.html",[],function(){return'<div class="row">\n    <div class="col-md-12">\n        <table id="torneo-equipos" class="table table-condensed">\n            <thead>\n            <tr>\n                <th>#</th>\n                <th>Equipo</th>\n                <th>Status</th>\n                <th></th>\n            </tr>\n            </thead>\n            <tbody>\n            </tbody>\n            <div id="modal-equipo-search">\n            </div>\n        </table>\n    </div>\n</div>\n<div class="row">\n    <div class="col-md-12">\n        <div class="btn-group-horizontal" role="group" aria-label="...">\n            <button id="equipo-agregar" type="button" class="btn btn-primary">Agregar</button>\n        </div>\n    </div>\n</div>'}),define("views/private/TorneoEquipoAdminView",["jquery","backbone","core/BaseView","models/TorneoEquipoModel","collections/TorneoEquiposCollection","views/private/EquipoSearchView","views/private/RowTorneoEquipoView","text!templates/private/tplTorneoEquipoAdmin.html"],function(t,e,i,n,s,o,r,a){var l=i.extend({template:_.template(a),events:{"click #equipo-agregar":"agregarEquipo"},initialize:function(){app.torneoequipos=new s,app.torneoequipos.setTorneo(this.model),this.listenTo(app.torneoequipos,"add",this.agregarTorneoEquipo),this.listenTo(app.torneoequipos,"sync",this.syncTorneoEquipos),app.torneoequipos.fetch()},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},agregarTorneoEquipo:function(e){var i=new r(e);t("#torneo-equipos").find("tbody:last").append(i.render().$el)},syncTorneoEquipos:function(){},agregarEquipo:function(){this.equipoSearchView=new o({modelo:this.model,callbackAceptar:this.selectEquipo})},selectEquipo:function(e){this.destroyView(),t("<div id='modal-equipo-search'></div>").appendTo("#torneo-equipos");var i=new n;i.save({torneoId:this.model.get("id"),equipoId:e.get("id")},{wait:!0,success:function(t,e){app.torneoequipos.add(t)},error:function(t,e){console.log(t.toJSON()),console.log("error.responseText")}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this)}});return l}),define("models/TorneoJugadorModel",["backbone"],function(t){var e=t.Model.extend({urlRoot:"torneojugador",defaults:{torneoEquipoId:"",jugadorId:"",jugadorNombre:"",numeroJugador:"",posicionJugador:"BASE",statusJugador:"INSCRITO"},initialize:function(){},validation:{torneoEquipoId:{required:!0},jugadorId:{required:!0},jugadorNombre:{required:!1},statusJugador:{required:!0},posicionJugador:{required:!0},numeroJugador:{required:!0}}});return e}),define("collections/TorneoJugadoresCollection",["backbone","models/TorneoJugadorModel"],function(t,e){var i=t.Collection.extend({model:e,url:function(){return"torneoequipo/"+this.torneoEquipo.get("id")+"/jugador"},setTorneoEquipo:function(t){this.torneoEquipo=t}});return i}),define("models/JugadorModel",["backbone","../core/BaseModel"],function(t,e){var i=e.extend({urlRoot:"jugador",defaults:{nombre:"",paterno:"",materno:"",sexo:"FEMENINO",logoJugador:"novalid",fechaRegistro:(new Date).getTime(),calle:"",noExterior:"",noInterior:"",codigoPostal:"",coloniaId:"",coloniaDesc:"",municipioDesc:"",estadoDesc:"",paisDesc:"",longitude:"",latitude:""},validation:{nombre:{required:!0},paterno:{required:!0},materno:{required:!0},sexo:{required:!0},logoJugador:{required:!0},fechaRegistro:{required:!0},calle:{required:!0},noExterior:{required:!0},noInterior:{required:!1},codigoPostal:{required:!0},coloniaId:{required:!0},longitude:{required:!1},latitude:{required:!1}}});return i}),define("collections/JugadoresCollection",["backbone","models/JugadorModel"],function(t,e){var i=t.Collection.extend({model:e,url:function(){return"like"==this.tipo?"jugador/search/"+this.criterio:"jugador"},setTipo:function(t){this.tipo=t},setCriterio:function(t){this.criterio=t}});return i}),define("models/FaseModel",["underscore","backbone"],function(t,e){var i=e.Model.extend({urlRoot:"fase",defaults:{clave:"",descripcion:""},initialize:function(){},validation:{clave:{required:!0},descripcion:{required:!0}}});return i}),define("collections/PosicionesCollection",["backbone","models/FaseModel"],function(t,e){var i=t.Collection.extend({model:e,url:"posicion"});return i}),define("text!templates/private/tplJugadorSearch.html",[],function(){return'<div class="modal fade" id="jugador-search-dialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n                <h4 class="modal-title">Jugador</h4>\n            </div>\n            <div class="modal-body">\n                <p>Seleccione Jugador.</p>\n                <div class="alert alert-danger" role="alert"></div>\n                <form id="form-torneo-jugador" role="form">\n                <input id="torneo-liga-id" type="hidden" name="torneoEquipoId" value="<%= torneoEquipoId %>">\n                <input id="jugador-id" type="hidden" name="jugadorId" value="<%= jugadorId %>">\n                <div class="row">\n                    <div class="col-xs-6">\n                        <div class="form-group">\n                            <label>Numero</label>\n                            <input class="form-control" placeholder="Numero" type="text" name="numeroJugador" value="<%= numeroJugador %>">\n                        </div>\n                    </div>\n                    <div class="col-xs-6">\n                        <div class="form-group">\n                            <label>Posicion</label>\n                            <select class="form-control" id="select-posicion" placeholder="Posicion..." name="posicionJugador" value="<%= posicionJugador %>">\n                            </select>\n                        </div>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="col-xs-12">\n                        <div class="form-group">\n                            <input id="text-busqueda" type="text" class="form-control" placeholder="Buscar por..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">\n                            <div id="result-search" class="list-group">\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                </form>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n                <button id="btn-aceptar" type="button" class="btn btn-success">Aceptar</button>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("views/private/JugadorSearchView",["jquery","backbone","bootstrap","core/BaseView","models/TorneoJugadorModel","collections/JugadoresCollection","collections/PosicionesCollection","views/private/util/ModalGenericView","text!templates/private/tplJugadorSearch.html"],function(t,e,i,n,s,o,r,a,l){var c=n.extend({el:"#modal-jugador-search",template:_.template(l),events:{"keydown #text-busqueda":"changeBuscar","click #btn-aceptar":"clickAceptar","click .list-group-item":"clickItemSearch"},initialize:function(t){this.callbackAceptar=t.callbackAceptar,this.model=new s,this.torneoEquipo=t.modelo,this.render(),this.jugadores=new o,this.listenTo(this.jugadores,"add",this.agregarJugador),this.listenTo(this.jugadores,"sync",this.syncJugadores),this.posiciones=new r,this.listenTo(this.posiciones,"add",this.agregarPosicion),this.listenTo(this.posiciones,"sync",this.syncPosiciones),this.posiciones.fetch(),e.Validation.bind(this)},render:function(){this.$el.html(this.template(this.model.toJSON())),this.$("#jugador-search-dialog").modal("show"),this.$(".alert-danger").hide(),this.$("#torneo-liga-id").val(this.torneoEquipo.get("id"))},agregarJugador:function(t){},syncJugadores:function(){t("#result-search").html(""),this.jugadores.forEach(function(e){var i="<a class='list-group-item' id='"+e.get("id")+"'>"+e.get("nombre")+" "+e.get("paterno")+" "+e.get("materno")+"</a>";t(i).appendTo("#result-search")})},agregarPosicion:function(e){t("#select-posicion").append(t("<option>",{value:e.get("clave"),text:e.get("descripcion")}))},syncPosiciones:function(e){t("#select-posicion").change()},changeBuscar:function(e){var i=t(e.target).val(),n=this.torneoEquipo.get("torneoId");""!=i&&"undefined"!=i&&i.length>2&&(t("#result-search").html(""),this.jugadores.setTipo("like"),this.jugadores.setCriterio(i),this.jugadores.fetch({data:{tipo:"notInTorneoAndContainName",idTorneo:n},processData:!0}))},clickAceptar:function(t){var e=this.$el.find("#form-torneo-jugador").serializeObject();this.model.set(e),that=this,this.model.isValid(!0)&&this.model.save({},{wait:!0,success:function(t,e){new a({message:"Jugador registrado correctamente"}),that.callbackAceptar(t)},error:function(t,e){new a({message:"Se presento un error al registrar el jugador"})}})},clickItemSearch:function(e){t(".list-group-item").removeClass("active"),t(e.target).addClass("active");var i=t(".list-group-item.active").attr("id");this.$("#jugador-id").val(i)},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this)}});return c}),define("text!templates/private/tplRowTorneoJugador.html",[],function(){return'<th><%= numeroJugador %></th>\n<td><%= jugadorNombre %></td>\n<td><%= posicionJugador %></td>\n<td><%= statusJugador %></td>\n<td>\n    <button id="eliminar-jugador" class="btn btn-primary btn-xs" value="<%= id %>">\n        <span class="glyphicon glyphicon-trash" aria-hidden="true" value="<%= id %>"></span>\n    </button>\n</td>'}),define("views/private/RowTorneoJugadorView",["jquery","underscore","core/BaseView","views/private/util/ModalGenericView","text!templates/private/tplRowTorneoJugador.html"],function(t,e,i,n,s){var o=i.extend({template:e.template(s),tagName:"tr",events:{"click #eliminar-jugador":"deleteJugador"},initialize:function(t){this.model=t},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},deleteJugador:function(){that=this,this.model.destroy({contentType:"application/json",wait:!0,success:function(t,e){that.destroyView(),new n({message:e.message})},error:function(t,e){new n({message:e.responseJSON.message})}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}});return o}),define("text!templates/private/tplTorneoJugadorAdmin.html",[],function(){return'<div class="row">\n    <div class="col-md-12">\n        <div class="form-group">\n            <select class="form-control" id="select-torneo-equipo" placeholder="Equipo...">\n            </select>\n        </div>\n        <table id="torneo-jugadores" class="table table-condensed">\n            <thead>\n            <tr>\n                <th>#</th>\n                <th>Jugador</th>\n                <th>Posicion</th>\n                <th>Status</th>\n                <th></th>\n            </tr>\n            </thead>\n            <tbody>\n            </tbody>\n            <div id="modal-jugador-search">\n            </div>\n        </table>\n    </div>\n</div>\n<div class="row">\n    <div class="col-md-12">\n        <div class="btn-group-horizontal" role="group" aria-label="...">\n            <button id="jugador-agregar" type="button" class="btn btn-primary">Agregar</button>\n        </div>\n    </div>\n</div>'}),define("views/private/TorneoJugadorAdminView",["jquery","backbone","core/BaseView","models/TorneoJugadorModel","collections/TorneoJugadoresCollection","collections/TorneoEquiposCollection","views/private/JugadorSearchView","views/private/RowTorneoJugadorView","text!templates/private/tplTorneoJugadorAdmin.html"],function(t,e,i,n,s,o,r,a,l){var c=i.extend({template:_.template(l),events:{"click #jugador-agregar":"agregarJugador","change #select-torneo-equipo":"changeEquipo"},initialize:function(){this.torneoequipos=new o,this.torneoequipos.setTorneo(this.model),this.listenTo(this.torneoequipos,"add",this.agregarTorneoEquipo),this.listenTo(this.torneoequipos,"sync",this.syncTorneoEquipos),this.torneoequipos.fetch(),app.torneojugadores=new s,this.listenTo(app.torneojugadores,"add",this.agregarTorneoJugador),this.listenTo(app.torneojugadores,"sync",this.syncTorneoJugadores)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},agregarTorneoEquipo:function(e){t("#select-torneo-equipo").append(t("<option>",{value:e.get("id"),text:e.get("equipoNombre")}))},syncTorneoEquipos:function(){t("#select-torneo-equipo").change()},changeEquipo:function(e){var i=this.torneoequipos.get(t(e.target).val());"undefined"!=typeof i&&(this.torneoEquipo=i,t("#torneo-jugadores").find("tbody").html(""),app.torneojugadores.setTorneoEquipo(this.torneoEquipo),app.torneojugadores.fetch())},agregarTorneoJugador:function(e){var i=new a(e);t("#torneo-jugadores").find("tbody:last").append(i.render().$el)},syncTorneoJugadores:function(){},agregarJugador:function(){this.jugadorSearchView=new r({modelo:this.torneoEquipo,callbackAceptar:this.selectJugador})},selectJugador:function(e){this.destroyView(),t("<div id='modal-jugador-search'></div>").appendTo("#torneo-jugadores"),app.torneojugadores.add(e)},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this)}});return c}),define("models/TorneoJornadaModel",["backbone","../core/BaseModel"],function(t,e){var i=e.extend({urlRoot:"torneojornada",defaults:{torneoId:"",nombre:"",fase:"REGULAR"},validation:{torneoId:{required:!0},nombre:{required:!0},fase:{required:!0}}});return i}),define("collections/TorneoJornadasCollection",["backbone","models/TorneoJornadaModel"],function(t,e){var i=t.Collection.extend({model:e,url:function(){return"torneo/"+this.torneo.get("id")+"/jornada"},setTorneo:function(t){this.torneo=t}});return i}),define("collections/FasesCollection",["backbone","models/FaseModel"],function(t,e){var i=t.Collection.extend({model:e,url:"fase"});return i}),define("text!templates/private/tplJornadaNew.html",[],function(){return'<div class="modal fade" id="jornada-new-dialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n                <h4 class="modal-title">Jornada</h4>\n            </div>\n            <div class="modal-body">\n                <div class="alert alert-danger" role="alert"></div>\n                <form id="form-torneo-jornada" role="form">\n                <input id="torneo-liga-id" type="hidden" name="torneoId" value="<%= torneoId %>">\n                <div class="row">\n                    <div class="col-xs-6">\n                        <div class="form-group">\n                            <label>Nombre</label>\n                            <input class="form-control" placeholder="Nombre" type="text" name="nombre" value="<%= nombre %>">\n                        </div>\n                    </div>\n                    <div class="col-xs-6">\n                        <div class="form-group">\n                            <label>Fase</label>\n                            <select class="form-control" id="select-fase" placeholder="Fase..." name="fase" value="<%= fase %>">\n                            </select>\n                        </div>\n                    </div>\n                </div>\n                </form>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n                <button id="btn-aceptar" type="button" class="btn btn-success">Aceptar</button>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("views/private/JornadaNewView",["jquery","backbone","bootstrap","core/BaseView","models/TorneoJornadaModel","collections/FasesCollection","views/private/util/ModalGenericView","text!templates/private/tplJornadaNew.html"],function(t,e,i,n,s,o,r,a){var l=n.extend({el:"#modal-jornada-new",template:_.template(a),events:{"click #btn-aceptar":"clickAceptar"},initialize:function(t){this.callbackAceptar=t.callbackAceptar,this.model=new s,this.torneo=t.modelo,this.render(),this.fases=new o,this.listenTo(this.fases,"add",this.agregarFase),this.listenTo(this.fases,"sync",this.syncFases),this.fases.fetch(),e.Validation.bind(this)},render:function(){this.$el.html(this.template(this.model.toJSON())),this.$("#jornada-new-dialog").modal("show"),this.$(".alert-danger").hide(),this.$("#torneo-liga-id").val(this.torneo.get("id"))},agregarFase:function(e){t("#select-fase").append(t("<option>",{value:e.get("clave"),text:e.get("descripcion")}))},syncFases:function(e){t("#select-fase").change()},clickAceptar:function(t){var e=this.$el.find("#form-torneo-jornada").serializeObject();for(var i in e)console.log(i),e.hasOwnProperty(i)&&(e[i]=_.escape(e[i]));this.model.set(e),that=this,this.model.isValid(!0)&&this.model.save({},{wait:!0,success:function(t,e){new r({message:"Jornada registrada correctamente"}),that.callbackAceptar(t)},error:function(t,e){new r({message:"Se presento un error al registrar la jornada"})}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this)}});return l}),define("text!templates/private/tplRowTorneoJornada.html",[],function(){return'<th><%= id %></th>\n<td><%= nombre %></td>\n<td><%= fase %></td>\n<td>\n    <button id="eliminar-jornada" class="btn btn-primary btn-xs" value="<%= id %>">\n        <span class="glyphicon glyphicon-trash" aria-hidden="true" value="<%= id %>"></span>\n    </button>\n</td>'}),define("views/private/RowTorneoJornadaView",["jquery","underscore","core/BaseView","views/private/util/ModalGenericView","text!templates/private/tplRowTorneoJornada.html"],function(t,e,i,n,s){var o=i.extend({template:e.template(s),tagName:"tr",events:{"click #eliminar-jornada":"deleteJornada"},initialize:function(t){this.model=t},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},deleteJornada:function(){that=this,this.model.destroy({wait:!0,success:function(t,e){that.destroyView(),new n({message:e.message})},error:function(t,e){new n({message:e.responseJSON.message})}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}});return o}),define("text!templates/private/tplTorneoJornadaAdmin.html",[],function(){return'<div class="row">\n    <div class="col-md-12">\n        <table id="torneo-jornadas" class="table table-condensed">\n            <thead>\n            <tr>\n                <th>#</th>\n                <th>Nombre</th>\n                <th>Fase</th>\n                <th></th>\n            </tr>\n            </thead>\n            <tbody>\n            </tbody>\n            <div id="modal-jornada-new">\n            </div>\n        </table>\n    </div>\n</div>\n<div class="row">\n    <div class="col-md-12">\n        <div class="btn-group-horizontal" role="group" aria-label="...">\n            <button id="jornada-agregar" type="button" class="btn btn-primary">Agregar</button>\n        </div>\n    </div>\n</div>'}),define("views/private/TorneoJornadaAdminView",["jquery","backbone","core/BaseView","models/TorneoJornadaModel","collections/TorneoJornadasCollection","views/private/JornadaNewView","views/private/RowTorneoJornadaView","text!templates/private/tplTorneoJornadaAdmin.html"],function(t,e,i,n,s,o,r,a){var l=i.extend({template:_.template(a),events:{"click #jornada-agregar":"agregarJornada"},initialize:function(){app.torneojornadas=new s,app.torneojornadas.setTorneo(this.model),this.listenTo(app.torneojornadas,"add",this.agregarTorneoJornada),this.listenTo(app.torneojornadas,"sync",this.syncTorneoJornadas),app.torneojornadas.fetch()},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},agregarTorneoJornada:function(e){var i=new r(e);t("#torneo-jornadas").find("tbody:last").append(i.render().$el)},syncTorneoJornadas:function(){},agregarJornada:function(){this.jornadaNewView=new o({modelo:this.model,callbackAceptar:this.selectJornada})},selectJornada:function(e){this.destroyView(),t("<div id='modal-jornada-new'></div>").appendTo("#torneo-jornadas"),app.torneojornadas.add(e)},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this)}});return l}),define("models/TorneoPartidoModel",["backbone","dateformat"],function(t,e){var i=t.Model.extend({urlRoot:"torneopartido",defaults:{torneoId:"",jornadaId:"",localId:"",localNombre:"",localAlias:"",localPuntos:0,localColor:"",visitaId:"",visitaNombre:"",visitaNombre:"",visitaPuntos:0,visitaColor:"",canchaId:"",canchaNombre:"",canchaDomicilio:"",horario:(new Date).getTime(),horarioDes:(new Date).format("mm/dd/yyyy HH:MM"),statusPartido:"PROGRAMADO"},initialize:function(){},validation:{torneoId:{required:!1},jornadaId:{required:!0},localId:{required:!0},localNombre:{required:!1},localAlias:{required:!1},localPuntos:{required:!1},localColor:{required:!1},visitaId:{required:!0},visitaNombre:{required:!1},visitaAlias:{required:!1},visitaPuntos:{required:!1},visitaColor:{required:!1},canchaId:{required:!0},canchaNombre:{required:!1},canchaDomicilio:{required:!1},horario:{required:!0},horarioDes:{required:!1},statusPartido:{required:!0}}});return i}),define("collections/TorneoPartidosCollection",["backbone","models/TorneoPartidoModel"],function(t,e){var i=t.Collection.extend({model:e,url:function(){return"torneojornada/"+this.torneoJornada.get("id")+"/partido"},setTorneoJornada:function(t){this.torneoJornada=t}});return i}),define("text!templates/private/tplRowTorneoPartido.html",[],function(){return'<th><%= id %></th>\n<td><%= localNombre %></td>\n<td><%= visitaNombre %></td>\n<td><%= horarioDes %></td>\n<td><%= canchaNombre %></td>\n<td>\n    <a id="editar-partido" class="btn btn-primary btn-xs" href="#admin/partido/<%= id %>">\n        <span class="glyphicon glyphicon-pencil" aria-hidden="true" value="<%= id %>"></span>\n    </a>\n</td>\n<td>\n    <button id="eliminar-partido" class="btn btn-primary btn-xs" value="<%= id %>">\n        <span class="glyphicon glyphicon-trash" aria-hidden="true" value="<%= id %>"></span>\n    </button>\n</td>'}),define("views/private/RowTorneoPartidoView",["jquery","underscore","core/BaseView","views/private/util/ModalGenericView","text!templates/private/tplRowTorneoPartido.html"],function(t,e,i,n,s){var o=i.extend({template:e.template(s),tagName:"tr",events:{"click #eliminar-partido":"deletePartido"},initialize:function(t){this.model=t},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},deletePartido:function(){that=this,this.model.destroy({contentType:"application/json",wait:!0,success:function(t,e){that.destroyView(),new n({message:e.message})},error:function(t,e){new n({message:e.responseJSON.message})}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}});return o}),!function(t){function e(e){var i=t(e),n=i.add(i.parents()),s=!1;return n.each(function(){return"fixed"===t(this).css("position")?(s=!0,!1):void 0}),s}function i(){return new Date(Date.UTC.apply(Date,arguments))}"indexOf"in Array.prototype||(Array.prototype.indexOf=function(t,e){void 0===e&&(e=0),0>e&&(e+=this.length),0>e&&(e=0);for(var i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1});var n=function(e,i){var n=this;this.element=t(e),this.container=i.container||"body",this.language=i.language||this.element.data("date-language")||"en",this.language=this.language in o?this.language:"en",this.isRTL=o[this.language].rtl||!1,this.formatType=i.formatType||this.element.data("format-type")||"standard",this.format=r.parseFormat(i.format||this.element.data("date-format")||o[this.language].format||r.getDefaultFormat(this.formatType,"input"),this.formatType),this.isInline=!1,this.isVisible=!1,this.isInput=this.element.is("input"),this.fontAwesome=i.fontAwesome||this.element.data("font-awesome")||!1,this.bootcssVer=i.bootcssVer||(this.isInput?this.element.is(".form-control")?3:2:this.bootcssVer=this.element.is(".input-group")?3:2),this.component=this.element.is(".date")?3==this.bootcssVer?this.element.find(".input-group-addon .glyphicon-th, .input-group-addon .glyphicon-time, .input-group-addon .glyphicon-calendar, .input-group-addon .glyphicon-calendar, .input-group-addon .fa-calendar, .input-group-addon .fa-clock-o").parent():this.element.find(".add-on .icon-th, .add-on .icon-time, .add-on .icon-calendar .fa-calendar .fa-clock-o").parent():!1,this.componentReset=this.element.is(".date")?3==this.bootcssVer?this.element.find(".input-group-addon .glyphicon-remove, .input-group-addon .fa-times").parent():this.element.find(".add-on .icon-remove, .add-on .fa-times").parent():!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.linkField=i.linkField||this.element.data("link-field")||!1,this.linkFormat=r.parseFormat(i.linkFormat||this.element.data("link-format")||r.getDefaultFormat(this.formatType,"link"),this.formatType),this.minuteStep=i.minuteStep||this.element.data("minute-step")||5,this.pickerPosition=i.pickerPosition||this.element.data("picker-position")||"bottom-right",this.showMeridian=i.showMeridian||this.element.data("show-meridian")||!1,this.initialDate=i.initialDate||new Date,this.zIndex=i.zIndex||this.element.data("z-index")||void 0,this.icons={leftArrow:this.fontAwesome?"fa-arrow-left":3===this.bootcssVer?"glyphicon-arrow-left":"icon-arrow-left",rightArrow:this.fontAwesome?"fa-arrow-right":3===this.bootcssVer?"glyphicon-arrow-right":"icon-arrow-right"},this.icontype=this.fontAwesome?"fa":"glyphicon",this._attachEvents(),this.formatViewType="datetime","formatViewType"in i?this.formatViewType=i.formatViewType:"formatViewType"in this.element.data()&&(this.formatViewType=this.element.data("formatViewType")),this.minView=0,"minView"in i?this.minView=i.minView:"minView"in this.element.data()&&(this.minView=this.element.data("min-view")),this.minView=r.convertViewMode(this.minView),this.maxView=r.modes.length-1,"maxView"in i?this.maxView=i.maxView:"maxView"in this.element.data()&&(this.maxView=this.element.data("max-view")),this.maxView=r.convertViewMode(this.maxView),this.wheelViewModeNavigation=!1,"wheelViewModeNavigation"in i?this.wheelViewModeNavigation=i.wheelViewModeNavigation:"wheelViewModeNavigation"in this.element.data()&&(this.wheelViewModeNavigation=this.element.data("view-mode-wheel-navigation")),this.wheelViewModeNavigationInverseDirection=!1,"wheelViewModeNavigationInverseDirection"in i?this.wheelViewModeNavigationInverseDirection=i.wheelViewModeNavigationInverseDirection:"wheelViewModeNavigationInverseDirection"in this.element.data()&&(this.wheelViewModeNavigationInverseDirection=this.element.data("view-mode-wheel-navigation-inverse-dir")),this.wheelViewModeNavigationDelay=100,"wheelViewModeNavigationDelay"in i?this.wheelViewModeNavigationDelay=i.wheelViewModeNavigationDelay:"wheelViewModeNavigationDelay"in this.element.data()&&(this.wheelViewModeNavigationDelay=this.element.data("view-mode-wheel-navigation-delay")),this.startViewMode=2,"startView"in i?this.startViewMode=i.startView:"startView"in this.element.data()&&(this.startViewMode=this.element.data("start-view")),this.startViewMode=r.convertViewMode(this.startViewMode),this.viewMode=this.startViewMode,this.viewSelect=this.minView,"viewSelect"in i?this.viewSelect=i.viewSelect:"viewSelect"in this.element.data()&&(this.viewSelect=this.element.data("view-select")),this.viewSelect=r.convertViewMode(this.viewSelect),this.forceParse=!0,"forceParse"in i?this.forceParse=i.forceParse:"dateForceParse"in this.element.data()&&(this.forceParse=this.element.data("date-force-parse"));for(var s=3===this.bootcssVer?r.templateV3:r.template;-1!==s.indexOf("{iconType}");)s=s.replace("{iconType}",this.icontype);for(;-1!==s.indexOf("{leftArrow}");)s=s.replace("{leftArrow}",this.icons.leftArrow);for(;-1!==s.indexOf("{rightArrow}");)s=s.replace("{rightArrow}",this.icons.rightArrow);if(this.picker=t(s).appendTo(this.isInline?this.element:this.container).on({click:t.proxy(this.click,this),mousedown:t.proxy(this.mousedown,this)}),this.wheelViewModeNavigation&&(t.fn.mousewheel?this.picker.on({mousewheel:t.proxy(this.mousewheel,this)}):console.log("Mouse Wheel event is not supported. Please include the jQuery Mouse Wheel plugin before enabling this option")),this.isInline?this.picker.addClass("datetimepicker-inline"):this.picker.addClass("datetimepicker-dropdown-"+this.pickerPosition+" dropdown-menu"),this.isRTL){this.picker.addClass("datetimepicker-rtl");var a=3===this.bootcssVer?".prev span, .next span":".prev i, .next i";this.picker.find(a).toggleClass(this.icons.leftArrow+" "+this.icons.rightArrow)}t(document).on("mousedown",function(e){0===t(e.target).closest(".datetimepicker").length&&n.hide()}),this.autoclose=!1,"autoclose"in i?this.autoclose=i.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose")),this.keyboardNavigation=!0,"keyboardNavigation"in i?this.keyboardNavigation=i.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation")),
this.todayBtn=i.todayBtn||this.element.data("date-today-btn")||!1,this.todayHighlight=i.todayHighlight||this.element.data("date-today-highlight")||!1,this.weekStart=(i.weekStart||this.element.data("date-weekstart")||o[this.language].weekStart||0)%7,this.weekEnd=(this.weekStart+6)%7,this.startDate=-(1/0),this.endDate=1/0,this.daysOfWeekDisabled=[],this.setStartDate(i.startDate||this.element.data("date-startdate")),this.setEndDate(i.endDate||this.element.data("date-enddate")),this.setDaysOfWeekDisabled(i.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled")),this.setMinutesDisabled(i.minutesDisabled||this.element.data("date-minute-disabled")),this.setHoursDisabled(i.hoursDisabled||this.element.data("date-hour-disabled")),this.fillDow(),this.fillMonths(),this.update(),this.showMode(),this.isInline&&this.show()};n.prototype={constructor:n,_events:[],_attachEvents:function(){this._detachEvents(),this.isInput?this._events=[[this.element,{focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}]]:this.component&&this.hasInput?(this._events=[[this.element.find("input"),{focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}],[this.component,{click:t.proxy(this.show,this)}]],this.componentReset&&this._events.push([this.componentReset,{click:t.proxy(this.reset,this)}])):this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:t.proxy(this.show,this)}]];for(var e,i,n=0;n<this._events.length;n++)e=this._events[n][0],i=this._events[n][1],e.on(i)},_detachEvents:function(){for(var t,e,i=0;i<this._events.length;i++)t=this._events[i][0],e=this._events[i][1],t.off(e);this._events=[]},show:function(e){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.forceParse&&this.update(),this.place(),t(window).on("resize",t.proxy(this.place,this)),e&&(e.stopPropagation(),e.preventDefault()),this.isVisible=!0,this.element.trigger({type:"show",date:this.date})},hide:function(e){this.isVisible&&(this.isInline||(this.picker.hide(),t(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||t(document).off("mousedown",this.hide),this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this.isVisible=!1,this.element.trigger({type:"hide",date:this.date})))},remove:function(){this._detachEvents(),this.picker.remove(),delete this.picker,delete this.element.data().datetimepicker},getDate:function(){var t=this.getUTCDate();return new Date(t.getTime()+6e4*t.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(t){this.setUTCDate(new Date(t.getTime()-6e4*t.getTimezoneOffset()))},setUTCDate:function(t){t>=this.startDate&&t<=this.endDate?(this.date=t,this.setValue(),this.viewDate=this.date,this.fill()):this.element.trigger({type:"outOfRange",date:t,startDate:this.startDate,endDate:this.endDate})},setFormat:function(t){this.format=r.parseFormat(t,this.formatType);var e;this.isInput?e=this.element:this.component&&(e=this.element.find("input")),e&&e.val()&&this.setValue()},setValue:function(){var e=this.getFormattedDate();this.isInput?this.element.val(e):(this.component&&this.element.find("input").val(e),this.element.data("date",e)),this.linkField&&t("#"+this.linkField).val(this.getFormattedDate(this.linkFormat))},getFormattedDate:function(t){return void 0==t&&(t=this.format),r.formatDate(this.date,t,this.language,this.formatType)},setStartDate:function(t){this.startDate=t||-(1/0),this.startDate!==-(1/0)&&(this.startDate=r.parseDate(this.startDate,this.format,this.language,this.formatType)),this.update(),this.updateNavArrows()},setEndDate:function(t){this.endDate=t||1/0,this.endDate!==1/0&&(this.endDate=r.parseDate(this.endDate,this.format,this.language,this.formatType)),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(e){this.daysOfWeekDisabled=e||[],t.isArray(this.daysOfWeekDisabled)||(this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)),this.daysOfWeekDisabled=t.map(this.daysOfWeekDisabled,function(t){return parseInt(t,10)}),this.update(),this.updateNavArrows()},setMinutesDisabled:function(e){this.minutesDisabled=e||[],t.isArray(this.minutesDisabled)||(this.minutesDisabled=this.minutesDisabled.split(/,\s*/)),this.minutesDisabled=t.map(this.minutesDisabled,function(t){return parseInt(t,10)}),this.update(),this.updateNavArrows()},setHoursDisabled:function(e){this.hoursDisabled=e||[],t.isArray(this.hoursDisabled)||(this.hoursDisabled=this.hoursDisabled.split(/,\s*/)),this.hoursDisabled=t.map(this.hoursDisabled,function(t){return parseInt(t,10)}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){if(!this.zIndex){var i=0;t("div").each(function(){var e=parseInt(t(this).css("zIndex"),10);e>i&&(i=e)}),this.zIndex=i+10}var n,s,o,r;r=this.container instanceof t?this.container.offset():t(this.container).offset(),this.component?(n=this.component.offset(),o=n.left,("bottom-left"==this.pickerPosition||"top-left"==this.pickerPosition)&&(o+=this.component.outerWidth()-this.picker.outerWidth())):(n=this.element.offset(),o=n.left),o+220>document.body.clientWidth&&(o=document.body.clientWidth-220),s="top-left"==this.pickerPosition||"top-right"==this.pickerPosition?n.top-this.picker.outerHeight():n.top+this.height,s-=r.top,o-=r.left,e(this.element)||(s+=document.body.scrollTop),this.picker.css({top:s,left:o,zIndex:this.zIndex})}},update:function(){var t,e=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(t=arguments[0],e=!0):(t=(this.isInput?this.element.val():this.element.find("input").val())||this.element.data("date")||this.initialDate,("string"==typeof t||t instanceof String)&&(t=t.replace(/^\s+|\s+$/g,""))),t||(t=new Date,e=!1),this.date=r.parseDate(t,this.format,this.language,this.formatType),e&&this.setValue(),this.date<this.startDate?this.viewDate=new Date(this.startDate):this.date>this.endDate?this.viewDate=new Date(this.endDate):this.viewDate=new Date(this.date),this.fill()},fillDow:function(){for(var t=this.weekStart,e="<tr>";t<this.weekStart+7;)e+='<th class="dow">'+o[this.language].daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datetimepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;12>e;)t+='<span class="month">'+o[this.language].monthsShort[e++]+"</span>";this.picker.find(".datetimepicker-months td").html(t)},fill:function(){if(null!=this.date&&null!=this.viewDate){var e=new Date(this.viewDate),n=e.getUTCFullYear(),s=e.getUTCMonth(),a=e.getUTCDate(),l=e.getUTCHours(),c=e.getUTCMinutes(),d=this.startDate!==-(1/0)?this.startDate.getUTCFullYear():-(1/0),h=this.startDate!==-(1/0)?this.startDate.getUTCMonth()+1:-(1/0),u=this.endDate!==1/0?this.endDate.getUTCFullYear():1/0,p=this.endDate!==1/0?this.endDate.getUTCMonth()+1:1/0,f=new i(this.date.getUTCFullYear(),this.date.getUTCMonth(),this.date.getUTCDate()).valueOf(),g=new Date;if(this.picker.find(".datetimepicker-days thead th:eq(1)").text(o[this.language].months[s]+" "+n),"time"==this.formatViewType){var m=this.getFormattedDate();this.picker.find(".datetimepicker-hours thead th:eq(1)").text(m),this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(m)}else this.picker.find(".datetimepicker-hours thead th:eq(1)").text(a+" "+o[this.language].months[s]+" "+n),this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(a+" "+o[this.language].months[s]+" "+n);this.picker.find("tfoot th.today").text(o[this.language].today).toggle(this.todayBtn!==!1),this.updateNavArrows(),this.fillMonths();var v=i(n,s-1,28,0,0,0,0),b=r.getDaysInMonth(v.getUTCFullYear(),v.getUTCMonth());v.setUTCDate(b),v.setUTCDate(b-(v.getUTCDay()-this.weekStart+7)%7);var y=new Date(v);y.setUTCDate(y.getUTCDate()+42),y=y.valueOf();for(var w,x=[];v.valueOf()<y;)v.getUTCDay()==this.weekStart&&x.push("<tr>"),w="",v.getUTCFullYear()<n||v.getUTCFullYear()==n&&v.getUTCMonth()<s?w+=" old":(v.getUTCFullYear()>n||v.getUTCFullYear()==n&&v.getUTCMonth()>s)&&(w+=" new"),this.todayHighlight&&v.getUTCFullYear()==g.getFullYear()&&v.getUTCMonth()==g.getMonth()&&v.getUTCDate()==g.getDate()&&(w+=" today"),v.valueOf()==f&&(w+=" active"),(v.valueOf()+864e5<=this.startDate||v.valueOf()>this.endDate||-1!==t.inArray(v.getUTCDay(),this.daysOfWeekDisabled))&&(w+=" disabled"),x.push('<td class="day'+w+'">'+v.getUTCDate()+"</td>"),v.getUTCDay()==this.weekEnd&&x.push("</tr>"),v.setUTCDate(v.getUTCDate()+1);this.picker.find(".datetimepicker-days tbody").empty().append(x.join("")),x=[];for(var C="",_="",T="",S=this.hoursDisabled||[],k=0;24>k;k++)if(-1===S.indexOf(k)){var O=i(n,s,a,k);w="",O.valueOf()+36e5<=this.startDate||O.valueOf()>this.endDate?w+=" disabled":l==k&&(w+=" active"),this.showMeridian&&2==o[this.language].meridiem.length?(_=12>k?o[this.language].meridiem[0]:o[this.language].meridiem[1],_!=T&&(""!=T&&x.push("</fieldset>"),x.push('<fieldset class="hour"><legend>'+_.toUpperCase()+"</legend>")),T=_,C=k%12?k%12:12,x.push('<span class="hour'+w+" hour_"+(12>k?"am":"pm")+'">'+C+"</span>"),23==k&&x.push("</fieldset>")):(C=k+":00",x.push('<span class="hour'+w+'">'+C+"</span>"))}this.picker.find(".datetimepicker-hours td").html(x.join("")),x=[],C="",_="",T="";for(var A=this.minutesDisabled||[],k=0;60>k;k+=this.minuteStep)if(-1===A.indexOf(k)){var O=i(n,s,a,l,k,0);w="",O.valueOf()<this.startDate||O.valueOf()>this.endDate?w+=" disabled":Math.floor(c/this.minuteStep)==Math.floor(k/this.minuteStep)&&(w+=" active"),this.showMeridian&&2==o[this.language].meridiem.length?(_=12>l?o[this.language].meridiem[0]:o[this.language].meridiem[1],_!=T&&(""!=T&&x.push("</fieldset>"),x.push('<fieldset class="minute"><legend>'+_.toUpperCase()+"</legend>")),T=_,C=l%12?l%12:12,x.push('<span class="minute'+w+'">'+C+":"+(10>k?"0"+k:k)+"</span>"),59==k&&x.push("</fieldset>")):(C=k+":00",x.push('<span class="minute'+w+'">'+l+":"+(10>k?"0"+k:k)+"</span>"))}this.picker.find(".datetimepicker-minutes td").html(x.join(""));var D=this.date.getUTCFullYear(),E=this.picker.find(".datetimepicker-months").find("th:eq(1)").text(n).end().find("span").removeClass("active");if(D==n){var j=E.length-12;E.eq(this.date.getUTCMonth()+j).addClass("active")}(d>n||n>u)&&E.addClass("disabled"),n==d&&E.slice(0,h+1).addClass("disabled"),n==u&&E.slice(p).addClass("disabled"),x="",n=10*parseInt(n/10,10);var M=this.picker.find(".datetimepicker-years").find("th:eq(1)").text(n+"-"+(n+9)).end().find("td");n-=1;for(var k=-1;11>k;k++)x+='<span class="year'+(-1==k||10==k?" old":"")+(D==n?" active":"")+(d>n||n>u?" disabled":"")+'">'+n+"</span>",n+=1;M.html(x),this.place()}},updateNavArrows:function(){var t=new Date(this.viewDate),e=t.getUTCFullYear(),i=t.getUTCMonth(),n=t.getUTCDate(),s=t.getUTCHours();switch(this.viewMode){case 0:this.startDate!==-(1/0)&&e<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()&&n<=this.startDate.getUTCDate()&&s<=this.startDate.getUTCHours()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()&&n>=this.endDate.getUTCDate()&&s>=this.endDate.getUTCHours()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:this.startDate!==-(1/0)&&e<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()&&n<=this.startDate.getUTCDate()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()&&n>=this.endDate.getUTCDate()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 2:this.startDate!==-(1/0)&&e<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 3:case 4:this.startDate!==-(1/0)&&e<=this.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},mousewheel:function(e){if(e.preventDefault(),e.stopPropagation(),!this.wheelPause){this.wheelPause=!0;var i=e.originalEvent,n=i.wheelDelta,s=n>0?1:0===n?0:-1;this.wheelViewModeNavigationInverseDirection&&(s=-s),this.showMode(s),setTimeout(t.proxy(function(){this.wheelPause=!1},this),this.wheelViewModeNavigationDelay)}},click:function(e){e.stopPropagation(),e.preventDefault();var n=t(e.target).closest("span, td, th, legend");if(n.is("."+this.icontype)&&(n=t(n).parent().closest("span, td, th, legend")),1==n.length){if(n.is(".disabled"))return void this.element.trigger({type:"outOfRange",date:this.viewDate,startDate:this.startDate,endDate:this.endDate});switch(n[0].nodeName.toLowerCase()){case"th":switch(n[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var s=r.modes[this.viewMode].navStep*("prev"==n[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveHour(this.viewDate,s);break;case 1:this.viewDate=this.moveDate(this.viewDate,s);break;case 2:this.viewDate=this.moveMonth(this.viewDate,s);break;case 3:case 4:this.viewDate=this.moveYear(this.viewDate,s)}this.fill(),this.element.trigger({type:n[0].className+":"+this.convertViewModeText(this.viewMode),date:this.viewDate,startDate:this.startDate,endDate:this.endDate});break;case"today":var o=new Date;o=i(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds(),0),o<this.startDate?o=this.startDate:o>this.endDate&&(o=this.endDate),this.viewMode=this.startViewMode,this.showMode(0),this._setDate(o),this.fill(),this.autoclose&&this.hide()}break;case"span":if(!n.is(".disabled")){var a=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth(),c=this.viewDate.getUTCDate(),d=this.viewDate.getUTCHours(),h=this.viewDate.getUTCMinutes(),u=this.viewDate.getUTCSeconds();if(n.is(".month")?(this.viewDate.setUTCDate(1),l=n.parent().find("span").index(n),c=this.viewDate.getUTCDate(),this.viewDate.setUTCMonth(l),this.element.trigger({type:"changeMonth",date:this.viewDate}),this.viewSelect>=3&&this._setDate(i(a,l,c,d,h,u,0))):n.is(".year")?(this.viewDate.setUTCDate(1),a=parseInt(n.text(),10)||0,this.viewDate.setUTCFullYear(a),this.element.trigger({type:"changeYear",date:this.viewDate}),this.viewSelect>=4&&this._setDate(i(a,l,c,d,h,u,0))):n.is(".hour")?(d=parseInt(n.text(),10)||0,(n.hasClass("hour_am")||n.hasClass("hour_pm"))&&(12==d&&n.hasClass("hour_am")?d=0:12!=d&&n.hasClass("hour_pm")&&(d+=12)),this.viewDate.setUTCHours(d),this.element.trigger({type:"changeHour",date:this.viewDate}),this.viewSelect>=1&&this._setDate(i(a,l,c,d,h,u,0))):n.is(".minute")&&(h=parseInt(n.text().substr(n.text().indexOf(":")+1),10)||0,this.viewDate.setUTCMinutes(h),this.element.trigger({type:"changeMinute",date:this.viewDate}),this.viewSelect>=0&&this._setDate(i(a,l,c,d,h,u,0))),0!=this.viewMode){var p=this.viewMode;this.showMode(-1),this.fill(),p==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide()}break;case"td":if(n.is(".day")&&!n.is(".disabled")){var c=parseInt(n.text(),10)||1,a=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth(),d=this.viewDate.getUTCHours(),h=this.viewDate.getUTCMinutes(),u=this.viewDate.getUTCSeconds();n.is(".old")?0===l?(l=11,a-=1):l-=1:n.is(".new")&&(11==l?(l=0,a+=1):l+=1),this.viewDate.setUTCFullYear(a),this.viewDate.setUTCMonth(l,c),this.element.trigger({type:"changeDay",date:this.viewDate}),this.viewSelect>=2&&this._setDate(i(a,l,c,d,h,u,0))}var p=this.viewMode;this.showMode(-1),this.fill(),p==this.viewMode&&this.autoclose&&this.hide()}}},_setDate:function(t,e){e&&"date"!=e||(this.date=t),e&&"view"!=e||(this.viewDate=t),this.fill(),this.setValue();var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&(i.change(),this.autoclose&&(!e||"date"==e)),this.element.trigger({type:"changeDate",date:this.date}),null==t&&(this.date=this.viewDate)},moveMinute:function(t,e){if(!e)return t;var i=new Date(t.valueOf());return i.setUTCMinutes(i.getUTCMinutes()+e*this.minuteStep),i},moveHour:function(t,e){if(!e)return t;var i=new Date(t.valueOf());return i.setUTCHours(i.getUTCHours()+e),i},moveDate:function(t,e){if(!e)return t;var i=new Date(t.valueOf());return i.setUTCDate(i.getUTCDate()+e),i},moveMonth:function(t,e){if(!e)return t;var i,n,s=new Date(t.valueOf()),o=s.getUTCDate(),r=s.getUTCMonth(),a=Math.abs(e);if(e=e>0?1:-1,1==a)n=-1==e?function(){return s.getUTCMonth()==r}:function(){return s.getUTCMonth()!=i},i=r+e,s.setUTCMonth(i),(0>i||i>11)&&(i=(i+12)%12);else{for(var l=0;a>l;l++)s=this.moveMonth(s,e);i=s.getUTCMonth(),s.setUTCDate(o),n=function(){return i!=s.getUTCMonth()}}for(;n();)s.setUTCDate(--o),s.setUTCMonth(i);return s},moveYear:function(t,e){return this.moveMonth(t,12*e)},dateWithinRange:function(t){return t>=this.startDate&&t<=this.endDate},keydown:function(t){if(this.picker.is(":not(:visible)"))return void(27==t.keyCode&&this.show());var e,i,n,s=!1;switch(t.keyCode){case 27:this.hide(),t.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;e=37==t.keyCode?-1:1,viewMode=this.viewMode,t.ctrlKey?viewMode+=2:t.shiftKey&&(viewMode+=1),4==viewMode?(i=this.moveYear(this.date,e),n=this.moveYear(this.viewDate,e)):3==viewMode?(i=this.moveMonth(this.date,e),n=this.moveMonth(this.viewDate,e)):2==viewMode?(i=this.moveDate(this.date,e),n=this.moveDate(this.viewDate,e)):1==viewMode?(i=this.moveHour(this.date,e),n=this.moveHour(this.viewDate,e)):0==viewMode&&(i=this.moveMinute(this.date,e),n=this.moveMinute(this.viewDate,e)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),t.preventDefault(),s=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;e=38==t.keyCode?-1:1,viewMode=this.viewMode,t.ctrlKey?viewMode+=2:t.shiftKey&&(viewMode+=1),4==viewMode?(i=this.moveYear(this.date,e),n=this.moveYear(this.viewDate,e)):3==viewMode?(i=this.moveMonth(this.date,e),n=this.moveMonth(this.viewDate,e)):2==viewMode?(i=this.moveDate(this.date,7*e),n=this.moveDate(this.viewDate,7*e)):1==viewMode?this.showMeridian?(i=this.moveHour(this.date,6*e),n=this.moveHour(this.viewDate,6*e)):(i=this.moveHour(this.date,4*e),n=this.moveHour(this.viewDate,4*e)):0==viewMode&&(i=this.moveMinute(this.date,4*e),n=this.moveMinute(this.viewDate,4*e)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),t.preventDefault(),s=!0);break;case 13:if(0!=this.viewMode){var o=this.viewMode;this.showMode(-1),this.fill(),o==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide();t.preventDefault();break;case 9:this.hide()}if(s){var r;this.isInput?r=this.element:this.component&&(r=this.element.find("input")),r&&r.change(),this.element.trigger({type:"changeDate",date:this.date})}},showMode:function(t){if(t){var e=Math.max(0,Math.min(r.modes.length-1,this.viewMode+t));e>=this.minView&&e<=this.maxView&&(this.element.trigger({type:"changeMode",date:this.viewDate,oldViewMode:this.viewMode,newViewMode:e}),this.viewMode=e)}this.picker.find(">div").hide().filter(".datetimepicker-"+r.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()},reset:function(t){this._setDate(null,"date")},convertViewModeText:function(t){switch(t){case 4:return"decade";case 3:return"year";case 2:return"month";case 1:return"day";case 0:return"hour"}}};var s=t.fn.datetimepicker;t.fn.datetimepicker=function(e){var i=Array.apply(null,arguments);i.shift();var s;return this.each(function(){var o=t(this),r=o.data("datetimepicker"),a="object"==typeof e&&e;return r||o.data("datetimepicker",r=new n(this,t.extend({},t.fn.datetimepicker.defaults,a))),"string"==typeof e&&"function"==typeof r[e]&&(s=r[e].apply(r,i),void 0!==s)?!1:void 0}),void 0!==s?s:this},t.fn.datetimepicker.defaults={},t.fn.datetimepicker.Constructor=n;var o=t.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridiem:["am","pm"],suffix:["st","nd","rd","th"],today:"Today"}},r={modes:[{clsName:"minutes",navFnc:"Hours",navStep:1},{clsName:"hours",navFnc:"Date",navStep:1},{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(t){return t%4===0&&t%100!==0||t%400===0},getDaysInMonth:function(t,e){return[31,r.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},getDefaultFormat:function(t,e){if("standard"==t)return"input"==e?"yyyy-mm-dd hh:ii":"yyyy-mm-dd hh:ii:ss";if("php"==t)return"input"==e?"Y-m-d H:i":"Y-m-d H:i:s";throw new Error("Invalid format type.")},validParts:function(t){if("standard"==t)return/hh?|HH?|p|P|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g;if("php"==t)return/[dDjlNwzFmMnStyYaABgGhHis]/g;throw new Error("Invalid format type.")},nonpunctuation:/[^ -\/:-@\[-`{-~\t\n\rTZ]+/g,parseFormat:function(t,e){var i=t.replace(this.validParts(e),"\x00").split("\x00"),n=t.match(this.validParts(e));if(!i||!i.length||!n||0==n.length)throw new Error("Invalid date format.");return{separators:i,parts:n}},parseDate:function(e,s,r,a){if(e instanceof Date){var l=new Date(e.valueOf()-6e4*e.getTimezoneOffset());return l.setMilliseconds(0),l}if(/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(e)&&(s=this.parseFormat("yyyy-mm-dd",a)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(e)&&(s=this.parseFormat("yyyy-mm-dd hh:ii",a)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(e)&&(s=this.parseFormat("yyyy-mm-dd hh:ii:ss",a)),/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(e)){var c,d,h=/([-+]\d+)([dmwy])/,u=e.match(/([-+]\d+)([dmwy])/g);e=new Date;for(var p=0;p<u.length;p++)switch(c=h.exec(u[p]),d=parseInt(c[1]),c[2]){case"d":e.setUTCDate(e.getUTCDate()+d);break;case"m":e=n.prototype.moveMonth.call(n.prototype,e,d);break;case"w":e.setUTCDate(e.getUTCDate()+7*d);break;case"y":e=n.prototype.moveYear.call(n.prototype,e,d)}return i(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),0)}var f,g,c,u=e&&e.toString().match(this.nonpunctuation)||[],e=new Date(0,0,0,0,0,0,0),m={},v=["hh","h","ii","i","ss","s","yyyy","yy","M","MM","m","mm","D","DD","d","dd","H","HH","p","P"],b={hh:function(t,e){return t.setUTCHours(e)},h:function(t,e){return t.setUTCHours(e)},HH:function(t,e){return t.setUTCHours(12==e?0:e)},H:function(t,e){return t.setUTCHours(12==e?0:e)},ii:function(t,e){return t.setUTCMinutes(e)},i:function(t,e){return t.setUTCMinutes(e)},ss:function(t,e){return t.setUTCSeconds(e)},s:function(t,e){return t.setUTCSeconds(e)},yyyy:function(t,e){return t.setUTCFullYear(e)},yy:function(t,e){return t.setUTCFullYear(2e3+e)},m:function(t,e){for(e-=1;0>e;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!=e;){if(isNaN(t.getUTCMonth()))return t;t.setUTCDate(t.getUTCDate()-1)}return t},d:function(t,e){return t.setUTCDate(e)},p:function(t,e){return t.setUTCHours(1==e?t.getUTCHours()+12:t.getUTCHours())}};if(b.M=b.MM=b.mm=b.m,b.dd=b.d,b.P=b.p,e=i(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()),u.length==s.parts.length){for(var p=0,y=s.parts.length;y>p;p++){if(f=parseInt(u[p],10),c=s.parts[p],isNaN(f))switch(c){case"MM":g=t(o[r].months).filter(function(){var t=this.slice(0,u[p].length),e=u[p].slice(0,t.length);return t==e}),f=t.inArray(g[0],o[r].months)+1;break;case"M":g=t(o[r].monthsShort).filter(function(){var t=this.slice(0,u[p].length),e=u[p].slice(0,t.length);return t.toLowerCase()==e.toLowerCase()}),f=t.inArray(g[0],o[r].monthsShort)+1;break;case"p":case"P":f=t.inArray(u[p].toLowerCase(),o[r].meridiem)}m[c]=f}for(var w,p=0;p<v.length;p++)w=v[p],w in m&&!isNaN(m[w])&&b[w](e,m[w])}return e},formatDate:function(e,i,n,s){if(null==e)return"";var a;if("standard"==s)a={yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear(),m:e.getUTCMonth()+1,M:o[n].monthsShort[e.getUTCMonth()],MM:o[n].months[e.getUTCMonth()],d:e.getUTCDate(),D:o[n].daysShort[e.getUTCDay()],DD:o[n].days[e.getUTCDay()],p:2==o[n].meridiem.length?o[n].meridiem[e.getUTCHours()<12?0:1]:"",h:e.getUTCHours(),i:e.getUTCMinutes(),s:e.getUTCSeconds()},2==o[n].meridiem.length?a.H=a.h%12==0?12:a.h%12:a.H=a.h,a.HH=(a.H<10?"0":"")+a.H,a.P=a.p.toUpperCase(),a.hh=(a.h<10?"0":"")+a.h,a.ii=(a.i<10?"0":"")+a.i,a.ss=(a.s<10?"0":"")+a.s,a.dd=(a.d<10?"0":"")+a.d,a.mm=(a.m<10?"0":"")+a.m;else{if("php"!=s)throw new Error("Invalid format type.");a={y:e.getUTCFullYear().toString().substring(2),Y:e.getUTCFullYear(),F:o[n].months[e.getUTCMonth()],M:o[n].monthsShort[e.getUTCMonth()],n:e.getUTCMonth()+1,t:r.getDaysInMonth(e.getUTCFullYear(),e.getUTCMonth()),j:e.getUTCDate(),l:o[n].days[e.getUTCDay()],D:o[n].daysShort[e.getUTCDay()],w:e.getUTCDay(),N:0==e.getUTCDay()?7:e.getUTCDay(),S:e.getUTCDate()%10<=o[n].suffix.length?o[n].suffix[e.getUTCDate()%10-1]:"",a:2==o[n].meridiem.length?o[n].meridiem[e.getUTCHours()<12?0:1]:"",g:e.getUTCHours()%12==0?12:e.getUTCHours()%12,G:e.getUTCHours(),i:e.getUTCMinutes(),s:e.getUTCSeconds()},a.m=(a.n<10?"0":"")+a.n,a.d=(a.j<10?"0":"")+a.j,a.A=a.a.toString().toUpperCase(),a.h=(a.g<10?"0":"")+a.g,a.H=(a.G<10?"0":"")+a.G,a.i=(a.i<10?"0":"")+a.i,a.s=(a.s<10?"0":"")+a.s}for(var e=[],l=t.extend([],i.separators),c=0,d=i.parts.length;d>c;c++)l.length&&e.push(l.shift()),e.push(a[i.parts[c]]);return l.length&&e.push(l.shift()),e.join("")},convertViewMode:function(t){switch(t){case 4:case"decade":t=4;break;case 3:case"year":t=3;break;case 2:case"month":t=2;break;case 1:case"day":t=1;break;case 0:case"hour":t=0}return t},headTemplate:'<thead><tr><th class="prev"><i class="{iconType} {leftArrow}"/></th><th colspan="5" class="switch"></th><th class="next"><i class="{iconType} {rightArrow}"/></th></tr></thead>',headTemplateV3:'<thead><tr><th class="prev"><span class="{iconType} {leftArrow}"></span> </th><th colspan="5" class="switch"></th><th class="next"><span class="{iconType} {rightArrow}"></span> </th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr></tfoot>'};r.template='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+r.headTemplate+r.contTemplate+r.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed">'+r.headTemplate+r.contTemplate+r.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed">'+r.headTemplate+"<tbody></tbody>"+r.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+r.headTemplate+r.contTemplate+r.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+r.headTemplate+r.contTemplate+r.footTemplate+"</table></div></div>",r.templateV3='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+r.headTemplateV3+r.contTemplate+r.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed">'+r.headTemplateV3+r.contTemplate+r.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed">'+r.headTemplateV3+"<tbody></tbody>"+r.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+r.headTemplateV3+r.contTemplate+r.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+r.headTemplateV3+r.contTemplate+r.footTemplate+"</table></div></div>",t.fn.datetimepicker.DPGlobal=r,t.fn.datetimepicker.noConflict=function(){return t.fn.datetimepicker=s,this},t(document).on("focus.datetimepicker.data-api click.datetimepicker.data-api",'[data-provide="datetimepicker"]',function(e){var i=t(this);i.data("datetimepicker")||(e.preventDefault(),i.datetimepicker("show"))}),t(function(){t('[data-provide="datetimepicker-inline"]').datetimepicker()})}(window.jQuery),define("datetimepicker",["jquery"],function(){}),define("collections/JornadaEquiposCollection",["backbone","models/TorneoEquipoModel"],function(t,e){var i=t.Collection.extend({model:e,url:function(){return"torneojornada/"+this.jornada.get("id")+"/equipo"},setJornada:function(t){this.jornada=t}});return i}),define("models/CanchaModel",["backbone","../core/BaseModel"],function(t,e){var i=e.extend({urlRoot:"cancha",defaults:{nombre:"",alias:"",descripcion:"",calle:"",noExterior:"",noInterior:"",codigoPostal:"",coloniaId:"",coloniaDesc:"",municipioDesc:"",estadoDesc:"",paisDesc:"",longitude:"",latitude:""},validation:{nombre:{required:!0},alias:{required:!0},descripcion:{required:!1},calle:{required:!0},noExterior:{required:!0},noInterior:{required:!1},codigoPostal:{required:!0},coloniaId:{required:!0},longitude:{required:!1},latitude:{required:!1}}});return i}),define("collections/TorneoCanchasCollection",["backbone","models/CanchaModel"],function(t,e){var i=t.Collection.extend({model:e,url:function(){return"torneo/"+this.torneo.get("id")+"/cancha"},setTorneo:function(t){this.torneo=t}});return i}),define("text!templates/private/tplPartidoCreate.html",[],function(){return'<div class="modal fade" id="partido-create-dialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n                <h4 class="modal-title">Partido</h4>\n            </div>\n            <div class="modal-body">\n                <p>Crear Partido.</p>\n                <div class="alert alert-danger" role="alert"></div>\n                <form id="form-torneo-partido" role="form">\n                <input id="jornada-id" type="hidden" name="jornadaId" value="<%= jornadaId %>">\n                <div class="row">\n                    <div class="col-xs-6">\n                        <div class="form-group">\n                            <label>Local</label>\n                            <select class="form-control" id="select-local" placeholder="Local..." name="localId" value="<%= localId %>">\n                            </select>\n                        </div>\n                    </div>\n                    <div class="col-xs-6">\n                        <div class="form-group">\n                            <label>Visitante</label>\n                            <select class="form-control" id="select-visita" placeholder="Visitante..." name="visitaId" value="<%= visitaId %>">\n                            </select>\n                        </div>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="col-xs-6">\n                        <div class="form-group">\n                            <label>Cancha</label>\n                            <select class="form-control" id="select-cancha" placeholder="Cancha..." name="canchaId" value="<%= canchaId %>">\n                            </select>\n                        </div>\n                    </div>\n                    <div class="col-xs-6">\n                        <div class="form-group">\n                            <label>Horario</label>\n                            <input id="dtp-horario" class="span2 form-control" size="16" type="text" name="horarioDes" value="<%= horarioDes %>">\n                        </div>\n                    </div>\n                </div>\n                </form>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n                <button id="btn-aceptar" type="button" class="btn btn-success">Aceptar</button>\n            </div>\n        </div>\n    </div>\n</div>\n<style>\n    .ui-datepicker-partido{\n        z-index: 100000 !important;\n        display: block;\n    }\n</style>\n';
}),define("views/private/PartidoCreateView",["jquery","backbone","bootstrap","datetimepicker","core/BaseView","models/TorneoPartidoModel","models/TorneoModel","collections/JornadaEquiposCollection","collections/TorneoCanchasCollection","views/private/util/ModalGenericView","text!templates/private/tplPartidoCreate.html"],function(t,e,i,n,s,o,r,a,l,c,d){var h=s.extend({el:"#modal-partido-create",template:_.template(d),events:{"click #btn-aceptar":"clickAceptar","change #select-local":"changeLocal"},initialize:function(t){this.callbackAceptar=t.callbackAceptar,this.model=new o,this.jornada=t.modelo,this.torneo=new r({id:this.jornada.get("torneoId")}),this.render(),this.locales=new a,this.listenTo(this.locales,"add",this.agregarLocal),this.listenTo(this.locales,"sync",this.syncLocales),this.locales.setJornada(this.jornada),this.visitas=new a,this.listenTo(this.visitas,"add",this.agregarVisita),this.listenTo(this.visitas,"sync",this.syncVisitas),this.visitas.setJornada(this.jornada),this.visitas.fetch(),this.canchas=new l,this.listenTo(this.canchas,"add",this.agregarCancha),this.listenTo(this.canchas,"sync",this.syncCanchas),this.canchas.setTorneo(this.torneo),this.canchas.fetch(),e.Validation.bind(this)},render:function(){this.$el.html(this.template(this.model.toJSON())),this.$("#partido-create-dialog").modal("show"),this.$(".alert-danger").hide(),this.$("#jornada-id").val(this.jornada.get("id")),this.$el.find("#dtp-horario").datetimepicker({format:"mm/dd/yyyy hh:ii"}).on("show",function(e){t(".datepicker.dropdown-menu").addClass("ui-datepicker-partido")})},agregarLocal:function(e){t("#select-local").append(t("<option>",{value:e.get("id"),text:e.get("equipoNombre")}))},syncLocales:function(){t("#select-local").change()},agregarVisita:function(t){},syncVisitas:function(t){this.locales.fetch()},agregarCancha:function(e){t("#select-cancha").append(t("<option>",{value:e.get("id"),text:e.get("canchaNombre")}))},syncCanchas:function(e){t("#select-cancha").change()},changeLocal:function(e){var i=this.locales.get(t(e.target).val());t("#select-visita").html(""),this.visitas.each(function(e){i.get("id")!=e.get("id")&&t("#select-visita").append(t("<option>",{value:e.get("id"),text:e.get("equipoNombre")}))})},clickAceptar:function(t){var e=this.$el.find("#form-torneo-partido").serializeObject();this.model.set(e);var i=new Date(this.model.get("horarioDes"));this.model.set({horario:i.getTime()}),that=this,this.model.isValid(!0)&&this.model.save({},{wait:!0,success:function(t,e){new c({message:"Partido registrado correctamente"}),that.callbackAceptar(t)},error:function(t,e){new c({message:"Se presento un error al registrar el partido"})}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this)}});return h}),define("text!templates/private/tplTorneoPartidoAdmin.html",[],function(){return'<div class="row">\n    <div class="col-md-12">\n        <div class="form-group">\n            <select class="form-control" id="select-torneo-jornada" placeholder="Jornada...">\n            </select>\n        </div>\n        <table id="torneo-partidos" class="table table-condensed">\n            <thead>\n            <tr>\n                <th>#</th>\n                <th>Local</th>\n                <th>Visita</th>\n                <th>Fecha</th>\n                <th>Lugar</th>\n                <th></th>\n                <th></th>\n            </tr>\n            </thead>\n            <tbody>\n            </tbody>\n            <div id="modal-partido-create">\n            </div>\n        </table>\n    </div>\n</div>\n<div class="row">\n    <div class="col-md-12">\n        <div class="btn-group-horizontal" role="group" aria-label="...">\n            <button id="partido-agregar" type="button" class="btn btn-primary">Agregar</button>\n        </div>\n    </div>\n</div>'}),define("views/private/TorneoPartidoAdminView",["jquery","backbone","core/BaseView","models/TorneoPartidoModel","collections/TorneoJornadasCollection","collections/TorneoPartidosCollection","views/private/RowTorneoPartidoView","views/private/PartidoCreateView","text!templates/private/tplTorneoPartidoAdmin.html"],function(t,e,i,n,s,o,r,a,l){var c=i.extend({template:_.template(l),events:{"click #partido-agregar":"agregarPartido","change #select-torneo-jornada":"changeJornada"},initialize:function(){this.torneojornadas=new s,this.torneojornadas.setTorneo(this.model),this.listenTo(this.torneojornadas,"add",this.agregarTorneoJornada),this.listenTo(this.torneojornadas,"sync",this.syncTorneoJornadas),this.torneojornadas.fetch(),app.torneopartidos=new o,this.listenTo(app.torneopartidos,"add",this.agregarTorneoPartido),this.listenTo(app.torneopartidos,"sync",this.syncTorneoPartidos)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},agregarTorneoJornada:function(e){t("#select-torneo-jornada").append(t("<option>",{value:e.get("id"),text:e.get("nombre")+" - "+e.get("fase")}))},syncTorneoJornadas:function(){t("#select-torneo-jornada").change()},changeJornada:function(e){var i=this.torneojornadas.get(t(e.target).val());"undefined"!=typeof i&&(this.torneoJornada=i,t("#torneo-partidos").find("tbody").html(""),app.torneopartidos.setTorneoJornada(this.torneoJornada),app.torneopartidos.fetch())},agregarTorneoPartido:function(e){var i=new r(e);t("#torneo-partidos").find("tbody:last").append(i.render().$el)},syncTorneoPartidos:function(){},agregarPartido:function(){this.partidoCreateView=new a({modelo:this.torneoJornada,callbackAceptar:this.selectPartido})},selectPartido:function(e){this.destroyView(),t("<div id='modal-equipo-create'></div>").appendTo("#torneo-partidos"),app.torneopartidos.add(e)},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this)}});return c}),define("models/TorneoCanchaModel",["backbone"],function(t){var e=t.Model.extend({urlRoot:"torneocancha",defaults:{statusCancha:"INSCRITO"},initialize:function(){},validate:function(t){return t.torneoId?t.canchaId?t.statusCancha?void 0:"Debe tener un Status.":"Debe tener una Cancha.":"Debe tener un Torneo."}});return e}),define("collections/CanchasCollection",["backbone","models/CanchaModel"],function(t,e){var i=t.Collection.extend({model:e,url:function(){return"like"==this.tipo?"cancha/search/"+this.criterio:"cancha"},setTipo:function(t){this.tipo=t},setCriterio:function(t){this.criterio=t}});return i}),define("text!templates/private/tplCanchaSearch.html",[],function(){return'<div class="modal fade" id="cancha-search-dialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n                <h4 class="modal-title">Cancha</h4>\n            </div>\n            <div class="modal-body">\n                <p>Seleccione Cancha.</p>\n                <div class="alert alert-danger" role="alert"></div>\n                <div class="input-group">\n                    <input id="text-busqueda" type="text" class="form-control" placeholder="Buscar por...">\n                    <span class="input-group-btn">\n                        <button id="btn-buscar" class="btn btn-default" type="button">Buscar</button>\n                    </span>\n                </div>\n                <div id="result-search" class="list-group">\n                </div>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n                <button id="btn-aceptar" type="button" class="btn btn-success">Aceptar</button>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("views/private/CanchaSearchView",["jquery","bootstrap","core/BaseView","collections/CanchasCollection","text!templates/private/tplCanchaSearch.html"],function(t,e,i,n,s){var o=i.extend({el:"#modal-cancha-search",template:_.template(s),events:{"click #btn-buscar":"clickBuscar","click #btn-aceptar":"clickAceptar","click .list-group-item":"clickItemSearch"},initialize:function(t){this.callbackAceptar=t.callbackAceptar,this.model=t.modelo,this.render(),this.canchas=new n,this.listenTo(this.canchas,"add",this.agregarCancha),this.listenTo(this.canchas,"sync",this.syncCanchas)},render:function(){this.$el.html(this.template()),this.$("#cancha-search-dialog").modal("show"),this.$(".alert-danger").hide()},agregarCancha:function(t){},syncCanchas:function(){t("#result-search").html(""),this.canchas.forEach(function(e){var i="<a class='canchas list-group-item' id='"+e.get("id")+"'>"+e.get("nombre")+"</a>";t(i).appendTo("#result-search")})},clickBuscar:function(e){var i=t("#text-busqueda").val(),n=this.model.get("id");""!=i&&"undefined"!=i&&(t("#result-search").html(""),this.canchas.setTipo("like"),this.canchas.setCriterio(i),this.canchas.fetch({data:{tipo:"notInTorneoAndContainName",idTorneo:n},processData:!0}))},clickAceptar:function(e){var i=t(".canchas.list-group-item.active").attr("id");if("undefined"==i||void 0==i||""==i)this.$(".alert-danger").show(),this.$(".alert-danger").html("Debe seleccionar una cancha");else{var n=this.canchas.get(i);this.callbackAceptar(n)}},clickItemSearch:function(e){t(".canchas.list-group-item").removeClass("active"),t(e.target).addClass("active")},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}});return o}),define("text!templates/private/tplRowTorneoCancha.html",[],function(){return'<th><%= id %></th>\n<td><%= canchaNombre %></td>\n<td><%= statusCancha %></td>\n<td>\n    <button id="eliminar-cancha" class="btn btn-primary btn-xs" value="<%= id %>">\n        <span class="glyphicon glyphicon-trash" aria-hidden="true" value="<%= id %>"></span>\n    </button>\n</td>'}),define("views/private/RowTorneoCanchaView",["jquery","underscore","core/BaseView","views/private/util/ModalGenericView","text!templates/private/tplRowTorneoCancha.html"],function(t,e,i,n,s){var o=i.extend({template:e.template(s),tagName:"tr",events:{"click #eliminar-cancha":"deleteCancha"},initialize:function(t){this.model=t},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},deleteCancha:function(){that=this,this.model.destroy({contentType:"application/json",wait:!0,success:function(t,e){that.destroyView(),new n({message:e.message})},error:function(t,e){new n({message:e.responseJSON.message})}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}});return o}),define("text!templates/private/tplTorneoCanchaAdmin.html",[],function(){return'<div class="row">\n    <div class="col-md-12">\n        <table id="torneo-canchas" class="table table-condensed">\n            <thead>\n            <tr>\n                <th>#</th>\n                <th>Cancha</th>\n                <th>Status</th>\n                <th></th>\n            </tr>\n            </thead>\n            <tbody>\n            </tbody>\n            <div id="modal-cancha-search">\n            </div>\n        </table>\n    </div>\n</div>\n<div class="row">\n    <div class="col-md-12">\n        <div class="btn-group-horizontal" role="group" aria-label="...">\n            <button id="cancha-agregar" type="button" class="btn btn-primary">Agregar</button>\n        </div>\n    </div>\n</div>'}),define("views/private/TorneoCanchaAdminView",["jquery","backbone","core/BaseView","models/TorneoCanchaModel","collections/TorneoCanchasCollection","views/private/CanchaSearchView","views/private/RowTorneoCanchaView","text!templates/private/tplTorneoCanchaAdmin.html"],function(t,e,i,n,s,o,r,a){var l=i.extend({template:_.template(a),events:{"click #cancha-agregar":"agregarCancha"},initialize:function(){app.torneocanchas=new s,app.torneocanchas.setTorneo(this.model),this.listenTo(app.torneocanchas,"add",this.agregarTorneoCancha),this.listenTo(app.torneocanchas,"sync",this.syncTorneoCanchas),app.torneocanchas.fetch()},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},agregarTorneoCancha:function(e){var i=new r(e);t("#torneo-canchas").find("tbody:last").append(i.render().$el)},syncTorneoCanchas:function(){},agregarCancha:function(){this.canchaSearchView=new o({modelo:this.model,callbackAceptar:this.selectCancha})},selectCancha:function(e){this.destroyView(),t("<div id='modal-cancha-search'></div>").appendTo("#torneo-canchas");var i=new n;i.save({torneoId:this.model.get("id"),canchaId:e.get("id")},{wait:!0,success:function(t,e){app.torneocanchas.add(t)},error:function(t,e){console.log(t.toJSON()),console.log("error.responseText")}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this)}});return l}),define("models/TorneoArbitroModel",["backbone"],function(t){var e=t.Model.extend({urlRoot:"torneoarbitro",defaults:{statusArbitro:"INSCRITO"},initialize:function(){},validate:function(t){return t.torneoId?t.arbitroId?t.statusArbitro?void 0:"Debe tener un Status.":"Debe tener un Arbitro.":"Debe tener un Torneo."}});return e}),define("collections/TorneoArbitrosCollection",["backbone","models/TorneoArbitroModel"],function(t,e){var i=t.Collection.extend({model:e,url:function(){return"torneo/"+this.torneo.get("id")+"/arbitro"},setTorneo:function(t){this.torneo=t}});return i}),define("models/ArbitroModel",["backbone","../core/BaseModel"],function(t,e){var i=e.extend({urlRoot:"arbitro",defaults:{nombre:"",paterno:"",materno:"",sexo:"FEMENINO",logoArbitro:"novalid",fechaRegistro:(new Date).getTime(),calle:"",noExterior:"",noInterior:"",codigoPostal:"",coloniaId:"",coloniaDesc:"",municipioDesc:"",estadoDesc:"",paisDesc:"",longitude:"",latitude:""},validation:{nombre:{required:!0},paterno:{required:!0},materno:{required:!0},sexo:{required:!0},logoArbitro:{required:!0},fechaRegistro:{required:!0},calle:{required:!0},noExterior:{required:!0},noInterior:{required:!1},codigoPostal:{required:!0},coloniaId:{required:!0},longitude:{required:!1},latitude:{required:!1}}});return i}),define("collections/ArbitrosCollection",["backbone","models/ArbitroModel"],function(t,e){var i=t.Collection.extend({model:e,url:function(){return"like"==this.tipo?"arbitro/search/"+this.criterio:"arbitro"},setTipo:function(t){this.tipo=t},setCriterio:function(t){this.criterio=t}});return i}),define("text!templates/private/tplArbitroSearch.html",[],function(){return'<div class="modal fade" id="arbitro-search-dialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n                <h4 class="modal-title">Arbitro</h4>\n            </div>\n            <div class="modal-body">\n                <p>Seleccione Arbitro.</p>\n                <div class="alert alert-danger" role="alert"></div>\n                <div class="form-group">\n                    <input id="text-busqueda" type="text" class="form-control" placeholder="Buscar por..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">\n                    <div id="result-search" class="list-group">\n                    </div>\n                </div>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n                <button id="btn-aceptar" type="button" class="btn btn-success">Aceptar</button>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("views/private/ArbitroSearchView",["jquery","bootstrap","core/BaseView","collections/ArbitrosCollection","text!templates/private/tplArbitroSearch.html"],function(t,e,i,n,s){var o=i.extend({el:"#modal-arbitro-search",template:_.template(s),events:{"keydown #text-busqueda":"changeBuscar","click #btn-aceptar":"clickAceptar","click .list-group-item":"clickItemSearch"},initialize:function(t){this.callbackAceptar=t.callbackAceptar,this.model=t.modelo,this.render(),this.arbitros=new n,this.listenTo(this.arbitros,"add",this.agregarArbitro),this.listenTo(this.arbitros,"sync",this.syncArbitros)},render:function(){this.$el.html(this.template()),this.$("#arbitro-search-dialog").modal("show"),this.$(".alert-danger").hide()},agregarArbitro:function(t){},syncArbitros:function(){t("#result-search").html(""),this.arbitros.forEach(function(e){var i="<a class='arbitros list-group-item' id='"+e.get("id")+"'>"+e.get("nombre")+"</a>";t(i).appendTo("#result-search")})},changeBuscar:function(e){var i=t("#text-busqueda").val(),n=this.model.get("id");""!=i&&"undefined"!=i&&i.length>2&&(t("#result-search").html(""),this.arbitros.setTipo("like"),this.arbitros.setCriterio(i),this.arbitros.fetch({data:{tipo:"notInTorneoAndContainName",idTorneo:n},processData:!0}))},clickAceptar:function(e){var i=t(".arbitros.list-group-item.active").attr("id");if("undefined"==i||void 0==i||""==i)this.$(".alert-danger").show(),this.$(".alert-danger").html("Debe seleccionar un arbitro");else{var n=this.arbitros.get(i);this.callbackAceptar(n)}},clickItemSearch:function(e){t(".arbitros.list-group-item").removeClass("active"),t(e.target).addClass("active")},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}});return o}),define("text!templates/private/tplRowTorneoArbitro.html",[],function(){return'<th><%= id %></th>\n<td><%= arbitroNombre %></td>\n<td><%= statusArbitro %></td>\n<td>\n    <button id="eliminar-arbitro" class="btn btn-primary btn-xs" value="<%= id %>">\n        <span class="glyphicon glyphicon-trash" aria-hidden="true" value="<%= id %>"></span>\n    </button>\n</td>'}),define("views/private/RowTorneoArbitroView",["jquery","underscore","core/BaseView","views/private/util/ModalGenericView","text!templates/private/tplRowTorneoArbitro.html"],function(t,e,i,n,s){var o=i.extend({template:e.template(s),tagName:"tr",events:{"click #eliminar-arbitro":"deleteArbitro"},initialize:function(t){this.model=t},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},deleteArbitro:function(){that=this,this.model.destroy({contentType:"application/json",wait:!0,success:function(t,e){that.destroyView(),new n({message:e.message})},error:function(t,e){new n({message:e.responseJSON.message})}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}});return o}),define("text!templates/private/tplTorneoArbitroAdmin.html",[],function(){return'<div class="row">\n    <div class="col-md-12">\n        <table id="torneo-arbitros" class="table table-condensed">\n            <thead>\n            <tr>\n                <th>#</th>\n                <th>Arbitro</th>\n                <th>Status</th>\n                <th></th>\n            </tr>\n            </thead>\n            <tbody>\n            </tbody>\n            <div id="modal-arbitro-search">\n            </div>\n        </table>\n    </div>\n</div>\n<div class="row">\n    <div class="col-md-12">\n        <div class="btn-group-horizontal" role="group" aria-label="...">\n            <button id="arbitro-agregar" type="button" class="btn btn-primary">Agregar</button>\n        </div>\n    </div>\n</div>'}),define("views/private/TorneoArbitroAdminView",["jquery","backbone","core/BaseView","models/TorneoArbitroModel","collections/TorneoArbitrosCollection","views/private/ArbitroSearchView","views/private/RowTorneoArbitroView","text!templates/private/tplTorneoArbitroAdmin.html"],function(t,e,i,n,s,o,r,a){var l=i.extend({template:_.template(a),events:{"click #arbitro-agregar":"agregarArbitro"},initialize:function(){app.torneoarbitros=new s,app.torneoarbitros.setTorneo(this.model),this.listenTo(app.torneoarbitros,"add",this.agregarTorneoArbitro),this.listenTo(app.torneoarbitros,"sync",this.syncTorneoArbitros),app.torneoarbitros.fetch()},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},agregarTorneoArbitro:function(e){var i=new r(e);t("#torneo-arbitros").find("tbody:last").append(i.render().$el)},syncTorneoArbitros:function(){},agregarArbitro:function(){this.arbitroSearchView=new o({modelo:this.model,callbackAceptar:this.selectArbitro})},selectArbitro:function(e){this.destroyView(),t("<div id='modal-arbitro-search'></div>").appendTo("#torneo-arbitros");var i=new n;i.save({torneoId:this.model.get("id"),arbitroId:e.get("id")},{wait:!0,success:function(t,e){app.torneoarbitros.add(t)},error:function(t,e){console.log(t.toJSON()),console.log("error.responseText")}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this)}});return l}),define("text!templates/private/tplTorneoDetail.html",[],function(){return'\n<div class="panel panel-default">\n    <div class="panel-body">\n        <h4 class="list-group-item-heading"><%= nombre %></h4>\n        <p class="list-group-item-text"><%= descripcion %></p>\n        <p class="list-group-item-text"><%= fechaInicioDes %> - <%= fechaFinDes %></p>\n        <p class="list-group-item-text"><%= status %></p>\n    </div>\n</div>\n<ul class="list-group">\n    <a id="torneo-jornada" class="action-entuliga list-group-item">\n        <span class="badge"><span class="glyphicon glyphicon-circle-arrow-right" aria-hidden="true"></span></span>\n        Jornadas\n    </a>\n    <a id="torneo-partido" class="action-entuliga list-group-item">\n        <span class="badge"><span class="glyphicon glyphicon-circle-arrow-right" aria-hidden="true"></span></span>\n        Partidos\n    </a>\n    <a id="torneo-equipo" class="action-entuliga list-group-item">\n        <span class="badge"><span class="glyphicon glyphicon-circle-arrow-right" aria-hidden="true"></span></span>\n        Equipos\n    </a>\n    <a id="torneo-jugador" class="action-entuliga list-group-item">\n        <span class="badge"><span class="glyphicon glyphicon-circle-arrow-right" aria-hidden="true"></span></span>\n        Jugadores\n    </a>\n    <a id="torneo-cancha" class="action-entuliga list-group-item">\n        <span class="badge"><span class="glyphicon glyphicon-circle-arrow-right" aria-hidden="true"></span></span>\n        Canchas\n    </a>\n    <a id="torneo-arbitro" class="action-entuliga list-group-item">\n        <span class="badge"><span class="glyphicon glyphicon-circle-arrow-right" aria-hidden="true"></span></span>\n        Arbitros\n    </a>\n</ul>'}),define("views/private/TorneoDetailView",["jquery","backbone","core/BaseView","views/private/TorneoEquipoAdminView","views/private/TorneoJugadorAdminView","views/private/TorneoJornadaAdminView","views/private/TorneoPartidoAdminView","views/private/TorneoCanchaAdminView","views/private/TorneoArbitroAdminView","text!templates/private/tplTorneoDetail.html"],function(t,e,i,n,s,o,r,a,l,c){var d=i.extend({template:_.template(c),events:{"click #torneo-jornada":"viewJornada","click #torneo-equipo":"viewEquipo","click #torneo-jugador":"viewJugador","click #torneo-partido":"viewPartido","click #torneo-cancha":"viewCancha","click #torneo-arbitro":"viewArbitro","click .list-group-item":"clickOptionDetail"},initialize:function(){this.tipo="none"},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},viewJornada:function(){("undefined"==this.torneoDetailAdminView||void 0==this.torneoDetailAdminView||"jornada"!=this.tipo)&&(this.tipo="jornada",this.torneoDetailAdminView=new o({model:this.model}),t("#torneo-edit").html(this.torneoDetailAdminView.render().$el),t("#titulo-torneo-detalle").html("Jornadas"))},viewPartido:function(){("undefined"==this.torneoDetailAdminView||void 0==this.torneoDetailAdminView||"partido"!=this.tipo)&&(this.tipo="partido",this.torneoDetailAdminView=new r({model:this.model}),t("#torneo-edit").html(this.torneoDetailAdminView.render().$el),t("#titulo-torneo-detalle").html("Partidos"))},viewJugador:function(){("undefined"==this.torneoDetailAdminView||void 0==this.torneoDetailAdminView||"jugador"!=this.tipo)&&(this.tipo="jugador",this.torneoDetailAdminView=new s({model:this.model}),t("#torneo-edit").html(this.torneoDetailAdminView.render().$el),t("#titulo-torneo-detalle").html("Jugadores"))},viewEquipo:function(){("undefined"==this.torneoDetailAdminView||void 0==this.torneoDetailAdminView||"equipo"!=this.tipo)&&(this.tipo="equipo",this.torneoDetailAdminView=new n({model:this.model}),t("#torneo-edit").html(this.torneoDetailAdminView.render().$el),t("#titulo-torneo-detalle").html("Equipos"))},viewCancha:function(){("undefined"==this.torneoDetailAdminView||void 0==this.torneoDetailAdminView||"cancha"!=this.tipo)&&(this.tipo="cancha",this.torneoDetailAdminView=new a({model:this.model}),t("#torneo-edit").html(this.torneoDetailAdminView.render().$el),t("#titulo-torneo-detalle").html("Canchas"))},viewArbitro:function(){("undefined"==this.torneoDetailAdminView||void 0==this.torneoDetailAdminView||"arbitro"!=this.tipo)&&(this.tipo="arbitro",this.torneoDetailAdminView=new l({model:this.model}),t("#torneo-edit").html(this.torneoDetailAdminView.render().$el),t("#titulo-torneo-detalle").html("Arbitros"))},clickOptionDetail:function(e){t(".list-group-item").removeClass("active"),t(e.target).addClass("active")}});return d}),define("text!templates/private/tplTorneoEdit.html",[],function(){return'<form id="form-torneo" role="form">\n    <p>Detalle Torneo.</p>\n    <input id="torneo-liga-id" type="hidden" name="ligaId" value="<%= ligaId %>">\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Nombre</label>\n                <input class="form-control" placeholder="Nombre" type="text" name="nombre" value="<%= nombre %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Descripcion</label>\n                <input class="form-control" placeholder="Descripcion" type="text" name="descripcion" value="<%= descripcion %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Fecha Inicio</label>\n                <input id="dp-fecha-inicio" class="span2 form-control" size="16" type="text" name="fechaInicioDes" value="<%= fechaInicioDes %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Fecha Fin</label>\n                <input id="dp-fecha-fin" class="span2 form-control" size="16" type="text" name="fechaFinDes" value="<%= fechaFinDes %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Status</label>\n                <select class="form-control" id="select-status" placeholder="Status..." name="status">\n                    <option value="ENPROCESO" <% print( status == \'ENPROCESO\' ? \'selected\' : \'\') %>>En Proceso</option>\n                    <option value="FINALIZADO" <% print( status == \'FINALIZADO\' ? \'selected\' : \'\') %>>Finalizado</option>\n                    <option value="CANCELADO" <% print( status == \'CANCELADO\' ? \'selected\' : \'\') %>>Cancelado</option>\n                </select>\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="modal-footer">\n            <button id="btn-cancel" type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n            <button id="btn-ok" type="button" class="btn btn-success">Guardar</button>\n        </div>\n    </div>\n</form>'}),define("views/private/TorneoEditView",["jquery","backbone","datetimepicker","backboneValidation","jquerySerializeObject","models/TorneoModel","core/BaseView","views/private/util/ModalGenericView","text!templates/private/tplTorneoEdit.html"],function(t,e,i,n,s,o,r,a,l){var c=r.extend({template:_.template(l),events:{"click #btn-ok":"saveTorneo","click #btn-cancel":"cancelTorneo"},initialize:function(t){"new"==t.tipo?(this.model=new o,this.model.set({ligaId:t.idLiga})):this.model=t.modelo,this.model.once("sync",this.saveTorneoSuccess),this.model.once("error",this.saveTorneoError),e.Validation.bind(this),app.that=this},remove:function(){return e.Validation.unbind(this),e.View.prototype.remove.apply(this,arguments)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el.find("#dp-fecha-inicio").datetimepicker({format:"mm/dd/yyyy",pickTime:!1,autoclose:!0,startView:"month",minView:"month"}),this.$el.find("#dp-fecha-fin").datetimepicker({format:"mm/dd/yyyy",pickTime:!1,autoclose:!0,startView:"month",minView:"month"}),this},saveTorneo:function(){var t=this.$el.find("#form-torneo").serializeObject();this.model.set(t);for(var e in t)t.hasOwnProperty(e)&&(t[e]=_.escape(t[e]));var i=new Date(this.model.get("fechaInicioDes")),n=new Date(this.model.get("fechaFinDes"));this.model.set({fechaInicio:i.getTime(),fechaFin:n.getTime()}),this.model.isValid(!0)&&this.model.save()},cancelTorneo:function(){new a({type:"confirm",labelConfirm:"Si",labelCancel:"No",message:"¿Desea cancelar la acción?",callbackConfirm:function(t){app.that.disabledAction(!1),app.that.destroyView(),delete app.that}})},saveTorneoSuccess:function(e,i,n){for(var s in e.attributes)e.attributes.hasOwnProperty(s)&&(e.attributes[s]=_.escape(e.attributes[s]));app.torneos.add(e),"undefined"!=typeof app.that&&(app.that.disabledAction(!1),new a({message:"Torneo registrado correctamente"}),app.that.destroyView(),delete app.that,1==app.torneos.length&&t("#select-torneo").change())},saveTorneoError:function(t,e,i){new a({message:"Se presento un error al registrar el Torneo"})}});return c}),define("text!templates/private/tplTorneoAdmin.html",[],function(){return'<div class="row">\n    <div class="col-md-12">\n      <div class="main-box">\n        <div class="panel panel-info">\n            <div class="panel-heading">\n                <h3 class="panel-title">Torneo Admin</h3>\n            </div>\n            <div class="panel-body">\n                <div class="row">\n                    <div class="col-md-6">\n                        <div class="form-group">\n                            <select class="action-entuliga form-control selectpicker" id="select-liga" data-style="btn-primary" placeholder="Liga...">\n                            </select>\n                        </div>\n                        <div class="panel panel-default">\n                            <div id="liga-detail" class="panel-body">\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <select class="action-entuliga form-control" id="select-torneo" placeholder="Torneo...">\n                            </select>\n                        </div>\n                        <div class="panel panel-default">\n                            <div id="torneo-detail" class="panel-body">\n                            </div>\n                        </div>\n                        <div class="btn-group-horizontal" role="group" aria-label="...">\n                            <button id="torneo-nuevo" type="button" class="action-entuliga btn btn-primary">Registrar</button>\n\n                            <button id="torneo-editar" type="button" class="action-entuliga btn btn-primary">Editar</button>\n                            <button id="torneo-borrar" type="button" class="btn btn-danger action-entuliga">\n                                <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>\n                            </button>\n                        </div>\n                    </div>\n                    <div class="col-md-6">\n                        <div class="panel panel-default">\n                            <div class="panel-heading">\n                                <h3 id="titulo-torneo-detalle" class="panel-title">Torneo</h3>\n                            </div>\n                            <div id="torneo-edit" class="panel-body">\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n      </div>\n    </div>\n</div>\n';
}),define("views/private/TorneoAdminView",["jquery","backbone","bootstrap","selecter","core/BaseView","collections/LigasCollection","collections/TorneosCollection","views/private/LigaDetailView","views/private/TorneoDetailView","views/private/TorneoEditView","views/private/util/ModalGenericView","text!templates/private/tplTorneoAdmin.html"],function(t,e,i,n,s,o,r,a,l,c,d,h){var u=s.extend({template:_.template(h),events:{"change #select-liga":"changeLiga","change #select-torneo":"changeTorneo","click #torneo-nuevo":"newTorneo","click #torneo-editar":"editTorneo","click #torneo-borrar":"deleteTorneo"},initialize:function(){this.ligas=new o,this.listenTo(this.ligas,"sync",this.agregarLiga),this.listenTo(this.ligas,"sync",this.syncLigas),app.torneos=new r,this.listenTo(app.torneos,"sync",this.agregarTorneo),this.listenTo(app.torneos,"sync",this.syncTorneos),this.ligas.fetch()},render:function(){return this.$el.html(this.template()),this},changeLiga:function(e){var i=this.ligas.get(t(e.target).val());"undefined"!=typeof i?(this.ligaDetailView=new a({model:i}),t("#liga-detail").html(this.ligaDetailView.render().$el),app.torneos.setLiga(i),app.torneos.fetch(),t("#torneo-editar").removeAttr("disabled"),t("#torneo-borrar").removeAttr("disabled")):(t("#torneo-editar").attr("disabled",!0),t("#torneo-borrar").attr("disabled",!0)),t("#torneo-edit").html("")},changeTorneo:function(e){var i=app.torneos.get(t(e.target).val());"undefined"!=typeof i?(this.torneoDetailView=new l({model:i}),t("#torneo-detail").html(this.torneoDetailView.render().$el),t("#torneo-editar").removeAttr("disabled"),t("#torneo-borrar").removeAttr("disabled")):("undefined"!=typeof this.torneoDetailView&&this.torneoDetailView.destroyView(),t("#torneo-editar").attr("disabled",!0),t("#torneo-borrar").attr("disabled",!0)),t("#torneo-edit").html(""),t("#torneo-detail ul a:first-child").click()},agregarLiga:function(e){t("#select-liga").empty();for(var i=0;i<e.length;i++)t("#select-liga").append(t("<option>",{value:e.models[i].get("id"),text:e.models[i].get("nombre")}))},syncLigas:function(){t("#select-liga").change(),t("#torneo-edit").html("")},agregarTorneo:function(e){t("#select-torneo").empty();for(var i=0;i<e.length;i++)t("#select-torneo").append(t("<option>",{value:e.models[i].get("id"),text:e.models[i].get("nombre")}))},syncTorneos:function(){t("#select-torneo").change()},newTorneo:function(){this.disabledAction(!0);var e=this.ligas.get(t("#select-liga").val()).get("id"),i=new c({tipo:"new",idLiga:e,tha:this});t("#torneo-edit").html(""),t("#torneo-edit").html(i.render().$el),t("#titulo-torneo-detalle").html("Nuevo torneo")},editTorneo:function(){this.disabledAction(!0);var e=app.torneos.get(t("#select-torneo").val()),i=new c({tipo:"edit",modelo:e});t("#torneo-edit").html(i.render().$el),t("#titulo-torneo-detalle").html("Editar torneo")},deleteTorneo:function(){var e=app.torneos.get(t("#select-torneo").val());e.destroy({wait:!0,success:function(e,i){new d({message:i.message}),i.result&&(t("#select-torneo option:selected").remove(),t("#select-torneo").change())},error:function(t,e){new d({message:e.responseJSON.message})}})}});return u}),define("text!templates/private/tplEquipoDetail.html",[],function(){return'<div class="row">\n    <div class="col-xs-2">\n        <img class="avatar avatar-sm" src="<%= rutaLogoEquipo %>">\n    </div>\n    <div class="col-xs-10">\n        <h4 class="list-group-item-heading"><%= nombre %></h4>\n        <p class="list-group-item-text"><%= aliasEquipo %></p>\n    </div>\n</div>'}),define("views/private/EquipoDetailView",["jquery","backbone","core/BaseView","text!templates/private/tplEquipoDetail.html"],function(t,e,i,n){var s=i.extend({template:_.template(n),events:{},initialize:function(){},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}});return s}),define("models/util/PhotoModel",["backbone"],function(t){var e=t.Model.extend({urlRoot:"photo",defaults:{},initialize:function(){}});return e}),define("text!templates/private/util/tplUploadView.html",[],function(){return'<div class="row">\n    <div class="col-sm-6 col-md-6">\n        <div class="thumbnail">\n            <img id="preview-photo" src="<%= pathLogo %>" alt="...">\n            <div class="caption">\n                <div class="btn-group btn-group-sm" role="group" aria-label="...">\n                    <input id="file-es" name="filelogo" type="file" accept="image/*">\n                    <button id="btn-upload" type="button" class="btn btn-default">Cambiar</button>\n                    <button id="btn-confirm" type="button" class="btn btn-default">Confirmar</button>\n                    <button id="btn-cancel" type="button" class="btn btn-default">Cancelar</button>\n                    <button id="btn-delete" type="button" class="btn btn-default">Eliminar</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'}),define("views/private/util/UploadFileView",["jquery","backbone","core/BaseView","views/private/util/ModalGenericView","text!templates/private/util/tplUploadView.html"],function(t,e,i,n,s){var o=i.extend({template:_.template(s),events:{"click #btn-upload":"uploadFile","click #btn-confirm":"confirmFile","click #btn-cancel":"cancelFile","click #btn-delete":"deleteFile","change #file-es":"changeFile"},initialize:function(t){this.model=t.modelo,this.callbackUpload=t.callbackUpload,this.callbackDelete=t.callbackDelete,this.urlUpload=t.urlUpload,this.urlDelete=t.urlDelete},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el.find("#file-es").hide(),this.btnUpload=this.$el.find("#btn-upload"),this.btnConfirm=this.$el.find("#btn-confirm"),this.btnCancel=this.$el.find("#btn-cancel"),this.btnDelete=this.$el.find("#btn-delete"),this.previewPhoto=this.$el.find("#preview-photo"),this.setUp("Empty"),this},setUp:function(t){this.model.get("hasLogo")?this.btnDelete.show():this.btnDelete.hide(),"Empty"==t?(this.btnConfirm.hide(),this.btnCancel.hide(),this.btnUpload.show()):(this.btnConfirm.show(),this.btnCancel.show(),this.btnUpload.hide(),this.btnDelete.hide())},uploadFile:function(){this.$el.find("#file-es").click()},deleteFile:function(){var t=new FormData;t.append("key",this.model.get("idLogo")),t.append("logo",this.model.get("nameLogo")),t.append("origin",this.model.get("type")),this.servicesRemote(this.urlDelete,t,this.callbackDelete)},confirmFile:function(){var e=t("#file-es")[0].files[0],i=new FormData;i.append("filelogo",e),i.append("id",this.model.get("idLogo")),i.append("origin",this.model.get("type")),this.servicesRemote(this.urlUpload,i,this.callbackUpload)},servicesRemote:function(e,i,s){var o=this;t.ajax({url:e,data:i,cache:!1,contentType:!1,processData:!1,type:"POST",success:function(t){this.url==o.urlDelete?(o.model.set({hasLogo:!1}),t.defaultname+=o.makeId(),o.previewPhoto.attr("src",t.defaultname)):(o.model.set({hasLogo:!0}),t.pathfilename+=o.makeId()),s(t),o.setUp("Empty"),new n({message:"Operación realizada con éxito"})},error:function(t){new n({message:"Se presentó un error, vuelva a intentar"})}})},cancelFile:function(){this.previewPhoto.attr("src",this.model.get("pathLogo")),this.setUp("Empty")},changeFile:function(t){var e=this,i=new FileReader;i.onload=function(t){e.previewPhoto.attr("src",t.target.result),e.setUp("Full")},i.readAsDataURL(t.target.files[0])},makeId:function(){for(var t="?",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;5>i;i++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}});return o}),define("text!templates/private/tplEquipoEdit.html",[],function(){return'<form id="form-equipo" role="form">\n    <p>Detalle Equipo</p>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Nombre</label>\n                <input class="form-control" placeholder="Nombre" type="text" name="nombre" value="<%= nombre %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Alias</label>\n                <input class="form-control" placeholder="Alias" type="text" name="aliasEquipo" value="<%= aliasEquipo %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-12">\n            <div class="form-group">\n                <label>Logo</label>\n                <div id="upload-file"></div>\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="modal-footer">\n            <button id="btn-cancel" type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n            <button id="btn-ok" type="button" class="btn btn-success">Guardar</button>\n        </div>\n    </div>\n</form>'}),define("views/private/EquipoEditView",["jquery","backbone","backboneValidation","jquerySerializeObject","models/EquipoModel","models/util/PhotoModel","core/BaseView","views/private/util/UploadFileView","views/private/util/ModalGenericView","text!templates/private/tplEquipoEdit.html"],function(t,e,i,n,s,o,r,a,l,c){var d=r.extend({template:_.template(c),events:{"click #btn-ok":"saveEquipo","click #btn-cancel":"cancelEquipo"},initialize:function(t){"new"==t.tipo?this.model=new s:this.model=t.modelo,this.model.once("sync",this.saveEquipoSuccess),this.model.once("error",this.saveEquipoError),e.Validation.bind(this),app.that=this},setUpNew:function(){t("#upload-file").html('<img class="avatar avatar-sm" src="photo/equipo/equipo-default.png">')},setUpEdit:function(){var e=this,i=new o;i.set({pathLogo:this.model.get("rutaLogoEquipo")}),i.set({hasLogo:this.model.get("hasLogoEquipo")}),i.set({idLogo:this.model.get("id")}),i.set({nameLogo:this.model.get("logoEquipo")}),i.set({type:"EQUIPO"});var n=new a({modelo:i,urlUpload:"file/upload/logo",urlDelete:"file/delete/logo",callbackUpload:function(i){e.model.set({hasLogoEquipo:!0}),e.model.set({rutaLogoEquipo:i.pathfilename}),e.model.set({logoEquipo:i.filename}),app.equipos.add(e.model),t("#select-equipo").change()},callbackDelete:function(i){e.model.set({hasLogoEquipo:!1}),e.model.set({rutaLogoEquipo:i.defaultname}),e.model.set({logoEquipo:""}),app.equipos.add(e.model),t("#select-equipo").change()}});t("#upload-file").html(n.render().$el)},remove:function(){return e.Validation.unbind(this),e.View.prototype.remove.apply(this,arguments)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},cancelEquipo:function(){new l({type:"confirm",labelConfirm:"Si",labelCancel:"No",message:"¿Desea cancelar la acción?",callbackConfirm:function(t){app.that.disabledAction(!1),app.that.destroyView(),delete app.that}})},saveEquipo:function(){var t=this.$el.find("#form-equipo").serializeObject();for(var e in t)console.log(e),t.hasOwnProperty(e)&&(t[e]=_.escape(t[e]));this.model.set(t),this.model.isValid(!0)&&this.model.save()},saveEquipoSuccess:function(e,i,n){app.equipos.add(e),"undefined"!=typeof app.that&&(app.that.disabledAction(!1),new l({message:"Equipo registrado correctamente"}),app.that.destroyView(),delete app.that,1==app.equipos.length&&t("#select-equipo").change())},saveEquipoError:function(t,e,i){new l({message:"Se presento un error al registrar el equipo"})}});return d}),define("text!templates/private/tplEquipoAdmin.html",[],function(){return'<div class="row">\n    <div class="col-md-12">\n      <div class="main-box">\n        <div class="panel panel-info">\n            <div class="panel-heading">\n                <h3 class="panel-title">Equipo Admin</h3>\n            </div>\n            <div class="panel-body">\n                <div class="row">\n                    <div class="col-md-6">\n                        <div class="form-group">\n                            <select class="action-entuliga form-control" id="select-equipo" placeholder="Equipo...">\n                            </select>\n                        </div>\n                        <div class="panel panel-default">\n                            <div id="equipo-detail" class="panel-body">\n                            </div>\n                        </div>\n                        <div class="btn-group-horizontal" role="group" aria-label="...">\n                            <button id="equipo-nuevo" type="button" class="action-entuliga btn btn-primary">Registrar</button>\n                            <button id="equipo-editar" type="button" class="action-entuliga btn btn-primary">Editar</button>\n                            <button id="equipo-borrar" type="button" class="btn btn-danger action-entuliga">\n                                <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>\n                            </button>\n                        </div>\n                    </div>\n                    <div class="col-md-6">\n                        <div class="panel panel-default">\n                            <div class="panel-heading">\n                                <h3 class="panel-title">Equipo</h3>\n                            </div>\n                            <div id="equipo-edit" class="panel-body">\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n      </div>\n    </div>\n</div>\n'}),define("views/private/EquipoAdminView",["jquery","backbone","bootstrap","selecter","core/BaseView","collections/EquiposCollection","views/private/EquipoDetailView","views/private/EquipoEditView","views/private/util/ModalGenericView","text!templates/private/tplEquipoAdmin.html"],function(t,e,i,n,s,o,r,a,l,c){var d=s.extend({template:_.template(c),events:{"change #select-equipo":"changeEquipo","click #equipo-nuevo":"newEquipo","click #equipo-editar":"editEquipo","click #equipo-borrar":"deleteEquipo"},initialize:function(){app.equipos=new o,this.listenTo(app.equipos,"add",this.agregarEquipo),this.listenTo(app.equipos,"sync",this.syncEquipos),app.equipos.fetch()},render:function(){return this.$el.html(this.template()),this.$el.find(".selecter_equipo").select(),this},changeEquipo:function(e){var i=app.equipos.get(t(e.target).val());"undefined"!=typeof i?(this.equipoDetailView=new r({model:i}),t("#equipo-detail").html(this.equipoDetailView.render().$el),t("#equipo-editar").removeAttr("disabled"),t("#equipo-borrar").removeAttr("disabled")):("undefined"!=typeof this.equipoDetailView&&this.equipoDetailView.destroyView(),t("#equipo-editar").attr("disabled",!0),t("#equipo-borrar").attr("disabled",!0))},newEquipo:function(){this.disabledAction(!0);var e=new a({tipo:"new",modelo:null});t("#equipo-edit").html(e.render().$el),e.setUpNew()},editEquipo:function(){this.disabledAction(!0);var e=app.equipos.get(t("#select-equipo").val()),i=new a({tipo:"edit",modelo:e});t("#equipo-edit").html(i.render().$el),i.setUpEdit()},deleteEquipo:function(){var e=app.equipos.get(t("#select-equipo").val());e.destroy({wait:!0,success:function(e,i){new l({message:i.message}),i.result&&(t("#select-equipo option:selected").remove(),t("#select-equipo").change())},error:function(t,e){new l({message:e.responseJSON.message})}})},agregarEquipo:function(e){t("#select-equipo").append(t("<option>",{value:e.get("id"),text:e.get("nombre")}))},syncEquipos:function(){t("#select-equipo").change()}});return d}),define("text!templates/private/tplJugadorDetail.html",[],function(){return'<div class="row">\n    <div class="col-xs-2">\n        <img class="avatar avatar-sm" src="<%= rutaLogoJugador %>">\n    </div>\n    <div class="col-xs-10">\n        <h4 class="list-group-item-heading"><%= nombre %> <%= paterno %> <%= materno %></h4>\n        <p class="list-group-item-text"><%= sexo %></p>\n        <p class="list-group-item-text"><%= fechaRegistro %></p>\n        <p class="list-group-item-text"><%= calle %> <%= noExterior %> <%= noInterior %> <%= coloniaDesc %></p>\n        <p class="list-group-item-text"><%= municipioDesc %> <%= estadoDesc %> <%= paisDesc %></p>\n        <p class="list-group-item-text"><%= latitude %> <%= longitude %></p>\n    </div>\n</div>'}),define("views/private/JugadorDetailView",["jquery","backbone","core/BaseView","text!templates/private/tplJugadorDetail.html"],function(t,e,i,n){var s=i.extend({template:_.template(n),events:{},initialize:function(){},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}});return s}),define("text!templates/private/tplJugadorEdit.html",[],function(){return'<form id="form-jugador" role="form">\n    <p>Detalle Jugador.</p>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Nombre</label>\n                <input class="form-control" placeholder="Nombre" type="text" name="nombre" value="<%= nombre %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Paterno</label>\n                <input class="form-control" placeholder="Paterno" type="text" name="paterno" value="<%= paterno %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Materno</label>\n                <input class="form-control" placeholder="Materno" type="text" name="materno" value="<%= materno %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Sexo</label>\n                <select class="form-control" id="select-sexo" placeholder="Sexo..." name="sexo">\n                    <option value="FEMENINO" <% print( sexo == \'FEMENINO\' ? \'selected\' : \'\') %>>Femenino</option>\n                    <option value="MASCULINO" <% print( sexo == \'MASCULINO\' ? \'selected\' : \'\') %>>Masculino</option>\n                </select>\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Ruta Foto</label>\n                <div id="upload-file"></div>\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Calle</label>\n                <input class="form-control" placeholder="Calle" type="text" name="calle" value="<%= calle %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>No Exterior</label>\n                <input class="form-control" placeholder="No Exterior" type="text" name="noExterior" value="<%= noExterior %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>No Interior</label>\n                <input class="form-control" placeholder="No Interior" type="text" name="noInterior" value="<%= noInterior %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Codigo Postal</label>\n                <input class="form-control" placeholder="Codigo Postal" type="text" name="codigoPostal" value="<%= codigoPostal %>">\n\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Colonia</label>\n                <div class="input-group">\n                    <input id="jugador-colonia-id" type="hidden" name="coloniaId" value="<%= coloniaId %>">\n                    <input id="jugador-colonia-desc" class="form-control" placeholder="Colonia" type="text" name="coloniaDesc" value="<%= coloniaDesc %>">\n                    <div class="input-group-btn">\n                        <button id="colonia-buscar" type="button" class="btn btn-primary">Buscar</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Latitude</label>\n                <input class="form-control" placeholder="Latitude" type="text" name="latitude" value="<%= latitude %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Longitude</label>\n                <input class="form-control" placeholder="Longitude" type="text" name="longitude" value="<%= longitude %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="modal-footer">\n            <button id="btn-cancel" type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n            <button id="btn-ok" type="button" class="btn btn-success">Guardar</button>\n        </div>\n    </div>\n</form>\n<div id="modal-colonia">\n</div>'}),define("views/private/JugadorEditView",["jquery","backbone","backboneValidation","jquerySerializeObject","models/JugadorModel","models/util/PhotoModel","core/BaseView","views/private/MainColoniaAdminView","views/private/util/UploadFileView","views/private/util/ModalGenericView","text!templates/private/tplJugadorEdit.html"],function(t,e,i,n,s,o,r,a,l,c,d){var h=r.extend({template:_.template(d),events:{"click #colonia-buscar":"buscarColonia","click #btn-ok":"saveJugador","click #btn-cancel":"cancelJugador"},initialize:function(t){"new"==t.tipo?this.model=new s:this.model=t.modelo,this.model.once("sync",this.saveJugadorSuccess),this.model.once("error",this.saveJugadorError),e.Validation.bind(this),app.that=this},setUpNew:function(){t("#upload-file").html('<img class="avatar avatar-sm" src="photo/jugador/jugador-default.png">')},setUpEdit:function(){var e=this,i=new o;i.set({pathLogo:this.model.get("rutaLogoJugador")}),i.set({hasLogo:this.model.get("hasLogoJugador")}),i.set({idLogo:this.model.get("id")}),i.set({nameLogo:this.model.get("logoJugador")}),i.set({type:"JUGADOR"});var n=new l({modelo:i,urlUpload:"file/upload/foto",urlDelete:"file/delete/foto",callbackUpload:function(i){e.model.set({hasLogoJugador:!0}),e.model.set({rutaLogoJugador:i.pathfilename}),e.model.set({logoJugador:i.filename}),app.jugadores.add(e.model),t("#select-jugador").change()},callbackDelete:function(i){e.model.set({hasLogoJugador:!1}),e.model.set({rutaLogoJugador:i.defaultname}),e.model.set({logoJugador:""}),app.jugadores.add(e.model),t("#select-jugador").change()}});t("#upload-file").html(n.render().$el)},remove:function(){return e.Validation.unbind(this),e.View.prototype.remove.apply(this,arguments)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},buscarColonia:function(){new a(this.selectColonia)},selectColonia:function(e){t("#jugador-colonia-id").val(e.get("id")),t("#jugador-colonia-desc").val(e.get("nombre"))},cancelJugador:function(){new c({type:"confirm",labelConfirm:"Si",labelCancel:"No",message:"¿Desea cancelar la acción?",callbackConfirm:function(t){app.that.disabledAction(!1),app.that.destroyView(),delete app.that}})},saveJugador:function(){var t=this.$el.find("#form-jugador").serializeObject();for(var e in t)console.log(e),t.hasOwnProperty(e)&&(t[e]=_.escape(t[e]));this.model.set(t),this.model.isValid(!0)&&this.model.save()},saveJugadorSuccess:function(e,i,n){app.jugadores.add(e),"undefined"!=typeof app.that&&(app.that.disabledAction(!1),new c({message:"Jugador registrado correctamente"}),app.that.destroyView(),delete app.that,1==app.jugadores.length&&t("#select-jugador").change())},saveJugadorError:function(t,e,i){new c({message:"Se presento un error al registrar el Jugador"})}});return h}),define("text!templates/private/tplJugadorAdmin.html",[],function(){return'<div class="row">\n    <div class="col-md-12">\n      <div class="main-box">\n        <div class="panel panel-info">\n            <div class="panel-heading">\n                <h3 class="panel-title">Jugador Admin A</h3>\n            </div>\n            <div class="panel-body">\n                <div class="row">\n                    <div class="col-md-6">\n                        <div class="form-group">\n                            <select class="action-entuliga form-control " id="select-jugador" placeholder="Jugador...">\n                            </select>\n                        </div>\n                        <div class="panel panel-default">\n                            <div id="jugador-detail" class="panel-body">\n                            </div>\n                        </div>\n                        <div class="btn-group-horizontal" role="group" aria-label="...">\n                            <button id="jugador-nuevo" type="button" class="btn btn-primary action-entuliga">Registrar</button>\n                            <button id="jugador-editar" type="button" class="btn btn-primary action-entuliga">Editar</button>\n                            <button id="jugador-borrar" type="button" class="btn btn-danger action-entuliga">\n                                <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>\n                            </button>\n                        </div>\n                    </div>\n                    <div class="col-md-6">\n                        <div class="panel panel-default">\n                            <div class="panel-heading">\n                                <h3 class="panel-title">Jugador</h3>\n                            </div>\n                            <div id="jugador-edit" class="panel-body">\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n      </div>\n    </div>\n</div>\n'}),define("views/private/JugadorAdminView",["jquery","backbone","bootstrap","selecter","core/BaseView","collections/JugadoresCollection","views/private/JugadorDetailView","views/private/JugadorEditView","views/private/util/ModalGenericView","text!templates/private/tplJugadorAdmin.html"],function(t,e,i,n,s,o,r,a,l,c){var d=s.extend({template:_.template(c),events:{"change #select-jugador":"changeJugador","click #jugador-nuevo":"newJugador","click #jugador-editar":"editJugador","click #jugador-borrar":"deleteJugador"},initialize:function(){app.jugadores=new o,app.jugadores.setTipo("none"),this.listenTo(app.jugadores,"add",this.agregarJugador),this.listenTo(app.jugadores,"sync",this.syncJugadores),app.jugadores.fetch()},render:function(){return this.$el.html(this.template()),this.$el.find(".selecter_jugador").select(),this},changeJugador:function(e){var i=app.jugadores.get(t(e.target).val());"undefined"!=typeof i?(this.jugadorDetailView=new r({model:i}),t("#jugador-detail").html(this.jugadorDetailView.render().$el),t("#jugador-editar").removeAttr("disabled"),t("#jugador-borrar").removeAttr("disabled")):("undefined"!=typeof this.jugadorDetailView&&this.jugadorDetailView.destroyView(),t("#jugador-editar").attr("disabled",!0),t("#jugador-borrar").attr("disabled",!0))},newJugador:function(){this.disabledAction(!0);var e=new a({tipo:"new",modelo:null});t("#jugador-edit").html(e.render().$el),e.setUpNew()},editJugador:function(){this.disabledAction(!0);var e=app.jugadores.get(t("#select-jugador").val()),i=new a({tipo:"edit",modelo:e});t("#jugador-edit").html(i.render().$el),i.setUpEdit()},deleteJugador:function(){var e=app.jugadores.get(t("#select-jugador").val());e.destroy({wait:!0,success:function(e,i){new l({message:i.message}),i.result&&(t("#select-jugador option:selected").remove(),t("#select-jugador").change())},error:function(t,e){new l({message:e.responseJSON.message})}})},agregarJugador:function(e){t("#select-jugador").append(t("<option>",{value:e.get("id"),text:e.get("nombre")+" "+e.get("paterno")+" "+e.get("paterno")}))},syncJugadores:function(){t("#select-jugador").change()}});return d}),define("text!templates/private/tplArbitroDetail.html",[],function(){return'<div class="row">\n    <div class="col-xs-2">\n        <img class="avatar avatar-sm" src="<%= rutaLogoArbitro %>">\n    </div>\n    <div class="col-xs-10">\n        <h4 class="list-group-item-heading"><%= nombre %> <%= paterno %> <%= materno %></h4>\n        <p class="list-group-item-text"><%= sexo %></p>\n        <p class="list-group-item-text"><%= fechaRegistro %></p>\n        <p class="list-group-item-text"><%= calle %> <%= noExterior %> <%= noInterior %> <%= coloniaDesc %></p>\n        <p class="list-group-item-text"><%= municipioDesc %> <%= estadoDesc %> <%= paisDesc %></p>\n        <p class="list-group-item-text"><%= latitude %> <%= longitude %></p>\n    </div>\n</div>'}),define("views/private/ArbitroDetailView",["jquery","backbone","core/BaseView","text!templates/private/tplArbitroDetail.html"],function(t,e,i,n){var s=i.extend({template:_.template(n),events:{},initialize:function(){},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}});return s}),define("text!templates/private/tplArbitroEdit.html",[],function(){return'<form id="form-arbitro" role="form">\n    <p>Detalle Arbitro.</p>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Nombre</label>\n                <input class="form-control" placeholder="Nombre" type="text" name="nombre" value="<%= nombre %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Paterno</label>\n                <input class="form-control" placeholder="Paterno" type="text" name="paterno" value="<%= paterno %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Materno</label>\n                <input class="form-control" placeholder="Materno" type="text" name="materno" value="<%= materno %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Sexo</label>\n                <select class="form-control" id="select-sexo" placeholder="Sexo..." name="sexo">\n                    <option value="FEMENINO" <% print( sexo == \'FEMENINO\' ? \'selected\' : \'\') %>>Femenino</option>\n                    <option value="MASCULINO" <% print( sexo == \'MASCULINO\' ? \'selected\' : \'\') %>>Masculino</option>\n                </select>\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Ruta Foto</label>\n                <div id="upload-file"></div>\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Calle</label>\n                <input class="form-control" placeholder="Calle" type="text" name="calle" value="<%= calle %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>No Exterior</label>\n                <input class="form-control" placeholder="No Exterior" type="text" name="noExterior" value="<%= noExterior %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>No Interior</label>\n                <input class="form-control" placeholder="No Interior" type="text" name="noInterior" value="<%= noInterior %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Codigo Postal</label>\n                <input class="form-control" placeholder="Codigo Postal" type="text" name="codigoPostal" value="<%= codigoPostal %>">\n\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Colonia</label>\n                <div class="input-group">\n                    <input id="arbitro-colonia-id" type="hidden" name="coloniaId" value="<%= coloniaId %>">\n                    <input id="arbitro-colonia-desc" class="form-control" placeholder="Colonia" type="text" name="coloniaDesc" value="<%= coloniaDesc %>">\n                    <div class="input-group-btn">\n                        <button id="colonia-buscar" type="button" class="btn btn-primary">Buscar</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Latitude</label>\n                <input class="form-control" placeholder="Latitude" type="text" name="latitude" value="<%= latitude %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Longitude</label>\n                <input class="form-control" placeholder="Longitude" type="text" name="longitude" value="<%= longitude %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="modal-footer">\n            <button id="btn-cancel" type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n            <button id="btn-ok" type="button" class="btn btn-success">Guardar</button>\n        </div>\n    </div>\n</form>\n<div id="modal-colonia">\n</div>';
}),define("views/private/ArbitroEditView",["jquery","backbone","backboneValidation","jquerySerializeObject","models/ArbitroModel","models/util/PhotoModel","core/BaseView","views/private/MainColoniaAdminView","views/private/util/UploadFileView","views/private/util/ModalGenericView","text!templates/private/tplArbitroEdit.html"],function(t,e,i,n,s,o,r,a,l,c,d){var h=r.extend({template:_.template(d),events:{"click #colonia-buscar":"buscarColonia","click #btn-ok":"saveArbitro","click #btn-cancel":"cancelArbitro"},initialize:function(t){"new"==t.tipo?this.model=new s:this.model=t.modelo,this.model.once("sync",this.saveArbitroSuccess),this.model.once("error",this.saveArbitroError),e.Validation.bind(this),app.that=this},setUpNew:function(){t("#upload-file").html('<img class="avatar avatar-sm" src="photo/arbitro/arbitro-default.png">')},setUpEdit:function(){var e=this,i=new o;i.set({pathLogo:this.model.get("rutaLogoArbitro")}),i.set({hasLogo:this.model.get("hasLogoArbitro")}),i.set({idLogo:this.model.get("id")}),i.set({nameLogo:this.model.get("logoArbitro")}),i.set({type:"ARBITRO"});var n=new l({modelo:i,urlUpload:"file/upload/foto",urlDelete:"file/delete/foto",callbackUpload:function(i){e.model.set({hasLogoArbitro:!0}),e.model.set({rutaLogoArbitro:i.pathfilename}),e.model.set({logoArbitro:i.filename}),app.arbitros.add(e.model),t("#select-arbitro").change()},callbackDelete:function(i){e.model.set({hasLogoArbitro:!1}),e.model.set({rutaLogoArbitro:i.defaultname}),e.model.set({logoArbitro:""}),app.arbitros.add(e.model),t("#select-arbitro").change()}});t("#upload-file").html(n.render().$el)},remove:function(){return e.Validation.unbind(this),e.View.prototype.remove.apply(this,arguments)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},buscarColonia:function(){new a(this.selectColonia)},selectColonia:function(e){t("#arbitro-colonia-id").val(e.get("id")),t("#arbitro-colonia-desc").val(e.get("nombre"))},cancelArbitro:function(){new c({type:"confirm",labelConfirm:"Si",labelCancel:"No",message:"¿Desea cancelar la acción?",callbackConfirm:function(t){app.that.disabledAction(!1),app.that.destroyView(),delete app.that}})},saveArbitro:function(){var t=this.$el.find("#form-arbitro").serializeObject();for(var e in t)console.log(e),t.hasOwnProperty(e)&&(t[e]=_.escape(t[e]));this.model.set(t),this.model.isValid(!0)&&this.model.save()},saveArbitroSuccess:function(e,i,n){app.arbitros.add(e),"undefined"!=typeof app.that&&(app.that.disabledAction(!1),new c({message:"Arbitro registrado correctamente"}),app.that.destroyView(),delete app.that,1==app.arbitros.length&&t("#select-arbitro").change())},saveArbitroError:function(t,e,i){new c({message:"Se presento un error al registrar el arbitro"})}});return h}),define("text!templates/private/tplArbitroAdmin.html",[],function(){return'\n<div class="row">\n    <div class="col-md-12">\n      <div class="main-box">\n        <div class="panel panel-info">\n            <div class="panel-heading">\n                <h3 class="panel-title">Arbitro Admin</h3>\n            </div>\n            <div class="panel-body">\n                <div class="row">\n                    <div class="col-md-6">\n                        <div class="form-group">\n                            <select class="form-control action-entuliga" id="select-arbitro" placeholder="Arbitro...">\n                            </select>\n                        </div>\n                        <div class="panel panel-default">\n                            <div id="arbitro-detail" class="panel-body">\n                            </div>\n                        </div>\n                        <div class="btn-group-horizontal" role="group" aria-label="...">\n                            <button id="arbitro-nuevo" type="button" class="btn btn-primary action-entuliga">Registrar</button>\n                            <button id="arbitro-editar" type="button" class="btn btn-primary action-entuliga">Editar</button>\n                            <button id="arbitro-borrar" type="button" class="btn btn-danger action-entuliga">\n                                <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>\n                            </button>\n                        </div>\n                    </div>\n                    <div class="col-md-6">\n                        <div class="panel panel-default">\n                            <div class="panel-heading">\n                                <h3 class="panel-title">Arbitro</h3>\n                            </div>\n                            <div id="arbitro-edit" class="panel-body">\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n      </div>\n    </div>\n</div>\n'}),define("views/private/ArbitroAdminView",["jquery","backbone","bootstrap","selecter","core/BaseView","collections/ArbitrosCollection","views/private/ArbitroDetailView","views/private/ArbitroEditView","views/private/util/ModalGenericView","text!templates/private/tplArbitroAdmin.html"],function(t,e,i,n,s,o,r,a,l,c){var d=s.extend({template:_.template(c),events:{"change #select-arbitro":"changeArbitro","click #arbitro-nuevo":"newArbitro","click #arbitro-editar":"editArbitro","click #arbitro-borrar":"deleteArbitro"},initialize:function(){app.arbitros=new o,this.listenTo(app.arbitros,"add",this.agregarArbitro),this.listenTo(app.arbitros,"sync",this.syncArbitros),app.arbitros.fetch()},render:function(){return this.$el.html(this.template()),this.$el.find(".selecter_arbitro").select(),this},changeArbitro:function(e){var i=app.arbitros.get(t(e.target).val());"undefined"!=typeof i?(this.arbitroDetailView=new r({model:i}),t("#arbitro-detail").html(this.arbitroDetailView.render().$el),t("#arbitro-editar").removeAttr("disabled"),t("#arbitro-borrar").removeAttr("disabled")):("undefined"!=typeof this.arbitroDetailView&&this.arbitroDetailView.destroyView(),t("#arbitro-editar").attr("disabled",!0),t("#arbitro-borrar").attr("disabled",!0))},newArbitro:function(){this.disabledAction(!0);var e=new a({tipo:"new",modelo:null});t("#arbitro-edit").html(e.render().$el),e.setUpNew()},editArbitro:function(){this.disabledAction(!0);var e=app.arbitros.get(t("#select-arbitro").val()),i=new a({tipo:"edit",modelo:e});t("#arbitro-edit").html(i.render().$el),i.setUpEdit()},deleteArbitro:function(){var e=app.arbitros.get(t("#select-arbitro").val());e.destroy({wait:!0,success:function(e,i){new l({message:i.message}),i.result&&(t("#select-arbitro option:selected").remove(),t("#select-arbitro").change())},error:function(t,e){new l({message:e.responseJSON.message})}})},agregarArbitro:function(e){t("#select-arbitro").append(t("<option>",{value:e.get("id"),text:e.get("nombre")+" "+e.get("paterno")+" "+e.get("paterno")}))},syncArbitros:function(){t("#select-arbitro").change()}});return d}),define("text!templates/private/tplCanchaDetail.html",[],function(){return'<h4 class="list-group-item-heading"><%= nombre %></h4>\n<p class="list-group-item-text"><%= descripcion %></p>\n<p class="list-group-item-text"><%= calle %> <%= noExterior %> <%= noInterior %> <%= coloniaDesc %></p>\n<p class="list-group-item-text"><%= municipioDesc %> <%= estadoDesc %> <%= paisDesc %></p>\n<p class="list-group-item-text"><%= latitude %> <%= longitude %></p>'}),define("views/private/CanchaDetailView",["jquery","backbone","core/BaseView","text!templates/private/tplCanchaDetail.html"],function(t,e,i,n){var s=i.extend({template:_.template(n),events:{},initialize:function(){},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}});return s}),define("text!templates/private/tplCanchaEdit.html",[],function(){return'<form id="form-cancha" role="form">\n    <p>Detalle Cancha.</p>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Nombre</label>\n                <input class="form-control" placeholder="Nombre" type="text" name="nombre" value="<%= nombre %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Alias</label>\n                <input class="form-control" placeholder="Alias" type="text" name="alias" value="<%= alias %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Descripcion</label>\n                <input class="form-control" placeholder="Descripcion" type="text" name="descripcion" value="<%= descripcion %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Calle</label>\n                <input class="form-control" placeholder="Calle" type="text" name="calle" value="<%= calle %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>No Exterior</label>\n                <input class="form-control" placeholder="No Exterior" type="text" name="noExterior" value="<%= noExterior %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>No Interior</label>\n                <input class="form-control" placeholder="No Interior" type="text" name="noInterior" value="<%= noInterior %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Codigo Postal</label>\n                <input class="form-control" placeholder="Codigo Postal" type="text" name="codigoPostal" value="<%= codigoPostal %>">\n\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Colonia</label>\n                <div class="input-group">\n                    <input id="cancha-colonia-id" type="hidden" name="coloniaId" value="<%= coloniaId %>">\n                    <input id="cancha-colonia-desc" class="form-control" placeholder="Colonia" type="text" name="coloniaDesc" value="<%= coloniaDesc %>">\n                    <div class="input-group-btn">\n                        <button id="colonia-buscar" type="button" class="btn btn-primary">Buscar</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Latitude</label>\n                <input class="form-control" placeholder="Latitude" type="text" name="latitude" value="<%= latitude %>">\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="form-group">\n                <label>Longitude</label>\n                <input class="form-control" placeholder="Longitude" type="text" name="longitude" value="<%= longitude %>">\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="modal-footer">\n            <button id="btn-cancel" type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n            <button id="btn-ok" type="button" class="btn btn-success">Guardar</button>\n        </div>\n    </div>\n</form>\n<div id="modal-colonia">\n</div>'}),define("views/private/CanchaEditView",["jquery","backbone","backboneValidation","jquerySerializeObject","models/CanchaModel","core/BaseView","views/private/MainColoniaAdminView","views/private/util/ModalGenericView","text!templates/private/tplCanchaEdit.html"],function(t,e,i,n,s,o,r,a,l){var c=o.extend({template:_.template(l),events:{"click #colonia-buscar":"buscarColonia","click #btn-ok":"saveCancha","click #btn-cancel":"cancelCancha"},initialize:function(t){"new"==t.tipo?this.model=new s:this.model=t.modelo,this.model.once("sync",this.saveCanchaSuccess),this.model.once("error",this.saveCanchaError),e.Validation.bind(this),app.that=this},remove:function(){return e.Validation.unbind(this),e.View.prototype.remove.apply(this,arguments)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},buscarColonia:function(){new r(this.selectColonia)},selectColonia:function(e){t("#cancha-colonia-id").val(e.get("id")),t("#cancha-colonia-desc").val(e.get("nombre"))},cancelCancha:function(){new a({type:"confirm",labelConfirm:"Si",labelCancel:"No",message:"¿Desea cancelar la acción?",callbackConfirm:function(t){app.that.disabledAction(!1),app.that.destroyView(),delete app.that}})},saveCancha:function(){var t=this.$el.find("#form-cancha").serializeObject();for(var e in t)console.log(e),t.hasOwnProperty(e)&&(t[e]=_.escape(t[e]));this.model.set(t),this.model.isValid(!0)&&this.model.save()},saveCanchaSuccess:function(e,i,n){app.canchas.add(e),"undefined"!=typeof app.that&&(app.that.disabledAction(!1),new a({message:"Cancha guardada correctamente"}),app.that.destroyView(),delete app.that,1==app.canchas.length&&t("#select-cancha").change())},saveCanchaError:function(t,e,i){new a({message:"Se presento un error al registrar la cancha"})}});return c}),define("text!templates/private/tplCanchaAdmin.html",[],function(){return'<div class="row">\n    <div class="col-md-12">\n      <div class="main-box">\n        <div class="panel panel-info">\n            <div class="panel-heading">\n                <h3 class="panel-title">Cancha Admin</h3>\n            </div>\n            <div class="panel-body">\n                <div class="row">\n                    <div class="col-md-6">\n                        <div class="form-group">\n                            <select class="action-entuliga form-control" id="select-cancha" placeholder="Cancha...">\n                            </select>\n                        </div>\n                        <div class="panel panel-default">\n                            <div id="cancha-detail" class="panel-body">\n                            </div>\n                        </div>\n                        <div class="btn-group-horizontal" role="group" aria-label="...">\n                            <button id="cancha-nuevo" type="button" class="btn btn-primary action-entuliga">Registrar</button>\n                            <button id="cancha-editar" type="button" class="btn btn-primary action-entuliga">Editar</button>\n                            <button id="cancha-borrar" type="button" class="btn btn-danger action-entuliga">\n                                <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>\n                            </button>\n                        </div>\n                    </div>\n                    <div class="col-md-6">\n                        <div class="panel panel-default">\n                            <div class="panel-heading">\n                                <h3 class="panel-title">Cancha</h3>\n                            </div>\n                            <div id="cancha-edit" class="panel-body">\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n      </div>\n    </div>\n</div>\n'}),define("views/private/CanchaAdminView",["jquery","backbone","bootstrap","selecter","core/BaseView","collections/CanchasCollection","views/private/CanchaDetailView","views/private/CanchaEditView","views/private/util/ModalGenericView","text!templates/private/tplCanchaAdmin.html"],function(t,e,i,n,s,o,r,a,l,c){var d=s.extend({template:_.template(c),events:{"change #select-cancha":"changeCancha","click #cancha-nuevo":"newCancha","click #cancha-editar":"editCancha","click #cancha-borrar":"deleteCancha"},initialize:function(){app.canchas=new o,this.listenTo(app.canchas,"add",this.agregarCancha),this.listenTo(app.canchas,"sync",this.syncCanchas),app.canchas.fetch()},render:function(){return this.$el.html(this.template()),this.$el.find(".selecter_cancha").select(),this},changeCancha:function(e){var i=app.canchas.get(t(e.target).val());"undefined"!=typeof i?(this.canchaDetailView=new r({model:i}),t("#cancha-detail").html(this.canchaDetailView.render().$el),t("#cancha-editar").removeAttr("disabled"),t("#cancha-borrar").removeAttr("disabled")):("undefined"!=typeof this.canchaDetailView&&this.canchaDetailView.destroyView(),t("#cancha-editar").attr("disabled",!0),t("#cancha-borrar").attr("disabled",!0))},newCancha:function(){this.disabledAction(!0);var e=new a({tipo:"new",modelo:null});t("#cancha-edit").html(e.render().$el)},editCancha:function(){this.disabledAction(!0);var e=app.canchas.get(t("#select-cancha").val()),i=new a({tipo:"edit",modelo:e});t("#cancha-edit").html(i.render().$el)},deleteCancha:function(){var e=app.canchas.get(t("#select-cancha").val());e.destroy({wait:!0,success:function(e,i){new l({message:i.message}),i.result&&(t("#select-cancha option:selected").remove(),t("#select-cancha").change())},error:function(t,e){new l({message:e.responseJSON.message})}})},agregarCancha:function(e){t("#select-cancha").append(t("<option>",{value:e.get("id"),text:e.get("nombre")}))},syncCanchas:function(){t("#select-cancha").change()}});return d});var fabric=fabric||{version:"1.7.9"};"undefined"!=typeof exports&&(exports.fabric=fabric),"undefined"!=typeof document&&"undefined"!=typeof window?(fabric.document=document,fabric.window=window,window.fabric=fabric):(fabric.document=require("jsdom").jsdom(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E")),fabric.document.createWindow?fabric.window=fabric.document.createWindow():fabric.window=fabric.document.parentWindow),fabric.isTouchSupported="ontouchstart"in fabric.document.documentElement,fabric.isLikelyNode="undefined"!=typeof Buffer&&"undefined"==typeof window,fabric.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id"],fabric.DPI=96,fabric.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?)",fabric.fontPaths={},fabric.iMatrix=[1,0,0,1,0,0],fabric.charWidthsCache={},fabric.devicePixelRatio=fabric.window.devicePixelRatio||fabric.window.webkitDevicePixelRatio||fabric.window.mozDevicePixelRatio||1,function(){function t(t,e){if(this.__eventListeners[t]){var i=this.__eventListeners[t];e?i[i.indexOf(e)]=!1:fabric.util.array.fill(i,!1)}}function e(t,e){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var i in t)this.on(i,t[i]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(e);return this}function i(e,i){if(this.__eventListeners){if(0===arguments.length)for(e in this.__eventListeners)t.call(this,e);else if(1===arguments.length&&"object"==typeof arguments[0])for(var n in e)t.call(this,n,e[n]);else t.call(this,e,i);return this}}function n(t,e){if(this.__eventListeners){var i=this.__eventListeners[t];if(i){for(var n=0,s=i.length;s>n;n++)i[n]&&i[n].call(this,e||{});return this.__eventListeners[t]=i.filter(function(t){return t!==!1}),this}}}fabric.Observable={observe:e,stopObserving:i,fire:n,on:e,off:i,trigger:n}}(),fabric.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var t=0,e=arguments.length;e>t;t++)this._onObjectAdded(arguments[t]);return this.renderOnAddRemove&&this.renderAll(),this},insertAt:function(t,e,i){var n=this.getObjects();return i?n[e]=t:n.splice(e,0,t),this._onObjectAdded&&this._onObjectAdded(t),this.renderOnAddRemove&&this.renderAll(),this},remove:function(){for(var t,e=this.getObjects(),i=!1,n=0,s=arguments.length;s>n;n++)t=e.indexOf(arguments[n]),-1!==t&&(i=!0,e.splice(t,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[n]));return this.renderOnAddRemove&&i&&this.renderAll(),this},forEachObject:function(t,e){for(var i=this.getObjects(),n=0,s=i.length;s>n;n++)t.call(e,i[n],n,i);return this},getObjects:function(t){return"undefined"==typeof t?this._objects:this._objects.filter(function(e){return e.type===t})},item:function(t){return this.getObjects()[t]},isEmpty:function(){return 0===this.getObjects().length},size:function(){return this.getObjects().length},contains:function(t){return this.getObjects().indexOf(t)>-1},complexity:function(){return this.getObjects().reduce(function(t,e){return t+=e.complexity?e.complexity():0},0)}},fabric.CommonMethods={_setOptions:function(t){for(var e in t)this.set(e,t[e])},_initGradient:function(t,e){!t||!t.colorStops||t instanceof fabric.Gradient||this.set(e,new fabric.Gradient(t))},_initPattern:function(t,e,i){!t||!t.source||t instanceof fabric.Pattern?i&&i():this.set(e,new fabric.Pattern(t,i))},_initClipping:function(t){if(t.clipTo&&"string"==typeof t.clipTo){var e=fabric.util.getFunctionBody(t.clipTo);"undefined"!=typeof e&&(this.clipTo=new Function("ctx",e))}},_setObject:function(t){for(var e in t)this._set(e,t[e])},set:function(t,e){return"object"==typeof t?this._setObject(t):"function"==typeof e&&"clipTo"!==t?this._set(t,e(this.get(t))):this._set(t,e),this},_set:function(t,e){this[t]=e},toggle:function(t){var e=this.get(t);return"boolean"==typeof e&&this.set(t,!e),this},get:function(t){return this[t]}},function(t){var e=Math.sqrt,i=Math.atan2,n=Math.pow,s=Math.abs,o=Math.PI/180;fabric.util={removeFromArray:function(t,e){var i=t.indexOf(e);return-1!==i&&t.splice(i,1),t},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},degreesToRadians:function(t){return t*o},radiansToDegrees:function(t){return t/o},rotatePoint:function(t,e,i){t.subtractEquals(e);var n=fabric.util.rotateVector(t,i);return new fabric.Point(n.x,n.y).addEquals(e)},rotateVector:function(t,e){var i=Math.sin(e),n=Math.cos(e),s=t.x*n-t.y*i,o=t.x*i+t.y*n;return{x:s,y:o}},transformPoint:function(t,e,i){return i?new fabric.Point(e[0]*t.x+e[2]*t.y,e[1]*t.x+e[3]*t.y):new fabric.Point(e[0]*t.x+e[2]*t.y+e[4],e[1]*t.x+e[3]*t.y+e[5])},makeBoundingBoxFromPoints:function(t){var e=[t[0].x,t[1].x,t[2].x,t[3].x],i=fabric.util.array.min(e),n=fabric.util.array.max(e),s=Math.abs(i-n),o=[t[0].y,t[1].y,t[2].y,t[3].y],r=fabric.util.array.min(o),a=fabric.util.array.max(o),l=Math.abs(r-a);return{left:i,top:r,width:s,height:l}},invertTransform:function(t){var e=1/(t[0]*t[3]-t[1]*t[2]),i=[e*t[3],-e*t[1],-e*t[2],e*t[0]],n=fabric.util.transformPoint({x:t[4],y:t[5]},i,!0);return i[4]=-n.x,i[5]=-n.y,i},toFixed:function(t,e){return parseFloat(Number(t).toFixed(e))},parseUnit:function(t,e){var i=/\D{0,2}$/.exec(t),n=parseFloat(t);switch(e||(e=fabric.Text.DEFAULT_SVG_FONT_SIZE),i[0]){case"mm":return n*fabric.DPI/25.4;case"cm":return n*fabric.DPI/2.54;case"in":return n*fabric.DPI;case"pt":return n*fabric.DPI/72;case"pc":return n*fabric.DPI/72*12;case"em":return n*e;default:return n}},falseFunction:function(){return!1},getKlass:function(t,e){return t=fabric.util.string.camelize(t.charAt(0).toUpperCase()+t.slice(1)),fabric.util.resolveNamespace(e)[t]},resolveNamespace:function(e){if(!e)return fabric;var i,n=e.split("."),s=n.length,o=t||fabric.window;for(i=0;s>i;++i)o=o[n[i]];return o},loadImage:function(t,e,i,n){if(!t)return void(e&&e.call(i,t));var s=fabric.util.createImage();s.onload=function(){e&&e.call(i,s),s=s.onload=s.onerror=null},s.onerror=function(){fabric.log("Error loading "+s.src),e&&e.call(i,null,!0),s=s.onload=s.onerror=null},0!==t.indexOf("data")&&n&&(s.crossOrigin=n),s.src=t},enlivenObjects:function(t,e,i,n){function s(){++r===a&&e&&e(o)}t=t||[];var o=[],r=0,a=t.length,l=!0;return a?void t.forEach(function(t,e){if(!t||!t.type)return void s();var r=fabric.util.getKlass(t.type,i);r.fromObject(t,function(i,r){r||(o[e]=i),n&&n(t,i,r),s()},l)}):void(e&&e(o))},enlivenPatterns:function(t,e){function i(){++s===o&&e&&e(n)}t=t||[];var n=[],s=0,o=t.length;return o?void t.forEach(function(t,e){t&&t.source?new fabric.Pattern(t,function(t){n[e]=t,i()}):(n[e]=t,i())}):void(e&&e(n))},groupSVGElements:function(t,e,i){var n;return n=new fabric.PathGroup(t,e),"undefined"!=typeof i&&n.setSourcePath(i),n},populateWithProperties:function(t,e,i){if(i&&"[object Array]"===Object.prototype.toString.call(i))for(var n=0,s=i.length;s>n;n++)i[n]in t&&(e[i[n]]=t[i[n]])},drawDashedLine:function(t,n,s,o,r,a){var l=o-n,c=r-s,d=e(l*l+c*c),h=i(c,l),u=a.length,p=0,f=!0;for(t.save(),t.translate(n,s),t.moveTo(0,0),t.rotate(h),n=0;d>n;)n+=a[p++%u],n>d&&(n=d),t[f?"lineTo":"moveTo"](n,0),f=!f;t.restore()},createCanvasElement:function(t){return t||(t=fabric.document.createElement("canvas")),t.getContext||"undefined"==typeof G_vmlCanvasManager||G_vmlCanvasManager.initElement(t),t},createImage:function(){return fabric.isLikelyNode?new(require("canvas").Image):fabric.document.createElement("img")},createAccessors:function(t){var e,i,n,s,o,r=t.prototype;for(e=r.stateProperties.length;e--;)i=r.stateProperties[e],n=i.charAt(0).toUpperCase()+i.slice(1),s="set"+n,o="get"+n,r[o]||(r[o]=function(t){return new Function('return this.get("'+t+'")')}(i)),r[s]||(r[s]=function(t){return new Function("value",'return this.set("'+t+'", value)')}(i))},clipContext:function(t,e){e.save(),e.beginPath(),t.clipTo(e),e.clip()},multiplyTransformMatrices:function(t,e,i){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],i?0:t[0]*e[4]+t[2]*e[5]+t[4],i?0:t[1]*e[4]+t[3]*e[5]+t[5]]},qrDecompose:function(t){var s=i(t[1],t[0]),r=n(t[0],2)+n(t[1],2),a=e(r),l=(t[0]*t[3]-t[2]*t[1])/a,c=i(t[0]*t[2]+t[1]*t[3],r);return{angle:s/o,scaleX:a,scaleY:l,skewX:c/o,skewY:0,translateX:t[4],translateY:t[5]}},customTransformMatrix:function(t,e,i){var n=[1,0,s(Math.tan(i*o)),1],r=[s(t),0,0,s(e)];return fabric.util.multiplyTransformMatrices(r,n,!0)},resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.flipX=!1,t.flipY=!1,t.setAngle(0)},getFunctionBody:function(t){return(String(t).match(/function[^{]*\{([\s\S]*)\}/)||{})[1]},isTransparent:function(t,e,i,n){n>0&&(e>n?e-=n:e=0,i>n?i-=n:i=0);var s,o,r=!0,a=t.getImageData(e,i,2*n||1,2*n||1),l=a.data.length;for(s=3;l>s&&(o=a.data[s],r=0>=o,r!==!1);s+=4);return a=null,r},parsePreserveAspectRatioAttribute:function(t){var e,i="meet",n="Mid",s="Mid",o=t.split(" ");return o&&o.length&&(i=o.pop(),"meet"!==i&&"slice"!==i?(e=i,i="meet"):o.length&&(e=o.pop())),n="none"!==e?e.slice(1,4):"none",s="none"!==e?e.slice(5,8):"none",{meetOrSlice:i,alignX:n,alignY:s}},clearFabricFontCache:function(t){t?fabric.charWidthsCache[t]&&delete fabric.charWidthsCache[t]:fabric.charWidthsCache={}}}}("undefined"!=typeof exports?exports:this),function(){function t(t,n,o,r,l,c,d){var h=a.call(arguments);if(s[h])return s[h];var u=Math.PI,p=d*u/180,f=Math.sin(p),g=Math.cos(p),m=0,v=0;o=Math.abs(o),r=Math.abs(r);var b=-g*t*.5-f*n*.5,y=-g*n*.5+f*t*.5,w=o*o,x=r*r,C=y*y,_=b*b,T=w*x-w*C-x*_,S=0;if(0>T){var k=Math.sqrt(1-T/(w*x));o*=k,r*=k}else S=(l===c?-1:1)*Math.sqrt(T/(w*C+x*_));var O=S*o*y/r,A=-S*r*b/o,D=g*O-f*A+.5*t,E=f*O+g*A+.5*n,j=i(1,0,(b-O)/o,(y-A)/r),M=i((b-O)/o,(y-A)/r,(-b-O)/o,(-y-A)/r);0===c&&M>0?M-=2*u:1===c&&0>M&&(M+=2*u);for(var I=Math.ceil(Math.abs(M/u*2)),P=[],L=M/I,F=8/3*Math.sin(L/4)*Math.sin(L/4)/Math.sin(L/2),V=j+L,q=0;I>q;q++)P[q]=e(j,V,g,f,o,r,D,E,F,m,v),m=P[q][4],v=P[q][5],j=V,V+=L;return s[h]=P,P}function e(t,e,i,n,s,r,l,c,d,h,u){var p=a.call(arguments);if(o[p])return o[p];var f=Math.cos(t),g=Math.sin(t),m=Math.cos(e),v=Math.sin(e),b=i*s*m-n*r*v+l,y=n*s*m+i*r*v+c,w=h+d*(-i*s*g-n*r*f),x=u+d*(-n*s*g+i*r*f),C=b+d*(i*s*v+n*r*m),_=y+d*(n*s*v-i*r*m);return o[p]=[w,x,C,_,b,y],o[p]}function i(t,e,i,n){var s=Math.atan2(e,t),o=Math.atan2(n,i);return o>=s?o-s:2*Math.PI-(s-o)}function n(t,e,i,n,s,o,l,c){var d=a.call(arguments);if(r[d])return r[d];var h,u,p,f,g,m,v,b,y=Math.sqrt,w=Math.min,x=Math.max,C=Math.abs,_=[],T=[[],[]];u=6*t-12*i+6*s,h=-3*t+9*i-9*s+3*l,p=3*i-3*t;for(var S=0;2>S;++S)if(S>0&&(u=6*e-12*n+6*o,h=-3*e+9*n-9*o+3*c,p=3*n-3*e),C(h)<1e-12){if(C(u)<1e-12)continue;f=-p/u,f>0&&1>f&&_.push(f)}else v=u*u-4*p*h,0>v||(b=y(v),g=(-u+b)/(2*h),g>0&&1>g&&_.push(g),m=(-u-b)/(2*h),m>0&&1>m&&_.push(m));for(var k,O,A,D=_.length,E=D;D--;)f=_[D],A=1-f,k=A*A*A*t+3*A*A*f*i+3*A*f*f*s+f*f*f*l,T[0][D]=k,O=A*A*A*e+3*A*A*f*n+3*A*f*f*o+f*f*f*c,T[1][D]=O;T[0][E]=t,T[1][E]=e,T[0][E+1]=l,T[1][E+1]=c;var j=[{x:w.apply(null,T[0]),y:w.apply(null,T[1])},{x:x.apply(null,T[0]),y:x.apply(null,T[1])}];return r[d]=j,j}var s={},o={},r={},a=Array.prototype.join;fabric.util.drawArc=function(e,i,n,s){for(var o=s[0],r=s[1],a=s[2],l=s[3],c=s[4],d=s[5],h=s[6],u=[[],[],[],[]],p=t(d-i,h-n,o,r,l,c,a),f=0,g=p.length;g>f;f++)u[f][0]=p[f][0]+i,u[f][1]=p[f][1]+n,u[f][2]=p[f][2]+i,u[f][3]=p[f][3]+n,u[f][4]=p[f][4]+i,u[f][5]=p[f][5]+n,e.bezierCurveTo.apply(e,u[f])},fabric.util.getBoundsOfArc=function(e,i,s,o,r,a,l,c,d){for(var h,u=0,p=0,f=[],g=t(c-e,d-i,s,o,a,l,r),m=0,v=g.length;v>m;m++)h=n(u,p,g[m][0],g[m][1],g[m][2],g[m][3],g[m][4],g[m][5]),f.push({x:h[0].x+e,y:h[0].y+i}),f.push({x:h[1].x+e,y:h[1].y+i}),u=g[m][4],p=g[m][5];return f},fabric.util.getBoundsOfCurve=n}(),function(){function t(t,e){for(var i=o.call(arguments,2),n=[],s=0,r=t.length;r>s;s++)n[s]=i.length?t[s][e].apply(t[s],i):t[s][e].call(t[s]);return n}function e(t,e){return s(t,e,function(t,e){return t>=e})}function i(t,e){return s(t,e,function(t,e){return e>t})}function n(t,e){for(var i=t.length;i--;)t[i]=e;return t}function s(t,e,i){if(t&&0!==t.length){var n=t.length-1,s=e?t[n][e]:t[n];if(e)for(;n--;)i(t[n][e],s)&&(s=t[n][e]);else for(;n--;)i(t[n],s)&&(s=t[n]);return s}}var o=Array.prototype.slice;Array.prototype.indexOf||(Array.prototype.indexOf=function(t){if(void 0===this||null===this)throw new TypeError;var e=Object(this),i=e.length>>>0;if(0===i)return-1;var n=0;if(arguments.length>0&&(n=Number(arguments[1]),n!==n?n=0:0!==n&&n!==Number.POSITIVE_INFINITY&&n!==Number.NEGATIVE_INFINITY&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=i)return-1;for(var s=n>=0?n:Math.max(i-Math.abs(n),0);i>s;s++)if(s in e&&e[s]===t)return s;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){for(var i=0,n=this.length>>>0;n>i;i++)i in this&&t.call(e,this[i],i,this)}),Array.prototype.map||(Array.prototype.map=function(t,e){for(var i=[],n=0,s=this.length>>>0;s>n;n++)n in this&&(i[n]=t.call(e,this[n],n,this));return i}),Array.prototype.every||(Array.prototype.every=function(t,e){for(var i=0,n=this.length>>>0;n>i;i++)if(i in this&&!t.call(e,this[i],i,this))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(t,e){for(var i=0,n=this.length>>>0;n>i;i++)if(i in this&&t.call(e,this[i],i,this))return!0;return!1}),Array.prototype.filter||(Array.prototype.filter=function(t,e){for(var i,n=[],s=0,o=this.length>>>0;o>s;s++)s in this&&(i=this[s],t.call(e,i,s,this)&&n.push(i));return n}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var e,i=this.length>>>0,n=0;if(arguments.length>1)e=arguments[1];else for(;;){if(n in this){e=this[n++];break}if(++n>=i)throw new TypeError}for(;i>n;n++)n in this&&(e=t.call(null,e,this[n],n,this));return e}),fabric.util.array={fill:n,invoke:t,min:i,max:e}}(),function(){function t(e,i,n){if(n)if(!fabric.isLikelyNode&&i instanceof Element)e=i;else if(i instanceof Array){e=[];for(var s=0,o=i.length;o>s;s++)e[s]=t({},i[s],n)}else if(i&&"object"==typeof i)for(var r in i)i.hasOwnProperty(r)&&(e[r]=t({},i[r],n));else e=i;else for(var r in i)e[r]=i[r];return e}function e(e,i){return t({},e,i)}fabric.util.object={extend:t,clone:e}}(),function(){function t(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})}function e(t,e){return t.charAt(0).toUpperCase()+(e?t.slice(1):t.slice(1).toLowerCase())}function i(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"")}),fabric.util.string={camelize:t,capitalize:e,escapeXml:i}}(),function(){var t=Array.prototype.slice,e=Function.prototype.apply,i=function(){};
Function.prototype.bind||(Function.prototype.bind=function(n){var s,o=this,r=t.call(arguments,1);return s=r.length?function(){return e.call(o,this instanceof i?this:n,r.concat(t.call(arguments)))}:function(){return e.call(o,this instanceof i?this:n,arguments)},i.prototype=this.prototype,s.prototype=new i,s})}(),function(){function t(){}function e(t){var e=this.constructor.superclass.prototype[t];return arguments.length>1?e.apply(this,n.call(arguments,1)):e.call(this)}function i(){function i(){this.initialize.apply(this,arguments)}var o=null,a=n.call(arguments,0);"function"==typeof a[0]&&(o=a.shift()),i.superclass=o,i.subclasses=[],o&&(t.prototype=o.prototype,i.prototype=new t,o.subclasses.push(i));for(var l=0,c=a.length;c>l;l++)r(i,a[l],o);return i.prototype.initialize||(i.prototype.initialize=s),i.prototype.constructor=i,i.prototype.callSuper=e,i}var n=Array.prototype.slice,s=function(){},o=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}(),r=function(t,e,i){for(var n in e)n in t.prototype&&"function"==typeof t.prototype[n]&&(e[n]+"").indexOf("callSuper")>-1?t.prototype[n]=function(t){return function(){var n=this.constructor.superclass;this.constructor.superclass=i;var s=e[t].apply(this,arguments);return this.constructor.superclass=n,"initialize"!==t?s:void 0}}(n):t.prototype[n]=e[n],o&&(e.toString!==Object.prototype.toString&&(t.prototype.toString=e.toString),e.valueOf!==Object.prototype.valueOf&&(t.prototype.valueOf=e.valueOf))};fabric.util.createClass=i}(),function(){function t(t){var e,i,n=Array.prototype.slice.call(arguments,1),s=n.length;for(i=0;s>i;i++)if(e=typeof t[n[i]],!/^(?:function|object|unknown)$/.test(e))return!1;return!0}function e(t,e){return{handler:e,wrappedHandler:i(t,e)}}function i(t,e){return function(i){e.call(r(t),i||fabric.window.event)}}function n(t,e){return function(i){if(g[t]&&g[t][e])for(var n=g[t][e],s=0,o=n.length;o>s;s++)n[s].call(this,i||fabric.window.event)}}function s(t){t||(t=fabric.window.event);var e=t.target||(typeof t.srcElement!==l?t.srcElement:null),i=fabric.util.getScrollLeftTop(e);return{x:m(t)+i.left,y:v(t)+i.top}}function o(t,e,i){var n="touchend"===t.type?"changedTouches":"touches";return t[n]&&t[n][0]?t[n][0][e]-(t[n][0][e]-t[n][0][i])||t[i]:t[i]}var r,a,l="unknown",c=function(){var t=0;return function(e){return e.__uniqueID||(e.__uniqueID="uniqueID__"+t++)}}();!function(){var t={};r=function(e){return t[e]},a=function(e,i){t[e]=i}}();var d,h,u=t(fabric.document.documentElement,"addEventListener","removeEventListener")&&t(fabric.window,"addEventListener","removeEventListener"),p=t(fabric.document.documentElement,"attachEvent","detachEvent")&&t(fabric.window,"attachEvent","detachEvent"),f={},g={};u?(d=function(t,e,i,n){t.addEventListener(e,i,!p&&n)},h=function(t,e,i,n){t.removeEventListener(e,i,!p&&n)}):p?(d=function(t,i,n){var s=c(t);a(s,t),f[s]||(f[s]={}),f[s][i]||(f[s][i]=[]);var o=e(s,n);f[s][i].push(o),t.attachEvent("on"+i,o.wrappedHandler)},h=function(t,e,i){var n,s=c(t);if(f[s]&&f[s][e])for(var o=0,r=f[s][e].length;r>o;o++)n=f[s][e][o],n&&n.handler===i&&(t.detachEvent("on"+e,n.wrappedHandler),f[s][e][o]=null)}):(d=function(t,e,i){var s=c(t);if(g[s]||(g[s]={}),!g[s][e]){g[s][e]=[];var o=t["on"+e];o&&g[s][e].push(o),t["on"+e]=n(s,e)}g[s][e].push(i)},h=function(t,e,i){var n=c(t);if(g[n]&&g[n][e])for(var s=g[n][e],o=0,r=s.length;r>o;o++)s[o]===i&&s.splice(o,1)}),fabric.util.addListener=d,fabric.util.removeListener=h;var m=function(t){return typeof t.clientX!==l?t.clientX:0},v=function(t){return typeof t.clientY!==l?t.clientY:0};fabric.isTouchSupported&&(m=function(t){return o(t,"pageX","clientX")},v=function(t){return o(t,"pageY","clientY")}),fabric.util.getPointer=s,fabric.util.object.extend(fabric.util,fabric.Observable)}(),function(){function t(t,e){var i=t.style;if(!i)return t;if("string"==typeof e)return t.style.cssText+=";"+e,e.indexOf("opacity")>-1?o(t,e.match(/opacity:\s*(\d?\.?\d*)/)[1]):t;for(var n in e)if("opacity"===n)o(t,e[n]);else{var s="float"===n||"cssFloat"===n?"undefined"==typeof i.styleFloat?"cssFloat":"styleFloat":n;i[s]=e[n]}return t}var e=fabric.document.createElement("div"),i="string"==typeof e.style.opacity,n="string"==typeof e.style.filter,s=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,o=function(t){return t};i?o=function(t,e){return t.style.opacity=e,t}:n&&(o=function(t,e){var i=t.style;return t.currentStyle&&!t.currentStyle.hasLayout&&(i.zoom=1),s.test(i.filter)?(e=e>=.9999?"":"alpha(opacity="+100*e+")",i.filter=i.filter.replace(s,e)):i.filter+=" alpha(opacity="+100*e+")",t}),fabric.util.setStyle=t}(),function(){function t(t){return"string"==typeof t?fabric.document.getElementById(t):t}function e(t,e){var i=fabric.document.createElement(t);for(var n in e)"class"===n?i.className=e[n]:"for"===n?i.htmlFor=e[n]:i.setAttribute(n,e[n]);return i}function i(t,e){t&&-1===(" "+t.className+" ").indexOf(" "+e+" ")&&(t.className+=(t.className?" ":"")+e)}function n(t,i,n){return"string"==typeof i&&(i=e(i,n)),t.parentNode&&t.parentNode.replaceChild(i,t),i.appendChild(t),i}function s(t){for(var e=0,i=0,n=fabric.document.documentElement,s=fabric.document.body||{scrollLeft:0,scrollTop:0};t&&(t.parentNode||t.host)&&(t=t.parentNode||t.host,t===fabric.document?(e=s.scrollLeft||n.scrollLeft||0,i=s.scrollTop||n.scrollTop||0):(e+=t.scrollLeft||0,i+=t.scrollTop||0),1!==t.nodeType||"fixed"!==fabric.util.getElementStyle(t,"position")););return{left:e,top:i}}function o(t){var e,i,n=t&&t.ownerDocument,o={left:0,top:0},r={left:0,top:0},a={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!n)return r;for(var l in a)r[a[l]]+=parseInt(c(t,l),10)||0;return e=n.documentElement,"undefined"!=typeof t.getBoundingClientRect&&(o=t.getBoundingClientRect()),i=s(t),{left:o.left+i.left-(e.clientLeft||0)+r.left,top:o.top+i.top-(e.clientTop||0)+r.top}}var r,a=Array.prototype.slice,l=function(t){return a.call(t,0)};try{r=l(fabric.document.childNodes)instanceof Array}catch(t){}r||(l=function(t){for(var e=new Array(t.length),i=t.length;i--;)e[i]=t[i];return e});var c;c=fabric.document.defaultView&&fabric.document.defaultView.getComputedStyle?function(t,e){var i=fabric.document.defaultView.getComputedStyle(t,null);return i?i[e]:void 0}:function(t,e){var i=t.style[e];return!i&&t.currentStyle&&(i=t.currentStyle[e]),i},function(){function t(t){return"undefined"!=typeof t.onselectstart&&(t.onselectstart=fabric.util.falseFunction),n?t.style[n]="none":"string"==typeof t.unselectable&&(t.unselectable="on"),t}function e(t){return"undefined"!=typeof t.onselectstart&&(t.onselectstart=null),n?t.style[n]="":"string"==typeof t.unselectable&&(t.unselectable=""),t}var i=fabric.document.documentElement.style,n="userSelect"in i?"userSelect":"MozUserSelect"in i?"MozUserSelect":"WebkitUserSelect"in i?"WebkitUserSelect":"KhtmlUserSelect"in i?"KhtmlUserSelect":"";fabric.util.makeElementUnselectable=t,fabric.util.makeElementSelectable=e}(),function(){function t(t,e){var i=fabric.document.getElementsByTagName("head")[0],n=fabric.document.createElement("script"),s=!0;n.onload=n.onreadystatechange=function(t){if(s){if("string"==typeof this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState)return;s=!1,e(t||fabric.window.event),n=n.onload=n.onreadystatechange=null}},n.src=t,i.appendChild(n)}fabric.util.getScript=t}(),fabric.util.getById=t,fabric.util.toArray=l,fabric.util.makeElement=e,fabric.util.addClass=i,fabric.util.wrapElement=n,fabric.util.getScrollLeftTop=s,fabric.util.getElementOffset=o,fabric.util.getElementStyle=c}(),function(){function t(t,e){return t+(/\?/.test(t)?"&":"?")+e}function e(){}function i(i,s){s||(s={});var o=s.method?s.method.toUpperCase():"GET",r=s.onComplete||function(){},a=n(),l=s.body||s.parameters;return a.onreadystatechange=function(){4===a.readyState&&(r(a),a.onreadystatechange=e)},"GET"===o&&(l=null,"string"==typeof s.parameters&&(i=t(i,s.parameters))),a.open(o,i,!0),"POST"!==o&&"PUT"!==o||a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(l),a}var n=function(){for(var t=[function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP.3.0")},function(){return new XMLHttpRequest}],e=t.length;e--;)try{var i=t[e]();if(i)return t[e]}catch(t){}}();fabric.util.request=i}(),fabric.log=function(){},fabric.warn=function(){},"undefined"!=typeof console&&["log","warn"].forEach(function(t){"undefined"!=typeof console[t]&&"function"==typeof console[t].apply&&(fabric[t]=function(){return console[t].apply(console,arguments)})}),function(){function t(t){e(function(i){t||(t={});var n,s=i||+new Date,o=t.duration||500,r=s+o,a=t.onChange||function(){},l=t.abort||function(){return!1},c=t.easing||function(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e},d="startValue"in t?t.startValue:0,h="endValue"in t?t.endValue:100,u=t.byValue||h-d;t.onStart&&t.onStart(),function p(i){n=i||+new Date;var h=n>r?o:n-s;return l()?void(t.onComplete&&t.onComplete()):(a(c(h,d,u,o)),n>r?void(t.onComplete&&t.onComplete()):void e(p))}(s)})}function e(){return i.apply(fabric.window,arguments)}var i=fabric.window.requestAnimationFrame||fabric.window.webkitRequestAnimationFrame||fabric.window.mozRequestAnimationFrame||fabric.window.oRequestAnimationFrame||fabric.window.msRequestAnimationFrame||function(t){fabric.window.setTimeout(t,1e3/60)};fabric.util.animate=t,fabric.util.requestAnimFrame=e}(),function(){function t(t,e,i){var n="rgba("+parseInt(t[0]+i*(e[0]-t[0]),10)+","+parseInt(t[1]+i*(e[1]-t[1]),10)+","+parseInt(t[2]+i*(e[2]-t[2]),10);return n+=","+(t&&e?parseFloat(t[3]+i*(e[3]-t[3])):1),n+=")"}function e(e,i,n,s){var o=new fabric.Color(e).getSource(),r=new fabric.Color(i).getSource();s=s||{},fabric.util.animate(fabric.util.object.extend(s,{duration:n||500,startValue:o,endValue:r,byValue:r,easing:function(e,i,n,o){var r=s.colorEasing?s.colorEasing(e,o):1-Math.cos(e/o*(Math.PI/2));return t(i,n,r)}}))}fabric.util.animateColor=e}(),function(){function t(t,e,i,n){return t<Math.abs(e)?(t=e,n=i/4):n=0===e&&0===t?i/(2*Math.PI)*Math.asin(1):i/(2*Math.PI)*Math.asin(e/t),{a:t,c:e,p:i,s:n}}function e(t,e,i){return t.a*Math.pow(2,10*(e-=1))*Math.sin((e*i-t.s)*(2*Math.PI)/t.p)}function i(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e}function n(t,e,i,n){return t/=n/2,1>t?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e}function s(t,e,i,n){return i*(t/=n)*t*t*t+e}function o(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e}function r(t,e,i,n){return t/=n/2,1>t?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e}function a(t,e,i,n){return i*(t/=n)*t*t*t*t+e}function l(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e}function c(t,e,i,n){return t/=n/2,1>t?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e}function d(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e}function h(t,e,i,n){return i*Math.sin(t/n*(Math.PI/2))+e}function u(t,e,i,n){return-i/2*(Math.cos(Math.PI*t/n)-1)+e}function p(t,e,i,n){return 0===t?e:i*Math.pow(2,10*(t/n-1))+e}function f(t,e,i,n){return t===n?e+i:i*(-Math.pow(2,-10*t/n)+1)+e}function g(t,e,i,n){return 0===t?e:t===n?e+i:(t/=n/2,1>t?i/2*Math.pow(2,10*(t-1))+e:i/2*(-Math.pow(2,-10*--t)+2)+e)}function m(t,e,i,n){return-i*(Math.sqrt(1-(t/=n)*t)-1)+e}function v(t,e,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+e}function b(t,e,i,n){return t/=n/2,1>t?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e}function y(i,n,s,o){var r=1.70158,a=0,l=s;if(0===i)return n;if(i/=o,1===i)return n+s;a||(a=.3*o);var c=t(l,s,a,r);return-e(c,i,o)+n}function w(e,i,n,s){var o=1.70158,r=0,a=n;if(0===e)return i;if(e/=s,1===e)return i+n;r||(r=.3*s);var l=t(a,n,r,o);return l.a*Math.pow(2,-10*e)*Math.sin((e*s-l.s)*(2*Math.PI)/l.p)+l.c+i}function x(i,n,s,o){var r=1.70158,a=0,l=s;if(0===i)return n;if(i/=o/2,2===i)return n+s;a||(a=o*(.3*1.5));var c=t(l,s,a,r);return 1>i?-.5*e(c,i,o)+n:c.a*Math.pow(2,-10*(i-=1))*Math.sin((i*o-c.s)*(2*Math.PI)/c.p)*.5+c.c+n}function C(t,e,i,n,s){return void 0===s&&(s=1.70158),i*(t/=n)*t*((s+1)*t-s)+e}function _(t,e,i,n,s){return void 0===s&&(s=1.70158),i*((t=t/n-1)*t*((s+1)*t+s)+1)+e}function T(t,e,i,n,s){return void 0===s&&(s=1.70158),t/=n/2,1>t?i/2*(t*t*(((s*=1.525)+1)*t-s))+e:i/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+e}function S(t,e,i,n){return i-k(n-t,0,i,n)+e}function k(t,e,i,n){return(t/=n)<1/2.75?i*(7.5625*t*t)+e:2/2.75>t?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e}function O(t,e,i,n){return n/2>t?.5*S(2*t,0,i,n)+e:.5*k(2*t-n,0,i,n)+.5*i+e}fabric.util.ease={easeInQuad:function(t,e,i,n){return i*(t/=n)*t+e},easeOutQuad:function(t,e,i,n){return-i*(t/=n)*(t-2)+e},easeInOutQuad:function(t,e,i,n){return t/=n/2,1>t?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,n){return i*(t/=n)*t*t+e},easeOutCubic:i,easeInOutCubic:n,easeInQuart:s,easeOutQuart:o,easeInOutQuart:r,easeInQuint:a,easeOutQuint:l,easeInOutQuint:c,easeInSine:d,easeOutSine:h,easeInOutSine:u,easeInExpo:p,easeOutExpo:f,easeInOutExpo:g,easeInCirc:m,easeOutCirc:v,easeInOutCirc:b,easeInElastic:y,easeOutElastic:w,easeInOutElastic:x,easeInBack:C,easeOutBack:_,easeInOutBack:T,easeInBounce:S,easeOutBounce:k,easeInOutBounce:O}}(),function(t){"use strict";function e(t){return t in S?S[t]:t}function i(t,e,i,n){var s,o="[object Array]"===Object.prototype.toString.call(e);return"fill"!==t&&"stroke"!==t||"none"!==e?"strokeDashArray"===t?e="none"===e?null:e.replace(/,/g," ").split(/\s+/).map(function(t){return parseFloat(t)}):"transformMatrix"===t?e=i&&i.transformMatrix?w(i.transformMatrix,g.parseTransformAttribute(e)):g.parseTransformAttribute(e):"visible"===t?(e="none"!==e&&"hidden"!==e,i&&i.visible===!1&&(e=!1)):"opacity"===t?(e=parseFloat(e),i&&"undefined"!=typeof i.opacity&&(e*=i.opacity)):"originX"===t?e="start"===e?"left":"end"===e?"right":"center":s=o?e.map(y):y(e,n):e="",!o&&isNaN(s)?e:s}function n(t){for(var e in k)if("undefined"!=typeof t[k[e]]&&""!==t[e]){if("undefined"==typeof t[e]){if(!g.Object.prototype[e])continue;t[e]=g.Object.prototype[e]}if(0!==t[e].indexOf("url(")){var i=new g.Color(t[e]);t[e]=i.setAlpha(b(i.getAlpha()*t[k[e]],2)).toRgba()}}return t}function s(t,e){for(var i,n,s=[],o=0;o<e.length;o++)i=e[o],n=t.getElementsByTagName(i),s=s.concat(Array.prototype.slice.call(n));return s}function o(t,e){var i,n;t.replace(/;\s*$/,"").split(";").forEach(function(t){var s=t.split(":");i=s[0].trim().toLowerCase(),n=s[1].trim(),e[i]=n})}function r(t,e){var i,n;for(var s in t)"undefined"!=typeof t[s]&&(i=s.toLowerCase(),n=t[s],e[i]=n)}function a(t,e){var i={};for(var n in g.cssRules[e])if(l(t,n.split(" ")))for(var s in g.cssRules[e][n])i[s]=g.cssRules[e][n][s];return i}function l(t,e){var i,n=!0;return i=d(t,e.pop()),i&&e.length&&(n=c(t,e)),i&&n&&0===e.length}function c(t,e){for(var i,n=!0;t.parentNode&&1===t.parentNode.nodeType&&e.length;)n&&(i=e.pop()),t=t.parentNode,n=d(t,i);return 0===e.length}function d(t,e){var i,n=t.nodeName,s=t.getAttribute("class"),o=t.getAttribute("id");if(i=new RegExp("^"+n,"i"),e=e.replace(i,""),o&&e.length&&(i=new RegExp("#"+o+"(?![a-zA-Z\\-]+)","i"),e=e.replace(i,"")),s&&e.length){s=s.split(" ");for(var r=s.length;r--;)i=new RegExp("\\."+s[r]+"(?![a-zA-Z\\-]+)","i"),e=e.replace(i,"")}return 0===e.length}function h(t,e){var i;if(t.getElementById&&(i=t.getElementById(e)),i)return i;var n,s,o=t.getElementsByTagName("*");for(s=0;s<o.length;s++)if(n=o[s],e===n.getAttribute("id"))return n}function u(t){for(var e=s(t,["use","svg:use"]),i=0;e.length&&i<e.length;){var n,o,r,a,l,c=e[i],d=c.getAttribute("xlink:href").substr(1),u=c.getAttribute("x")||0,f=c.getAttribute("y")||0,g=h(t,d).cloneNode(!0),m=(g.getAttribute("transform")||"")+" translate("+u+", "+f+")",v=e.length;if(p(g),/^svg$/i.test(g.nodeName)){var b=g.ownerDocument.createElement("g");for(r=0,a=g.attributes,l=a.length;l>r;r++)o=a.item(r),b.setAttribute(o.nodeName,o.nodeValue);for(;g.firstChild;)b.appendChild(g.firstChild);g=b}for(r=0,a=c.attributes,l=a.length;l>r;r++)o=a.item(r),"x"!==o.nodeName&&"y"!==o.nodeName&&"xlink:href"!==o.nodeName&&("transform"===o.nodeName?m=o.nodeValue+" "+m:g.setAttribute(o.nodeName,o.nodeValue));g.setAttribute("transform",m),g.setAttribute("instantiated_by_use","1"),g.removeAttribute("id"),n=c.parentNode,n.replaceChild(g,c),e.length===v&&i++}}function p(t){var e,i,n,s,o=t.getAttribute("viewBox"),r=1,a=1,l=0,c=0,d=t.getAttribute("width"),h=t.getAttribute("height"),u=t.getAttribute("x")||0,p=t.getAttribute("y")||0,f=t.getAttribute("preserveAspectRatio")||"",m=!o||!C.test(t.nodeName)||!(o=o.match(O)),v=!d||!h||"100%"===d||"100%"===h,b=m&&v,w={},x="";if(w.width=0,w.height=0,w.toBeParsed=b,b)return w;if(m)return w.width=y(d),w.height=y(h),w;if(l=-parseFloat(o[1]),c=-parseFloat(o[2]),e=parseFloat(o[3]),i=parseFloat(o[4]),v?(w.width=e,w.height=i):(w.width=y(d),w.height=y(h),r=w.width/e,a=w.height/i),f=g.util.parsePreserveAspectRatioAttribute(f),"none"!==f.alignX&&(a=r=r>a?a:r),1===r&&1===a&&0===l&&0===c&&0===u&&0===p)return w;if((u||p)&&(x=" translate("+y(u)+" "+y(p)+") "),n=x+" matrix("+r+" 0 0 "+a+" "+l*r+" "+c*a+") ","svg"===t.nodeName){for(s=t.ownerDocument.createElement("g");t.firstChild;)s.appendChild(t.firstChild);t.appendChild(s)}else s=t,n=s.getAttribute("transform")+n;return s.setAttribute("transform",n),w}function f(t,e){for(;t&&(t=t.parentNode);)if(t.nodeName&&e.test(t.nodeName.replace("svg:",""))&&!t.getAttribute("instantiated_by_use"))return!0;return!1}var g=t.fabric||(t.fabric={}),m=g.util.object.extend,v=g.util.object.clone,b=g.util.toFixed,y=g.util.parseUnit,w=g.util.multiplyTransformMatrices,x=/^(path|circle|polygon|polyline|ellipse|rect|line|image|text)$/i,C=/^(symbol|image|marker|pattern|view|svg)$/i,_=/^(?:pattern|defs|symbol|metadata|clipPath|mask)$/i,T=/^(symbol|g|a|svg)$/i,S={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","stroke-dasharray":"strokeDashArray","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"originX",opacity:"opacity"},k={stroke:"strokeOpacity",fill:"fillOpacity"};g.cssRules={},g.gradientDefs={},g.parseTransformAttribute=function(){function t(t,e){var i=Math.cos(e[0]),n=Math.sin(e[0]),s=0,o=0;3===e.length&&(s=e[1],o=e[2]),t[0]=i,t[1]=n,t[2]=-n,t[3]=i,t[4]=s-(i*s-n*o),t[5]=o-(n*s+i*o)}function e(t,e){var i=e[0],n=2===e.length?e[1]:e[0];t[0]=i,t[3]=n}function i(t,e,i){t[i]=Math.tan(g.util.degreesToRadians(e[0]))}function n(t,e){t[4]=e[0],2===e.length&&(t[5]=e[1])}var s=[1,0,0,1,0,0],o=g.reNum,r="(?:\\s+,?\\s*|,\\s*)",a="(?:(skewX)\\s*\\(\\s*("+o+")\\s*\\))",l="(?:(skewY)\\s*\\(\\s*("+o+")\\s*\\))",c="(?:(rotate)\\s*\\(\\s*("+o+")(?:"+r+"("+o+")"+r+"("+o+"))?\\s*\\))",d="(?:(scale)\\s*\\(\\s*("+o+")(?:"+r+"("+o+"))?\\s*\\))",h="(?:(translate)\\s*\\(\\s*("+o+")(?:"+r+"("+o+"))?\\s*\\))",u="(?:(matrix)\\s*\\(\\s*("+o+")"+r+"("+o+")"+r+"("+o+")"+r+"("+o+")"+r+"("+o+")"+r+"("+o+")\\s*\\))",p="(?:"+u+"|"+h+"|"+d+"|"+c+"|"+a+"|"+l+")",f="(?:"+p+"(?:"+r+"*"+p+")*)",m="^\\s*(?:"+f+"?)\\s*$",v=new RegExp(m),b=new RegExp(p,"g");return function(o){var r=s.concat(),a=[];if(!o||o&&!v.test(o))return r;o.replace(b,function(o){var l=new RegExp(p).exec(o).filter(function(t){return!!t}),c=l[1],d=l.slice(2).map(parseFloat);switch(c){case"translate":n(r,d);break;case"rotate":d[0]=g.util.degreesToRadians(d[0]),t(r,d);break;case"scale":e(r,d);break;case"skewX":i(r,d,2);break;case"skewY":i(r,d,1);break;case"matrix":r=d}a.push(r.concat()),r=s.concat()});for(var l=a[0];a.length>1;)a.shift(),l=g.util.multiplyTransformMatrices(l,a[0]);return l}}();var O=new RegExp("^\\s*("+g.reNum+"+)\\s*,?\\s*("+g.reNum+"+)\\s*,?\\s*("+g.reNum+"+)\\s*,?\\s*("+g.reNum+"+)\\s*$");g.parseSVGDocument=function(t,e,i,n){if(t){u(t);var s=g.Object.__uid++,o=p(t),r=g.util.toArray(t.getElementsByTagName("*"));if(o.crossOrigin=n&&n.crossOrigin,o.svgUid=s,0===r.length&&g.isLikelyNode){r=t.selectNodes('//*[name(.)!="svg"]');for(var a=[],l=0,c=r.length;c>l;l++)a[l]=r[l];r=a}var d=r.filter(function(t){return p(t),x.test(t.nodeName.replace("svg:",""))&&!f(t,_)});if(!d||d&&!d.length)return void(e&&e([],{}));g.gradientDefs[s]=g.getGradientDefs(t),g.cssRules[s]=g.getCSSRules(t),g.parseElements(d,function(t){e&&e(t,o)},v(o),i,n)}};var A=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+g.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+g.reNum+"))?\\s+(.*)");m(g,{parseFontDeclaration:function(t,e){var i=t.match(A);if(i){var n=i[1],s=i[3],o=i[4],r=i[5],a=i[6];n&&(e.fontStyle=n),s&&(e.fontWeight=isNaN(parseFloat(s))?s:parseFloat(s)),o&&(e.fontSize=y(o)),a&&(e.fontFamily=a),r&&(e.lineHeight="normal"===r?1:r)}},getGradientDefs:function(t){var e,i,n,o=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],r=s(t,o),a=0,l={},c={};for(a=r.length;a--;)e=r[a],n=e.getAttribute("xlink:href"),i=e.getAttribute("id"),n&&(c[i]=n.substr(1)),l[i]=e;for(i in c){var d=l[c[i]].cloneNode(!0);for(e=l[i];d.firstChild;)e.appendChild(d.firstChild)}return l},parseAttributes:function(t,s,o){if(t){var r,l,c={};"undefined"==typeof o&&(o=t.getAttribute("svgUid")),t.parentNode&&T.test(t.parentNode.nodeName)&&(c=g.parseAttributes(t.parentNode,s,o)),l=c&&c.fontSize||t.getAttribute("font-size")||g.Text.DEFAULT_SVG_FONT_SIZE;var d=s.reduce(function(e,i){return r=t.getAttribute(i),r&&(e[i]=r),e},{});d=m(d,m(a(t,o),g.parseStyleAttribute(t)));var h,u,p={};for(var f in d)h=e(f),u=i(h,d[f],c,l),p[h]=u;p&&p.font&&g.parseFontDeclaration(p.font,p);var v=m(c,p);return T.test(t.nodeName)?v:n(v)}},parseElements:function(t,e,i,n,s){new g.ElementsParser(t,e,i,n,s).parse()},parseStyleAttribute:function(t){var e={},i=t.getAttribute("style");return i?("string"==typeof i?o(i,e):r(i,e),e):e},parsePointsAttribute:function(t){if(!t)return null;t=t.replace(/,/g," ").trim(),t=t.split(/\s+/);var e,i,n=[];for(e=0,i=t.length;i>e;e+=2)n.push({x:parseFloat(t[e]),y:parseFloat(t[e+1])});return n},getCSSRules:function(t){for(var e,i=t.getElementsByTagName("style"),n={},s=0,o=i.length;o>s;s++){var r=i[s].textContent||i[s].text;r=r.replace(/\/\*[\s\S]*?\*\//g,""),""!==r.trim()&&(e=r.match(/[^{]*\{[\s\S]*?\}/g),e=e.map(function(t){return t.trim()}),e.forEach(function(t){for(var e=t.match(/([\s\S]*?)\s*\{([^}]*)\}/),i={},s=e[2].trim(),o=s.replace(/;$/,"").split(/\s*;\s*/),r=0,a=o.length;a>r;r++){var l=o[r].split(/\s*:\s*/),c=l[0],d=l[1];i[c]=d}t=e[1],t.split(",").forEach(function(t){t=t.replace(/^svg/i,"").trim(),""!==t&&(n[t]?g.util.object.extend(n[t],i):n[t]=g.util.object.clone(i))})}))}return n},loadSVGFromURL:function(t,e,i,n){function s(t){var s=t.responseXML;s&&!s.documentElement&&g.window.ActiveXObject&&t.responseText&&(s=new ActiveXObject("Microsoft.XMLDOM"),s.async="false",s.loadXML(t.responseText.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,""))),s&&s.documentElement||e&&e(null),g.parseSVGDocument(s.documentElement,function(t,i){e&&e(t,i)},i,n)}t=t.replace(/^\n\s*/,"").trim(),new g.util.request(t,{method:"get",onComplete:s})},loadSVGFromString:function(t,e,i,n){t=t.trim();var s;if("undefined"!=typeof DOMParser){var o=new DOMParser;o&&o.parseFromString&&(s=o.parseFromString(t,"text/xml"))}else g.window.ActiveXObject&&(s=new ActiveXObject("Microsoft.XMLDOM"),s.async="false",s.loadXML(t.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,"")));g.parseSVGDocument(s.documentElement,function(t,i){e(t,i)},i,n)}})}("undefined"!=typeof exports?exports:this),fabric.ElementsParser=function(t,e,i,n,s){this.elements=t,this.callback=e,this.options=i,this.reviver=n,this.svgUid=i&&i.svgUid||0,this.parsingOptions=s},fabric.ElementsParser.prototype.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},fabric.ElementsParser.prototype.createObjects=function(){for(var t=0,e=this.elements.length;e>t;t++)this.elements[t].setAttribute("svgUid",this.svgUid),function(t,e){setTimeout(function(){t.createObject(t.elements[e],e)},0)}(this,t)},fabric.ElementsParser.prototype.createObject=function(t,e){var i=fabric[fabric.util.string.capitalize(t.tagName.replace("svg:",""))];if(i&&i.fromElement)try{this._createObject(i,t,e)}catch(t){fabric.log(t)}else this.checkIfDone()},fabric.ElementsParser.prototype._createObject=function(t,e,i){if(t.async)t.fromElement(e,this.createCallback(i,e),this.options);else{var n=t.fromElement(e,this.options);this.resolveGradient(n,"fill"),this.resolveGradient(n,"stroke"),this.reviver&&this.reviver(e,n),this.instances[i]=n,this.checkIfDone()}},fabric.ElementsParser.prototype.createCallback=function(t,e){var i=this;return function(n){i.resolveGradient(n,"fill"),i.resolveGradient(n,"stroke"),i.reviver&&i.reviver(e,n),i.instances[t]=n,i.checkIfDone()}},fabric.ElementsParser.prototype.resolveGradient=function(t,e){var i=t.get(e);if(/^url\(/.test(i)){var n=i.slice(5,i.length-1);fabric.gradientDefs[this.svgUid][n]&&t.set(e,fabric.Gradient.fromElement(fabric.gradientDefs[this.svgUid][n],t))}},fabric.ElementsParser.prototype.checkIfDone=function(){0===--this.numElements&&(this.instances=this.instances.filter(function(t){return null!=t}),this.callback(this.instances))},function(t){"use strict";function e(t,e){this.x=t,this.y=e}var i=t.fabric||(t.fabric={});return i.Point?void i.warn("fabric.Point is already defined"):(i.Point=e,void(e.prototype={type:"point",constructor:e,add:function(t){return new e(this.x+t.x,this.y+t.y)},addEquals:function(t){return this.x+=t.x,this.y+=t.y,this},scalarAdd:function(t){return new e(this.x+t,this.y+t)},scalarAddEquals:function(t){return this.x+=t,this.y+=t,this},subtract:function(t){return new e(this.x-t.x,this.y-t.y)},subtractEquals:function(t){return this.x-=t.x,this.y-=t.y,this},scalarSubtract:function(t){return new e(this.x-t,this.y-t)},scalarSubtractEquals:function(t){return this.x-=t,this.y-=t,this},multiply:function(t){return new e(this.x*t,this.y*t)},multiplyEquals:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return new e(this.x/t,this.y/t)},divideEquals:function(t){return this.x/=t,this.y/=t,this},eq:function(t){return this.x===t.x&&this.y===t.y},lt:function(t){return this.x<t.x&&this.y<t.y},lte:function(t){return this.x<=t.x&&this.y<=t.y},gt:function(t){return this.x>t.x&&this.y>t.y},gte:function(t){return this.x>=t.x&&this.y>=t.y},lerp:function(t,i){return"undefined"==typeof i&&(i=.5),i=Math.max(Math.min(1,i),0),new e(this.x+(t.x-this.x)*i,this.y+(t.y-this.y)*i)},distanceFrom:function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},midPointFrom:function(t){return this.lerp(t)},min:function(t){return new e(Math.min(this.x,t.x),Math.min(this.y,t.y))},max:function(t){return new e(Math.max(this.x,t.x),Math.max(this.y,t.y))},toString:function(){return this.x+","+this.y},setXY:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setFromPoint:function(t){return this.x=t.x,this.y=t.y,this},swap:function(t){var e=this.x,i=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=i},clone:function(){return new e(this.x,this.y)}}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";function e(t){this.status=t,this.points=[]}var i=t.fabric||(t.fabric={});return i.Intersection?void i.warn("fabric.Intersection is already defined"):(i.Intersection=e,i.Intersection.prototype={constructor:e,appendPoint:function(t){return this.points.push(t),this},appendPoints:function(t){return this.points=this.points.concat(t),this}},i.Intersection.intersectLineLine=function(t,n,s,o){var r,a=(o.x-s.x)*(t.y-s.y)-(o.y-s.y)*(t.x-s.x),l=(n.x-t.x)*(t.y-s.y)-(n.y-t.y)*(t.x-s.x),c=(o.y-s.y)*(n.x-t.x)-(o.x-s.x)*(n.y-t.y);if(0!==c){var d=a/c,h=l/c;d>=0&&1>=d&&h>=0&&1>=h?(r=new e("Intersection"),r.appendPoint(new i.Point(t.x+d*(n.x-t.x),t.y+d*(n.y-t.y)))):r=new e}else r=new e(0===a||0===l?"Coincident":"Parallel");return r},i.Intersection.intersectLinePolygon=function(t,i,n){for(var s,o,r,a=new e,l=n.length,c=0;l>c;c++)s=n[c],o=n[(c+1)%l],r=e.intersectLineLine(t,i,s,o),a.appendPoints(r.points);return a.points.length>0&&(a.status="Intersection"),a},i.Intersection.intersectPolygonPolygon=function(t,i){for(var n=new e,s=t.length,o=0;s>o;o++){var r=t[o],a=t[(o+1)%s],l=e.intersectLinePolygon(r,a,i);n.appendPoints(l.points)}return n.points.length>0&&(n.status="Intersection"),n},void(i.Intersection.intersectPolygonRectangle=function(t,n,s){var o=n.min(s),r=n.max(s),a=new i.Point(r.x,o.y),l=new i.Point(o.x,r.y),c=e.intersectLinePolygon(o,a,t),d=e.intersectLinePolygon(a,r,t),h=e.intersectLinePolygon(r,l,t),u=e.intersectLinePolygon(l,o,t),p=new e;return p.appendPoints(c.points),p.appendPoints(d.points),p.appendPoints(h.points),p.appendPoints(u.points),p.points.length>0&&(p.status="Intersection"),p}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";function e(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}function i(t,e,i){return 0>i&&(i+=1),i>1&&(i-=1),1/6>i?t+6*(e-t)*i:.5>i?e:2/3>i?t+(e-t)*(2/3-i)*6:t}var n=t.fabric||(t.fabric={});return n.Color?void n.warn("fabric.Color is already defined."):(n.Color=e,n.Color.prototype={_tryParsingColor:function(t){var i;t in e.colorNameMap&&(t=e.colorNameMap[t]),"transparent"===t&&(i=[255,255,255,0]),i||(i=e.sourceFromHex(t)),i||(i=e.sourceFromRgb(t)),i||(i=e.sourceFromHsl(t)),i||(i=[0,0,0,1]),i&&this.setSource(i)},_rgbToHsl:function(t,e,i){t/=255,e/=255,i/=255;var s,o,r,a=n.util.array.max([t,e,i]),l=n.util.array.min([t,e,i]);if(r=(a+l)/2,a===l)s=o=0;else{var c=a-l;switch(o=r>.5?c/(2-a-l):c/(a+l),a){case t:s=(e-i)/c+(i>e?6:0);break;case e:s=(i-t)/c+2;break;case i:s=(t-e)/c+4}s/=6}return[Math.round(360*s),Math.round(100*o),Math.round(100*r)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return"rgb("+t[0]+","+t[1]+","+t[2]+")"},toRgba:function(){var t=this.getSource();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},toHsl:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsl("+e[0]+","+e[1]+"%,"+e[2]+"%)"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsla("+e[0]+","+e[1]+"%,"+e[2]+"%,"+t[3]+")"},toHex:function(){var t,e,i,n=this.getSource();return t=n[0].toString(16),t=1===t.length?"0"+t:t,e=n[1].toString(16),e=1===e.length?"0"+e:e,i=n[2].toString(16),i=1===i.length?"0"+i:i,t.toUpperCase()+e.toUpperCase()+i.toUpperCase()},toHexa:function(){var t,e=this.getSource();return t=255*e[3],t=t.toString(16),t=1===t.length?"0"+t:t,this.toHex()+t.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),10),i=t[3];return this.setSource([e,e,e,i]),this},toBlackWhite:function(t){var e=this.getSource(),i=(.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),n=e[3];return t=t||127,i=Number(i)<Number(t)?0:255,this.setSource([i,i,i,n]),this},overlayWith:function(t){t instanceof e||(t=new e(t));for(var i=[],n=this.getAlpha(),s=.5,o=this.getSource(),r=t.getSource(),a=0;3>a;a++)i.push(Math.round(o[a]*(1-s)+r[a]*s));return i[3]=n,this.setSource(i),this}},n.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,n.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,n.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,n.Color.colorNameMap={aqua:"#00FFFF",black:"#000000",blue:"#0000FF",fuchsia:"#FF00FF",gray:"#808080",grey:"#808080",green:"#008000",lime:"#00FF00",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#FFA500",purple:"#800080",red:"#FF0000",silver:"#C0C0C0",teal:"#008080",
white:"#FFFFFF",yellow:"#FFFF00"},n.Color.fromRgb=function(t){return e.fromSource(e.sourceFromRgb(t))},n.Color.sourceFromRgb=function(t){var i=t.match(e.reRGBa);if(i){var n=parseInt(i[1],10)/(/%$/.test(i[1])?100:1)*(/%$/.test(i[1])?255:1),s=parseInt(i[2],10)/(/%$/.test(i[2])?100:1)*(/%$/.test(i[2])?255:1),o=parseInt(i[3],10)/(/%$/.test(i[3])?100:1)*(/%$/.test(i[3])?255:1);return[parseInt(n,10),parseInt(s,10),parseInt(o,10),i[4]?parseFloat(i[4]):1]}},n.Color.fromRgba=e.fromRgb,n.Color.fromHsl=function(t){return e.fromSource(e.sourceFromHsl(t))},n.Color.sourceFromHsl=function(t){var n=t.match(e.reHSLa);if(n){var s,o,r,a=(parseFloat(n[1])%360+360)%360/360,l=parseFloat(n[2])/(/%$/.test(n[2])?100:1),c=parseFloat(n[3])/(/%$/.test(n[3])?100:1);if(0===l)s=o=r=c;else{var d=.5>=c?c*(l+1):c+l-c*l,h=2*c-d;s=i(h,d,a+1/3),o=i(h,d,a),r=i(h,d,a-1/3)}return[Math.round(255*s),Math.round(255*o),Math.round(255*r),n[4]?parseFloat(n[4]):1]}},n.Color.fromHsla=e.fromHsl,n.Color.fromHex=function(t){return e.fromSource(e.sourceFromHex(t))},n.Color.sourceFromHex=function(t){if(t.match(e.reHex)){var i=t.slice(t.indexOf("#")+1),n=3===i.length||4===i.length,s=8===i.length||4===i.length,o=n?i.charAt(0)+i.charAt(0):i.substring(0,2),r=n?i.charAt(1)+i.charAt(1):i.substring(2,4),a=n?i.charAt(2)+i.charAt(2):i.substring(4,6),l=s?n?i.charAt(3)+i.charAt(3):i.substring(6,8):"FF";return[parseInt(o,16),parseInt(r,16),parseInt(a,16),parseFloat((parseInt(l,16)/255).toFixed(2))]}},void(n.Color.fromSource=function(t){var i=new e;return i.setSource(t),i}))}("undefined"!=typeof exports?exports:this),function(){function t(t){var e,i,n,s=t.getAttribute("style"),o=t.getAttribute("offset")||0;if(o=parseFloat(o)/(/%$/.test(o)?100:1),o=0>o?0:o>1?1:o,s){var r=s.split(/\s*;\s*/);""===r[r.length-1]&&r.pop();for(var a=r.length;a--;){var l=r[a].split(/\s*:\s*/),c=l[0].trim(),d=l[1].trim();"stop-color"===c?e=d:"stop-opacity"===c&&(n=d)}}return e||(e=t.getAttribute("stop-color")||"rgb(0,0,0)"),n||(n=t.getAttribute("stop-opacity")),e=new fabric.Color(e),i=e.getAlpha(),n=isNaN(parseFloat(n))?1:parseFloat(n),n*=i,{offset:o,color:e.toRgb(),opacity:n}}function e(t){return{x1:t.getAttribute("x1")||0,y1:t.getAttribute("y1")||0,x2:t.getAttribute("x2")||"100%",y2:t.getAttribute("y2")||0}}function i(t){return{x1:t.getAttribute("fx")||t.getAttribute("cx")||"50%",y1:t.getAttribute("fy")||t.getAttribute("cy")||"50%",r1:0,x2:t.getAttribute("cx")||"50%",y2:t.getAttribute("cy")||"50%",r2:t.getAttribute("r")||"50%"}}function n(t,e,i){var n,s=0,o=1,r="";for(var a in e)"Infinity"===e[a]?e[a]=1:"-Infinity"===e[a]&&(e[a]=0),n=parseFloat(e[a],10),o="string"==typeof e[a]&&/^\d+%$/.test(e[a])?.01:1,"x1"===a||"x2"===a||"r2"===a?(o*="objectBoundingBox"===i?t.width:1,s="objectBoundingBox"===i?t.left||0:0):"y1"!==a&&"y2"!==a||(o*="objectBoundingBox"===i?t.height:1,s="objectBoundingBox"===i?t.top||0:0),e[a]=n*o+s;if("ellipse"===t.type&&null!==e.r2&&"objectBoundingBox"===i&&t.rx!==t.ry){var l=t.ry/t.rx;r=" scale(1, "+l+")",e.y1&&(e.y1/=l),e.y2&&(e.y2/=l)}return r}fabric.Gradient=fabric.util.createClass({offsetX:0,offsetY:0,initialize:function(t){t||(t={});var e={};this.id=fabric.Object.__uid++,this.type=t.type||"linear",e={x1:t.coords.x1||0,y1:t.coords.y1||0,x2:t.coords.x2||0,y2:t.coords.y2||0},"radial"===this.type&&(e.r1=t.coords.r1||0,e.r2=t.coords.r2||0),this.coords=e,this.colorStops=t.colorStops.slice(),t.gradientTransform&&(this.gradientTransform=t.gradientTransform),this.offsetX=t.offsetX||this.offsetX,this.offsetY=t.offsetY||this.offsetY},addColorStop:function(t){for(var e in t){var i=new fabric.Color(t[e]);this.colorStops.push({offset:e,color:i.toRgb(),opacity:i.getAlpha()})}return this},toObject:function(t){var e={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return fabric.util.populateWithProperties(this,e,t),e},toSVG:function(t){var e,i,n=fabric.util.object.clone(this.coords);if(this.colorStops.sort(function(t,e){return t.offset-e.offset}),!t.group||"path-group"!==t.group.type)for(var s in n)"x1"===s||"x2"===s||"r2"===s?n[s]+=this.offsetX-t.width/2:"y1"!==s&&"y2"!==s||(n[s]+=this.offsetY-t.height/2);i='id="SVGID_'+this.id+'" gradientUnits="userSpaceOnUse"',this.gradientTransform&&(i+=' gradientTransform="matrix('+this.gradientTransform.join(" ")+')" '),"linear"===this.type?e=["<linearGradient ",i,' x1="',n.x1,'" y1="',n.y1,'" x2="',n.x2,'" y2="',n.y2,'">\n']:"radial"===this.type&&(e=["<radialGradient ",i,' cx="',n.x2,'" cy="',n.y2,'" r="',n.r2,'" fx="',n.x1,'" fy="',n.y1,'">\n']);for(var o=0;o<this.colorStops.length;o++)e.push("<stop ",'offset="',100*this.colorStops[o].offset+"%",'" style="stop-color:',this.colorStops[o].color,null!==this.colorStops[o].opacity?";stop-opacity: "+this.colorStops[o].opacity:";",'"/>\n');return e.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),e.join("")},toLive:function(t,e){var i,n,s=fabric.util.object.clone(this.coords);if(this.type){if(e.group&&"path-group"===e.group.type)for(n in s)"x1"===n||"x2"===n?s[n]+=-this.offsetX+e.width/2:"y1"!==n&&"y2"!==n||(s[n]+=-this.offsetY+e.height/2);"linear"===this.type?i=t.createLinearGradient(s.x1,s.y1,s.x2,s.y2):"radial"===this.type&&(i=t.createRadialGradient(s.x1,s.y1,s.r1,s.x2,s.y2,s.r2));for(var o=0,r=this.colorStops.length;r>o;o++){var a=this.colorStops[o].color,l=this.colorStops[o].opacity,c=this.colorStops[o].offset;"undefined"!=typeof l&&(a=new fabric.Color(a).setAlpha(l).toRgba()),i.addColorStop(parseFloat(c),a)}return i}}}),fabric.util.object.extend(fabric.Gradient,{fromElement:function(s,o){var r,a,l,c=s.getElementsByTagName("stop"),d=s.getAttribute("gradientUnits")||"objectBoundingBox",h=s.getAttribute("gradientTransform"),u=[];r="linearGradient"===s.nodeName||"LINEARGRADIENT"===s.nodeName?"linear":"radial","linear"===r?a=e(s):"radial"===r&&(a=i(s));for(var p=c.length;p--;)u.push(t(c[p]));l=n(o,a,d);var f=new fabric.Gradient({type:r,coords:a,colorStops:u,offsetX:-o.left,offsetY:-o.top});return(h||""!==l)&&(f.gradientTransform=fabric.parseTransformAttribute((h||"")+l)),f},forObject:function(t,e){return e||(e={}),n(t,e.coords,"userSpaceOnUse"),new fabric.Gradient(e)}})}(),function(){"use strict";var t=fabric.util.toFixed;fabric.Pattern=fabric.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,initialize:function(t,e){if(t||(t={}),this.id=fabric.Object.__uid++,this.setOptions(t),!t.source||t.source&&"string"!=typeof t.source)return void(e&&e(this));if("undefined"!=typeof fabric.util.getFunctionBody(t.source))this.source=new Function(fabric.util.getFunctionBody(t.source)),e&&e(this);else{var i=this;this.source=fabric.util.createImage(),fabric.util.loadImage(t.source,function(t){i.source=t,e&&e(i)})}},toObject:function(e){var i,n,s=fabric.Object.NUM_FRACTION_DIGITS;return"function"==typeof this.source?i=String(this.source):"string"==typeof this.source.src?i=this.source.src:"object"==typeof this.source&&this.source.toDataURL&&(i=this.source.toDataURL()),n={type:"pattern",source:i,repeat:this.repeat,offsetX:t(this.offsetX,s),offsetY:t(this.offsetY,s)},fabric.util.populateWithProperties(this,n,e),n},toSVG:function(t){var e="function"==typeof this.source?this.source():this.source,i=e.width/t.width,n=e.height/t.height,s=this.offsetX/t.width,o=this.offsetY/t.height,r="";return"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat||(n=1),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat||(i=1),e.src?r=e.src:e.toDataURL&&(r=e.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+s+'" y="'+o+'" width="'+i+'" height="'+n+'">\n<image x="0" y="0" width="'+e.width+'" height="'+e.height+'" xlink:href="'+r+'"></image>\n</pattern>\n'},setOptions:function(t){for(var e in t)this[e]=t[e]},toLive:function(t){var e="function"==typeof this.source?this.source():this.source;if(!e)return"";if("undefined"!=typeof e.src){if(!e.complete)return"";if(0===e.naturalWidth||0===e.naturalHeight)return""}return t.createPattern(e,this.repeat)}})}(),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.toFixed;return e.Shadow?void e.warn("fabric.Shadow is already defined."):(e.Shadow=e.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,initialize:function(t){"string"==typeof t&&(t=this._parseShadow(t));for(var i in t)this[i]=t[i];this.id=e.Object.__uid++},_parseShadow:function(t){var i=t.trim(),n=e.Shadow.reOffsetsAndBlur.exec(i)||[],s=i.replace(e.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:s.trim(),offsetX:parseInt(n[1],10)||0,offsetY:parseInt(n[2],10)||0,blur:parseInt(n[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(t){var n=40,s=40,o=e.Object.NUM_FRACTION_DIGITS,r=e.util.rotateVector({x:this.offsetX,y:this.offsetY},e.util.degreesToRadians(-t.angle)),a=20;return t.width&&t.height&&(n=100*i((Math.abs(r.x)+this.blur)/t.width,o)+a,s=100*i((Math.abs(r.y)+this.blur)/t.height,o)+a),t.flipX&&(r.x*=-1),t.flipY&&(r.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+s+'%" height="'+(100+2*s)+'%" x="-'+n+'%" width="'+(100+2*n)+'%" >\n	<feGaussianBlur in="SourceAlpha" stdDeviation="'+i(this.blur?this.blur/2:0,o)+'"></feGaussianBlur>\n	<feOffset dx="'+i(r.x,o)+'" dy="'+i(r.y,o)+'" result="oBlur" ></feOffset>\n	<feFlood flood-color="'+this.color+'"/>\n	<feComposite in2="oBlur" operator="in" />\n	<feMerge>\n		<feMergeNode></feMergeNode>\n		<feMergeNode in="SourceGraphic"></feMergeNode>\n	</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke};var t={},i=e.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke"].forEach(function(e){this[e]!==i[e]&&(t[e]=this[e])},this),t}}),void(e.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:px)?(?:\s?|$))?(-?\d+(?:px)?(?:\s?|$))?(\d+(?:px)?)?(?:\s?|$)(?:$|\s)/))}("undefined"!=typeof exports?exports:this),function(){"use strict";if(fabric.StaticCanvas)return void fabric.warn("fabric.StaticCanvas is already defined.");var t=fabric.util.object.extend,e=fabric.util.getElementOffset,i=fabric.util.removeFromArray,n=fabric.util.toFixed,s=fabric.util.transformPoint,o=fabric.util.invertTransform,r=new Error("Could not initialize `canvas` element");fabric.StaticCanvas=fabric.util.createClass(fabric.CommonMethods,{initialize:function(t,e){e||(e={}),this._initStatic(t,e)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,clipTo:null,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:fabric.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,onBeforeScaleRotate:function(){},enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!1,_initStatic:function(t,e){var i=fabric.StaticCanvas.prototype.renderAll.bind(this);this._objects=[],this._createLowerCanvas(t),this._initOptions(e),this._setImageSmoothing(),this.interactive||this._initRetinaScaling(),e.overlayImage&&this.setOverlayImage(e.overlayImage,i),e.backgroundImage&&this.setBackgroundImage(e.backgroundImage,i),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor,i),e.overlayColor&&this.setOverlayColor(e.overlayColor,i),this.calcOffset()},_isRetinaScaling:function(){return 1!==fabric.devicePixelRatio&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?fabric.devicePixelRatio:1},_initRetinaScaling:function(){this._isRetinaScaling()&&(this.lowerCanvasEl.setAttribute("width",this.width*fabric.devicePixelRatio),this.lowerCanvasEl.setAttribute("height",this.height*fabric.devicePixelRatio),this.contextContainer.scale(fabric.devicePixelRatio,fabric.devicePixelRatio))},calcOffset:function(){return this._offset=e(this.lowerCanvasEl),this},setOverlayImage:function(t,e,i){return this.__setBgOverlayImage("overlayImage",t,e,i)},setBackgroundImage:function(t,e,i){return this.__setBgOverlayImage("backgroundImage",t,e,i)},setOverlayColor:function(t,e){return this.__setBgOverlayColor("overlayColor",t,e)},setBackgroundColor:function(t,e){return this.__setBgOverlayColor("backgroundColor",t,e)},_setImageSmoothing:function(){var t=this.getContext();t.imageSmoothingEnabled=t.imageSmoothingEnabled||t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled||t.oImageSmoothingEnabled,t.imageSmoothingEnabled=this.imageSmoothingEnabled},__setBgOverlayImage:function(t,e,i,n){return"string"==typeof e?fabric.util.loadImage(e,function(e){e&&(this[t]=new fabric.Image(e,n)),i&&i(e)},this,n&&n.crossOrigin):(n&&e.setOptions(n),this[t]=e,i&&i(e)),this},__setBgOverlayColor:function(t,e,i){return this[t]=e,this._initGradient(e,t),this._initPattern(e,t,i),this},_createCanvasElement:function(t){var e=fabric.util.createCanvasElement(t);if(e.style||(e.style={}),!e)throw r;if("undefined"==typeof e.getContext)throw r;return e},_initOptions:function(t){this._setOptions(t),this.width=this.width||parseInt(this.lowerCanvasEl.width,10)||0,this.height=this.height||parseInt(this.lowerCanvasEl.height,10)||0,this.lowerCanvasEl.style&&(this.lowerCanvasEl.width=this.width,this.lowerCanvasEl.height=this.height,this.lowerCanvasEl.style.width=this.width+"px",this.lowerCanvasEl.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(t){this.lowerCanvasEl=fabric.util.getById(t)||this._createCanvasElement(t),fabric.util.addClass(this.lowerCanvasEl,"lower-canvas"),this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(t,e){return this.setDimensions({width:t},e)},setHeight:function(t,e){return this.setDimensions({height:t},e)},setDimensions:function(t,e){var i;e=e||{};for(var n in t)i=t[n],e.cssOnly||(this._setBackstoreDimension(n,t[n]),i+="px"),e.backstoreOnly||this._setCssDimension(n,i);return this._initRetinaScaling(),this._setImageSmoothing(),this.calcOffset(),e.cssOnly||this.renderAll(),this},_setBackstoreDimension:function(t,e){return this.lowerCanvasEl[t]=e,this.upperCanvasEl&&(this.upperCanvasEl[t]=e),this.cacheCanvasEl&&(this.cacheCanvasEl[t]=e),this[t]=e,this},_setCssDimension:function(t,e){return this.lowerCanvasEl.style[t]=e,this.upperCanvasEl&&(this.upperCanvasEl.style[t]=e),this.wrapperEl&&(this.wrapperEl.style[t]=e),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(t){var e,i=this._activeGroup,n=!1,s=!0;this.viewportTransform=t;for(var o=0,r=this._objects.length;r>o;o++)e=this._objects[o],e.group||e.setCoords(n,s);return i&&i.setCoords(n,s),this.calcViewportBoundaries(),this.renderAll(),this},zoomToPoint:function(t,e){var i=t,n=this.viewportTransform.slice(0);t=s(t,o(this.viewportTransform)),n[0]=e,n[3]=e;var r=s(t,n);return n[4]+=i.x-r.x,n[5]+=i.y-r.y,this.setViewportTransform(n)},setZoom:function(t){return this.zoomToPoint(new fabric.Point(0,0),t),this},absolutePan:function(t){var e=this.viewportTransform.slice(0);return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)},relativePan:function(t){return this.absolutePan(new fabric.Point(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(t){this.stateful&&t.setupState(),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added")},_onObjectRemoved:function(t){this.fire("object:removed",{target:t}),t.fire("removed"),delete t.canvas},clearContext:function(t){return t.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this._objects.length=0,this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderAll(),this},renderAll:function(){var t=this.contextContainer;return this.renderCanvas(t,this._objects),this},calcViewportBoundaries:function(){var t={},e=this.getWidth(),i=this.getHeight(),n=o(this.viewportTransform);return t.tl=s({x:0,y:0},n),t.br=s({x:e,y:i},n),t.tr=new fabric.Point(t.br.x,t.tl.y),t.bl=new fabric.Point(t.tl.x,t.br.y),this.vptCoords=t,t},renderCanvas:function(t,e){this.calcViewportBoundaries(),this.clearContext(t),this.fire("before:render"),this.clipTo&&fabric.util.clipContext(this,t),this._renderBackground(t),t.save(),t.transform.apply(t,this.viewportTransform),this._renderObjects(t,e),t.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),this.clipTo&&t.restore(),this._renderOverlay(t),this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),this.fire("after:render")},_renderObjects:function(t,e){for(var i=0,n=e.length;n>i;++i)e[i]&&e[i].render(t)},_renderBackgroundOrOverlay:function(t,e){var i=this[e+"Color"];i&&(t.fillStyle=i.toLive?i.toLive(t,this):i,t.fillRect(i.offsetX||0,i.offsetY||0,this.width,this.height)),i=this[e+"Image"],i&&(this[e+"Vpt"]&&(t.save(),t.transform.apply(t,this.viewportTransform)),i.render(t),this[e+"Vpt"]&&t.restore())},_renderBackground:function(t){this._renderBackgroundOrOverlay(t,"background")},_renderOverlay:function(t){this._renderBackgroundOrOverlay(t,"overlay")},getCenter:function(){return{top:this.getHeight()/2,left:this.getWidth()/2}},centerObjectH:function(t){return this._centerObject(t,new fabric.Point(this.getCenter().left,t.getCenterPoint().y))},centerObjectV:function(t){return this._centerObject(t,new fabric.Point(t.getCenterPoint().x,this.getCenter().top))},centerObject:function(t){var e=this.getCenter();return this._centerObject(t,new fabric.Point(e.left,e.top))},viewportCenterObject:function(t){var e=this.getVpCenter();return this._centerObject(t,e)},viewportCenterObjectH:function(t){var e=this.getVpCenter();return this._centerObject(t,new fabric.Point(e.x,t.getCenterPoint().y)),this},viewportCenterObjectV:function(t){var e=this.getVpCenter();return this._centerObject(t,new fabric.Point(t.getCenterPoint().x,e.y))},getVpCenter:function(){var t=this.getCenter(),e=o(this.viewportTransform);return s({x:t.left,y:t.top},e)},_centerObject:function(t,e){return t.setPositionByOrigin(e,"center","center"),this.renderAll(),this},toDatalessJSON:function(t){return this.toDatalessObject(t)},toObject:function(t){return this._toObjectMethod("toObject",t)},toDatalessObject:function(t){return this._toObjectMethod("toDatalessObject",t)},_toObjectMethod:function(e,i){var n={objects:this._toObjects(e,i)};return t(n,this.__serializeBgOverlay(e,i)),fabric.util.populateWithProperties(this,n,i),n},_toObjects:function(t,e){return this.getObjects().filter(function(t){return!t.excludeFromExport}).map(function(i){return this._toObject(i,t,e)},this)},_toObject:function(t,e,i){var n;this.includeDefaultValues||(n=t.includeDefaultValues,t.includeDefaultValues=!1);var s=t[e](i);return this.includeDefaultValues||(t.includeDefaultValues=n),s},__serializeBgOverlay:function(t,e){var i={};return this.backgroundColor&&(i.background=this.backgroundColor.toObject?this.backgroundColor.toObject(e):this.backgroundColor),this.overlayColor&&(i.overlay=this.overlayColor.toObject?this.overlayColor.toObject(e):this.overlayColor),this.backgroundImage&&(i.backgroundImage=this._toObject(this.backgroundImage,t,e)),this.overlayImage&&(i.overlayImage=this._toObject(this.overlayImage,t,e)),i},svgViewportTransformation:!0,toSVG:function(t,e){t||(t={});var i=[];return this._setSVGPreamble(i,t),this._setSVGHeader(i,t),this._setSVGBgOverlayColor(i,"backgroundColor"),this._setSVGBgOverlayImage(i,"backgroundImage",e),this._setSVGObjects(i,e),this._setSVGBgOverlayColor(i,"overlayColor"),this._setSVGBgOverlayImage(i,"overlayImage",e),i.push("</svg>"),i.join("")},_setSVGPreamble:function(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(t,e){var i,s=e.width||this.width,o=e.height||this.height,r='viewBox="0 0 '+this.width+" "+this.height+'" ',a=fabric.Object.NUM_FRACTION_DIGITS;e.viewBox?r='viewBox="'+e.viewBox.x+" "+e.viewBox.y+" "+e.viewBox.width+" "+e.viewBox.height+'" ':this.svgViewportTransformation&&(i=this.viewportTransform,r='viewBox="'+n(-i[4]/i[0],a)+" "+n(-i[5]/i[3],a)+" "+n(this.width/i[0],a)+" "+n(this.height/i[3],a)+'" '),t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',s,'" ','height="',o,'" ',r,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",fabric.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),"</defs>\n")},createSVGRefElementsMarkup:function(){var t=this,e=["backgroundColor","overlayColor"].map(function(e){var i=t[e];return i&&i.toLive?i.toSVG(t,!1):void 0});return e.join("")},createSVGFontFacesMarkup:function(){for(var t,e,i,n,s,o,r,a="",l={},c=fabric.fontPaths,d=this.getObjects(),h=0,u=d.length;u>h;h++)if(t=d[h],e=t.fontFamily,-1!==t.type.indexOf("text")&&!l[e]&&c[e]&&(l[e]=!0,t.styles)){i=t.styles;for(s in i){n=i[s];for(r in n)o=n[r],e=o.fontFamily,!l[e]&&c[e]&&(l[e]=!0)}}for(var p in l)a+=["		@font-face {\n","			font-family: '",p,"';\n","			src: url('",c[p],"');\n","		}\n"].join("");return a&&(a=['	<style type="text/css">',"<![CDATA[\n",a,"]]>","</style>\n"].join("")),a},_setSVGObjects:function(t,e){for(var i,n=0,s=this.getObjects(),o=s.length;o>n;n++)i=s[n],i.excludeFromExport||this._setSVGObject(t,i,e)},_setSVGObject:function(t,e,i){t.push(e.toSVG(i))},_setSVGBgOverlayImage:function(t,e,i){this[e]&&this[e].toSVG&&t.push(this[e].toSVG(i))},_setSVGBgOverlayColor:function(t,e){var i=this[e];if(i)if(i.toLive){var n=i.repeat;t.push('<rect transform="translate(',this.width/2,",",this.height/2,')"',' x="',i.offsetX-this.width/2,'" y="',i.offsetY-this.height/2,'" ','width="',"repeat-y"===n||"no-repeat"===n?i.source.width:this.width,'" height="',"repeat-x"===n||"no-repeat"===n?i.source.height:this.height,'" fill="url(#SVGID_'+i.id+')"',"></rect>\n")}else t.push('<rect x="0" y="0" ','width="',this.width,'" height="',this.height,'" fill="',this[e],'"',"></rect>\n")},sendToBack:function(t){if(!t)return this;var e,n,s,o=this._activeGroup;if(t===o)for(s=o._objects,e=s.length;e--;)n=s[e],i(this._objects,n),this._objects.unshift(n);else i(this._objects,t),this._objects.unshift(t);return this.renderAll&&this.renderAll()},bringToFront:function(t){if(!t)return this;var e,n,s,o=this._activeGroup;if(t===o)for(s=o._objects,e=0;e<s.length;e++)n=s[e],i(this._objects,n),this._objects.push(n);else i(this._objects,t),this._objects.push(t);return this.renderAll&&this.renderAll()},sendBackwards:function(t,e){if(!t)return this;var n,s,o,r,a,l=this._activeGroup;if(t===l)for(a=l._objects,n=0;n<a.length;n++)s=a[n],o=this._objects.indexOf(s),0!==o&&(r=o-1,i(this._objects,s),this._objects.splice(r,0,s));else o=this._objects.indexOf(t),0!==o&&(r=this._findNewLowerIndex(t,o,e),i(this._objects,t),this._objects.splice(r,0,t));return this.renderAll&&this.renderAll(),this},_findNewLowerIndex:function(t,e,i){var n;if(i){n=e;for(var s=e-1;s>=0;--s){var o=t.intersectsWithObject(this._objects[s])||t.isContainedWithinObject(this._objects[s])||this._objects[s].isContainedWithinObject(t);if(o){n=s;break}}}else n=e-1;return n},bringForward:function(t,e){if(!t)return this;var n,s,o,r,a,l=this._activeGroup;if(t===l)for(a=l._objects,n=a.length;n--;)s=a[n],o=this._objects.indexOf(s),o!==this._objects.length-1&&(r=o+1,i(this._objects,s),this._objects.splice(r,0,s));else o=this._objects.indexOf(t),o!==this._objects.length-1&&(r=this._findNewUpperIndex(t,o,e),i(this._objects,t),this._objects.splice(r,0,t));return this.renderAll&&this.renderAll(),this},_findNewUpperIndex:function(t,e,i){var n;if(i){n=e;for(var s=e+1;s<this._objects.length;++s){var o=t.intersectsWithObject(this._objects[s])||t.isContainedWithinObject(this._objects[s])||this._objects[s].isContainedWithinObject(t);if(o){n=s;break}}}else n=e+1;return n},moveTo:function(t,e){return i(this._objects,t),this._objects.splice(e,0,t),this.renderAll&&this.renderAll()},dispose:function(){return this.clear(),this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this.getObjects().length+" }>"}}),t(fabric.StaticCanvas.prototype,fabric.Observable),t(fabric.StaticCanvas.prototype,fabric.Collection),t(fabric.StaticCanvas.prototype,fabric.DataURLExporter),t(fabric.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(t){var e=fabric.util.createCanvasElement();if(!e||!e.getContext)return null;var i=e.getContext("2d");if(!i)return null;switch(t){case"getImageData":return"undefined"!=typeof i.getImageData;case"setLineDash":return"undefined"!=typeof i.setLineDash;case"toDataURL":return"undefined"!=typeof e.toDataURL;case"toDataURLWithQuality":try{return e.toDataURL("image/jpeg",0),!0}catch(t){}return!1;default:return null}}}),fabric.StaticCanvas.prototype.toJSON=fabric.StaticCanvas.prototype.toObject}(),fabric.BaseBrush=fabric.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeDashArray:null,setShadow:function(t){return this.shadow=new fabric.Shadow(t),this},_setBrushStyles:function(){var t=this.canvas.contextTop;t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,this.strokeDashArray&&fabric.StaticCanvas.supports("setLineDash")&&t.setLineDash(this.strokeDashArray)},_setShadow:function(){if(this.shadow){var t=this.canvas.contextTop,e=this.canvas.getZoom();t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur*e,t.shadowOffsetX=this.shadow.offsetX*e,t.shadowOffsetY=this.shadow.offsetY*e}},_resetShadow:function(){var t=this.canvas.contextTop;t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0}}),function(){fabric.PencilBrush=fabric.util.createClass(fabric.BaseBrush,{initialize:function(t){this.canvas=t,this._points=[]},onMouseDown:function(t){this._prepareForDrawing(t),this._captureDrawingPath(t),this._render()},onMouseMove:function(t){this._captureDrawingPath(t),this.canvas.clearContext(this.canvas.contextTop),this._render()},onMouseUp:function(){this._finalizeAndAddPath()},_prepareForDrawing:function(t){var e=new fabric.Point(t.x,t.y);this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)},_addPoint:function(t){this._points.push(t)},_reset:function(){this._points.length=0,this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(t){var e=new fabric.Point(t.x,t.y);this._addPoint(e)},_render:function(){var t=this.canvas.contextTop,e=this.canvas.viewportTransform,i=this._points[0],n=this._points[1];t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t.beginPath(),2===this._points.length&&i.x===n.x&&i.y===n.y&&(i.x-=.5,n.x+=.5),t.moveTo(i.x,i.y);for(var s=1,o=this._points.length;o>s;s++){var r=i.midPointFrom(n);t.quadraticCurveTo(i.x,i.y,r.x,r.y),i=this._points[s],n=this._points[s+1]}t.lineTo(i.x,i.y),t.stroke(),t.restore()},convertPointsToSVGPath:function(t){var e=[],i=new fabric.Point(t[0].x,t[0].y),n=new fabric.Point(t[1].x,t[1].y);e.push("M ",t[0].x," ",t[0].y," ");for(var s=1,o=t.length;o>s;s++){var r=i.midPointFrom(n);e.push("Q ",i.x," ",i.y," ",r.x," ",r.y," "),i=new fabric.Point(t[s].x,t[s].y),s+1<t.length&&(n=new fabric.Point(t[s+1].x,t[s+1].y))}return e.push("L ",i.x," ",i.y," "),e},createPath:function(t){var e=new fabric.Path(t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray,originX:"center",originY:"center"});return this.shadow&&(this.shadow.affectStroke=!0,e.setShadow(this.shadow)),e},_finalizeAndAddPath:function(){var t=this.canvas.contextTop;t.closePath();var e=this.convertPointsToSVGPath(this._points).join("");if("M 0 0 Q 0 0 0 0 L 0 0"===e)return void this.canvas.renderAll();var i=this.createPath(e);this.canvas.add(i),i.setCoords(),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderAll(),this.canvas.fire("path:created",{path:i})}})}(),fabric.CircleBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,initialize:function(t){this.canvas=t,this.points=[]},drawDot:function(t){var e=this.addPoint(t),i=this.canvas.contextTop,n=this.canvas.viewportTransform;i.save(),i.transform(n[0],n[1],n[2],n[3],n[4],n[5]),i.fillStyle=e.fill,i.beginPath(),i.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),i.closePath(),i.fill(),i.restore()},onMouseDown:function(t){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(t)},onMouseMove:function(t){this.drawDot(t)},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],i=0,n=this.points.length;n>i;i++){var s=this.points[i],o=new fabric.Circle({radius:s.radius,left:s.x,top:s.y,originX:"center",originY:"center",fill:s.fill});this.shadow&&o.setShadow(this.shadow),e.push(o)}var r=new fabric.Group(e,{originX:"center",originY:"center"});r.canvas=this.canvas,this.canvas.add(r),this.canvas.fire("path:created",{path:r}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.renderAll()},addPoint:function(t){var e=new fabric.Point(t.x,t.y),i=fabric.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,n=new fabric.Color(this.color).setAlpha(fabric.util.getRandomInt(0,100)/100).toRgba();return e.radius=i,e.fill=n,this.points.push(e),e}}),fabric.SprayBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(t){this.canvas=t,this.sprayChunks=[]},onMouseDown:function(t){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(t),this.render()},onMouseMove:function(t){this.addSprayChunk(t),this.render()},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],i=0,n=this.sprayChunks.length;n>i;i++)for(var s=this.sprayChunks[i],o=0,r=s.length;r>o;o++){var a=new fabric.Rect({width:s[o].width,height:s[o].width,left:s[o].x+1,top:s[o].y+1,originX:"center",originY:"center",fill:this.color});this.shadow&&a.setShadow(this.shadow),e.push(a)}this.optimizeOverlapping&&(e=this._getOptimizedRects(e));var l=new fabric.Group(e,{originX:"center",originY:"center"});l.canvas=this.canvas,this.canvas.add(l),this.canvas.fire("path:created",{path:l}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.renderAll()},_getOptimizedRects:function(t){for(var e,i={},n=0,s=t.length;s>n;n++)e=t[n].left+""+t[n].top,i[e]||(i[e]=t[n]);var o=[];for(e in i)o.push(i[e]);return o},render:function(){var t=this.canvas.contextTop;t.fillStyle=this.color;var e=this.canvas.viewportTransform;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]);for(var i=0,n=this.sprayChunkPoints.length;n>i;i++){var s=this.sprayChunkPoints[i];"undefined"!=typeof s.opacity&&(t.globalAlpha=s.opacity),t.fillRect(s.x,s.y,s.width,s.width)}t.restore()},addSprayChunk:function(t){this.sprayChunkPoints=[];for(var e,i,n,s=this.width/2,o=0;o<this.density;o++){e=fabric.util.getRandomInt(t.x-s,t.x+s),i=fabric.util.getRandomInt(t.y-s,t.y+s),n=this.dotWidthVariance?fabric.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var r=new fabric.Point(e,i);r.width=n,this.randomOpacity&&(r.opacity=fabric.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(r)}this.sprayChunks.push(this.sprayChunkPoints)}}),fabric.PatternBrush=fabric.util.createClass(fabric.PencilBrush,{
getPatternSrc:function(){var t=20,e=5,i=fabric.document.createElement("canvas"),n=i.getContext("2d");return i.width=i.height=t+e,n.fillStyle=this.color,n.beginPath(),n.arc(t/2,t/2,t/2,0,2*Math.PI,!1),n.closePath(),n.fill(),i},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(t){var e=this.callSuper("createPath",t),i=e._getLeftTopCoords().scalarAdd(e.strokeWidth/2);return e.stroke=new fabric.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-i.x,offsetY:-i.y}),e}}),function(){var t=fabric.util.getPointer,e=fabric.util.degreesToRadians,i=fabric.util.radiansToDegrees,n=Math.atan2,s=Math.abs,o=fabric.StaticCanvas.supports("setLineDash"),r=.5;fabric.Canvas=fabric.util.createClass(fabric.StaticCanvas,{initialize:function(t,e){e||(e={}),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas()},uniScaleTransform:!1,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=fabric.PencilBrush&&new fabric.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var t,e=this.getActiveGroup(),i=this.getActiveObject(),n=[],s=[];if(!e&&!i||this.preserveObjectStacking)n=this._objects;else{for(var o=0,r=this._objects.length;r>o;o++)t=this._objects[o],e&&e.contains(t)||t===i?s.push(t):n.push(t);e&&(e._set("_objects",s),n.push(e)),i&&n.push(i)}return n},renderAll:function(){!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1);var t=this.contextContainer;return this.renderCanvas(t,this._chooseObjectsToRender()),this},renderTop:function(){var t=this.contextTop;return this.clearContext(t),this.selection&&this._groupSelector&&this._drawSelection(t),this.fire("after:render"),this.contextTopDirty=!0,this},_resetCurrentTransform:function(){var t=this._currentTransform;t.target.set({scaleX:t.original.scaleX,scaleY:t.original.scaleY,skewX:t.original.skewX,skewY:t.original.skewY,left:t.original.left,top:t.original.top}),this._shouldCenterTransform(t.target)?"rotate"===t.action?this._setOriginToCenter(t.target):("center"!==t.originX&&("right"===t.originX?t.mouseXSign=-1:t.mouseXSign=1),"center"!==t.originY&&("bottom"===t.originY?t.mouseYSign=-1:t.mouseYSign=1),t.originX="center",t.originY="center"):(t.originX=t.original.originX,t.originY=t.original.originY)},containsPoint:function(t,e,i){var n,s=!0,o=i||this.getPointer(t,s);return n=e.group&&e.group===this.getActiveGroup()?this._normalizePointer(e.group,o):{x:o.x,y:o.y},e.containsPoint(n)||e._findTargetCorner(o)},_normalizePointer:function(t,e){var i=t.calcTransformMatrix(),n=fabric.util.invertTransform(i),s=this.restorePointerVpt(e);return fabric.util.transformPoint(s,n)},isTargetTransparent:function(t,e,i){var n=t.hasBorders,s=t.transparentCorners,o=this.contextCache,r=t.selectionBackgroundColor;t.hasBorders=t.transparentCorners=!1,t.selectionBackgroundColor="",o.save(),o.transform.apply(o,this.viewportTransform),t.render(o),o.restore(),t.active&&t._renderControls(o),t.hasBorders=n,t.transparentCorners=s,t.selectionBackgroundColor=r;var a=fabric.util.isTransparent(o,e,i,this.targetFindTolerance);return this.clearContext(o),a},_shouldClearSelection:function(t,e){var i=this.getActiveGroup(),n=this.getActiveObject();return!e||e&&i&&!i.contains(e)&&i!==e&&!t[this.selectionKey]||e&&!e.evented||e&&!e.selectable&&n&&n!==e},_shouldCenterTransform:function(t){if(t){var e,i=this._currentTransform;return"scale"===i.action||"scaleX"===i.action||"scaleY"===i.action?e=this.centeredScaling||t.centeredScaling:"rotate"===i.action&&(e=this.centeredRotation||t.centeredRotation),e?!i.altKey:i.altKey}},_getOriginFromCorner:function(t,e){var i={x:t.originX,y:t.originY};return"ml"===e||"tl"===e||"bl"===e?i.x="right":"mr"!==e&&"tr"!==e&&"br"!==e||(i.x="left"),"tl"===e||"mt"===e||"tr"===e?i.y="bottom":"bl"!==e&&"mb"!==e&&"br"!==e||(i.y="top"),i},_getActionFromCorner:function(t,e,i){if(!e)return"drag";switch(e){case"mtr":return"rotate";case"ml":case"mr":return i[this.altActionKey]?"skewY":"scaleX";case"mt":case"mb":return i[this.altActionKey]?"skewX":"scaleY";default:return"scale"}},_setupCurrentTransform:function(t,i){if(i){var n=this.getPointer(t),s=i._findTargetCorner(this.getPointer(t,!0)),o=this._getActionFromCorner(i,s,t),r=this._getOriginFromCorner(i,s);this._currentTransform={target:i,action:o,corner:s,scaleX:i.scaleX,scaleY:i.scaleY,skewX:i.skewX,skewY:i.skewY,offsetX:n.x-i.left,offsetY:n.y-i.top,originX:r.x,originY:r.y,ex:n.x,ey:n.y,lastX:n.x,lastY:n.y,left:i.left,top:i.top,theta:e(i.angle),width:i.width*i.scaleX,mouseXSign:1,mouseYSign:1,shiftKey:t.shiftKey,altKey:t[this.centeredKey]},this._currentTransform.original={left:i.left,top:i.top,scaleX:i.scaleX,scaleY:i.scaleY,skewX:i.skewX,skewY:i.skewY,originX:r.x,originY:r.y},this._resetCurrentTransform()}},_translateObject:function(t,e){var i=this._currentTransform,n=i.target,s=t-i.offsetX,o=e-i.offsetY,r=!n.get("lockMovementX")&&n.left!==s,a=!n.get("lockMovementY")&&n.top!==o;return r&&n.set("left",s),a&&n.set("top",o),r||a},_changeSkewTransformOrigin:function(t,e,i){var n="originX",s={0:"center"},o=e.target.skewX,r="left",a="right",l="mt"===e.corner||"ml"===e.corner?1:-1,c=1;t=t>0?1:-1,"y"===i&&(o=e.target.skewY,r="top",a="bottom",n="originY"),s[-1]=r,s[1]=a,e.target.flipX&&(c*=-1),e.target.flipY&&(c*=-1),0===o?(e.skewSign=-l*t*c,e[n]=s[-t]):(o=o>0?1:-1,e.skewSign=o,e[n]=s[o*l*c])},_skewObject:function(t,e,i){var n=this._currentTransform,s=n.target,o=!1,r=s.get("lockSkewingX"),a=s.get("lockSkewingY");if(r&&"x"===i||a&&"y"===i)return!1;var l,c,d=s.getCenterPoint(),h=s.toLocalPoint(new fabric.Point(t,e),"center","center")[i],u=s.toLocalPoint(new fabric.Point(n.lastX,n.lastY),"center","center")[i],p=s._getTransformedDimensions();return this._changeSkewTransformOrigin(h-u,n,i),l=s.toLocalPoint(new fabric.Point(t,e),n.originX,n.originY)[i],c=s.translateToOriginPoint(d,n.originX,n.originY),o=this._setObjectSkew(l,n,i,p),n.lastX=t,n.lastY=e,s.setPositionByOrigin(c,n.originX,n.originY),o},_setObjectSkew:function(t,e,i,n){var s,o,r,a,l,c,d,h,u,p=e.target,f=!1,g=e.skewSign;return"x"===i?(a="y",l="Y",c="X",h=0,u=p.skewY):(a="x",l="X",c="Y",h=p.skewX,u=0),r=p._getTransformedDimensions(h,u),d=2*Math.abs(t)-r[i],2>=d?s=0:(s=g*Math.atan(d/p["scale"+c]/(r[a]/p["scale"+l])),s=fabric.util.radiansToDegrees(s)),f=p["skew"+c]!==s,p.set("skew"+c,s),0!==p["skew"+l]&&(o=p._getTransformedDimensions(),s=n[a]/o[a]*p["scale"+l],p.set("scale"+l,s)),f},_scaleObject:function(t,e,i){var n=this._currentTransform,s=n.target,o=s.get("lockScalingX"),r=s.get("lockScalingY"),a=s.get("lockScalingFlip");if(o&&r)return!1;var l=s.translateToOriginPoint(s.getCenterPoint(),n.originX,n.originY),c=s.toLocalPoint(new fabric.Point(t,e),n.originX,n.originY),d=s._getTransformedDimensions(),h=!1;return this._setLocalMouse(c,n),h=this._setObjectScale(c,n,o,r,i,a,d),s.setPositionByOrigin(l,n.originX,n.originY),h},_setObjectScale:function(t,e,i,n,s,o,r){var a,l,c,d,h=e.target,u=!1,p=!1,f=!1;return c=t.x*h.scaleX/r.x,d=t.y*h.scaleY/r.y,a=h.scaleX!==c,l=h.scaleY!==d,o&&0>=c&&c<h.scaleX&&(u=!0),o&&0>=d&&d<h.scaleY&&(p=!0),"equally"!==s||i||n?s?"x"!==s||h.get("lockUniScaling")?"y"!==s||h.get("lockUniScaling")||p||n||h.set("scaleY",d)&&(f=f||l):u||i||h.set("scaleX",c)&&(f=f||a):(u||i||h.set("scaleX",c)&&(f=f||a),p||n||h.set("scaleY",d)&&(f=f||l)):u||p||(f=this._scaleObjectEqually(t,h,e,r)),e.newScaleX=c,e.newScaleY=d,u||p||this._flipObject(e,s),f},_scaleObjectEqually:function(t,e,i,n){var s,o=t.y+t.x,r=n.y*i.original.scaleY/e.scaleY+n.x*i.original.scaleX/e.scaleX;return i.newScaleX=i.original.scaleX*o/r,i.newScaleY=i.original.scaleY*o/r,s=i.newScaleX!==e.scaleX||i.newScaleY!==e.scaleY,e.set("scaleX",i.newScaleX),e.set("scaleY",i.newScaleY),s},_flipObject:function(t,e){t.newScaleX<0&&"y"!==e&&("left"===t.originX?t.originX="right":"right"===t.originX&&(t.originX="left")),t.newScaleY<0&&"x"!==e&&("top"===t.originY?t.originY="bottom":"bottom"===t.originY&&(t.originY="top"))},_setLocalMouse:function(t,e){var i=e.target,n=this.getZoom(),o=i.padding/n;"right"===e.originX?t.x*=-1:"center"===e.originX&&(t.x*=2*e.mouseXSign,t.x<0&&(e.mouseXSign=-e.mouseXSign)),"bottom"===e.originY?t.y*=-1:"center"===e.originY&&(t.y*=2*e.mouseYSign,t.y<0&&(e.mouseYSign=-e.mouseYSign)),s(t.x)>o?t.x<0?t.x+=o:t.x-=o:t.x=0,s(t.y)>o?t.y<0?t.y+=o:t.y-=o:t.y=0},_rotateObject:function(t,e){var s=this._currentTransform;if(s.target.get("lockRotation"))return!1;var o=n(s.ey-s.top,s.ex-s.left),r=n(e-s.top,t-s.left),a=i(r-o+s.theta),l=!0;if(0>a&&(a=360+a),a%=360,s.target.snapAngle>0){var c=s.target.snapAngle,d=s.target.snapThreshold||c,h=Math.ceil(a/c)*c,u=Math.floor(a/c)*c;Math.abs(a-u)<d?a=u:Math.abs(a-h)<d&&(a=h),s.target.angle===a&&(l=!1)}return s.target.angle=a,l},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.setAngle(0)},_drawSelection:function(t){var e=this._groupSelector,i=e.left,n=e.top,a=s(i),l=s(n);if(this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(e.ex-(i>0?0:-i),e.ey-(n>0?0:-n),a,l)),this.selectionLineWidth&&this.selectionBorderColor)if(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,this.selectionDashArray.length>1&&!o){var c=e.ex+r-(i>0?0:a),d=e.ey+r-(n>0?0:l);t.beginPath(),fabric.util.drawDashedLine(t,c,d,c+a,d,this.selectionDashArray),fabric.util.drawDashedLine(t,c,d+l-1,c+a,d+l-1,this.selectionDashArray),fabric.util.drawDashedLine(t,c,d,c,d+l,this.selectionDashArray),fabric.util.drawDashedLine(t,c+a-1,d,c+a-1,d+l,this.selectionDashArray),t.closePath(),t.stroke()}else fabric.Object.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(e.ex+r-(i>0?0:a),e.ey+r-(n>0?0:l),a,l)},findTarget:function(t,e){if(!this.skipTargetFind){var i,n=!0,s=this.getPointer(t,n),o=this.getActiveGroup(),r=this.getActiveObject();if(o&&!e&&o===this._searchPossibleTargets([o],s))return this._fireOverOutEvents(o,t),o;if(r&&r._findTargetCorner(s))return this._fireOverOutEvents(r,t),r;if(r&&r===this._searchPossibleTargets([r],s)){if(!this.preserveObjectStacking)return this._fireOverOutEvents(r,t),r;i=r}this.targets=[];var a=this._searchPossibleTargets(this._objects,s);return t[this.altSelectionKey]&&a&&i&&a!==i&&(a=i),this._fireOverOutEvents(a,t),a}},_fireOverOutEvents:function(t,e){t?this._hoveredTarget!==t&&(this._hoveredTarget&&(this.fire("mouse:out",{target:this._hoveredTarget,e:e}),this._hoveredTarget.fire("mouseout")),this.fire("mouse:over",{target:t,e:e}),t.fire("mouseover"),this._hoveredTarget=t):this._hoveredTarget&&(this.fire("mouse:out",{target:this._hoveredTarget,e:e}),this._hoveredTarget.fire("mouseout"),this._hoveredTarget=null)},_checkTarget:function(t,e){if(e&&e.visible&&e.evented&&this.containsPoint(null,e,t)){if(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing)return!0;var i=this.isTargetTransparent(e,t.x,t.y);if(!i)return!0}},_searchPossibleTargets:function(t,e){for(var i,n,s,o=t.length;o--;)if(this._checkTarget(e,t[o])){i=t[o],"group"===i.type&&i.subTargetCheck&&(n=this._normalizePointer(i,e),s=this._searchPossibleTargets(i._objects,n),s&&this.targets.push(s));break}return i},restorePointerVpt:function(t){return fabric.util.transformPoint(t,fabric.util.invertTransform(this.viewportTransform))},getPointer:function(e,i,n){n||(n=this.upperCanvasEl);var s,o=t(e),r=n.getBoundingClientRect(),a=r.width||0,l=r.height||0;return a&&l||("top"in r&&"bottom"in r&&(l=Math.abs(r.top-r.bottom)),"right"in r&&"left"in r&&(a=Math.abs(r.right-r.left))),this.calcOffset(),o.x=o.x-this._offset.left,o.y=o.y-this._offset.top,i||(o=this.restorePointerVpt(o)),s=0===a||0===l?{width:1,height:1}:{width:n.width/a,height:n.height/l},{x:o.x*s.width,y:o.y*s.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,"");this.upperCanvasEl=this._createCanvasElement(),fabric.util.addClass(this.upperCanvasEl,"upper-canvas "+t),this.wrapperEl.appendChild(this.upperCanvasEl),this._copyCanvasStyle(this.lowerCanvasEl,this.upperCanvasEl),this._applyCanvasStyle(this.upperCanvasEl),this.contextTop=this.upperCanvasEl.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=fabric.util.wrapElement(this.lowerCanvasEl,"div",{"class":this.containerClass}),fabric.util.setStyle(this.wrapperEl,{width:this.getWidth()+"px",height:this.getHeight()+"px",position:"relative"}),fabric.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.getWidth()||t.width,i=this.getHeight()||t.height;fabric.util.setStyle(t,{position:"absolute",width:e+"px",height:i+"px",left:0,top:0,"touch-action":"none"}),t.width=e,t.height=i,fabric.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},_setActiveObject:function(t){var e=this._activeObject;e&&(e.set("active",!1),t!==e&&e.onDeselect&&"function"==typeof e.onDeselect&&e.onDeselect()),this._activeObject=t,t.set("active",!0)},setActiveObject:function(t,e){var i=this.getActiveObject();return i&&i!==t&&i.fire("deselected",{e:e}),this._setActiveObject(t),this.renderAll(),this.fire("object:selected",{target:t,e:e}),t.fire("selected",{e:e}),this},getActiveObject:function(){return this._activeObject},_onObjectRemoved:function(t){this.getActiveObject()===t&&(this.fire("before:selection:cleared",{target:t}),this._discardActiveObject(),this.fire("selection:cleared",{target:t}),t.fire("deselected")),this._hoveredTarget===t&&(this._hoveredTarget=null),this.callSuper("_onObjectRemoved",t)},_discardActiveObject:function(){var t=this._activeObject;t&&(t.set("active",!1),t.onDeselect&&"function"==typeof t.onDeselect&&t.onDeselect()),this._activeObject=null},discardActiveObject:function(t){var e=this._activeObject;return e&&(this.fire("before:selection:cleared",{target:e,e:t}),this._discardActiveObject(),this.fire("selection:cleared",{e:t}),e.fire("deselected",{e:t})),this},_setActiveGroup:function(t){this._activeGroup=t,t&&t.set("active",!0)},setActiveGroup:function(t,e){return this._setActiveGroup(t),t&&(this.fire("object:selected",{target:t,e:e}),t.fire("selected",{e:e})),this},getActiveGroup:function(){return this._activeGroup},_discardActiveGroup:function(){var t=this.getActiveGroup();t&&t.destroy(),this.setActiveGroup(null)},discardActiveGroup:function(t){var e=this.getActiveGroup();return e&&(this.fire("before:selection:cleared",{e:t,target:e}),this._discardActiveGroup(),this.fire("selection:cleared",{e:t})),this},deactivateAll:function(){for(var t,e=this.getObjects(),i=0,n=e.length;n>i;i++)t=e[i],t&&t.set("active",!1);return this._discardActiveGroup(),this._discardActiveObject(),this},deactivateAllWithDispatch:function(t){return this.discardActiveGroup(t),this.discardActiveObject(t),this.deactivateAll(),this},dispose:function(){this.callSuper("dispose");var t=this.wrapperEl;return this.removeListeners(),t.removeChild(this.upperCanvasEl),t.removeChild(this.lowerCanvasEl),delete this.upperCanvasEl,t.parentNode&&t.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,this},clear:function(){return this.discardActiveGroup(),this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(t){var e=this.getActiveGroup();e?e._renderControls(t):this._drawObjectsControls(t)},_drawObjectsControls:function(t){for(var e=0,i=this._objects.length;i>e;++e)this._objects[e]&&this._objects[e].active&&this._objects[e]._renderControls(t)},_toObject:function(t,e,i){var n=this._realizeGroupTransformOnObject(t),s=this.callSuper("_toObject",t,e,i);return this._unwindGroupTransformOnObject(t,n),s},_realizeGroupTransformOnObject:function(t){var e=["angle","flipX","flipY","height","left","scaleX","scaleY","top","width"];if(t.group&&t.group===this.getActiveGroup()){var i={};return e.forEach(function(e){i[e]=t[e]}),this.getActiveGroup().realizeTransform(t),i}return null},_unwindGroupTransformOnObject:function(t,e){e&&t.set(e)},_setSVGObject:function(t,e,i){var n;n=this._realizeGroupTransformOnObject(e),this.callSuper("_setSVGObject",t,e,i),this._unwindGroupTransformOnObject(e,n)}});for(var a in fabric.StaticCanvas)"prototype"!==a&&(fabric.Canvas[a]=fabric.StaticCanvas[a]);fabric.isTouchSupported&&(fabric.Canvas.prototype._setCursorFromEvent=function(){}),fabric.Element=fabric.Canvas}(),function(){var t={mt:0,tr:1,mr:2,br:3,mb:4,bl:5,ml:6,tl:7},e=fabric.util.addListener,i=fabric.util.removeListener;fabric.util.object.extend(fabric.Canvas.prototype,{cursorMap:["n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize","nw-resize"],_initEventListeners:function(){this._bindEvents(),e(fabric.window,"resize",this._onResize),e(this.upperCanvasEl,"mousedown",this._onMouseDown),e(this.upperCanvasEl,"mousemove",this._onMouseMove),e(this.upperCanvasEl,"mouseout",this._onMouseOut),e(this.upperCanvasEl,"mouseenter",this._onMouseEnter),e(this.upperCanvasEl,"wheel",this._onMouseWheel),e(this.upperCanvasEl,"contextmenu",this._onContextMenu),e(this.upperCanvasEl,"touchstart",this._onMouseDown,{passive:!1}),e(this.upperCanvasEl,"touchmove",this._onMouseMove,{passive:!1}),"undefined"!=typeof eventjs&&"add"in eventjs&&(eventjs.add(this.upperCanvasEl,"gesture",this._onGesture),eventjs.add(this.upperCanvasEl,"drag",this._onDrag),eventjs.add(this.upperCanvasEl,"orientation",this._onOrientationChange),eventjs.add(this.upperCanvasEl,"shake",this._onShake),eventjs.add(this.upperCanvasEl,"longpress",this._onLongPress))},_bindEvents:function(){this._onMouseDown=this._onMouseDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this)},removeListeners:function(){i(fabric.window,"resize",this._onResize),i(this.upperCanvasEl,"mousedown",this._onMouseDown),i(this.upperCanvasEl,"mousemove",this._onMouseMove),i(this.upperCanvasEl,"mouseout",this._onMouseOut),i(this.upperCanvasEl,"mouseenter",this._onMouseEnter),i(this.upperCanvasEl,"wheel",this._onMouseWheel),i(this.upperCanvasEl,"contextmenu",this._onContextMenu),i(this.upperCanvasEl,"touchstart",this._onMouseDown),i(this.upperCanvasEl,"touchmove",this._onMouseMove),"undefined"!=typeof eventjs&&"remove"in eventjs&&(eventjs.remove(this.upperCanvasEl,"gesture",this._onGesture),eventjs.remove(this.upperCanvasEl,"drag",this._onDrag),eventjs.remove(this.upperCanvasEl,"orientation",this._onOrientationChange),eventjs.remove(this.upperCanvasEl,"shake",this._onShake),eventjs.remove(this.upperCanvasEl,"longpress",this._onLongPress))},_onGesture:function(t,e){this.__onTransformGesture&&this.__onTransformGesture(t,e)},_onDrag:function(t,e){this.__onDrag&&this.__onDrag(t,e)},_onMouseWheel:function(t){this.__onMouseWheel(t)},_onMouseOut:function(t){var e=this._hoveredTarget;this.fire("mouse:out",{target:e,e:t}),this._hoveredTarget=null,e&&e.fire("mouseout",{e:t}),this._iTextInstances&&this._iTextInstances.forEach(function(t){t.isEditing&&t.hiddenTextarea.focus()})},_onMouseEnter:function(t){this.findTarget(t)||(this.fire("mouse:over",{target:null,e:t}),this._hoveredTarget=null)},_onOrientationChange:function(t,e){this.__onOrientationChange&&this.__onOrientationChange(t,e)},_onShake:function(t,e){this.__onShake&&this.__onShake(t,e)},_onLongPress:function(t,e){this.__onLongPress&&this.__onLongPress(t,e)},_onContextMenu:function(t){return this.stopContextMenu&&(t.stopPropagation(),t.preventDefault()),!1},_onMouseDown:function(t){this.__onMouseDown(t),e(fabric.document,"touchend",this._onMouseUp,{passive:!1}),e(fabric.document,"touchmove",this._onMouseMove,{passive:!1}),i(this.upperCanvasEl,"mousemove",this._onMouseMove),i(this.upperCanvasEl,"touchmove",this._onMouseMove),"touchstart"===t.type?i(this.upperCanvasEl,"mousedown",this._onMouseDown):(e(fabric.document,"mouseup",this._onMouseUp),e(fabric.document,"mousemove",this._onMouseMove))},_onMouseUp:function(t){if(this.__onMouseUp(t),i(fabric.document,"mouseup",this._onMouseUp),i(fabric.document,"touchend",this._onMouseUp),i(fabric.document,"mousemove",this._onMouseMove),i(fabric.document,"touchmove",this._onMouseMove),e(this.upperCanvasEl,"mousemove",this._onMouseMove),e(this.upperCanvasEl,"touchmove",this._onMouseMove,{passive:!1}),"touchend"===t.type){var n=this;setTimeout(function(){e(n.upperCanvasEl,"mousedown",n._onMouseDown)},400)}},_onMouseMove:function(t){!this.allowTouchScrolling&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)},_onResize:function(){this.calcOffset()},_shouldRender:function(t,e){var i=this.getActiveGroup()||this.getActiveObject();return!(i&&i.isEditing&&t===i||!(t&&(t.isMoving||t!==i)||!t&&i||!t&&!i&&!this._groupSelector||e&&this._previousPointer&&this.selection&&(e.x!==this._previousPointer.x||e.y!==this._previousPointer.y)))},__onMouseUp:function(t){var e,i=!0,n=this._currentTransform,s=this._groupSelector,o=!s||0===s.left&&0===s.top;if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(t);n&&(this._finalizeCurrentTransform(),i=!n.actionPerformed),e=i?this.findTarget(t,!0):n.target;var r=this._shouldRender(e,this.getPointer(t));e||!o?this._maybeGroupObjects(t):(this._groupSelector=null,this._currentTransform=null),e&&(e.isMoving=!1),this._handleCursorAndEvent(t,e,"up"),e&&(e.__corner=0),r&&this.renderAll()},_handleCursorAndEvent:function(t,e,i){this._setCursorFromEvent(t,e),this._handleEvent(t,i,e?e:null)},_handleEvent:function(t,e,i){var n="undefined"==typeof i?this.findTarget(t):i,s=this.targets||[],o={e:t,target:n,subTargets:s};this.fire("mouse:"+e,o),n&&n.fire("mouse"+e,o);for(var r=0;r<s.length;r++)s[r].fire("mouse"+e,o)},_finalizeCurrentTransform:function(){var t=this._currentTransform,e=t.target;e._scaling&&(e._scaling=!1),e.setCoords(),this._restoreOriginXY(e),(t.actionPerformed||this.stateful&&e.hasStateChanged())&&(this.fire("object:modified",{target:e}),e.fire("modified"))},_restoreOriginXY:function(t){if(this._previousOriginX&&this._previousOriginY){var e=t.translateToOriginPoint(t.getCenterPoint(),this._previousOriginX,this._previousOriginY);t.originX=this._previousOriginX,t.originY=this._previousOriginY,t.left=e.x,t.top=e.y,this._previousOriginX=null,this._previousOriginY=null}},_onMouseDownInDrawingMode:function(t){this._isCurrentlyDrawing=!0,this.discardActiveObject(t).renderAll(),this.clipTo&&fabric.util.clipContext(this,this.contextTop);var e=this.getPointer(t);this.freeDrawingBrush.onMouseDown(e),this._handleEvent(t,"down")},_onMouseMoveInDrawingMode:function(t){if(this._isCurrentlyDrawing){var e=this.getPointer(t);this.freeDrawingBrush.onMouseMove(e)}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")},_onMouseUpInDrawingMode:function(t){this._isCurrentlyDrawing=!1,this.clipTo&&this.contextTop.restore(),this.freeDrawingBrush.onMouseUp(),this._handleEvent(t,"up")},__onMouseDown:function(t){var e=this.findTarget(t),i="which"in t?3===t.which:2===t.button;if(i)return void(this.fireRightClick&&this._handleEvent(t,"down",e?e:null));var n="which"in t?2===t.which:1===t.button;if(n)return void(this.fireMiddleClick&&this._handleEvent(t,"down",e?e:null));if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(t);if(!this._currentTransform){var s=this.getPointer(t,!0);this._previousPointer=s;var o=this._shouldRender(e,s),r=this._shouldGroup(t,e);if(this._shouldClearSelection(t,e)?this._clearSelection(t,e,s):r&&(this._handleGrouping(t,e),e=this.getActiveGroup()),e){!e.selectable||!e.__corner&&r||(this._beforeTransform(t,e),this._setupCurrentTransform(t,e));var a=this.getActiveObject();e!==this.getActiveGroup()&&e!==a&&(this.deactivateAll(),e.selectable&&(a&&a.fire("deselected",{e:t}),this.setActiveObject(e,t)))}this._handleEvent(t,"down",e?e:null),o&&this.renderAll()}},_beforeTransform:function(t,e){this.stateful&&e.saveState(),e._findTargetCorner(this.getPointer(t))&&this.onBeforeScaleRotate(e)},_clearSelection:function(t,e,i){this.deactivateAllWithDispatch(t),e&&e.selectable?this.setActiveObject(e,t):this.selection&&(this._groupSelector={ex:i.x,ey:i.y,top:0,left:0})},_setOriginToCenter:function(t){this._previousOriginX=this._currentTransform.target.originX,this._previousOriginY=this._currentTransform.target.originY;var e=t.getCenterPoint();t.originX="center",t.originY="center",t.left=e.x,t.top=e.y,this._currentTransform.left=t.left,this._currentTransform.top=t.top},_setCenterToOrigin:function(t){var e=t.translateToOriginPoint(t.getCenterPoint(),this._previousOriginX,this._previousOriginY);t.originX=this._previousOriginX,t.originY=this._previousOriginY,t.left=e.x,t.top=e.y,this._previousOriginX=null,this._previousOriginY=null},__onMouseMove:function(t){var e,i;if(this.isDrawingMode)return void this._onMouseMoveInDrawingMode(t);if(!("undefined"!=typeof t.touches&&t.touches.length>1)){var n=this._groupSelector;n?(i=this.getPointer(t,!0),n.left=i.x-n.ex,n.top=i.y-n.ey,this.renderTop()):this._currentTransform?this._transformObject(t):(e=this.findTarget(t),this._setCursorFromEvent(t,e)),this._handleEvent(t,"move",e?e:null)}},__onMouseWheel:function(t){this._handleEvent(t,"wheel")},_transformObject:function(t){var e=this.getPointer(t),i=this._currentTransform;i.reset=!1,i.target.isMoving=!0,i.shiftKey=t.shiftKey,i.altKey=t[this.centeredKey],this._beforeScaleTransform(t,i),this._performTransformAction(t,i,e),i.actionPerformed&&this.renderAll()},_performTransformAction:function(t,e,i){var n=i.x,s=i.y,o=e.target,r=e.action,a=!1;"rotate"===r?(a=this._rotateObject(n,s))&&this._fire("rotating",o,t):"scale"===r?(a=this._onScale(t,e,n,s))&&this._fire("scaling",o,t):"scaleX"===r?(a=this._scaleObject(n,s,"x"))&&this._fire("scaling",o,t):"scaleY"===r?(a=this._scaleObject(n,s,"y"))&&this._fire("scaling",o,t):"skewX"===r?(a=this._skewObject(n,s,"x"))&&this._fire("skewing",o,t):"skewY"===r?(a=this._skewObject(n,s,"y"))&&this._fire("skewing",o,t):(a=this._translateObject(n,s),a&&(this._fire("moving",o,t),this.setCursor(o.moveCursor||this.moveCursor))),e.actionPerformed=e.actionPerformed||a},_fire:function(t,e,i){this.fire("object:"+t,{target:e,e:i}),e.fire(t,{e:i})},_beforeScaleTransform:function(t,e){if("scale"===e.action||"scaleX"===e.action||"scaleY"===e.action){var i=this._shouldCenterTransform(e.target);(i&&("center"!==e.originX||"center"!==e.originY)||!i&&"center"===e.originX&&"center"===e.originY)&&(this._resetCurrentTransform(),e.reset=!0)}},_onScale:function(t,e,i,n){return!t[this.uniScaleKey]&&!this.uniScaleTransform||e.target.get("lockUniScaling")?(e.reset||"scale"!==e.currentAction||this._resetCurrentTransform(),e.currentAction="scaleEqually",this._scaleObject(i,n,"equally")):(e.currentAction="scale",this._scaleObject(i,n))},_setCursorFromEvent:function(t,e){if(!e||!e.selectable)return this.setCursor(this.defaultCursor),!1;var i=e.hoverCursor||this.hoverCursor,n=this.getActiveGroup(),s=e._findTargetCorner&&(!n||!n.contains(e))&&e._findTargetCorner(this.getPointer(t,!0));return s?this._setCornerCursor(s,e,t):this.setCursor(i),!0},_setCornerCursor:function(e,i,n){if(e in t)this.setCursor(this._getRotatedCornerCursor(e,i,n));else{if("mtr"!==e||!i.hasRotatingPoint)return this.setCursor(this.defaultCursor),!1;this.setCursor(this.rotationCursor)}},_getRotatedCornerCursor:function(e,i,n){var s=Math.round(i.getAngle()%360/45);return 0>s&&(s+=8),s+=t[e],n[this.altActionKey]&&t[e]%2===0&&(s+=2),s%=8,this.cursorMap[s]}})}(),function(){var t=Math.min,e=Math.max;fabric.util.object.extend(fabric.Canvas.prototype,{_shouldGroup:function(t,e){var i=this.getActiveObject();return t[this.selectionKey]&&e&&e.selectable&&(this.getActiveGroup()||i&&i!==e)&&this.selection},_handleGrouping:function(t,e){var i=this.getActiveGroup();(e!==i||(e=this.findTarget(t,!0)))&&(i?this._updateActiveGroup(e,t):this._createActiveGroup(e,t),this._activeGroup&&this._activeGroup.saveCoords())},_updateActiveGroup:function(t,e){var i=this.getActiveGroup();if(i.contains(t)){if(i.removeWithUpdate(t),t.set("active",!1),1===i.size())return this.discardActiveGroup(e),void this.setActiveObject(i.item(0))}else i.addWithUpdate(t);this.fire("selection:created",{target:i,e:e}),i.set("active",!0)},_createActiveGroup:function(t,e){if(this._activeObject&&t!==this._activeObject){var i=this._createGroup(t);i.addWithUpdate(),this.setActiveGroup(i),this._activeObject=null,this.fire("selection:created",{target:i,e:e})}t.set("active",!0)},_createGroup:function(t){var e=this.getObjects(),i=e.indexOf(this._activeObject)<e.indexOf(t),n=i?[this._activeObject,t]:[t,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new fabric.Group(n,{canvas:this})},_groupSelectedObjects:function(t){var e=this._collectObjects();1===e.length?this.setActiveObject(e[0],t):e.length>1&&(e=new fabric.Group(e.reverse(),{canvas:this}),e.addWithUpdate(),this.setActiveGroup(e,t),e.saveCoords(),this.fire("selection:created",{target:e}),this.renderAll())},_collectObjects:function(){for(var i,n=[],s=this._groupSelector.ex,o=this._groupSelector.ey,r=s+this._groupSelector.left,a=o+this._groupSelector.top,l=new fabric.Point(t(s,r),t(o,a)),c=new fabric.Point(e(s,r),e(o,a)),d=s===r&&o===a,h=this._objects.length;h--&&(i=this._objects[h],!(i&&i.selectable&&i.visible&&(i.intersectsWithRect(l,c)||i.isContainedWithinRect(l,c)||i.containsPoint(l)||i.containsPoint(c))&&(i.set("active",!0),n.push(i),d))););return n},_maybeGroupObjects:function(t){this.selection&&this._groupSelector&&this._groupSelectedObjects(t);var e=this.getActiveGroup();e&&(e.setObjectsCoords().setCoords(),e.isMoving=!1,this.setCursor(this.defaultCursor)),this._groupSelector=null,this._currentTransform=null}})}(),function(){var t=fabric.StaticCanvas.supports("toDataURLWithQuality");fabric.util.object.extend(fabric.StaticCanvas.prototype,{toDataURL:function(t){t||(t={});var e=t.format||"png",i=t.quality||1,n=t.multiplier||1,s={left:t.left||0,top:t.top||0,width:t.width||0,height:t.height||0};return this.__toDataURLWithMultiplier(e,i,s,n)},__toDataURLWithMultiplier:function(t,e,i,n){var s=this.getWidth(),o=this.getHeight(),r=(i.width||this.getWidth())*n,a=(i.height||this.getHeight())*n,l=this.getZoom(),c=l*n,d=this.viewportTransform,h=(d[4]-i.left)*n,u=(d[5]-i.top)*n,p=[c,0,0,c,h,u],f=this.interactive;this.viewportTransform=p,
this.interactive&&(this.interactive=!1),s!==r||o!==a?this.setDimensions({width:r,height:a}):this.renderAll();var g=this.__toDataURL(t,e,i);return f&&(this.interactive=f),this.viewportTransform=d,this.setDimensions({width:s,height:o}),g},__toDataURL:function(e,i){var n=this.contextContainer.canvas;"jpg"===e&&(e="jpeg");var s=t?n.toDataURL("image/"+e,i):n.toDataURL("image/"+e);return s},toDataURLWithMultiplier:function(t,e,i){return this.toDataURL({format:t,multiplier:e,quality:i})}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{loadFromDatalessJSON:function(t,e,i){return this.loadFromJSON(t,e,i)},loadFromJSON:function(t,e,i){if(t){var n="string"==typeof t?JSON.parse(t):fabric.util.object.clone(t);this.clear();var s=this;return this._enlivenObjects(n.objects,function(){s._setBgOverlay(n,function(){delete n.objects,delete n.backgroundImage,delete n.overlayImage,delete n.background,delete n.overlay,s._setOptions(n),e&&e()})},i),this}},_setBgOverlay:function(t,e){var i=this,n={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!(t.backgroundImage||t.overlayImage||t.background||t.overlay))return void(e&&e());var s=function(){n.backgroundImage&&n.overlayImage&&n.backgroundColor&&n.overlayColor&&(i.renderAll(),e&&e())};this.__setBgOverlay("backgroundImage",t.backgroundImage,n,s),this.__setBgOverlay("overlayImage",t.overlayImage,n,s),this.__setBgOverlay("backgroundColor",t.background,n,s),this.__setBgOverlay("overlayColor",t.overlay,n,s)},__setBgOverlay:function(t,e,i,n){var s=this;return e?void("backgroundImage"===t||"overlayImage"===t?fabric.util.enlivenObjects([e],function(e){s[t]=e[0],i[t]=!0,n&&n()}):this["set"+fabric.util.string.capitalize(t,!0)](e,function(){i[t]=!0,n&&n()})):(i[t]=!0,void(n&&n()))},_enlivenObjects:function(t,e,i){var n=this;if(!t||0===t.length)return void(e&&e());var s=this.renderOnAddRemove;this.renderOnAddRemove=!1,fabric.util.enlivenObjects(t,function(t){t.forEach(function(t,e){n.insertAt(t,e)}),n.renderOnAddRemove=s,e&&e()},null,i)},_toDataURL:function(t,e){this.clone(function(i){e(i.toDataURL(t))})},_toDataURLWithMultiplier:function(t,e,i){this.clone(function(n){i(n.toDataURLWithMultiplier(t,e))})},clone:function(t,e){var i=JSON.stringify(this.toJSON(e));this.cloneWithoutData(function(e){e.loadFromJSON(i,function(){t&&t(e)})})},cloneWithoutData:function(t){var e=fabric.document.createElement("canvas");e.width=this.getWidth(),e.height=this.getHeight();var i=new fabric.Canvas(e);i.clipTo=this.clipTo,this.backgroundImage?(i.setBackgroundImage(this.backgroundImage.src,function(){i.renderAll(),t&&t(i)}),i.backgroundImageOpacity=this.backgroundImageOpacity,i.backgroundImageStretch=this.backgroundImageStretch):t&&t(i)}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.object.clone,s=e.util.toFixed,o=e.util.string.capitalize,r=e.util.degreesToRadians,a=e.StaticCanvas.supports("setLineDash"),l=!e.isLikelyNode;e.Object||(e.Object=e.util.createClass(e.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgba(102,153,255,0.75)",borderDashArray:null,cornerColor:"rgba(102,153,255,0.5)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:10,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,transformMatrix:null,minScaleLimit:.01,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,hasRotatingPoint:!0,rotatingPointOffset:40,perPixelTargetFind:!1,includeDefaultValues:!0,clipTo:null,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockUniScaling:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:l,statefullCache:!1,noScaleCache:!0,dirty:!1,needsItsOwnCache:!1,stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeLineJoin strokeMiterLimit angle opacity fill fillRule globalCompositeOperation shadow clipTo visible backgroundColor skewX skewY".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height stroke strokeWidth strokeDashArray strokeLineCap strokeLineJoin strokeMiterLimit fillRule backgroundColor".split(" "),initialize:function(t){t=t||{},t&&this.setOptions(t),this.objectCaching&&(this._createCacheCanvas(),this.setupState({propertySet:"cacheProperties"}))},_createCacheCanvas:function(){this._cacheCanvas=e.document.createElement("canvas"),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas()},_getCacheCanvasDimensions:function(){var t=this.canvas&&this.canvas.getZoom()||1,i=this.getObjectScaling(),n=this._getNonTransformedDimensions(),s=this.canvas&&this.canvas._isRetinaScaling()?e.devicePixelRatio:1,o=i.scaleX*t*s,r=i.scaleY*t*s,a=n.x*o,l=n.y*r;return{width:a+2,height:l+2,zoomX:o,zoomY:r}},_updateCacheCanvas:function(){if(this.noScaleCache&&this.canvas&&this.canvas._currentTransform){var t=this.canvas._currentTransform.action;if("scale"===t.slice(0,5))return!1}var e=this._getCacheCanvasDimensions(),i=e.width,n=e.height,s=e.zoomX,o=e.zoomY;return(i!==this.cacheWidth||n!==this.cacheHeight)&&(this._cacheCanvas.width=Math.ceil(i),this._cacheCanvas.height=Math.ceil(n),this._cacheContext.translate(i/2,n/2),this._cacheContext.scale(s,o),this.cacheWidth=i,this.cacheHeight=n,this.zoomX=s,this.zoomY=o,!0)},setOptions:function(t){this._setOptions(t),this._initGradient(t.fill,"fill"),this._initGradient(t.stroke,"stroke"),this._initClipping(t),this._initPattern(t.fill,"fill"),this._initPattern(t.stroke,"stroke")},transform:function(t,e){this.group&&!this.group._transformDone&&this.group===this.canvas._activeGroup&&this.group.transform(t);var i=e?this._getLeftTopCoords():this.getCenterPoint();t.translate(i.x,i.y),this.angle&&t.rotate(r(this.angle)),t.scale(this.scaleX*(this.flipX?-1:1),this.scaleY*(this.flipY?-1:1)),this.skewX&&t.transform(1,0,Math.tan(r(this.skewX)),1,0,0),this.skewY&&t.transform(1,Math.tan(r(this.skewY)),0,1,0,0)},toObject:function(t){var i=e.Object.NUM_FRACTION_DIGITS,n={type:this.type,originX:this.originX,originY:this.originY,left:s(this.left,i),top:s(this.top,i),width:s(this.width,i),height:s(this.height,i),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:s(this.strokeWidth,i),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:s(this.strokeMiterLimit,i),scaleX:s(this.scaleX,i),scaleY:s(this.scaleY,i),angle:s(this.getAngle(),i),flipX:this.flipX,flipY:this.flipY,opacity:s(this.opacity,i),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,clipTo:this.clipTo&&String(this.clipTo),backgroundColor:this.backgroundColor,fillRule:this.fillRule,globalCompositeOperation:this.globalCompositeOperation,transformMatrix:this.transformMatrix?this.transformMatrix.concat():null,skewX:s(this.skewX,i),skewY:s(this.skewY,i)};return e.util.populateWithProperties(this,n,t),this.includeDefaultValues||(n=this._removeDefaultValues(n)),n},toDatalessObject:function(t){return this.toObject(t)},_removeDefaultValues:function(t){var i=e.util.getKlass(t.type).prototype,n=i.stateProperties;return n.forEach(function(e){t[e]===i[e]&&delete t[e];var n="[object Array]"===Object.prototype.toString.call(t[e])&&"[object Array]"===Object.prototype.toString.call(i[e]);n&&0===t[e].length&&0===i[e].length&&delete t[e]}),t},toString:function(){return"#<fabric."+o(this.type)+">"},getObjectScaling:function(){var t=this.scaleX,e=this.scaleY;if(this.group){var i=this.group.getObjectScaling();t*=i.scaleX,e*=i.scaleY}return{scaleX:t,scaleY:e}},_set:function(t,i){var n="scaleX"===t||"scaleY"===t;return n&&(i=this._constrainScale(i)),"scaleX"===t&&0>i?(this.flipX=!this.flipX,i*=-1):"scaleY"===t&&0>i?(this.flipY=!this.flipY,i*=-1):"shadow"!==t||!i||i instanceof e.Shadow?"dirty"===t&&this.group&&this.group.set("dirty",i):i=new e.Shadow(i),this[t]=i,this.cacheProperties.indexOf(t)>-1&&(this.group&&this.group.set("dirty",!0),this.dirty=!0),this.group&&this.stateProperties.indexOf(t)>-1&&this.group.set("dirty",!0),"width"!==t&&"height"!==t||(this.minScaleLimit=Math.min(.1,1/Math.max(this.width,this.height))),this},setOnGroup:function(){},setSourcePath:function(t){return this.sourcePath=t,this},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:e.iMatrix.concat()},render:function(t,i){0===this.width&&0===this.height||!this.visible||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),i||this.transform(t),this._setOpacity(t),this._setShadow(t),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this.clipTo&&e.util.clipContext(this,t),!this.objectCaching||this.group&&!this.needsItsOwnCache?(this.drawObject(t,i),i&&this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})):(this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty(i)&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,i),this.dirty=!1),this.drawCacheOnCanvas(t)),this.clipTo&&t.restore(),t.restore())},drawObject:function(t,e){this._renderBackground(t),this._setStrokeStyles(t),this._setFillStyles(t),this._render(t,e)},drawCacheOnCanvas:function(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheWidth/2,-this.cacheHeight/2)},isCacheDirty:function(t){if(!t&&this._updateCacheCanvas())return!0;if(this.dirty||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(!t){var e=this.cacheWidth/this.zoomX,i=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-e/2,-i/2,e,i)}return!0}return!1},_renderBackground:function(t){if(this.backgroundColor){var e=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t)}},_setOpacity:function(t){t.globalAlpha*=this.opacity},_setStrokeStyles:function(t){this.stroke&&(t.lineWidth=this.strokeWidth,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,t.strokeStyle=this.stroke.toLive?this.stroke.toLive(t,this):this.stroke)},_setFillStyles:function(t){this.fill&&(t.fillStyle=this.fill.toLive?this.fill.toLive(t,this):this.fill)},_setLineDash:function(t,e,i){e&&(1&e.length&&e.push.apply(e,e),a?t.setLineDash(e):i&&i(t))},_renderControls:function(t,i){if(!(!this.active||i||this.group&&this.group!==this.canvas.getActiveGroup())){var n,s=this.getViewportTransform(),o=this.calcTransformMatrix();o=e.util.multiplyTransformMatrices(s,o),n=e.util.qrDecompose(o),t.save(),t.translate(n.translateX,n.translateY),t.lineWidth=1*this.borderScaleFactor,this.group||(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.group&&this.group===this.canvas.getActiveGroup()?(t.rotate(r(n.angle)),this.drawBordersInGroup(t,n)):(t.rotate(r(this.angle)),this.drawBorders(t)),this.drawControls(t),t.restore()}},_setShadow:function(t){if(this.shadow){var i=this.canvas&&this.canvas.viewportTransform[0]||1,n=this.canvas&&this.canvas.viewportTransform[3]||1,s=this.getObjectScaling();this.canvas&&this.canvas._isRetinaScaling()&&(i*=e.devicePixelRatio,n*=e.devicePixelRatio),t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur*(i+n)*(s.scaleX+s.scaleY)/4,t.shadowOffsetX=this.shadow.offsetX*i*s.scaleX,t.shadowOffsetY=this.shadow.offsetY*n*s.scaleY}},_removeShadow:function(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)},_applyPatternGradientTransform:function(t,e){if(e.toLive){var i=e.gradientTransform||e.patternTransform;i&&t.transform.apply(t,i);var n=-this.width/2+e.offsetX||0,s=-this.height/2+e.offsetY||0;t.translate(n,s)}},_renderFill:function(t){this.fill&&(t.save(),this._applyPatternGradientTransform(t,this.fill),"evenodd"===this.fillRule?t.fill("evenodd"):t.fill(),t.restore())},_renderStroke:function(t){this.stroke&&0!==this.strokeWidth&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray,this._renderDashedStroke),this._applyPatternGradientTransform(t,this.stroke),t.stroke(),t.restore())},clone:function(t,i){return this.constructor.fromObject?this.constructor.fromObject(this.toObject(i),t):new e.Object(this.toObject(i))},cloneAsImage:function(t,i){var n=this.toDataURL(i);return e.util.loadImage(n,function(i){t&&t(new e.Image(i))}),this},toDataURL:function(t){t||(t={});var i=e.util.createCanvasElement(),n=this.getBoundingRect();i.width=n.width,i.height=n.height,e.util.wrapElement(i,"div");var s=new e.StaticCanvas(i,{enableRetinaScaling:t.enableRetinaScaling});"jpg"===t.format&&(t.format="jpeg"),"jpeg"===t.format&&(s.backgroundColor="#fff");var o={active:this.get("active"),left:this.getLeft(),top:this.getTop()};this.set("active",!1),this.setPositionByOrigin(new e.Point(s.getWidth()/2,s.getHeight()/2),"center","center");var r=this.canvas;s.add(this);var a=s.toDataURL(t);return this.set(o).setCoords(),this.canvas=r,s.dispose(),s=null,a},isType:function(t){return this.type===t},complexity:function(){return 1},toJSON:function(t){return this.toObject(t)},setGradient:function(t,i){i||(i={});var n={colorStops:[]};return n.type=i.type||(i.r1||i.r2?"radial":"linear"),n.coords={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},(i.r1||i.r2)&&(n.coords.r1=i.r1,n.coords.r2=i.r2),n.gradientTransform=i.gradientTransform,e.Gradient.prototype.addColorStop.call(n,i.colorStops),this.set(t,e.Gradient.forObject(this,n))},setPatternFill:function(t){return this.set("fill",new e.Pattern(t))},setShadow:function(t){return this.set("shadow",t?new e.Shadow(t):null)},setColor:function(t){return this.set("fill",t),this},setAngle:function(t){var e=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return e&&this._setOriginToCenter(),this.set("angle",t),e&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},remove:function(){return this.canvas&&this.canvas.remove(this),this},getLocalPointer:function(t,i){i=i||this.canvas.getPointer(t);var n=new e.Point(i.x,i.y),s=this._getLeftTopCoords();return this.angle&&(n=e.util.rotatePoint(n,s,r(-this.angle))),{x:n.x-s.x,y:n.y-s.y}},_setupCompositeOperation:function(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}}),e.util.createAccessors(e.Object),e.Object.prototype.rotate=e.Object.prototype.setAngle,i(e.Object.prototype,e.Observable),e.Object.NUM_FRACTION_DIGITS=2,e.Object._fromObject=function(t,i,s,o,r){var a=e[t];if(i=n(i,!0),!o){var l=r?new a(i[r],i):new a(i);return s&&s(l),l}e.util.enlivenPatterns([i.fill,i.stroke],function(t){"undefined"!=typeof t[0]&&(i.fill=t[0]),"undefined"!=typeof t[1]&&(i.stroke=t[1]);var e=r?new a(i[r],i):new a(i);s&&s(e)})},e.Object.__uid=0)}("undefined"!=typeof exports?exports:this),function(){var t=fabric.util.degreesToRadians,e={left:-.5,center:0,right:.5},i={top:-.5,center:0,bottom:.5};fabric.util.object.extend(fabric.Object.prototype,{translateToGivenOrigin:function(t,n,s,o,r){var a,l,c,d=t.x,h=t.y;return"string"==typeof n?n=e[n]:n-=.5,"string"==typeof o?o=e[o]:o-=.5,a=o-n,"string"==typeof s?s=i[s]:s-=.5,"string"==typeof r?r=i[r]:r-=.5,l=r-s,(a||l)&&(c=this._getTransformedDimensions(),d=t.x+a*c.x,h=t.y+l*c.y),new fabric.Point(d,h)},translateToCenterPoint:function(e,i,n){var s=this.translateToGivenOrigin(e,i,n,"center","center");return this.angle?fabric.util.rotatePoint(s,e,t(this.angle)):s},translateToOriginPoint:function(e,i,n){var s=this.translateToGivenOrigin(e,"center","center",i,n);return this.angle?fabric.util.rotatePoint(s,e,t(this.angle)):s},getCenterPoint:function(){var t=new fabric.Point(this.left,this.top);return this.translateToCenterPoint(t,this.originX,this.originY)},getPointByOrigin:function(t,e){var i=this.getCenterPoint();return this.translateToOriginPoint(i,t,e)},toLocalPoint:function(e,i,n){var s,o,r=this.getCenterPoint();return s="undefined"!=typeof i&&"undefined"!=typeof n?this.translateToGivenOrigin(r,"center","center",i,n):new fabric.Point(this.left,this.top),o=new fabric.Point(e.x,e.y),this.angle&&(o=fabric.util.rotatePoint(o,r,-t(this.angle))),o.subtractEquals(s)},setPositionByOrigin:function(t,e,i){var n=this.translateToCenterPoint(t,e,i),s=this.translateToOriginPoint(n,this.originX,this.originY);this.set("left",s.x),this.set("top",s.y)},adjustPosition:function(i){var n,s,o=t(this.angle),r=this.getWidth(),a=Math.cos(o)*r,l=Math.sin(o)*r;n="string"==typeof this.originX?e[this.originX]:this.originX-.5,s="string"==typeof i?e[i]:i-.5,this.left+=a*(s-n),this.top+=l*(s-n),this.setCoords(),this.originX=i},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var t=this.getCenterPoint();this.originX="center",this.originY="center",this.left=t.x,this.top=t.y},_resetOrigin:function(){var t=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=t.x,this.top=t.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function t(t){return[new fabric.Point(t.tl.x,t.tl.y),new fabric.Point(t.tr.x,t.tr.y),new fabric.Point(t.br.x,t.br.y),new fabric.Point(t.bl.x,t.bl.y)]}var e=fabric.util.degreesToRadians,i=fabric.util.multiplyTransformMatrices;fabric.util.object.extend(fabric.Object.prototype,{oCoords:null,aCoords:null,getCoords:function(e,i){this.oCoords||this.setCoords();var n=e?this.aCoords:this.oCoords;return t(i?this.calcCoords(e):n)},intersectsWithRect:function(t,e,i,n){var s=this.getCoords(i,n),o=fabric.Intersection.intersectPolygonRectangle(s,t,e);return"Intersection"===o.status},intersectsWithObject:function(t,e,i){var n=fabric.Intersection.intersectPolygonPolygon(this.getCoords(e,i),t.getCoords(e,i));return"Intersection"===n.status||t.isContainedWithinObject(this,e,i)||this.isContainedWithinObject(t,e,i)},isContainedWithinObject:function(t,e,i){for(var n=this.getCoords(e,i),s=0,o=t._getImageLines(i?t.calcCoords(e):e?t.aCoords:t.oCoords);4>s;s++)if(!t.containsPoint(n[s],o))return!1;return!0},isContainedWithinRect:function(t,e,i,n){var s=this.getBoundingRect(i,n);return s.left>=t.x&&s.left+s.width<=e.x&&s.top>=t.y&&s.top+s.height<=e.y},containsPoint:function(t,e,i,n){var e=e||this._getImageLines(n?this.calcCoords(i):i?this.aCoords:this.oCoords),s=this._findCrossPoints(t,e);return 0!==s&&s%2===1},isOnScreen:function(t){if(!this.canvas)return!1;for(var e,i=this.canvas.vptCoords.tl,n=this.canvas.vptCoords.br,s=this.getCoords(!0,t),o=0;4>o;o++)if(e=s[o],e.x<=n.x&&e.x>=i.x&&e.y<=n.y&&e.y>=i.y)return!0;if(this.intersectsWithRect(i,n,!0))return!0;var r={x:(i.x+n.x)/2,y:(i.y+n.y)/2};return!!this.containsPoint(r,null,!0)},_getImageLines:function(t){return{topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}}},_findCrossPoints:function(t,e){var i,n,s,o,r,a,l=0;for(var c in e)if(a=e[c],!(a.o.y<t.y&&a.d.y<t.y||a.o.y>=t.y&&a.d.y>=t.y||(a.o.x===a.d.x&&a.o.x>=t.x?r=a.o.x:(i=0,n=(a.d.y-a.o.y)/(a.d.x-a.o.x),s=t.y-i*t.x,o=a.o.y-n*a.o.x,r=-(s-o)/(i-n)),r>=t.x&&(l+=1),2!==l)))break;return l},getBoundingRectWidth:function(){return this.getBoundingRect().width},getBoundingRectHeight:function(){return this.getBoundingRect().height},getBoundingRect:function(t,e){var i=this.getCoords(t,e);return fabric.util.makeBoundingBoxFromPoints(i)},getWidth:function(){return this._getTransformedDimensions().x},getHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(t){return Math.abs(t)<this.minScaleLimit?0>t?-this.minScaleLimit:this.minScaleLimit:t},scale:function(t){return t=this._constrainScale(t),0>t&&(this.flipX=!this.flipX,this.flipY=!this.flipY,t*=-1),this.scaleX=t,this.scaleY=t,this.setCoords()},scaleToWidth:function(t){var e=this.getBoundingRect().width/this.getWidth();return this.scale(t/this.width/e)},scaleToHeight:function(t){var e=this.getBoundingRect().height/this.getHeight();return this.scale(t/this.height/e)},calcCoords:function(t){var i=e(this.angle),n=this.getViewportTransform(),s=t?this._getTransformedDimensions():this._calculateCurrentDimensions(),o=s.x,r=s.y,a=Math.sin(i),l=Math.cos(i),c=o>0?Math.atan(r/o):0,d=o/Math.cos(c)/2,h=Math.cos(c+i)*d,u=Math.sin(c+i)*d,p=this.getCenterPoint(),f=t?p:fabric.util.transformPoint(p,n),g=new fabric.Point(f.x-h,f.y-u),m=new fabric.Point(g.x+o*l,g.y+o*a),v=new fabric.Point(g.x-r*a,g.y+r*l),b=new fabric.Point(f.x+h,f.y+u);if(!t)var y=new fabric.Point((g.x+v.x)/2,(g.y+v.y)/2),w=new fabric.Point((m.x+g.x)/2,(m.y+g.y)/2),x=new fabric.Point((b.x+m.x)/2,(b.y+m.y)/2),C=new fabric.Point((b.x+v.x)/2,(b.y+v.y)/2),_=new fabric.Point(w.x+a*this.rotatingPointOffset,w.y-l*this.rotatingPointOffset);var f={tl:g,tr:m,br:b,bl:v};return t||(f.ml=y,f.mt=w,f.mr=x,f.mb=C,f.mtr=_),f},setCoords:function(t,e){return this.oCoords=this.calcCoords(t),e||(this.aCoords=this.calcCoords(!0)),t||this._setCornerCoords&&this._setCornerCoords(),this},_calcRotateMatrix:function(){if(this.angle){var t=e(this.angle),i=Math.cos(t),n=Math.sin(t);return[i,n,-n,i,0,0]}return fabric.iMatrix.concat()},calcTransformMatrix:function(t){var e=this.getCenterPoint(),n=[1,0,0,1,e.x,e.y],s=this._calcRotateMatrix(),o=this._calcDimensionsTransformMatrix(this.skewX,this.skewY,!0),r=this.group&&!t?this.group.calcTransformMatrix():fabric.iMatrix.concat();return r=i(r,n),r=i(r,s),r=i(r,o)},_calcDimensionsTransformMatrix:function(t,n,s){var o=[1,0,Math.tan(e(t)),1],r=[1,Math.tan(e(n)),0,1],a=this.scaleX*(s&&this.flipX?-1:1),l=this.scaleY*(s&&this.flipY?-1:1),c=[a,0,0,l],d=i(c,o,!0);return i(d,r,!0)},_getNonTransformedDimensions:function(){var t=this.strokeWidth,e=this.width+t,i=this.height+t;return{x:e,y:i}},_getTransformedDimensions:function(t,e){"undefined"==typeof t&&(t=this.skewX),"undefined"==typeof e&&(e=this.skewY);var i,n,s=this._getNonTransformedDimensions(),o=s.x/2,r=s.y/2,a=[{x:-o,y:-r},{x:o,y:-r},{x:-o,y:r},{x:o,y:r}],l=this._calcDimensionsTransformMatrix(t,e,!1);for(i=0;i<a.length;i++)a[i]=fabric.util.transformPoint(a[i],l);return n=fabric.util.makeBoundingBoxFromPoints(a),{x:n.width,y:n.height}},_calculateCurrentDimensions:function(){var t=this.getViewportTransform(),e=this._getTransformedDimensions(),i=fabric.util.transformPoint(e,t,!0);return i.scalarAdd(2*this.padding)}})}(),fabric.util.object.extend(fabric.Object.prototype,{sendToBack:function(){return this.group?fabric.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?fabric.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas.bringToFront(this),this},sendBackwards:function(t){return this.group?fabric.StaticCanvas.prototype.sendBackwards.call(this.group,this,t):this.canvas.sendBackwards(this,t),this},bringForward:function(t){return this.group?fabric.StaticCanvas.prototype.bringForward.call(this.group,this,t):this.canvas.bringForward(this,t),this},moveTo:function(t){return this.group?fabric.StaticCanvas.prototype.moveTo.call(this.group,this,t):this.canvas.moveTo(this,t),this}}),function(){function t(t,e){if(e){if(e.toLive)return t+": url(#SVGID_"+e.id+"); ";var i=new fabric.Color(e),n=t+": "+i.toRgb()+"; ",s=i.getAlpha();return 1!==s&&(n+=t+"-opacity: "+s.toString()+"; "),n}return t+": none; "}fabric.util.object.extend(fabric.Object.prototype,{getSvgStyles:function(e){var i=this.fillRule,n=this.strokeWidth?this.strokeWidth:"0",s=this.strokeDashArray?this.strokeDashArray.join(" "):"none",o=this.strokeLineCap?this.strokeLineCap:"butt",r=this.strokeLineJoin?this.strokeLineJoin:"miter",a=this.strokeMiterLimit?this.strokeMiterLimit:"4",l="undefined"!=typeof this.opacity?this.opacity:"1",c=this.visible?"":" visibility: hidden;",d=e?"":this.getSvgFilter(),h=t("fill",this.fill),u=t("stroke",this.stroke);return[u,"stroke-width: ",n,"; ","stroke-dasharray: ",s,"; ","stroke-linecap: ",o,"; ","stroke-linejoin: ",r,"; ","stroke-miterlimit: ",a,"; ",h,"fill-rule: ",i,"; ","opacity: ",l,";",d,c].join("")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgId:function(){return this.id?'id="'+this.id+'" ':""},getSvgTransform:function(){if(this.group&&"path-group"===this.group.type)return"";var t=fabric.util.toFixed,e=this.getAngle(),i=this.getSkewX()%360,n=this.getSkewY()%360,s=this.getCenterPoint(),o=fabric.Object.NUM_FRACTION_DIGITS,r="path-group"===this.type?"":"translate("+t(s.x,o)+" "+t(s.y,o)+")",a=0!==e?" rotate("+t(e,o)+")":"",l=1===this.scaleX&&1===this.scaleY?"":" scale("+t(this.scaleX,o)+" "+t(this.scaleY,o)+")",c=0!==i?" skewX("+t(i,o)+")":"",d=0!==n?" skewY("+t(n,o)+")":"",h="path-group"===this.type?this.width:0,u=this.flipX?" matrix(-1 0 0 1 "+h+" 0) ":"",p="path-group"===this.type?this.height:0,f=this.flipY?" matrix(1 0 0 -1 0 "+p+")":"";return[r,a,l,u,f,c,d].join("")},getSvgTransformMatrix:function(){return this.transformMatrix?" matrix("+this.transformMatrix.join(" ")+") ":""},_createBaseSVGMarkup:function(){var t=[];return this.fill&&this.fill.toLive&&t.push(this.fill.toSVG(this,!1)),this.stroke&&this.stroke.toLive&&t.push(this.stroke.toSVG(this,!1)),this.shadow&&t.push(this.shadow.toSVG(this)),t}})}(),function(){function t(t,e,n){var s={},o=!0;n.forEach(function(e){s[e]=t[e]}),i(t[e],s,o)}function e(t,i,n){if(!fabric.isLikelyNode&&t instanceof Element)return t===i;if(t instanceof Array){if(t.length!==i.length)return!1;for(var s=0,o=t.length;o>s;s++)if(t[s]!==i[s])return!1;return!0}if(t&&"object"==typeof t){if(!n&&Object.keys(t).length!==Object.keys(i).length)return!1;for(var r in t)if(!e(t[r],i[r]))return!1;return!0}return t===i}var i=fabric.util.object.extend,n="stateProperties";fabric.util.object.extend(fabric.Object.prototype,{hasStateChanged:function(t){return t=t||n,t="_"+t,!e(this[t],this,!0)},saveState:function(e){var i=e&&e.propertySet||n,s="_"+i;return this[s]?(t(this,s,this[i]),e&&e.stateProperties&&t(this,s,e.stateProperties),this):this.setupState(e)},setupState:function(t){t=t||{};var e=t.propertySet||n;return t.propertySet=e,this["_"+e]={},this.saveState(t),this}})}(),function(){var t=fabric.util.degreesToRadians,e=function(){return"undefined"!=typeof G_vmlCanvasManager};fabric.util.object.extend(fabric.Object.prototype,{_controlsVisibility:null,_findTargetCorner:function(t){if(!this.hasControls||!this.active)return!1;var e,i,n=t.x,s=t.y;this.__corner=0;for(var o in this.oCoords)if(this.isControlVisible(o)&&("mtr"!==o||this.hasRotatingPoint)&&(!this.get("lockUniScaling")||"mt"!==o&&"mr"!==o&&"mb"!==o&&"ml"!==o)&&(i=this._getImageLines(this.oCoords[o].corner),e=this._findCrossPoints({x:n,y:s},i),0!==e&&e%2===1))return this.__corner=o,o;return!1},_setCornerCoords:function(){var e,i,n=this.oCoords,s=t(45-this.angle),o=.707106*this.cornerSize,r=o*Math.cos(s),a=o*Math.sin(s);for(var l in n)e=n[l].x,i=n[l].y,n[l].corner={tl:{x:e-a,y:i-r},tr:{x:e+r,y:i-a},bl:{x:e-r,y:i+a},br:{x:e+a,y:i+r}}},drawSelectionBackground:function(e){if(!this.selectionBackgroundColor||this.group||!this.active)return this;e.save();var i=this.getCenterPoint(),n=this._calculateCurrentDimensions(),s=this.canvas.viewportTransform;return e.translate(i.x,i.y),e.scale(1/s[0],1/s[3]),e.rotate(t(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-n.x/2,-n.y/2,n.x,n.y),e.restore(),this},drawBorders:function(t){if(!this.hasBorders)return this;var e=this._calculateCurrentDimensions(),i=1/this.borderScaleFactor,n=e.x+i,s=e.y+i;if(t.save(),t.strokeStyle=this.borderColor,this._setLineDash(t,this.borderDashArray,null),t.strokeRect(-n/2,-s/2,n,s),this.hasRotatingPoint&&this.isControlVisible("mtr")&&!this.get("lockRotation")&&this.hasControls){var o=-s/2;t.beginPath(),t.moveTo(0,o),t.lineTo(0,o-this.rotatingPointOffset),t.closePath(),t.stroke()}return t.restore(),this},drawBordersInGroup:function(t,e){if(!this.hasBorders)return this;var i=this._getNonTransformedDimensions(),n=fabric.util.customTransformMatrix(e.scaleX,e.scaleY,e.skewX),s=fabric.util.transformPoint(i,n),o=1/this.borderScaleFactor,r=s.x+o,a=s.y+o;return t.save(),this._setLineDash(t,this.borderDashArray,null),t.strokeStyle=this.borderColor,t.strokeRect(-r/2,-a/2,r,a),t.restore(),this},drawControls:function(t){if(!this.hasControls)return this;var e=this._calculateCurrentDimensions(),i=e.x,n=e.y,s=this.cornerSize,o=-(i+s)/2,r=-(n+s)/2,a=this.transparentCorners?"stroke":"fill";return t.save(),t.strokeStyle=t.fillStyle=this.cornerColor,this.transparentCorners||(t.strokeStyle=this.cornerStrokeColor),this._setLineDash(t,this.cornerDashArray,null),this._drawControl("tl",t,a,o,r),this._drawControl("tr",t,a,o+i,r),this._drawControl("bl",t,a,o,r+n),this._drawControl("br",t,a,o+i,r+n),this.get("lockUniScaling")||(this._drawControl("mt",t,a,o+i/2,r),this._drawControl("mb",t,a,o+i/2,r+n),this._drawControl("mr",t,a,o+i,r+n/2),this._drawControl("ml",t,a,o,r+n/2)),this.hasRotatingPoint&&this._drawControl("mtr",t,a,o+i/2,r-this.rotatingPointOffset),t.restore(),this},_drawControl:function(t,i,n,s,o){if(this.isControlVisible(t)){var r=this.cornerSize,a=!this.transparentCorners&&this.cornerStrokeColor;switch(this.cornerStyle){case"circle":i.beginPath(),i.arc(s+r/2,o+r/2,r/2,0,2*Math.PI,!1),i[n](),a&&i.stroke();break;default:e()||this.transparentCorners||i.clearRect(s,o,r,r),i[n+"Rect"](s,o,r,r),a&&i.strokeRect(s,o,r,r)}}},isControlVisible:function(t){return this._getControlsVisibility()[t]},setControlVisible:function(t,e){return this._getControlsVisibility()[t]=e,this},setControlsVisibility:function(t){t||(t={});for(var e in t)this.setControlVisible(e,t[e]);return this},_getControlsVisibility:function(){return this._controlsVisibility||(this._controlsVisibility={tl:!0,tr:!0,br:!0,bl:!0,ml:!0,mt:!0,mr:!0,mb:!0,mtr:!0}),this._controlsVisibility}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(t,e){e=e||{};var i=function(){},n=e.onComplete||i,s=e.onChange||i,o=this;return fabric.util.animate({startValue:t.get("left"),endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(e){t.set("left",e),o.renderAll(),s()},onComplete:function(){t.setCoords(),n()}}),this},fxCenterObjectV:function(t,e){e=e||{};var i=function(){},n=e.onComplete||i,s=e.onChange||i,o=this;return fabric.util.animate({startValue:t.get("top"),endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(e){t.set("top",e),o.renderAll(),s()},onComplete:function(){t.setCoords(),n()}}),this},fxRemove:function(t,e){e=e||{};var i=function(){},n=e.onComplete||i,s=e.onChange||i,o=this;return fabric.util.animate({startValue:t.get("opacity"),endValue:0,duration:this.FX_DURATION,onStart:function(){t.set("active",!1)},onChange:function(e){t.set("opacity",e),o.renderAll(),s()},onComplete:function(){o.remove(t),n()}}),this}}),fabric.util.object.extend(fabric.Object.prototype,{
animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var t,e,i=[];for(t in arguments[0])i.push(t);for(var n=0,s=i.length;s>n;n++)t=i[n],e=n!==s-1,this._animate(t,arguments[0][t],arguments[1],e)}else this._animate.apply(this,arguments);return this},_animate:function(t,e,i,n){var s,o=this;e=e.toString(),i=i?fabric.util.object.clone(i):{},~t.indexOf(".")&&(s=t.split("."));var r=s?this.get(s[0])[s[1]]:this.get(t);"from"in i||(i.from=r),e=~e.indexOf("=")?r+parseFloat(e.replace("=","")):parseFloat(e),fabric.util.animate({startValue:i.from,endValue:e,byValue:i.by,easing:i.easing,duration:i.duration,abort:i.abort&&function(){return i.abort.call(o)},onChange:function(e){s?o[s[0]][s[1]]=e:o.set(t,e),n||i.onChange&&i.onChange()},onComplete:function(){n||(o.setCoords(),i.onComplete&&i.onComplete())}})}}),function(t){"use strict";function e(t,e){var i=t.origin,n=t.axis1,s=t.axis2,o=t.dimension,r=e.nearest,a=e.center,l=e.farthest;return function(){switch(this.get(i)){case r:return Math.min(this.get(n),this.get(s));case a:return Math.min(this.get(n),this.get(s))+.5*this.get(o);case l:return Math.max(this.get(n),this.get(s))}}}var i=t.fabric||(t.fabric={}),n=i.util.object.extend,s=i.util.object.clone,o={x1:1,x2:1,y1:1,y2:1},r=i.StaticCanvas.supports("setLineDash");if(i.Line)return void i.warn("fabric.Line is already defined");var a=i.Object.prototype.cacheProperties.concat();a.push("x1","x2","y1","y2"),i.Line=i.util.createClass(i.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:a,initialize:function(t,e){t||(t=[0,0,0,0]),this.callSuper("initialize",e),this.set("x1",t[0]),this.set("y1",t[1]),this.set("x2",t[2]),this.set("y2",t[3]),this._setWidthHeight(e)},_setWidthHeight:function(t){t||(t={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in t?t.left:this._getLeftToOriginX(),this.top="top"in t?t.top:this._getTopToOriginY()},_set:function(t,e){return this.callSuper("_set",t,e),"undefined"!=typeof o[t]&&this._setWidthHeight(),this},_getLeftToOriginX:e({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:e({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(t,e){if(t.beginPath(),e){var i=this.getCenterPoint(),n=this.strokeWidth/2;t.translate(i.x-("butt"===this.strokeLineCap&&0===this.height?0:n),i.y-("butt"===this.strokeLineCap&&0===this.width?0:n))}if(!this.strokeDashArray||this.strokeDashArray&&r){var s=this.calcLinePoints();t.moveTo(s.x1,s.y1),t.lineTo(s.x2,s.y2)}t.lineWidth=this.strokeWidth;var o=t.strokeStyle;t.strokeStyle=this.stroke||t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=o},_renderDashedStroke:function(t){var e=this.calcLinePoints();t.beginPath(),i.util.drawDashedLine(t,e.x1,e.y1,e.x2,e.y2,this.strokeDashArray),t.closePath()},toObject:function(t){return n(this.callSuper("toObject",t),this.calcLinePoints())},_getNonTransformedDimensions:function(){var t=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(t.y-=this.strokeWidth),0===this.height&&(t.x-=this.strokeWidth)),t},calcLinePoints:function(){var t=this.x1<=this.x2?-1:1,e=this.y1<=this.y2?-1:1,i=t*this.width*.5,n=e*this.height*.5,s=t*this.width*-.5,o=e*this.height*-.5;return{x1:i,x2:s,y1:n,y2:o}},toSVG:function(t){var e=this._createBaseSVGMarkup(),i={x1:this.x1,x2:this.x2,y1:this.y1,y2:this.y2};return this.group&&"path-group"===this.group.type||(i=this.calcLinePoints()),e.push("<line ",this.getSvgId(),'x1="',i.x1,'" y1="',i.y1,'" x2="',i.x2,'" y2="',i.y2,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")}}),i.Line.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),i.Line.fromElement=function(t,e){e=e||{};var s=i.parseAttributes(t,i.Line.ATTRIBUTE_NAMES),o=[s.x1||0,s.y1||0,s.x2||0,s.y2||0];return e.originX="left",e.originY="top",new i.Line(o,n(s,e))},i.Line.fromObject=function(t,e,n){function o(t){delete t.points,e&&e(t)}var r=s(t,!0);r.points=[t.x1,t.y1,t.x2,t.y2];var a=i.Object._fromObject("Line",r,o,n,"points");return a&&delete a.points,a}}("undefined"!=typeof exports?exports:this),function(t){"use strict";function e(t){return"radius"in t&&t.radius>=0}var i=t.fabric||(t.fabric={}),n=Math.PI,s=i.util.object.extend;if(i.Circle)return void i.warn("fabric.Circle is already defined.");var o=i.Object.prototype.cacheProperties.concat();o.push("radius"),i.Circle=i.util.createClass(i.Object,{type:"circle",radius:0,startAngle:0,endAngle:2*n,cacheProperties:o,initialize:function(t){this.callSuper("initialize",t),this.set("radius",t&&t.radius||0)},_set:function(t,e){return this.callSuper("_set",t,e),"radius"===t&&this.setRadius(e),this},toObject:function(t){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(t))},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=0,s=0,o=(this.endAngle-this.startAngle)%(2*n);if(0===o)this.group&&"path-group"===this.group.type&&(i=this.left+this.radius,s=this.top+this.radius),e.push("<circle ",this.getSvgId(),'cx="'+i+'" cy="'+s+'" ','r="',this.radius,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n');else{var r=Math.cos(this.startAngle)*this.radius,a=Math.sin(this.startAngle)*this.radius,l=Math.cos(this.endAngle)*this.radius,c=Math.sin(this.endAngle)*this.radius,d=o>n?"1":"0";e.push('<path d="M '+r+" "+a," A "+this.radius+" "+this.radius," 0 ",+d+" 1"," "+l+" "+c,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n')}return t?t(e.join("")):e.join("")},_render:function(t,e){t.beginPath(),t.arc(e?this.left+this.radius:0,e?this.top+this.radius:0,this.radius,this.startAngle,this.endAngle,!1),this._renderFill(t),this._renderStroke(t)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(t){return this.radius=t,this.set("width",2*t).set("height",2*t)}}),i.Circle.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),i.Circle.fromElement=function(t,n){n||(n={});var o=i.parseAttributes(t,i.Circle.ATTRIBUTE_NAMES);if(!e(o))throw new Error("value of `r` attribute is required and can not be negative");o.left=o.left||0,o.top=o.top||0;var r=new i.Circle(s(o,n));return r.left-=r.radius,r.top-=r.radius,r},i.Circle.fromObject=function(t,e,n){return i.Object._fromObject("Circle",t,e,n)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});return e.Triangle?void e.warn("fabric.Triangle is already defined"):(e.Triangle=e.util.createClass(e.Object,{type:"triangle",initialize:function(t){this.callSuper("initialize",t),this.set("width",t&&t.width||100).set("height",t&&t.height||100)},_render:function(t){var e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,i),t.lineTo(0,-i),t.lineTo(e,i),t.closePath(),this._renderFill(t),this._renderStroke(t)},_renderDashedStroke:function(t){var i=this.width/2,n=this.height/2;t.beginPath(),e.util.drawDashedLine(t,-i,n,0,-n,this.strokeDashArray),e.util.drawDashedLine(t,0,-n,i,n,this.strokeDashArray),e.util.drawDashedLine(t,i,n,-i,n,this.strokeDashArray),t.closePath()},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=this.width/2,n=this.height/2,s=[-i+" "+n,"0 "+-n,i+" "+n].join(",");return e.push("<polygon ",this.getSvgId(),'points="',s,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),'"/>'),t?t(e.join("")):e.join("")}}),void(e.Triangle.fromObject=function(t,i,n){return e.Object._fromObject("Triangle",t,i,n)}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=2*Math.PI,n=e.util.object.extend;if(e.Ellipse)return void e.warn("fabric.Ellipse is already defined.");var s=e.Object.prototype.cacheProperties.concat();s.push("rx","ry"),e.Ellipse=e.util.createClass(e.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:s,initialize:function(t){this.callSuper("initialize",t),this.set("rx",t&&t.rx||0),this.set("ry",t&&t.ry||0)},_set:function(t,e){switch(this.callSuper("_set",t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=0,n=0;return this.group&&"path-group"===this.group.type&&(i=this.left+this.rx,n=this.top+this.ry),e.push("<ellipse ",this.getSvgId(),'cx="',i,'" cy="',n,'" ','rx="',this.rx,'" ry="',this.ry,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")},_render:function(t,e){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(e?this.left+this.rx:0,e?(this.top+this.ry)*this.rx/this.ry:0,this.rx,0,i,!1),t.restore(),this._renderFill(t),this._renderStroke(t)}}),e.Ellipse.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),e.Ellipse.fromElement=function(t,i){i||(i={});var s=e.parseAttributes(t,e.Ellipse.ATTRIBUTE_NAMES);s.left=s.left||0,s.top=s.top||0;var o=new e.Ellipse(n(s,i));return o.top-=o.ry,o.left-=o.rx,o},e.Ellipse.fromObject=function(t,i,n){return e.Object._fromObject("Ellipse",t,i,n)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;if(e.Rect)return void e.warn("fabric.Rect is already defined");var n=e.Object.prototype.stateProperties.concat();n.push("rx","ry");var s=e.Object.prototype.cacheProperties.concat();s.push("rx","ry"),e.Rect=e.util.createClass(e.Object,{stateProperties:n,type:"rect",rx:0,ry:0,cacheProperties:s,initialize:function(t){this.callSuper("initialize",t),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(t,e){if(1===this.width&&1===this.height)return void t.fillRect(-.5,-.5,1,1);var i=this.rx?Math.min(this.rx,this.width/2):0,n=this.ry?Math.min(this.ry,this.height/2):0,s=this.width,o=this.height,r=e?this.left:-this.width/2,a=e?this.top:-this.height/2,l=0!==i||0!==n,c=.4477152502;t.beginPath(),t.moveTo(r+i,a),t.lineTo(r+s-i,a),l&&t.bezierCurveTo(r+s-c*i,a,r+s,a+c*n,r+s,a+n),t.lineTo(r+s,a+o-n),l&&t.bezierCurveTo(r+s,a+o-c*n,r+s-c*i,a+o,r+s-i,a+o),t.lineTo(r+i,a+o),l&&t.bezierCurveTo(r+c*i,a+o,r,a+o-c*n,r,a+o-n),t.lineTo(r,a+n),l&&t.bezierCurveTo(r,a+c*n,r+c*i,a,r+i,a),t.closePath(),this._renderFill(t),this._renderStroke(t)},_renderDashedStroke:function(t){var i=-this.width/2,n=-this.height/2,s=this.width,o=this.height;t.beginPath(),e.util.drawDashedLine(t,i,n,i+s,n,this.strokeDashArray),e.util.drawDashedLine(t,i+s,n,i+s,n+o,this.strokeDashArray),e.util.drawDashedLine(t,i+s,n+o,i,n+o,this.strokeDashArray),e.util.drawDashedLine(t,i,n+o,i,n,this.strokeDashArray),t.closePath()},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=this.left,n=this.top;return this.group&&"path-group"===this.group.type||(i=-this.width/2,n=-this.height/2),e.push("<rect ",this.getSvgId(),'x="',i,'" y="',n,'" rx="',this.get("rx"),'" ry="',this.get("ry"),'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")}}),e.Rect.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),e.Rect.fromElement=function(t,n){if(!t)return null;n=n||{};var s=e.parseAttributes(t,e.Rect.ATTRIBUTE_NAMES);s.left=s.left||0,s.top=s.top||0;var o=new e.Rect(i(n?e.util.object.clone(n):{},s));return o.visible=o.visible&&o.width>0&&o.height>0,o},e.Rect.fromObject=function(t,i,n){return e.Object._fromObject("Rect",t,i,n)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.array.min,s=e.util.array.max,o=e.util.toFixed;if(e.Polyline)return void e.warn("fabric.Polyline is already defined");var r=e.Object.prototype.cacheProperties.concat();r.push("points"),e.Polyline=e.util.createClass(e.Object,{type:"polyline",points:null,minX:0,minY:0,cacheProperties:r,initialize:function(t,e){e=e||{},this.points=t||[],this.callSuper("initialize",e),this._calcDimensions(),"top"in e||(this.top=this.minY),"left"in e||(this.left=this.minX),this.pathOffset={x:this.minX+this.width/2,y:this.minY+this.height/2}},_calcDimensions:function(){var t=this.points,e=n(t,"x"),i=n(t,"y"),o=s(t,"x"),r=s(t,"y");this.width=o-e||0,this.height=r-i||0,this.minX=e||0,this.minY=i||0},toObject:function(t){return i(this.callSuper("toObject",t),{points:this.points.concat()})},toSVG:function(t){for(var e,i=[],n=this._createBaseSVGMarkup(),s=0,r=this.points.length;r>s;s++)i.push(o(this.points[s].x,2),",",o(this.points[s].y,2)," ");return this.group&&"path-group"===this.group.type||(e=" translate("+-this.pathOffset.x+", "+-this.pathOffset.y+") "),n.push("<",this.type," ",this.getSvgId(),'points="',i.join(""),'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),e," ",this.getSvgTransformMatrix(),'"/>\n'),t?t(n.join("")):n.join("")},commonRender:function(t,e){var i,n=this.points.length,s=e?0:this.pathOffset.x,o=e?0:this.pathOffset.y;if(!n||isNaN(this.points[n-1].y))return!1;t.beginPath(),t.moveTo(this.points[0].x-s,this.points[0].y-o);for(var r=0;n>r;r++)i=this.points[r],t.lineTo(i.x-s,i.y-o);return!0},_render:function(t,e){this.commonRender(t,e)&&(this._renderFill(t),this._renderStroke(t))},_renderDashedStroke:function(t){var i,n;t.beginPath();for(var s=0,o=this.points.length;o>s;s++)i=this.points[s],n=this.points[s+1]||i,e.util.drawDashedLine(t,i.x,i.y,n.x,n.y,this.strokeDashArray)},complexity:function(){return this.get("points").length}}),e.Polyline.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polyline.fromElement=function(t,i){if(!t)return null;i||(i={});var n=e.parsePointsAttribute(t.getAttribute("points")),s=e.parseAttributes(t,e.Polyline.ATTRIBUTE_NAMES);return new e.Polyline(n,e.util.object.extend(s,i))},e.Polyline.fromObject=function(t,i,n){return e.Object._fromObject("Polyline",t,i,n,"points")}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;return e.Polygon?void e.warn("fabric.Polygon is already defined"):(e.Polygon=e.util.createClass(e.Polyline,{type:"polygon",_render:function(t,e){this.commonRender(t,e)&&(t.closePath(),this._renderFill(t),this._renderStroke(t))},_renderDashedStroke:function(t){this.callSuper("_renderDashedStroke",t),t.closePath()}}),e.Polygon.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polygon.fromElement=function(t,n){if(!t)return null;n||(n={});var s=e.parsePointsAttribute(t.getAttribute("points")),o=e.parseAttributes(t,e.Polygon.ATTRIBUTE_NAMES);return new e.Polygon(s,i(o,n))},void(e.Polygon.fromObject=function(t,i,n){return e.Object._fromObject("Polygon",t,i,n,"points")}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.array.min,n=e.util.array.max,s=e.util.object.extend,o=Object.prototype.toString,r=e.util.drawArc,a={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},l={m:"l",M:"L"};if(e.Path)return void e.warn("fabric.Path is already defined");var c=e.Object.prototype.cacheProperties.concat();c.push("path"),e.Path=e.util.createClass(e.Object,{type:"path",path:null,minX:0,minY:0,cacheProperties:c,initialize:function(t,e){e=e||{},e&&this.setOptions(e),t||(t=[]);var i="[object Array]"===o.call(t);this.path=i?t:t.match&&t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi),this.path&&(i||(this.path=this._parsePath()),this._setPositionDimensions(e),e.sourcePath&&this.setSourcePath(e.sourcePath),this.objectCaching&&(this._createCacheCanvas(),this.setupState({propertySet:"cacheProperties"})))},_setPositionDimensions:function(t){var e=this._parseDimensions();this.minX=e.left,this.minY=e.top,this.width=e.width,this.height=e.height,"undefined"==typeof t.left&&(this.left=e.left+("center"===this.originX?this.width/2:"right"===this.originX?this.width:0)),"undefined"==typeof t.top&&(this.top=e.top+("center"===this.originY?this.height/2:"bottom"===this.originY?this.height:0)),this.pathOffset=this.pathOffset||{x:this.minX+this.width/2,y:this.minY+this.height/2}},_renderPathCommands:function(t){var e,i,n,s=null,o=0,a=0,l=0,c=0,d=0,h=0,u=-this.pathOffset.x,p=-this.pathOffset.y;this.group&&"path-group"===this.group.type&&(u=0,p=0),t.beginPath();for(var f=0,g=this.path.length;g>f;++f){switch(e=this.path[f],e[0]){case"l":l+=e[1],c+=e[2],t.lineTo(l+u,c+p);break;case"L":l=e[1],c=e[2],t.lineTo(l+u,c+p);break;case"h":l+=e[1],t.lineTo(l+u,c+p);break;case"H":l=e[1],t.lineTo(l+u,c+p);break;case"v":c+=e[1],t.lineTo(l+u,c+p);break;case"V":c=e[1],t.lineTo(l+u,c+p);break;case"m":l+=e[1],c+=e[2],o=l,a=c,t.moveTo(l+u,c+p);break;case"M":l=e[1],c=e[2],o=l,a=c,t.moveTo(l+u,c+p);break;case"c":i=l+e[5],n=c+e[6],d=l+e[3],h=c+e[4],t.bezierCurveTo(l+e[1]+u,c+e[2]+p,d+u,h+p,i+u,n+p),l=i,c=n;break;case"C":l=e[5],c=e[6],d=e[3],h=e[4],t.bezierCurveTo(e[1]+u,e[2]+p,d+u,h+p,l+u,c+p);break;case"s":i=l+e[3],n=c+e[4],null===s[0].match(/[CcSs]/)?(d=l,h=c):(d=2*l-d,h=2*c-h),t.bezierCurveTo(d+u,h+p,l+e[1]+u,c+e[2]+p,i+u,n+p),d=l+e[1],h=c+e[2],l=i,c=n;break;case"S":i=e[3],n=e[4],null===s[0].match(/[CcSs]/)?(d=l,h=c):(d=2*l-d,h=2*c-h),t.bezierCurveTo(d+u,h+p,e[1]+u,e[2]+p,i+u,n+p),l=i,c=n,d=e[1],h=e[2];break;case"q":i=l+e[3],n=c+e[4],d=l+e[1],h=c+e[2],t.quadraticCurveTo(d+u,h+p,i+u,n+p),l=i,c=n;break;case"Q":i=e[3],n=e[4],t.quadraticCurveTo(e[1]+u,e[2]+p,i+u,n+p),l=i,c=n,d=e[1],h=e[2];break;case"t":i=l+e[1],n=c+e[2],null===s[0].match(/[QqTt]/)?(d=l,h=c):(d=2*l-d,h=2*c-h),t.quadraticCurveTo(d+u,h+p,i+u,n+p),l=i,c=n;break;case"T":i=e[1],n=e[2],null===s[0].match(/[QqTt]/)?(d=l,h=c):(d=2*l-d,h=2*c-h),t.quadraticCurveTo(d+u,h+p,i+u,n+p),l=i,c=n;break;case"a":r(t,l+u,c+p,[e[1],e[2],e[3],e[4],e[5],e[6]+l+u,e[7]+c+p]),l+=e[6],c+=e[7];break;case"A":r(t,l+u,c+p,[e[1],e[2],e[3],e[4],e[5],e[6]+u,e[7]+p]),l=e[6],c=e[7];break;case"z":case"Z":l=o,c=a,t.closePath()}s=e}},_render:function(t){this._renderPathCommands(t),this._renderFill(t),this._renderStroke(t)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(t){var e=s(this.callSuper("toObject",["sourcePath","pathOffset"].concat(t)),{path:this.path.map(function(t){return t.slice()}),top:this.top,left:this.left});return e},toDatalessObject:function(t){var e=this.toObject(t);return this.sourcePath&&(e.path=this.sourcePath),delete e.sourcePath,e},toSVG:function(t){for(var e=[],i=this._createBaseSVGMarkup(),n="",s=0,o=this.path.length;o>s;s++)e.push(this.path[s].join(" "));var r=e.join(" ");return this.group&&"path-group"===this.group.type||(n=" translate("+-this.pathOffset.x+", "+-this.pathOffset.y+") "),i.push("<path ",this.getSvgId(),'d="',r,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),n,this.getSvgTransformMatrix(),'" stroke-linecap="round" ',"/>\n"),t?t(i.join("")):i.join("")},complexity:function(){return this.path.length},_parsePath:function(){for(var t,e,i,n,s,o=[],r=[],c=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,d=0,h=this.path.length;h>d;d++){for(t=this.path[d],n=t.slice(1).trim(),r.length=0;i=c.exec(n);)r.push(i[0]);s=[t.charAt(0)];for(var u=0,p=r.length;p>u;u++)e=parseFloat(r[u]),isNaN(e)||s.push(e);var f=s[0],g=a[f.toLowerCase()],m=l[f]||f;if(s.length-1>g)for(var v=1,b=s.length;b>v;v+=g)o.push([f].concat(s.slice(v,v+g))),f=m;else o.push(s)}return o},_parseDimensions:function(){for(var t,s,o,r,a=[],l=[],c=null,d=0,h=0,u=0,p=0,f=0,g=0,m=0,v=this.path.length;v>m;++m){switch(t=this.path[m],t[0]){case"l":u+=t[1],p+=t[2],r=[];break;case"L":u=t[1],p=t[2],r=[];break;case"h":u+=t[1],r=[];break;case"H":u=t[1],r=[];break;case"v":p+=t[1],r=[];break;case"V":p=t[1],r=[];break;case"m":u+=t[1],p+=t[2],d=u,h=p,r=[];break;case"M":u=t[1],p=t[2],d=u,h=p,r=[];break;case"c":s=u+t[5],o=p+t[6],f=u+t[3],g=p+t[4],r=e.util.getBoundsOfCurve(u,p,u+t[1],p+t[2],f,g,s,o),u=s,p=o;break;case"C":f=t[3],g=t[4],r=e.util.getBoundsOfCurve(u,p,t[1],t[2],f,g,t[5],t[6]),u=t[5],p=t[6];break;case"s":s=u+t[3],o=p+t[4],null===c[0].match(/[CcSs]/)?(f=u,g=p):(f=2*u-f,g=2*p-g),r=e.util.getBoundsOfCurve(u,p,f,g,u+t[1],p+t[2],s,o),f=u+t[1],g=p+t[2],u=s,p=o;break;case"S":s=t[3],o=t[4],null===c[0].match(/[CcSs]/)?(f=u,g=p):(f=2*u-f,g=2*p-g),r=e.util.getBoundsOfCurve(u,p,f,g,t[1],t[2],s,o),u=s,p=o,f=t[1],g=t[2];break;case"q":s=u+t[3],o=p+t[4],f=u+t[1],g=p+t[2],r=e.util.getBoundsOfCurve(u,p,f,g,f,g,s,o),u=s,p=o;break;case"Q":f=t[1],g=t[2],r=e.util.getBoundsOfCurve(u,p,f,g,f,g,t[3],t[4]),u=t[3],p=t[4];break;case"t":s=u+t[1],o=p+t[2],null===c[0].match(/[QqTt]/)?(f=u,g=p):(f=2*u-f,g=2*p-g),r=e.util.getBoundsOfCurve(u,p,f,g,f,g,s,o),u=s,p=o;break;case"T":s=t[1],o=t[2],null===c[0].match(/[QqTt]/)?(f=u,g=p):(f=2*u-f,g=2*p-g),r=e.util.getBoundsOfCurve(u,p,f,g,f,g,s,o),u=s,p=o;break;case"a":r=e.util.getBoundsOfArc(u,p,t[1],t[2],t[3],t[4],t[5],t[6]+u,t[7]+p),u+=t[6],p+=t[7];break;case"A":r=e.util.getBoundsOfArc(u,p,t[1],t[2],t[3],t[4],t[5],t[6],t[7]),u=t[6],p=t[7];break;case"z":case"Z":u=d,p=h}c=t,r.forEach(function(t){a.push(t.x),l.push(t.y)}),a.push(u),l.push(p)}var b=i(a)||0,y=i(l)||0,w=n(a)||0,x=n(l)||0,C=w-b,_=x-y,T={left:b,top:y,width:C,height:_};return T}}),e.Path.fromObject=function(t,i,n){var s;return"string"!=typeof t.path?e.Object._fromObject("Path",t,i,n,"path"):void e.loadSVGFromURL(t.path,function(n){var o=t.path;s=n[0],delete t.path,e.util.object.extend(s,t),s.setSourcePath(o),i&&i(s)})},e.Path.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(["d"]),e.Path.fromElement=function(t,i,n){var o=e.parseAttributes(t,e.Path.ATTRIBUTE_NAMES);i&&i(new e.Path(o.d,s(o,n)))},e.Path.async=!0}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;return e.PathGroup?void e.warn("fabric.PathGroup is already defined"):(e.PathGroup=e.util.createClass(e.Object,{type:"path-group",fill:"",initialize:function(t,e){e=e||{},this.paths=t||[];for(var i=this.paths.length;i--;)this.paths[i].group=this;e.toBeParsed&&(this.parseDimensionsFromPaths(e),delete e.toBeParsed),this.setOptions(e),this.setCoords(),e.sourcePath&&this.setSourcePath(e.sourcePath),this.objectCaching&&(this._createCacheCanvas(),this.setupState({propertySet:"cacheProperties"}))},parseDimensionsFromPaths:function(t){for(var i,n,s,o,r,a,l=[],c=[],d=this.paths.length;d--;){s=this.paths[d],o=s.height+s.strokeWidth,r=s.width+s.strokeWidth,i=[{x:s.left,y:s.top},{x:s.left+r,y:s.top},{x:s.left,y:s.top+o},{x:s.left+r,y:s.top+o}],a=this.paths[d].transformMatrix;for(var h=0;h<i.length;h++)n=i[h],a&&(n=e.util.transformPoint(n,a,!1)),l.push(n.x),c.push(n.y)}t.width=Math.max.apply(null,l),t.height=Math.max.apply(null,c)},drawObject:function(t){t.save(),t.translate(-this.width/2,-this.height/2);for(var e=0,i=this.paths.length;i>e;++e)this.paths[e].render(t,!0);t.restore()},isCacheDirty:function(){if(this.callSuper("isCacheDirty"))return!0;if(!this.statefullCache)return!1;for(var t=0,e=this.paths.length;e>t;t++)if(this.paths[t].isCacheDirty(!0)){var i=this._getNonTransformedDimensions();return this._cacheContext.clearRect(-i.x/2,-i.y/2,i.x,i.y),!0}return!1},_set:function(t,e){if("fill"===t&&e&&this.isSameColor())for(var i=this.paths.length;i--;)this.paths[i]._set(t,e);return this.callSuper("_set",t,e)},toObject:function(t){var e=this.paths.map(function(e){var i=e.includeDefaultValues;e.includeDefaultValues=e.group.includeDefaultValues;var n=e.toObject(t);return e.includeDefaultValues=i,n}),n=i(this.callSuper("toObject",["sourcePath"].concat(t)),{paths:e});return n},toDatalessObject:function(t){var e=this.toObject(t);return this.sourcePath&&(e.paths=this.sourcePath),e},toSVG:function(t){var e=this.getObjects(),i=this.getPointByOrigin("left","top"),n="translate("+i.x+" "+i.y+")",s=this._createBaseSVGMarkup();s.push("<g ",this.getSvgId(),'style="',this.getSvgStyles(),'" ','transform="',this.getSvgTransformMatrix(),n,this.getSvgTransform(),'" ',">\n");for(var o=0,r=e.length;r>o;o++)s.push("	",e[o].toSVG(t));return s.push("</g>\n"),t?t(s.join("")):s.join("")},toString:function(){return"#<fabric.PathGroup ("+this.complexity()+"): { top: "+this.top+", left: "+this.left+" }>"},isSameColor:function(){var t=this.getObjects()[0].get("fill")||"";return"string"==typeof t&&(t=t.toLowerCase(),this.getObjects().every(function(e){var i=e.get("fill")||"";return"string"==typeof i&&i.toLowerCase()===t}))},complexity:function(){return this.paths.reduce(function(t,e){return t+(e&&e.complexity?e.complexity():0)},0)},getObjects:function(){return this.paths}}),e.PathGroup.fromObject=function(t,i){var n=t.paths;delete t.paths,"string"==typeof n?e.loadSVGFromURL(n,function(s){var o=n,r=e.util.groupSVGElements(s,t,o);t.paths=n,i(r)}):e.util.enlivenObjects(n,function(s){var o=new e.PathGroup(s,t);t.paths=n,i(o)})},void(e.PathGroup.async=!0))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.array.min,s=e.util.array.max;if(!e.Group){var o={lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0};e.Group=e.util.createClass(e.Object,e.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,initialize:function(t,e,i){e=e||{},this._objects=[],i&&this.callSuper("initialize",e),this._objects=t||[];for(var n=this._objects.length;n--;)this._objects[n].group=this;this.originalState={},e.originX&&(this.originX=e.originX),e.originY&&(this.originY=e.originY),i?this._updateObjectsCoords(!0):(this._calcBounds(),this._updateObjectsCoords(),this.callSuper("initialize",e)),this.setCoords(),this.saveCoords()},_updateObjectsCoords:function(t){for(var e=this.getCenterPoint(),i=this._objects.length;i--;)this._updateObjectCoords(this._objects[i],e,t)},_updateObjectCoords:function(t,e,i){if(t.__origHasControls=t.hasControls,t.hasControls=!1,!i){var n=t.getLeft(),s=t.getTop(),o=!0,r=!0;t.set({left:n-e.x,top:s-e.y}),t.setCoords(o,r)}},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(t){return this._restoreObjectsState(),e.util.resetObjectTransform(this),t&&(this._objects.push(t),t.group=this,t._set("canvas",this.canvas)),this.forEachObject(this._setObjectActive,this),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,this},_setObjectActive:function(t){t.set("active",!0),t.group=this},removeWithUpdate:function(t){return this._restoreObjectsState(),e.util.resetObjectTransform(this),this.forEachObject(this._setObjectActive,this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,this},_onObjectAdded:function(t){this.dirty=!0,t.group=this,t._set("canvas",this.canvas)},_onObjectRemoved:function(t){this.dirty=!0,delete t.group,t.set("active",!1)},delegatedProperties:{fill:!0,stroke:!0,strokeWidth:!0,fontFamily:!0,fontWeight:!0,fontSize:!0,fontStyle:!0,lineHeight:!0,textDecoration:!0,textAlign:!0,backgroundColor:!0},_set:function(t,e){var i=this._objects.length;if(this.delegatedProperties[t]||"canvas"===t)for(;i--;)this._objects[i].set(t,e);else for(;i--;)this._objects[i].setOnGroup(t,e);this.callSuper("_set",t,e)},toObject:function(t){var e=this.getObjects().map(function(e){var i=e.includeDefaultValues;e.includeDefaultValues=e.group.includeDefaultValues;var n=e.toObject(t);return e.includeDefaultValues=i,n});return i(this.callSuper("toObject",t),{objects:e})},render:function(t){this._transformDone=!0,this.callSuper("render",t),this._transformDone=!1},drawObject:function(t){for(var e=0,i=this._objects.length;i>e;e++)this._renderObject(this._objects[e],t)},isCacheDirty:function(){if(this.callSuper("isCacheDirty"))return!0;if(!this.statefullCache)return!1;for(var t=0,e=this._objects.length;e>t;t++)if(this._objects[t].isCacheDirty(!0)){var i=this._getNonTransformedDimensions();return this._cacheContext.clearRect(-i.x/2,-i.y/2,i.x,i.y),!0}return!1},_renderControls:function(t,e){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",t,e);for(var i=0,n=this._objects.length;n>i;i++)this._objects[i]._renderControls(t);t.restore()},_renderObject:function(t,e){if(t.visible){var i=t.hasRotatingPoint;t.hasRotatingPoint=!1,t.render(e),t.hasRotatingPoint=i}},_restoreObjectsState:function(){return this._objects.forEach(this._restoreObjectState,this),this},realizeTransform:function(t){var i=t.calcTransformMatrix(),n=e.util.qrDecompose(i),s=new e.Point(n.translateX,n.translateY);return t.flipX=!1,t.flipY=!1,t.set("scaleX",n.scaleX),t.set("scaleY",n.scaleY),t.skewX=n.skewX,t.skewY=n.skewY,t.angle=n.angle,t.setPositionByOrigin(s,"center","center"),t},_restoreObjectState:function(t){return this.realizeTransform(t),t.setCoords(),t.hasControls=t.__origHasControls,delete t.__origHasControls,t.set("active",!1),delete t.group,this},destroy:function(){return this._restoreObjectsState()},saveCoords:function(){return this._originalLeft=this.get("left"),this._originalTop=this.get("top"),this},hasMoved:function(){return this._originalLeft!==this.get("left")||this._originalTop!==this.get("top")},setObjectsCoords:function(){var t=!0,e=!0;return this.forEachObject(function(i){i.setCoords(t,e)}),this},_calcBounds:function(t){for(var e,i,n,s=[],o=[],r=["tr","br","bl","tl"],a=0,l=this._objects.length,c=r.length,d=!0;l>a;++a)for(e=this._objects[a],e.setCoords(d),n=0;c>n;n++)i=r[n],s.push(e.oCoords[i].x),o.push(e.oCoords[i].y);this.set(this._getBounds(s,o,t))},_getBounds:function(t,i,o){var r=new e.Point(n(t),n(i)),a=new e.Point(s(t),s(i)),l={width:a.x-r.x||0,height:a.y-r.y||0};return o||(l.left=r.x||0,l.top=r.y||0,"center"===this.originX&&(l.left+=l.width/2),"right"===this.originX&&(l.left+=l.width),"center"===this.originY&&(l.top+=l.height/2),"bottom"===this.originY&&(l.top+=l.height)),l},toSVG:function(t){var e=this._createBaseSVGMarkup();e.push("<g ",this.getSvgId(),'transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'" style="',this.getSvgFilter(),'">\n');for(var i=0,n=this._objects.length;n>i;i++)e.push("	",this._objects[i].toSVG(t));return e.push("</g>\n"),t?t(e.join("")):e.join("")},get:function(t){if(t in o){if(this[t])return this[t];for(var e=0,i=this._objects.length;i>e;e++)if(this._objects[e][t])return!0;return!1}return t in this.delegatedProperties?this._objects[0]&&this._objects[0].get(t):this[t]}}),e.Group.fromObject=function(t,i){e.util.enlivenObjects(t.objects,function(n){delete t.objects,i&&i(new e.Group(n,t,!0))})},e.Group.async=!0}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=fabric.util.object.extend;if(t.fabric||(t.fabric={}),t.fabric.Image)return void fabric.warn("fabric.Image is already defined.");var i=fabric.Object.prototype.stateProperties.concat();i.push("alignX","alignY","meetOrSlice"),fabric.Image=fabric.util.createClass(fabric.Object,{type:"image",crossOrigin:"",alignX:"none",alignY:"none",meetOrSlice:"meet",strokeWidth:0,_lastScaleX:1,_lastScaleY:1,minimumScaleTrigger:.5,stateProperties:i,objectCaching:!1,initialize:function(t,e,i){e||(e={}),this.filters=[],this.resizeFilters=[],this.callSuper("initialize",e),this._initElement(t,e,i)},getElement:function(){return this._element},setElement:function(t,e,i){var n,s;return this._element=t,this._originalElement=t,this._initConfig(i),0===this.resizeFilters.length?n=e:(s=this,n=function(){s.applyFilters(e,s.resizeFilters,s._filteredEl||s._originalElement,!0)}),0!==this.filters.length?this.applyFilters(n):n&&n(this),this},setCrossOrigin:function(t){return this.crossOrigin=t,this._element.crossOrigin=t,this},getOriginalSize:function(){var t=this.getElement();return{width:t.width,height:t.height}},_stroke:function(t){
if(this.stroke&&0!==this.strokeWidth){var e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,-i),t.lineTo(e,-i),t.lineTo(e,i),t.lineTo(-e,i),t.lineTo(-e,-i),t.closePath()}},_renderDashedStroke:function(t){var e=-this.width/2,i=-this.height/2,n=this.width,s=this.height;t.save(),this._setStrokeStyles(t),t.beginPath(),fabric.util.drawDashedLine(t,e,i,e+n,i,this.strokeDashArray),fabric.util.drawDashedLine(t,e+n,i,e+n,i+s,this.strokeDashArray),fabric.util.drawDashedLine(t,e+n,i+s,e,i+s,this.strokeDashArray),fabric.util.drawDashedLine(t,e,i+s,e,i,this.strokeDashArray),t.closePath(),t.restore()},toObject:function(t){var i=[],n=[],s=1,o=1;this.filters.forEach(function(t){t&&("Resize"===t.type&&(s*=t.scaleX,o*=t.scaleY),i.push(t.toObject()))}),this.resizeFilters.forEach(function(t){t&&n.push(t.toObject())});var r=e(this.callSuper("toObject",["crossOrigin","alignX","alignY","meetOrSlice"].concat(t)),{src:this.getSrc(),filters:i,resizeFilters:n});return r.width/=s,r.height/=o,r},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=-this.width/2,n=-this.height/2,s="none",o=!0;if(this.group&&"path-group"===this.group.type&&(i=this.left,n=this.top),"none"!==this.alignX&&"none"!==this.alignY&&(s="x"+this.alignX+"Y"+this.alignY+" "+this.meetOrSlice),e.push('<g transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'">\n',"<image ",this.getSvgId(),'xlink:href="',this.getSvgSrc(o),'" x="',i,'" y="',n,'" style="',this.getSvgStyles(),'" width="',this.width,'" height="',this.height,'" preserveAspectRatio="',s,'"',"></image>\n"),this.stroke||this.strokeDashArray){var r=this.fill;this.fill=null,e.push("<rect ",'x="',i,'" y="',n,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'),this.fill=r}return e.push("</g>\n"),t?t(e.join("")):e.join("")},getSrc:function(t){var e=t?this._element:this._originalElement;return e?fabric.isLikelyNode?e._src:e.src:this.src||""},setSrc:function(t,e,i){fabric.util.loadImage(t,function(t){return this.setElement(t,e,i)},this,i&&i.crossOrigin)},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyFilters:function(t,e,i,n){if(e=e||this.filters,i=i||this._originalElement){var s,o,r=fabric.util.createImage(),a=this.canvas?this.canvas.getRetinaScaling():fabric.devicePixelRatio,l=this.minimumScaleTrigger/a,c=this;if(0===e.length)return this._element=i,t&&t(this),i;var d=fabric.util.createCanvasElement();return d.width=i.width,d.height=i.height,d.getContext("2d").drawImage(i,0,0,i.width,i.height),e.forEach(function(t){t&&(n?(s=c.scaleX<l?c.scaleX:1,o=c.scaleY<l?c.scaleY:1,1>s*a&&(s*=a),1>o*a&&(o*=a)):(s=t.scaleX,o=t.scaleY),t.applyTo(d,s,o),n||"Resize"!==t.type||(c.width*=t.scaleX,c.height*=t.scaleY))}),r.width=d.width,r.height=d.height,fabric.isLikelyNode?(r.src=d.toBuffer(void 0,fabric.Image.pngCompression),c._element=r,!n&&(c._filteredEl=r),t&&t(c)):(r.onload=function(){c._element=r,!n&&(c._filteredEl=r),t&&t(c),r.onload=d=null},r.src=d.toDataURL("image/png")),d}},_render:function(t,e){var i,n,s,o=this._findMargins();i=e?this.left:-this.width/2,n=e?this.top:-this.height/2,"slice"===this.meetOrSlice&&(t.beginPath(),t.rect(i,n,this.width,this.height),t.clip()),this.isMoving===!1&&this.resizeFilters.length&&this._needsResize()?(this._lastScaleX=this.scaleX,this._lastScaleY=this.scaleY,s=this.applyFilters(null,this.resizeFilters,this._filteredEl||this._originalElement,!0)):s=this._element,s&&t.drawImage(s,i+o.marginX,n+o.marginY,o.width,o.height),this._stroke(t),this._renderStroke(t)},_needsResize:function(){return this.scaleX!==this._lastScaleX||this.scaleY!==this._lastScaleY},_findMargins:function(){var t,e,i=this.width,n=this.height,s=0,o=0;return"none"===this.alignX&&"none"===this.alignY||(t=[this.width/this._element.width,this.height/this._element.height],e="meet"===this.meetOrSlice?Math.min.apply(null,t):Math.max.apply(null,t),i=this._element.width*e,n=this._element.height*e,"Mid"===this.alignX&&(s=(this.width-i)/2),"Max"===this.alignX&&(s=this.width-i),"Mid"===this.alignY&&(o=(this.height-n)/2),"Max"===this.alignY&&(o=this.height-n)),{width:i,height:n,marginX:s,marginY:o}},_resetWidthHeight:function(){var t=this.getElement();this.set("width",t.width),this.set("height",t.height)},_initElement:function(t,e,i){this.setElement(fabric.util.getById(t),i,e),fabric.util.addClass(this.getElement(),fabric.Image.CSS_CANVAS)},_initConfig:function(t){t||(t={}),this.setOptions(t),this._setWidthHeight(t),this._element&&this.crossOrigin&&(this._element.crossOrigin=this.crossOrigin)},_initFilters:function(t,e){t&&t.length?fabric.util.enlivenObjects(t,function(t){e&&e(t)},"fabric.Image.filters"):e&&e()},_setWidthHeight:function(t){this.width="width"in t?t.width:this.getElement()?this.getElement().width||0:0,this.height="height"in t?t.height:this.getElement()?this.getElement().height||0:0}}),fabric.Image.CSS_CANVAS="canvas-img",fabric.Image.prototype.getSvgSrc=fabric.Image.prototype.getSrc,fabric.Image.fromObject=function(t,e){fabric.util.loadImage(t.src,function(i,n){return n?void(e&&e(null,n)):void fabric.Image.prototype._initFilters.call(t,t.filters,function(n){t.filters=n||[],fabric.Image.prototype._initFilters.call(t,t.resizeFilters,function(n){return t.resizeFilters=n||[],new fabric.Image(i,t,e)})})},null,t.crossOrigin)},fabric.Image.fromURL=function(t,e,i){fabric.util.loadImage(t,function(t){e&&e(new fabric.Image(t,i))},null,i&&i.crossOrigin)},fabric.Image.ATTRIBUTE_NAMES=fabric.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin".split(" ")),fabric.Image.fromElement=function(t,i,n){var s,o=fabric.parseAttributes(t,fabric.Image.ATTRIBUTE_NAMES);o.preserveAspectRatio&&(s=fabric.util.parsePreserveAspectRatioAttribute(o.preserveAspectRatio),e(o,s)),fabric.Image.fromURL(o["xlink:href"],i,e(n?fabric.util.object.clone(n):{},o))},fabric.Image.async=!0,fabric.Image.pngCompression=1}("undefined"!=typeof exports?exports:this),fabric.util.object.extend(fabric.Object.prototype,{_getAngleValueForStraighten:function(){var t=this.getAngle()%360;return t>0?90*Math.round((t-1)/90):90*Math.round(t/90)},straighten:function(){return this.setAngle(this._getAngleValueForStraighten()),this},fxStraighten:function(t){t=t||{};var e=function(){},i=t.onComplete||e,n=t.onChange||e,s=this;return fabric.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(t){s.setAngle(t),n()},onComplete:function(){s.setCoords(),i()},onStart:function(){s.set("active",!1)}}),this}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{straightenObject:function(t){return t.straighten(),this.renderAll(),this},fxStraightenObject:function(t){return t.fxStraighten({onChange:this.renderAll.bind(this)}),this}}),fabric.Image.filters=fabric.Image.filters||{},fabric.Image.filters.BaseFilter=fabric.util.createClass({type:"BaseFilter",initialize:function(t){t&&this.setOptions(t)},setOptions:function(t){for(var e in t)this[e]=t[e]},toObject:function(){return{type:this.type}},toJSON:function(){return this.toObject()}}),fabric.Image.filters.BaseFilter.fromObject=function(t,e){var i=new fabric.Image.filters[t.type](t);return e&&e(i),i},function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,s=e.util.createClass;n.Brightness=s(n.BaseFilter,{type:"Brightness",initialize:function(t){t=t||{},this.brightness=t.brightness||0},applyTo:function(t){for(var e=t.getContext("2d"),i=e.getImageData(0,0,t.width,t.height),n=i.data,s=this.brightness,o=0,r=n.length;r>o;o+=4)n[o]+=s,n[o+1]+=s,n[o+2]+=s;e.putImageData(i,0,0)},toObject:function(){return i(this.callSuper("toObject"),{brightness:this.brightness})}}),e.Image.filters.Brightness.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,s=e.util.createClass;n.Convolute=s(n.BaseFilter,{type:"Convolute",initialize:function(t){t=t||{},this.opaque=t.opaque,this.matrix=t.matrix||[0,0,0,0,1,0,0,0,0]},applyTo:function(t){for(var e,i,n,s,o,r,a,l,c,d=this.matrix,h=t.getContext("2d"),u=h.getImageData(0,0,t.width,t.height),p=Math.round(Math.sqrt(d.length)),f=Math.floor(p/2),g=u.data,m=u.width,v=u.height,b=h.createImageData(m,v),y=b.data,w=this.opaque?1:0,x=0;v>x;x++)for(var C=0;m>C;C++){o=4*(x*m+C),e=0,i=0,n=0,s=0;for(var _=0;p>_;_++)for(var T=0;p>T;T++)a=x+_-f,r=C+T-f,0>a||a>v||0>r||r>m||(l=4*(a*m+r),c=d[_*p+T],e+=g[l]*c,i+=g[l+1]*c,n+=g[l+2]*c,s+=g[l+3]*c);y[o]=e,y[o+1]=i,y[o+2]=n,y[o+3]=s+w*(255-s)}h.putImageData(b,0,0)},toObject:function(){return i(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),e.Image.filters.Convolute.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,s=e.util.createClass;n.GradientTransparency=s(n.BaseFilter,{type:"GradientTransparency",initialize:function(t){t=t||{},this.threshold=t.threshold||100},applyTo:function(t){for(var e=t.getContext("2d"),i=e.getImageData(0,0,t.width,t.height),n=i.data,s=this.threshold,o=n.length,r=0,a=n.length;a>r;r+=4)n[r+3]=s+255*(o-r)/o;e.putImageData(i,0,0)},toObject:function(){return i(this.callSuper("toObject"),{threshold:this.threshold})}}),e.Image.filters.GradientTransparency.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Grayscale=n(i.BaseFilter,{type:"Grayscale",applyTo:function(t){for(var e,i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),s=n.data,o=n.width*n.height*4,r=0;o>r;)e=(s[r]+s[r+1]+s[r+2])/3,s[r]=e,s[r+1]=e,s[r+2]=e,r+=4;i.putImageData(n,0,0)}}),e.Image.filters.Grayscale.fromObject=function(t,i){return t=t||{},t.type="Grayscale",e.Image.filters.BaseFilter.fromObject(t,i)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Invert=n(i.BaseFilter,{type:"Invert",applyTo:function(t){var e,i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),s=n.data,o=s.length;for(e=0;o>e;e+=4)s[e]=255-s[e],s[e+1]=255-s[e+1],s[e+2]=255-s[e+2];i.putImageData(n,0,0)}}),e.Image.filters.Invert.fromObject=function(t,i){return t=t||{},t.type="Invert",e.Image.filters.BaseFilter.fromObject(t,i)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,s=e.util.createClass;n.Mask=s(n.BaseFilter,{type:"Mask",initialize:function(t){t=t||{},this.mask=t.mask,this.channel=[0,1,2,3].indexOf(t.channel)>-1?t.channel:0},applyTo:function(t){if(this.mask){var i,n=t.getContext("2d"),s=n.getImageData(0,0,t.width,t.height),o=s.data,r=this.mask.getElement(),a=e.util.createCanvasElement(),l=this.channel,c=s.width*s.height*4;a.width=t.width,a.height=t.height,a.getContext("2d").drawImage(r,0,0,t.width,t.height);var d=a.getContext("2d").getImageData(0,0,t.width,t.height),h=d.data;for(i=0;c>i;i+=4)o[i+3]=h[i+l];n.putImageData(s,0,0)}},toObject:function(){return i(this.callSuper("toObject"),{mask:this.mask.toObject(),channel:this.channel})}}),e.Image.filters.Mask.fromObject=function(t,i){e.util.loadImage(t.mask.src,function(n){return t.mask=new e.Image(n,t.mask),e.Image.filters.BaseFilter.fromObject(t,i)})},e.Image.filters.Mask.async=!0}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,s=e.util.createClass;n.Noise=s(n.BaseFilter,{type:"Noise",initialize:function(t){t=t||{},this.noise=t.noise||0},applyTo:function(t){for(var e,i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),s=n.data,o=this.noise,r=0,a=s.length;a>r;r+=4)e=(.5-Math.random())*o,s[r]+=e,s[r+1]+=e,s[r+2]+=e;i.putImageData(n,0,0)},toObject:function(){return i(this.callSuper("toObject"),{noise:this.noise})}}),e.Image.filters.Noise.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,s=e.util.createClass;n.Pixelate=s(n.BaseFilter,{type:"Pixelate",initialize:function(t){t=t||{},this.blocksize=t.blocksize||4},applyTo:function(t){var e,i,n,s,o,r,a,l=t.getContext("2d"),c=l.getImageData(0,0,t.width,t.height),d=c.data,h=c.height,u=c.width;for(i=0;h>i;i+=this.blocksize)for(n=0;u>n;n+=this.blocksize){e=4*i*u+4*n,s=d[e],o=d[e+1],r=d[e+2],a=d[e+3];for(var p=i,f=i+this.blocksize;f>p;p++)for(var g=n,m=n+this.blocksize;m>g;g++)e=4*p*u+4*g,d[e]=s,d[e+1]=o,d[e+2]=r,d[e+3]=a}l.putImageData(c,0,0)},toObject:function(){return i(this.callSuper("toObject"),{blocksize:this.blocksize})}}),e.Image.filters.Pixelate.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,s=e.util.createClass;n.RemoveWhite=s(n.BaseFilter,{type:"RemoveWhite",initialize:function(t){t=t||{},this.threshold=t.threshold||30,this.distance=t.distance||20},applyTo:function(t){for(var e,i,n,s=t.getContext("2d"),o=s.getImageData(0,0,t.width,t.height),r=o.data,a=this.threshold,l=this.distance,c=255-a,d=Math.abs,h=0,u=r.length;u>h;h+=4)e=r[h],i=r[h+1],n=r[h+2],e>c&&i>c&&n>c&&d(e-i)<l&&d(e-n)<l&&d(i-n)<l&&(r[h+3]=0);s.putImageData(o,0,0)},toObject:function(){return i(this.callSuper("toObject"),{threshold:this.threshold,distance:this.distance})}}),e.Image.filters.RemoveWhite.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Sepia=n(i.BaseFilter,{type:"Sepia",applyTo:function(t){var e,i,n=t.getContext("2d"),s=n.getImageData(0,0,t.width,t.height),o=s.data,r=o.length;for(e=0;r>e;e+=4)i=.3*o[e]+.59*o[e+1]+.11*o[e+2],o[e]=i+100,o[e+1]=i+50,o[e+2]=i+255;n.putImageData(s,0,0)}}),e.Image.filters.Sepia.fromObject=function(t,i){return t=t||{},t.type="Sepia",new e.Image.filters.BaseFilter.fromObject(t,i)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Sepia2=n(i.BaseFilter,{type:"Sepia2",applyTo:function(t){var e,i,n,s,o=t.getContext("2d"),r=o.getImageData(0,0,t.width,t.height),a=r.data,l=a.length;for(e=0;l>e;e+=4)i=a[e],n=a[e+1],s=a[e+2],a[e]=(.393*i+.769*n+.189*s)/1.351,a[e+1]=(.349*i+.686*n+.168*s)/1.203,a[e+2]=(.272*i+.534*n+.131*s)/2.14;o.putImageData(r,0,0)}}),e.Image.filters.Sepia2.fromObject=function(t,i){return t=t||{},t.type="Sepia2",new e.Image.filters.BaseFilter.fromObject(t,i)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,s=e.util.createClass;n.Tint=s(n.BaseFilter,{type:"Tint",initialize:function(t){t=t||{},this.color=t.color||"#000000",this.opacity="undefined"!=typeof t.opacity?t.opacity:new e.Color(this.color).getAlpha()},applyTo:function(t){var i,n,s,o,r,a,l,c,d,h=t.getContext("2d"),u=h.getImageData(0,0,t.width,t.height),p=u.data,f=p.length;for(d=new e.Color(this.color).getSource(),n=d[0]*this.opacity,s=d[1]*this.opacity,o=d[2]*this.opacity,c=1-this.opacity,i=0;f>i;i+=4)r=p[i],a=p[i+1],l=p[i+2],p[i]=n+r*c,p[i+1]=s+a*c,p[i+2]=o+l*c;h.putImageData(u,0,0)},toObject:function(){return i(this.callSuper("toObject"),{color:this.color,opacity:this.opacity})}}),e.Image.filters.Tint.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,s=e.util.createClass;n.Multiply=s(n.BaseFilter,{type:"Multiply",initialize:function(t){t=t||{},this.color=t.color||"#000000"},applyTo:function(t){var i,n,s=t.getContext("2d"),o=s.getImageData(0,0,t.width,t.height),r=o.data,a=r.length;for(n=new e.Color(this.color).getSource(),i=0;a>i;i+=4)r[i]*=n[0]/255,r[i+1]*=n[1]/255,r[i+2]*=n[2]/255;s.putImageData(o,0,0)},toObject:function(){return i(this.callSuper("toObject"),{color:this.color})}}),e.Image.filters.Multiply.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric,i=e.Image.filters,n=e.util.createClass;i.Blend=n(i.BaseFilter,{type:"Blend",initialize:function(t){t=t||{},this.color=t.color||"#000",this.image=t.image||!1,this.mode=t.mode||"multiply",this.alpha=t.alpha||1},applyTo:function(t){var i,n,s,o,r,a,l,c,d,h,u=t.getContext("2d"),p=u.getImageData(0,0,t.width,t.height),f=p.data,g=!1;if(this.image){g=!0;var m=e.util.createCanvasElement();m.width=this.image.width,m.height=this.image.height;var v=new e.StaticCanvas(m);v.add(this.image);var b=v.getContext("2d");h=b.getImageData(0,0,v.width,v.height).data}else h=new e.Color(this.color).getSource(),i=h[0]*this.alpha,n=h[1]*this.alpha,s=h[2]*this.alpha;for(var y=0,w=f.length;w>y;y+=4)switch(o=f[y],r=f[y+1],a=f[y+2],g&&(i=h[y]*this.alpha,n=h[y+1]*this.alpha,s=h[y+2]*this.alpha),this.mode){case"multiply":f[y]=o*i/255,f[y+1]=r*n/255,f[y+2]=a*s/255;break;case"screen":f[y]=1-(1-o)*(1-i),f[y+1]=1-(1-r)*(1-n),f[y+2]=1-(1-a)*(1-s);break;case"add":f[y]=Math.min(255,o+i),f[y+1]=Math.min(255,r+n),f[y+2]=Math.min(255,a+s);break;case"diff":case"difference":f[y]=Math.abs(o-i),f[y+1]=Math.abs(r-n),f[y+2]=Math.abs(a-s);break;case"subtract":l=o-i,c=r-n,d=a-s,f[y]=0>l?0:l,f[y+1]=0>c?0:c,f[y+2]=0>d?0:d;break;case"darken":f[y]=Math.min(o,i),f[y+1]=Math.min(r,n),f[y+2]=Math.min(a,s);break;case"lighten":f[y]=Math.max(o,i),f[y+1]=Math.max(r,n),f[y+2]=Math.max(a,s)}u.putImageData(p,0,0)},toObject:function(){return{color:this.color,image:this.image,mode:this.mode,alpha:this.alpha}}}),e.Image.filters.Blend.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=Math.pow,n=Math.floor,s=Math.sqrt,o=Math.abs,r=Math.max,a=Math.round,l=Math.sin,c=Math.ceil,d=e.Image.filters,h=e.util.createClass;d.Resize=h(d.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:0,scaleY:0,lanczosLobes:3,applyTo:function(t,e,i){if(1!==e||1!==i){this.rcpScaleX=1/e,this.rcpScaleY=1/i;var n,s=t.width,o=t.height,r=a(s*e),l=a(o*i);"sliceHack"===this.resizeType&&(n=this.sliceByTwo(t,s,o,r,l)),"hermite"===this.resizeType&&(n=this.hermiteFastResize(t,s,o,r,l)),"bilinear"===this.resizeType&&(n=this.bilinearFiltering(t,s,o,r,l)),"lanczos"===this.resizeType&&(n=this.lanczosResize(t,s,o,r,l)),t.width=r,t.height=l,t.getContext("2d").putImageData(n,0,0)}},sliceByTwo:function(t,i,s,o,a){var l,c=t.getContext("2d"),d=.5,h=.5,u=1,p=1,f=!1,g=!1,m=i,v=s,b=e.util.createCanvasElement(),y=b.getContext("2d");for(o=n(o),a=n(a),b.width=r(o,i),b.height=r(a,s),o>i&&(d=2,u=-1),a>s&&(h=2,p=-1),l=c.getImageData(0,0,i,s),t.width=r(o,i),t.height=r(a,s),c.putImageData(l,0,0);!f||!g;)i=m,s=v,o*u<n(m*d*u)?m=n(m*d):(m=o,f=!0),a*p<n(v*h*p)?v=n(v*h):(v=a,g=!0),l=c.getImageData(0,0,i,s),y.putImageData(l,0,0),c.clearRect(0,0,m,v),c.drawImage(b,0,0,i,s,0,0,m,v);return c.getImageData(0,0,o,a)},lanczosResize:function(t,e,r,a,d){function h(t){return function(e){if(e>t)return 0;if(e*=Math.PI,o(e)<1e-16)return 1;var i=e/t;return l(e)*l(i)/e/i}}function u(t){var l,c,h,p,f,A,D,E,j,M,I;for(k.x=(t+.5)*y,O.x=n(k.x),l=0;d>l;l++){for(k.y=(l+.5)*w,O.y=n(k.y),f=0,A=0,D=0,E=0,j=0,c=O.x-_;c<=O.x+_;c++)if(!(0>c||c>=e)){M=n(1e3*o(c-k.x)),S[M]||(S[M]={});for(var P=O.y-T;P<=O.y+T;P++)0>P||P>=r||(I=n(1e3*o(P-k.y)),S[M][I]||(S[M][I]=b(s(i(M*x,2)+i(I*C,2))/1e3)),h=S[M][I],h>0&&(p=4*(P*e+c),f+=h,A+=h*m[p],D+=h*m[p+1],E+=h*m[p+2],j+=h*m[p+3]))}p=4*(l*a+t),v[p]=A/f,v[p+1]=D/f,v[p+2]=E/f,v[p+3]=j/f}return++t<a?u(t):g}var p=t.getContext("2d"),f=p.getImageData(0,0,e,r),g=p.getImageData(0,0,a,d),m=f.data,v=g.data,b=h(this.lanczosLobes),y=this.rcpScaleX,w=this.rcpScaleY,x=2/this.rcpScaleX,C=2/this.rcpScaleY,_=c(y*this.lanczosLobes/2),T=c(w*this.lanczosLobes/2),S={},k={},O={};return u(0)},bilinearFiltering:function(t,e,i,s,o){var r,a,l,c,d,h,u,p,f,g,m,v,b,y=0,w=this.rcpScaleX,x=this.rcpScaleY,C=t.getContext("2d"),_=4*(e-1),T=C.getImageData(0,0,e,i),S=T.data,k=C.getImageData(0,0,s,o),O=k.data;for(u=0;o>u;u++)for(p=0;s>p;p++)for(d=n(w*p),h=n(x*u),f=w*p-d,g=x*u-h,b=4*(h*e+d),m=0;4>m;m++)r=S[b+m],a=S[b+4+m],l=S[b+_+m],c=S[b+_+4+m],v=r*(1-f)*(1-g)+a*f*(1-g)+l*g*(1-f)+c*f*g,O[y++]=v;return k},hermiteFastResize:function(t,e,i,r,a){for(var l=this.rcpScaleX,d=this.rcpScaleY,h=c(l/2),u=c(d/2),p=t.getContext("2d"),f=p.getImageData(0,0,e,i),g=f.data,m=p.getImageData(0,0,r,a),v=m.data,b=0;a>b;b++)for(var y=0;r>y;y++){for(var w=4*(y+b*r),x=0,C=0,_=0,T=0,S=0,k=0,O=0,A=(b+.5)*d,D=n(b*d);(b+1)*d>D;D++)for(var E=o(A-(D+.5))/u,j=(y+.5)*l,M=E*E,I=n(y*l);(y+1)*l>I;I++){var P=o(j-(I+.5))/h,L=s(M+P*P);L>1&&-1>L||(x=2*L*L*L-3*L*L+1,x>0&&(P=4*(I+D*e),O+=x*g[P+3],_+=x,g[P+3]<255&&(x=x*g[P+3]/250),T+=x*g[P],S+=x*g[P+1],k+=x*g[P+2],C+=x))}v[w]=T/C,v[w+1]=S/C,v[w+2]=k/C,v[w+3]=O/_}return m},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),e.Image.filters.Resize.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,s=e.util.createClass;n.ColorMatrix=s(n.BaseFilter,{type:"ColorMatrix",initialize:function(t){t||(t={}),this.matrix=t.matrix||[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]},applyTo:function(t){var e,i,n,s,o,r=t.getContext("2d"),a=r.getImageData(0,0,t.width,t.height),l=a.data,c=l.length,d=this.matrix;for(e=0;c>e;e+=4)i=l[e],n=l[e+1],s=l[e+2],o=l[e+3],l[e]=i*d[0]+n*d[1]+s*d[2]+o*d[3]+d[4],l[e+1]=i*d[5]+n*d[6]+s*d[7]+o*d[8]+d[9],l[e+2]=i*d[10]+n*d[11]+s*d[12]+o*d[13]+d[14],l[e+3]=i*d[15]+n*d[16]+s*d[17]+o*d[18]+d[19];r.putImageData(a,0,0)},toObject:function(){return i(this.callSuper("toObject"),{type:this.type,matrix:this.matrix})}}),e.Image.filters.ColorMatrix.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,s=e.util.createClass;n.Contrast=s(n.BaseFilter,{type:"Contrast",initialize:function(t){t=t||{},this.contrast=t.contrast||0},applyTo:function(t){for(var e=t.getContext("2d"),i=e.getImageData(0,0,t.width,t.height),n=i.data,s=259*(this.contrast+255)/(255*(259-this.contrast)),o=0,r=n.length;r>o;o+=4)n[o]=s*(n[o]-128)+128,n[o+1]=s*(n[o+1]-128)+128,n[o+2]=s*(n[o+2]-128)+128;e.putImageData(i,0,0)},toObject:function(){return i(this.callSuper("toObject"),{contrast:this.contrast})}}),e.Image.filters.Contrast.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,s=e.util.createClass;n.Saturate=s(n.BaseFilter,{type:"Saturate",initialize:function(t){t=t||{},this.saturate=t.saturate||0},applyTo:function(t){for(var e,i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),s=n.data,o=.01*-this.saturate,r=0,a=s.length;a>r;r+=4)e=Math.max(s[r],s[r+1],s[r+2]),s[r]+=e!==s[r]?(e-s[r])*o:0,s[r+1]+=e!==s[r+1]?(e-s[r+1])*o:0,s[r+2]+=e!==s[r+2]?(e-s[r+2])*o:0;i.putImageData(n,0,0)},toObject:function(){return i(this.callSuper("toObject"),{saturate:this.saturate})}}),e.Image.filters.Saturate.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.toFixed,n=e.Object.NUM_FRACTION_DIGITS,s=2;if(e.Text)return void e.warn("fabric.Text is already defined");var o=e.Object.prototype.stateProperties.concat();o.push("fontFamily","fontWeight","fontSize","text","textDecoration","textAlign","fontStyle","lineHeight","textBackgroundColor","charSpacing");var r=e.Object.prototype.cacheProperties.concat();r.push("fontFamily","fontWeight","fontSize","text","textDecoration","textAlign","fontStyle","lineHeight","textBackgroundColor","charSpacing","styles"),e.Text=e.util.createClass(e.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",textDecoration:"",textAlign:"left",fontStyle:"",lineHeight:1.16,textBackgroundColor:"",stateProperties:o,cacheProperties:r,stroke:null,shadow:null,_fontSizeFraction:.25,_fontSizeMult:1.13,charSpacing:0,initialize:function(t,e){e=e||{},this.text=t,this.__skipDimension=!0,this.callSuper("initialize",e),this.__skipDimension=!1,this._initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},_initDimensions:function(t){this.__skipDimension||(t||(t=e.util.createCanvasElement().getContext("2d"),this._setTextStyles(t)),this._textLines=this._splitTextIntoLines(),this._clearCache(),this.width=this._getTextWidth(t)||this.cursorWidth||s,this.height=this._getTextHeight(t))},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var t=this.callSuper("_getCacheCanvasDimensions"),e=2*this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t},_render:function(t){this._setTextStyles(t),this.group&&"path-group"===this.group.type&&t.translate(this.left,this.top),this._renderTextLinesBackground(t),this._renderText(t),this._renderTextDecoration(t)},_renderText:function(t){this._renderTextFill(t),this._renderTextStroke(t)},_setTextStyles:function(t){t.textBaseline="alphabetic",t.font=this._getFontDeclaration()},_getTextHeight:function(){return this._getHeightOfSingleLine()+(this._textLines.length-1)*this._getHeightOfLine()},_getTextWidth:function(t){for(var e=this._getLineWidth(t,0),i=1,n=this._textLines.length;n>i;i++){var s=this._getLineWidth(t,i);s>e&&(e=s)}return e},_renderChars:function(t,e,i,n,s){var o,r,a=t.slice(0,-4);if(this[a].toLive){var l=-this.width/2+this[a].offsetX||0,c=-this.height/2+this[a].offsetY||0;e.save(),e.translate(l,c),n-=l,s-=c}if(0!==this.charSpacing){var d=this._getWidthOfCharSpacing();i=i.split("");for(var h=0,u=i.length;u>h;h++)o=i[h],r=e.measureText(o).width+d,e[t](o,n,s),n+=r>0?r:0}else e[t](i,n,s);this[a].toLive&&e.restore()},_renderTextLine:function(t,e,i,n,s,o){s-=this.fontSize*this._fontSizeFraction;var r=this._getLineWidth(e,o);if("justify"!==this.textAlign||this.width<r)return void this._renderChars(t,e,i,n,s,o);for(var a,l=i.split(/\s+/),c=0,d=this._getWidthOfWords(e,l.join(" "),o,0),h=this.width-d,u=l.length-1,p=u>0?h/u:0,f=0,g=0,m=l.length;m>g;g++){for(;" "===i[c]&&c<i.length;)c++;a=l[g],this._renderChars(t,e,a,n+f,s,o,c),f+=this._getWidthOfWords(e,a,o,c)+p,c+=a.length}},_getWidthOfWords:function(t,e){var i,n,s=t.measureText(e).width;return 0!==this.charSpacing&&(i=e.split("").length,n=i*this._getWidthOfCharSpacing(),s+=n),s>0?s:0},_getLeftOffset:function(){return-this.width/2},_getTopOffset:function(){return-this.height/2},isEmptyStyles:function(){return!0},_renderTextCommon:function(t,e){for(var i=0,n=this._getLeftOffset(),s=this._getTopOffset(),o=0,r=this._textLines.length;r>o;o++){var a=this._getHeightOfLine(t,o),l=a/this.lineHeight,c=this._getLineWidth(t,o),d=this._getLineLeftOffset(c);this._renderTextLine(e,t,this._textLines[o],n+d,s+i+l,o),i+=a}},_renderTextFill:function(t){!this.fill&&this.isEmptyStyles()||this._renderTextCommon(t,"fillText")},_renderTextStroke:function(t){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())},_getHeightOfLine:function(){return this._getHeightOfSingleLine()*this.lineHeight},_getHeightOfSingleLine:function(){return this.fontSize*this._fontSizeMult},_renderTextLinesBackground:function(t){if(this.textBackgroundColor){var e,i,n,s=0,o=t.fillStyle;t.fillStyle=this.textBackgroundColor;for(var r=0,a=this._textLines.length;a>r;r++)e=this._getHeightOfLine(t,r),i=this._getLineWidth(t,r),i>0&&(n=this._getLineLeftOffset(i),t.fillRect(this._getLeftOffset()+n,this._getTopOffset()+s,i,e/this.lineHeight)),s+=e;t.fillStyle=o,this._removeShadow(t)}},_getLineLeftOffset:function(t){return"center"===this.textAlign?(this.width-t)/2:"right"===this.textAlign?this.width-t:0},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[]},_shouldClearDimensionCache:function(){var t=this._forceClearCache;return t||(t=this.hasStateChanged("_dimensionAffectingProps")),t&&(this.saveState({propertySet:"_dimensionAffectingProps"}),this.dirty=!0),t},_getLineWidth:function(t,e){if(this.__lineWidths[e])return-1===this.__lineWidths[e]?this.width:this.__lineWidths[e];var i,n,s=this._textLines[e];return i=""===s?0:this._measureLine(t,e),this.__lineWidths[e]=i,i&&"justify"===this.textAlign&&(n=s.split(/\s+/),n.length>1&&(this.__lineWidths[e]=-1)),i},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},_measureLine:function(t,e){var i,n,s=this._textLines[e],o=t.measureText(s).width,r=0;return 0!==this.charSpacing&&(i=s.split("").length,r=(i-1)*this._getWidthOfCharSpacing()),n=o+r,n>0?n:0},_renderTextDecoration:function(t){function e(e){var s,o,r,a,l,c,d,h=0;for(s=0,o=n._textLines.length;o>s;s++){for(l=n._getLineWidth(t,s),c=n._getLineLeftOffset(l),d=n._getHeightOfLine(t,s),r=0,a=e.length;a>r;r++)t.fillRect(n._getLeftOffset()+c,h+(n._fontSizeMult-1+e[r])*n.fontSize-i,l,n.fontSize/15);h+=d}}if(this.textDecoration){var i=this.height/2,n=this,s=[];this.textDecoration.indexOf("underline")>-1&&s.push(.85),this.textDecoration.indexOf("line-through")>-1&&s.push(.43),this.textDecoration.indexOf("overline")>-1&&s.push(-.12),s.length>0&&e(s)}},_getFontDeclaration:function(){return[e.isLikelyNode?this.fontWeight:this.fontStyle,e.isLikelyNode?this.fontStyle:this.fontWeight,this.fontSize+"px",e.isLikelyNode?'"'+this.fontFamily+'"':this.fontFamily].join(" ")},render:function(t,e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&(this._setTextStyles(t),this._initDimensions(t)),this.callSuper("render",t,e)))},_splitTextIntoLines:function(){return this.text.split(this._reNewline)},toObject:function(t){var e=["text","fontSize","fontWeight","fontFamily","fontStyle","lineHeight","textDecoration","textAlign","textBackgroundColor","charSpacing"].concat(t);return this.callSuper("toObject",e)},toSVG:function(t){this.ctx||(this.ctx=e.util.createCanvasElement().getContext("2d"));var i=this._createBaseSVGMarkup(),n=this._getSVGLeftTopOffsets(this.ctx),s=this._getSVGTextAndBg(n.textTop,n.textLeft);return this._wrapSVGTextAndBg(i,s),t?t(i.join("")):i.join("")},_getSVGLeftTopOffsets:function(t){var e=this._getHeightOfLine(t,0),i=-this.width/2,n=0;return{textLeft:i+(this.group&&"path-group"===this.group.type?this.left:0),textTop:n+(this.group&&"path-group"===this.group.type?-this.top:0),lineTop:e}},_wrapSVGTextAndBg:function(t,e){var i=!0,n=this.getSvgFilter(),s=""===n?"":' style="'+n+'"';t.push("	<g ",this.getSvgId(),'transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"',s,">\n",e.textBgRects.join(""),"		<text ",this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",this.textDecoration?'text-decoration="'+this.textDecoration+'" ':"",'style="',this.getSvgStyles(i),'" >\n',e.textSpans.join(""),"		</text>\n","	</g>\n")},_getSVGTextAndBg:function(t,e){var i=[],n=[],s=0;this._setSVGBg(n);for(var o=0,r=this._textLines.length;r>o;o++)this.textBackgroundColor&&this._setSVGTextLineBg(n,o,e,t,s),this._setSVGTextLineText(o,i,s,e,t,n),
s+=this._getHeightOfLine(this.ctx,o);return{textSpans:i,textBgRects:n}},_setSVGTextLineText:function(t,s,o,r,a){var l=this.fontSize*(this._fontSizeMult-this._fontSizeFraction)-a+o-this.height/2;return"justify"===this.textAlign?void this._setSVGTextLineJustifed(t,s,l,r):void s.push('			<tspan x="',i(r+this._getLineLeftOffset(this._getLineWidth(this.ctx,t)),n),'" ','y="',i(l,n),'" ',this._getFillAttributes(this.fill),">",e.util.string.escapeXml(this._textLines[t]),"</tspan>\n")},_setSVGTextLineJustifed:function(t,s,o,r){var a=e.util.createCanvasElement().getContext("2d");this._setTextStyles(a);var l,c,d=this._textLines[t],h=d.split(/\s+/),u=this._getWidthOfWords(a,h.join("")),p=this.width-u,f=h.length-1,g=f>0?p/f:0,m=this._getFillAttributes(this.fill);for(r+=this._getLineLeftOffset(this._getLineWidth(a,t)),t=0,c=h.length;c>t;t++)l=h[t],s.push('			<tspan x="',i(r,n),'" ','y="',i(o,n),'" ',m,">",e.util.string.escapeXml(l),"</tspan>\n"),r+=this._getWidthOfWords(a,l)+g},_setSVGTextLineBg:function(t,e,s,o,r){t.push("		<rect ",this._getFillAttributes(this.textBackgroundColor),' x="',i(s+this._getLineLeftOffset(this._getLineWidth(this.ctx,e)),n),'" y="',i(r-this.height/2,n),'" width="',i(this._getLineWidth(this.ctx,e),n),'" height="',i(this._getHeightOfLine(this.ctx,e)/this.lineHeight,n),'"></rect>\n')},_setSVGBg:function(t){this.backgroundColor&&t.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',i(-this.width/2,n),'" y="',i(-this.height/2,n),'" width="',i(this.width,n),'" height="',i(this.height,n),'"></rect>\n')},_getFillAttributes:function(t){var i=t&&"string"==typeof t?new e.Color(t):"";return i&&i.getSource()&&1!==i.getAlpha()?'opacity="'+i.getAlpha()+'" fill="'+i.setAlpha(1).toRgb()+'"':'fill="'+t+'"'},_set:function(t,e){this.callSuper("_set",t,e),this._dimensionAffectingProps.indexOf(t)>-1&&(this._initDimensions(),this.setCoords())},complexity:function(){return 1}}),e.Text.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size text-decoration text-anchor".split(" ")),e.Text.DEFAULT_SVG_FONT_SIZE=16,e.Text.fromElement=function(t,i){if(!t)return null;var n=e.parseAttributes(t,e.Text.ATTRIBUTE_NAMES);i=e.util.object.extend(i?e.util.object.clone(i):{},n),i.top=i.top||0,i.left=i.left||0,"dx"in n&&(i.left+=n.dx),"dy"in n&&(i.top+=n.dy),"fontSize"in i||(i.fontSize=e.Text.DEFAULT_SVG_FONT_SIZE),i.originX||(i.originX="left");var s="";"textContent"in t?s=t.textContent:"firstChild"in t&&null!==t.firstChild&&"data"in t.firstChild&&null!==t.firstChild.data&&(s=t.firstChild.data),s=s.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var o=new e.Text(s,i),r=o.getHeight()/o.height,a=(o.height+o.strokeWidth)*o.lineHeight-o.height,l=a*r,c=o.getHeight()+l,d=0;return"left"===o.originX&&(d=o.getWidth()/2),"right"===o.originX&&(d=-o.getWidth()/2),o.set({left:o.getLeft()+d,top:o.getTop()-c/2+o.fontSize*(.18+o._fontSizeFraction)/o.lineHeight}),o},e.Text.fromObject=function(t,i,n){return e.Object._fromObject("Text",t,i,n,"text")},e.util.createAccessors(e.Text)}("undefined"!=typeof exports?exports:this),function(){var t=fabric.util.object.clone;fabric.IText=fabric.util.createClass(fabric.Text,fabric.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"#333",cursorDelay:1e3,cursorDuration:600,styles:null,caching:!0,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],initialize:function(t,e){this.styles=e?e.styles||{}:{},this.callSuper("initialize",t,e),this.initBehavior()},_clearCache:function(){this.callSuper("_clearCache"),this.__widthOfSpace=[]},isEmptyStyles:function(){if(!this.styles)return!0;var t=this.styles;for(var e in t)for(var i in t[e])for(var n in t[e][i])return!1;return!0},setSelectionStart:function(t){t=Math.max(t,0),this._updateAndFire("selectionStart",t)},setSelectionEnd:function(t){t=Math.min(t,this.text.length),this._updateAndFire("selectionEnd",t)},_updateAndFire:function(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},getSelectionStyles:function(t,e){if(2===arguments.length){for(var i=[],n=t;e>n;n++)i.push(this.getSelectionStyles(n));return i}var s=this.get2DCursorLocation(t),o=this._getStyleDeclaration(s.lineIndex,s.charIndex);return o||{}},setSelectionStyles:function(t){if(this.selectionStart===this.selectionEnd)this._extendStyles(this.selectionStart,t);else for(var e=this.selectionStart;e<this.selectionEnd;e++)this._extendStyles(e,t);return this._forceClearCache=!0,this},_extendStyles:function(t,e){var i=this.get2DCursorLocation(t);this._getLineStyle(i.lineIndex)||this._setLineStyle(i.lineIndex,{}),this._getStyleDeclaration(i.lineIndex,i.charIndex)||this._setStyleDeclaration(i.lineIndex,i.charIndex,{}),fabric.util.object.extend(this._getStyleDeclaration(i.lineIndex,i.charIndex),e)},_initDimensions:function(t){t||this.clearContextTop(),this.callSuper("_initDimensions",t)},render:function(t,e){this.clearContextTop(),this.callSuper("render",t,e),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(t){this.callSuper("_render",t),this.ctx=t},clearContextTop:function(){if(this.active&&this.isEditing&&this.canvas&&this.canvas.contextTop){var t=this.canvas.contextTop;t.save(),t.transform.apply(t,this.canvas.viewportTransform),this.transform(t),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this._clearTextArea(t),t.restore()}},renderCursorOrSelection:function(){if(this.active&&this.isEditing){var t,e,i=this.text.split("");this.canvas&&this.canvas.contextTop?(e=this.canvas.contextTop,e.save(),e.transform.apply(e,this.canvas.viewportTransform),this.transform(e),this.transformMatrix&&e.transform.apply(e,this.transformMatrix),this._clearTextArea(e)):(e=this.ctx,e.save()),this.selectionStart===this.selectionEnd?(t=this._getCursorBoundaries(i,"cursor"),this.renderCursor(t,e)):(t=this._getCursorBoundaries(i,"selection"),this.renderSelection(i,t,e)),e.restore()}},_clearTextArea:function(t){var e=this.width+4,i=this.height+4;t.clearRect(-e/2,-i/2,e,i)},get2DCursorLocation:function(t){"undefined"==typeof t&&(t=this.selectionStart);for(var e=this._textLines.length,i=0;e>i;i++){if(t<=this._textLines[i].length)return{lineIndex:i,charIndex:t};t-=this._textLines[i].length+1}return{lineIndex:i-1,charIndex:this._textLines[i-1].length<t?this._textLines[i-1].length:t}},getCurrentCharStyle:function(t,e){var i=this._getStyleDeclaration(t,0===e?0:e-1);return{fontSize:i&&i.fontSize||this.fontSize,fill:i&&i.fill||this.fill,textBackgroundColor:i&&i.textBackgroundColor||this.textBackgroundColor,textDecoration:i&&i.textDecoration||this.textDecoration,fontFamily:i&&i.fontFamily||this.fontFamily,fontWeight:i&&i.fontWeight||this.fontWeight,fontStyle:i&&i.fontStyle||this.fontStyle,stroke:i&&i.stroke||this.stroke,strokeWidth:i&&i.strokeWidth||this.strokeWidth}},getCurrentCharFontSize:function(t,e){var i=this._getStyleDeclaration(t,0===e?0:e-1);return i&&i.fontSize?i.fontSize:this.fontSize},getCurrentCharColor:function(t,e){var i=this._getStyleDeclaration(t,0===e?0:e-1);return i&&i.fill?i.fill:this.cursorColor},_getCursorBoundaries:function(t,e){var i=Math.round(this._getLeftOffset()),n=this._getTopOffset(),s=this._getCursorBoundariesOffsets(t,e);return{left:i,top:n,leftOffset:s.left+s.lineLeft,topOffset:s.top}},_getCursorBoundariesOffsets:function(t,e){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;for(var i,n=0,s=0,o=0,r=0,a=0,l=0;l<this.selectionStart;l++)"\n"===t[l]?(a=0,r+=this._getHeightOfLine(this.ctx,s),s++,o=0):(a+=this._getWidthOfChar(this.ctx,t[l],s,o),o++),n=this._getLineLeftOffset(this._getLineWidth(this.ctx,s));return"cursor"===e&&(r+=(1-this._fontSizeFraction)*this._getHeightOfLine(this.ctx,s)/this.lineHeight-this.getCurrentCharFontSize(s,o)*(1-this._fontSizeFraction)),0!==this.charSpacing&&o===this._textLines[s].length&&(a-=this._getWidthOfCharSpacing()),i={top:r,left:a>0?a:0,lineLeft:n},this.cursorOffsetCache=i,this.cursorOffsetCache},renderCursor:function(t,e){var i=this.get2DCursorLocation(),n=i.lineIndex,s=i.charIndex,o=this.getCurrentCharFontSize(n,s),r=t.leftOffset,a=this.scaleX*this.canvas.getZoom(),l=this.cursorWidth/a;e.fillStyle=this.getCurrentCharColor(n,s),e.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,e.fillRect(t.left+r-l/2,t.top+t.topOffset,l,o)},renderSelection:function(t,e,i){i.fillStyle=this.selectionColor;for(var n=this.get2DCursorLocation(this.selectionStart),s=this.get2DCursorLocation(this.selectionEnd),o=n.lineIndex,r=s.lineIndex,a=o;r>=a;a++){var l=this._getLineLeftOffset(this._getLineWidth(i,a))||0,c=this._getHeightOfLine(this.ctx,a),d=0,h=0,u=this._textLines[a];if(a===o){for(var p=0,f=u.length;f>p;p++)p>=n.charIndex&&(a!==r||p<s.charIndex)&&(h+=this._getWidthOfChar(i,u[p],a,p)),p<n.charIndex&&(l+=this._getWidthOfChar(i,u[p],a,p));p===u.length&&(h-=this._getWidthOfCharSpacing())}else if(a>o&&r>a)h+=this._getLineWidth(i,a)||5;else if(a===r){for(var g=0,m=s.charIndex;m>g;g++)h+=this._getWidthOfChar(i,u[g],a,g);s.charIndex===u.length&&(h-=this._getWidthOfCharSpacing())}d=c,(this.lineHeight<1||a===r&&this.lineHeight>1)&&(c/=this.lineHeight),i.fillRect(e.left+l,e.top+e.topOffset,h>0?h:0,c),e.topOffset+=d}},_renderChars:function(t,e,i,n,s,o,r){if(this.isEmptyStyles())return this._renderCharsFast(t,e,i,n,s);r=r||0;var a,l,c=this._getHeightOfLine(e,o),d="";e.save(),s-=c/this.lineHeight*this._fontSizeFraction;for(var h=r,u=i.length+r;u>=h;h++)a=a||this.getCurrentCharStyle(o,h),l=this.getCurrentCharStyle(o,h+1),(this._hasStyleChanged(a,l)||h===u)&&(this._renderChar(t,e,o,h-1,d,n,s,c),d="",a=l),d+=i[h-r];e.restore()},_renderCharsFast:function(t,e,i,n,s){"fillText"===t&&this.fill&&this.callSuper("_renderChars",t,e,i,n,s),"strokeText"===t&&(this.stroke&&this.strokeWidth>0||this.skipFillStrokeCheck)&&this.callSuper("_renderChars",t,e,i,n,s)},_renderChar:function(t,e,i,n,s,o,r,a){var l,c,d,h,u,p,f,g,m,v=this._getStyleDeclaration(i,n);if(v?(c=this._getHeightOfChar(e,s,i,n),h=v.stroke,d=v.fill,p=v.textDecoration):c=this.fontSize,h=(h||this.stroke)&&"strokeText"===t,d=(d||this.fill)&&"fillText"===t,v&&e.save(),l=this._applyCharStylesGetWidth(e,s,i,n,v||null),p=p||this.textDecoration,v&&v.textBackgroundColor&&this._removeShadow(e),0!==this.charSpacing){g=this._getWidthOfCharSpacing(),f=s.split(""),l=0;for(var b,y=0,w=f.length;w>y;y++)b=f[y],d&&e.fillText(b,o+l,r),h&&e.strokeText(b,o+l,r),m=e.measureText(b).width+g,l+=m>0?m:0}else d&&e.fillText(s,o,r),h&&e.strokeText(s,o,r);(p||""!==p)&&(u=this._fontSizeFraction*a/this.lineHeight,this._renderCharDecoration(e,p,o,r,u,l,c)),v&&e.restore(),e.translate(l,0)},_hasStyleChanged:function(t,e){return t.fill!==e.fill||t.fontSize!==e.fontSize||t.textBackgroundColor!==e.textBackgroundColor||t.textDecoration!==e.textDecoration||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth},_renderCharDecoration:function(t,e,i,n,s,o,r){if(e){var a,l,c=r/15,d={underline:n+r/10,"line-through":n-r*(this._fontSizeFraction+this._fontSizeMult-1)+c,overline:n-(this._fontSizeMult-this._fontSizeFraction)*r},h=["underline","line-through","overline"];for(a=0;a<h.length;a++)l=h[a],e.indexOf(l)>-1&&t.fillRect(i,d[l],o,c)}},_renderTextLine:function(t,e,i,n,s,o){this.isEmptyStyles()||(s+=this.fontSize*(this._fontSizeFraction+.03)),this.callSuper("_renderTextLine",t,e,i,n,s,o)},_renderTextDecoration:function(t){return this.isEmptyStyles()?this.callSuper("_renderTextDecoration",t):void 0},_renderTextLinesBackground:function(t){this.callSuper("_renderTextLinesBackground",t);var e,i,n,s,o,r,a,l,c,d,h=0,u=this._getLeftOffset(),p=this._getTopOffset(),f="";t.save();for(var g=0,m=this._textLines.length;m>g;g++)if(e=this._getHeightOfLine(t,g),s=this._textLines[g],""!==s&&this.styles&&this._getLineStyle(g)){i=this._getLineWidth(t,g),n=this._getLineLeftOffset(i),a=l=c=d=0;for(var v=0,b=s.length;b>v;v++)r=this._getStyleDeclaration(g,v)||{},f!==r.textBackgroundColor&&(d&&c&&(t.fillStyle=f,t.fillRect(a,l,c,d)),a=l=c=d=0,f=r.textBackgroundColor||""),r.textBackgroundColor?(o=s[v],f===r.textBackgroundColor&&(f=r.textBackgroundColor,a||(a=u+n+this._getWidthOfCharsAt(t,g,v)),l=p+h,c+=this._getWidthOfChar(t,o,g,v),d=e/this.lineHeight)):f="";d&&c&&(t.fillStyle=f,t.fillRect(a,l,c,d),a=l=c=d=0),h+=e}else h+=e;t.restore()},_getCacheProp:function(t,e){return t+e.fontSize+e.fontWeight+e.fontStyle},_getFontCache:function(t){return fabric.charWidthsCache[t]||(fabric.charWidthsCache[t]={}),fabric.charWidthsCache[t]},_applyCharStylesGetWidth:function(e,i,n,s,o){var r,a,l,c=o||this._getStyleDeclaration(n,s),d=t(c);if(this._applyFontStyles(d),l=this._getFontCache(d.fontFamily),a=this._getCacheProp(i,d),!c&&l[a]&&this.caching)return l[a];"string"==typeof d.shadow&&(d.shadow=new fabric.Shadow(d.shadow));var h=d.fill||this.fill;return e.fillStyle=h.toLive?h.toLive(e,this):h,d.stroke&&(e.strokeStyle=d.stroke&&d.stroke.toLive?d.stroke.toLive(e,this):d.stroke),e.lineWidth=d.strokeWidth||this.strokeWidth,e.font=this._getFontDeclaration.call(d),d.shadow&&(d.scaleX=this.scaleX,d.scaleY=this.scaleY,d.canvas=this.canvas,d.getObjectScaling=this.getObjectScaling,this._setShadow.call(d,e)),this.caching&&l[a]?l[a]:(r=e.measureText(i).width,this.caching&&(l[a]=r),r)},_applyFontStyles:function(t){t.fontFamily||(t.fontFamily=this.fontFamily),t.fontSize||(t.fontSize=this.fontSize),t.fontWeight||(t.fontWeight=this.fontWeight),t.fontStyle||(t.fontStyle=this.fontStyle)},_getStyleDeclaration:function(e,i,n){return n?this.styles[e]&&this.styles[e][i]?t(this.styles[e][i]):{}:this.styles[e]&&this.styles[e][i]?this.styles[e][i]:null},_setStyleDeclaration:function(t,e,i){this.styles[t][e]=i},_deleteStyleDeclaration:function(t,e){delete this.styles[t][e]},_getLineStyle:function(t){return this.styles[t]},_setLineStyle:function(t,e){this.styles[t]=e},_deleteLineStyle:function(t){delete this.styles[t]},_getWidthOfChar:function(t,e,i,n){if(!this._isMeasuring&&"justify"===this.textAlign&&this._reSpacesAndTabs.test(e))return this._getWidthOfSpace(t,i);t.save();var s=this._applyCharStylesGetWidth(t,e,i,n);return 0!==this.charSpacing&&(s+=this._getWidthOfCharSpacing()),t.restore(),s>0?s:0},_getHeightOfChar:function(t,e,i){var n=this._getStyleDeclaration(e,i);return n&&n.fontSize?n.fontSize:this.fontSize},_getWidthOfCharsAt:function(t,e,i){var n,s,o=0;for(n=0;i>n;n++)s=this._textLines[e][n],o+=this._getWidthOfChar(t,s,e,n);return o},_measureLine:function(t,e){this._isMeasuring=!0;var i=this._getWidthOfCharsAt(t,e,this._textLines[e].length);return 0!==this.charSpacing&&(i-=this._getWidthOfCharSpacing()),this._isMeasuring=!1,i>0?i:0},_getWidthOfSpace:function(t,e){if(this.__widthOfSpace[e])return this.__widthOfSpace[e];var i=this._textLines[e],n=this._getWidthOfWords(t,i,e,0),s=this.width-n,o=i.length-i.replace(this._reSpacesAndTabs,"").length,r=Math.max(s/o,t.measureText(" ").width);return this.__widthOfSpace[e]=r,r},_getWidthOfWords:function(t,e,i,n){for(var s=0,o=0;o<e.length;o++){var r=e[o];r.match(/\s/)||(s+=this._getWidthOfChar(t,r,i,o+n))}return s},_getHeightOfLine:function(t,e){if(this.__lineHeights[e])return this.__lineHeights[e];for(var i=this._textLines[e],n=this._getHeightOfChar(t,e,0),s=1,o=i.length;o>s;s++){var r=this._getHeightOfChar(t,e,s);r>n&&(n=r)}return this.__lineHeights[e]=n*this.lineHeight*this._fontSizeMult,this.__lineHeights[e]},_getTextHeight:function(t){for(var e,i=0,n=0,s=this._textLines.length;s>n;n++)e=this._getHeightOfLine(t,n),i+=n===s-1?e/this.lineHeight:e;return i},toObject:function(e){return fabric.util.object.extend(this.callSuper("toObject",e),{styles:t(this.styles,!0)})}}),fabric.IText.fromObject=function(t,e,i){return fabric.Object._fromObject("IText",t,e,i,"text")}}(),function(){var t=fabric.util.object.clone;fabric.util.object.extend(fabric.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var t=this;this.on("added",function(){var e=t.canvas;e&&(e._hasITextHandlers||(e._hasITextHandlers=!0,t._initCanvasHandlers(e)),e._iTextInstances=e._iTextInstances||[],e._iTextInstances.push(t))})},initRemovedHandler:function(){var t=this;this.on("removed",function(){var e=t.canvas;e&&(e._iTextInstances=e._iTextInstances||[],fabric.util.removeFromArray(e._iTextInstances,t),0===e._iTextInstances.length&&(e._hasITextHandlers=!1,t._removeCanvasHandlers(e)))})},_initCanvasHandlers:function(t){t._mouseUpITextHandler=function(){t._iTextInstances&&t._iTextInstances.forEach(function(t){t.__isMousedown=!1})}.bind(this),t.on("mouse:up",t._mouseUpITextHandler)},_removeCanvasHandlers:function(t){t.off("mouse:up",t._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(t,e,i,n){var s;return s={isAborted:!1,abort:function(){this.isAborted=!0}},t.animate("_currentCursorOpacity",e,{duration:i,onComplete:function(){s.isAborted||t[n]()},onChange:function(){t.canvas&&t.selectionStart===t.selectionEnd&&t.renderCursorOrSelection()},abort:function(){return s.isAborted}}),s},_onTickComplete:function(){var t=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){t._currentTickCompleteState=t._animateCursor(t,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(t){var e=this,i=t?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){e._tick()},i)},abortCursorAnimation:function(){var t=this._currentTickState||this._currentTickCompleteState;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,t&&this.canvas&&this.canvas.clearContext(this.canvas.contextTop||this.ctx)},selectAll:function(){this.selectionStart=0,this.selectionEnd=this.text.length,this._fireSelectionChanged(),this._updateTextarea()},getSelectedText:function(){return this.text.slice(this.selectionStart,this.selectionEnd)},findWordBoundaryLeft:function(t){var e=0,i=t-1;if(this._reSpace.test(this.text.charAt(i)))for(;this._reSpace.test(this.text.charAt(i));)e++,i--;for(;/\S/.test(this.text.charAt(i))&&i>-1;)e++,i--;return t-e},findWordBoundaryRight:function(t){var e=0,i=t;if(this._reSpace.test(this.text.charAt(i)))for(;this._reSpace.test(this.text.charAt(i));)e++,i++;for(;/\S/.test(this.text.charAt(i))&&i<this.text.length;)e++,i++;return t+e},findLineBoundaryLeft:function(t){for(var e=0,i=t-1;!/\n/.test(this.text.charAt(i))&&i>-1;)e++,i--;return t-e},findLineBoundaryRight:function(t){for(var e=0,i=t;!/\n/.test(this.text.charAt(i))&&i<this.text.length;)e++,i++;return t+e},getNumNewLinesInSelectedText:function(){for(var t=this.getSelectedText(),e=0,i=0,n=t.length;n>i;i++)"\n"===t[i]&&e++;return e},searchWordBoundary:function(t,e){for(var i=this._reSpace.test(this.text.charAt(t))?t-1:t,n=this.text.charAt(i),s=/[ \n\.,;!\?\-]/;!s.test(n)&&i>0&&i<this.text.length;)i+=e,n=this.text.charAt(i);return s.test(n)&&"\n"!==n&&(i+=1===e?0:1),i},selectWord:function(t){t=t||this.selectionStart;var e=this.searchWordBoundary(t,-1),i=this.searchWordBoundary(t,1);this.selectionStart=e,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(t){t=t||this.selectionStart;var e=this.findLineBoundaryLeft(t),i=this.findLineBoundaryRight(t);this.selectionStart=e,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea()},enterEditing:function(t){return!this.isEditing&&this.editable?(this.canvas&&this.exitEditingOnOthers(this.canvas),this.isEditing=!0,this.selected=!0,this.initHiddenTextarea(t),this.hiddenTextarea.focus(),this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.renderAll(),this):this):void 0},exitEditingOnOthers:function(t){t._iTextInstances&&t._iTextInstances.forEach(function(t){t.selected=!1,t.isEditing&&t.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(t){if(this.__isMousedown&&this.isEditing){var e=this.getSelectionStartFromPointer(t.e),i=this.selectionStart,n=this.selectionEnd;(e===this.__selectionStartOnMouseDown&&i!==n||i!==e&&n!==e)&&(e>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=e):(this.selectionStart=e,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===i&&this.selectionEnd===n||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},_updateTextarea:function(){if(this.hiddenTextarea&&!this.inCompositionMode&&(this.cursorOffsetCache={},this.hiddenTextarea.value=this.text,this.hiddenTextarea.selectionStart=this.selectionStart,this.hiddenTextarea.selectionEnd=this.selectionEnd,this.selectionStart===this.selectionEnd)){var t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top,this.hiddenTextarea.style.fontSize=t.fontSize}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var t=this.text.split(""),e=this._getCursorBoundaries(t,"cursor"),i=this.get2DCursorLocation(),n=i.lineIndex,s=i.charIndex,o=this.getCurrentCharFontSize(n,s),r=e.leftOffset,a=this.calcTransformMatrix(),l={x:e.left+r,y:e.top+e.topOffset+o},c=this.canvas.upperCanvasEl,d=c.width-o,h=c.height-o;return l=fabric.util.transformPoint(l,a),l=fabric.util.transformPoint(l,this.canvas.viewportTransform),l.x<0&&(l.x=0),l.x>d&&(l.x=d),l.y<0&&(l.y=0),l.y>h&&(l.y=h),l.x+=this.canvas._offset.left,l.y+=this.canvas._offset.top,{left:l.x+"px",top:l.y+"px",fontSize:o}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.overCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var t=this._textBeforeEdit!==this.text;return this.selected=!1,this.isEditing=!1,this.selectable=!0,this.selectionEnd=this.selectionStart,this.hiddenTextarea&&(this.hiddenTextarea.blur&&this.hiddenTextarea.blur(),this.canvas&&this.hiddenTextarea.parentNode.removeChild(this.hiddenTextarea),this.hiddenTextarea=null),this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this.fire("editing:exited"),t&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var t in this.styles)this._textLines[t]||delete this.styles[t]},_removeCharsFromTo:function(t,e){for(;e!==t;)this._removeSingleCharAndStyle(t+1),e--;this.selectionStart=t,this.selectionEnd=t},_removeSingleCharAndStyle:function(t){var e="\n"===this.text[t-1],i=e?t:t-1;this.removeStyleObject(e,i),this.text=this.text.slice(0,t-1)+this.text.slice(t),this._textLines=this._splitTextIntoLines()},insertChars:function(t,e){var i;if(this.selectionEnd-this.selectionStart>1&&this._removeCharsFromTo(this.selectionStart,this.selectionEnd),!e&&this.isEmptyStyles())return void this.insertChar(t,!1);for(var n=0,s=t.length;s>n;n++)e&&(i=fabric.util.object.clone(fabric.copiedTextStyle[n],!0)),this.insertChar(t[n],s-1>n,i)},insertChar:function(t,e,i){var n="\n"===this.text[this.selectionStart];this.text=this.text.slice(0,this.selectionStart)+t+this.text.slice(this.selectionEnd),this._textLines=this._splitTextIntoLines(),this.insertStyleObjects(t,n,i),this.selectionStart+=t.length,this.selectionEnd=this.selectionStart,e||(this._updateTextarea(),this.setCoords(),this._fireSelectionChanged(),this.fire("changed"),this.restartCursorIfNeeded(),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.renderAll()))},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(e,i,n){this.shiftLineStyles(e,1);var s={},o={};if(this.styles[e]&&this.styles[e][i-1]&&(s=this.styles[e][i-1]),n&&s)o[0]=t(s),this.styles[e+1]=o;else{var r=!1;for(var a in this.styles[e]){var l=parseInt(a,10);l>=i&&(r=!0,o[l-i]=this.styles[e][a],delete this.styles[e][a])}r&&(this.styles[e+1]=o)}this._forceClearCache=!0},insertCharStyleObject:function(e,i,n){var s=this.styles[e],o=t(s);0!==i||n||(i=1);for(var r in o){var a=parseInt(r,10);a>=i&&(s[a+1]=o[a],o[a-1]||delete s[a])}var l=n||t(s[i-1]);l&&(this.styles[e][i]=l),this._forceClearCache=!0},insertStyleObjects:function(t,e,i){var n=this.get2DCursorLocation(),s=n.lineIndex,o=n.charIndex;this._getLineStyle(s)||this._setLineStyle(s,{}),"\n"===t?this.insertNewlineStyleObject(s,o,e):this.insertCharStyleObject(s,o,i)},shiftLineStyles:function(e,i){var n=t(this.styles);for(var s in n){var o=parseInt(s,10);e>=o&&delete n[o]}for(var s in this.styles){var o=parseInt(s,10);o>e&&(this.styles[o+i]=n[o],n[o-i]||delete this.styles[o])}},removeStyleObject:function(t,e){var i=this.get2DCursorLocation(e),n=i.lineIndex,s=i.charIndex;this._removeStyleObject(t,i,n,s)},_getTextOnPreviousLine:function(t){return this._textLines[t-1]},_removeStyleObject:function(e,i,n,s){if(e){var o=this._getTextOnPreviousLine(i.lineIndex),r=o?o.length:0;this.styles[n-1]||(this.styles[n-1]={});for(s in this.styles[n])this.styles[n-1][parseInt(s,10)+r]=this.styles[n][s];this.shiftLineStyles(i.lineIndex,-1)}else{var a=this.styles[n];a&&delete a[s];var l=t(a);for(var c in l){var d=parseInt(c,10);d>=s&&0!==d&&(a[d-1]=l[d],delete a[d])}}},insertNewline:function(){this.insertChars("\n")},setSelectionStartEndWithShift:function(t,e,i){t>=i?(e===t?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=t),this.selectionStart=i):i>t&&e>i?"right"===this._selectionDirection?this.selectionEnd=i:this.selectionStart=i:(e===t?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=e),this.selectionEnd=i)},setSelectionInBoundaries:function(){var t=this.text.length;this.selectionStart>t?this.selectionStart=t:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>t?this.selectionEnd=t:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),fabric.util.object.extend(fabric.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown.bind(this))},onMouseDown:function(t){this.__newClickTime=+new Date;var e=this.canvas.getPointer(t.e);this.isTripleClick(e)?(this.fire("tripleclick",t),this._stopEvent(t.e)):this.isDoubleClick(e)&&(this.fire("dblclick",t),this._stopEvent(t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=e,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected},isDoubleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y&&this.__lastIsEditing},isTripleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y},_stopEvent:function(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},initClicks:function(){this.on("dblclick",function(t){this.selectWord(this.getSelectionStartFromPointer(t.e))}),this.on("tripleclick",function(t){this.selectLine(this.getSelectionStartFromPointer(t.e))})},initMousedownHandler:function(){this.on("mousedown",function(t){if(this.editable){var e=this.canvas.getPointer(t.e);this.__mousedownX=e.x,this.__mousedownY=e.y,this.__isMousedown=!0,this.selected&&this.setCursorByClick(t.e),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection())}})},_isObjectMoved:function(t){var e=this.canvas.getPointer(t);return this.__mousedownX!==e.x||this.__mousedownY!==e.y},initMouseupHandler:function(){this.on("mouseup",function(t){this.__isMousedown=!1,this.editable&&!this._isObjectMoved(t.e)&&(this.__lastSelected&&!this.__corner&&(this.enterEditing(t.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()),this.selected=!0)})},setCursorByClick:function(t){var e=this.getSelectionStartFromPointer(t),i=this.selectionStart,n=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(i,n,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(t){for(var e,i,n=this.getLocalPointer(t),s=0,o=0,r=0,a=0,l=0,c=this._textLines.length;c>l;l++){i=this._textLines[l],r+=this._getHeightOfLine(this.ctx,l)*this.scaleY;var d=this._getLineWidth(this.ctx,l),h=this._getLineLeftOffset(d);o=h*this.scaleX;for(var u=0,p=i.length;p>u;u++){if(s=o,o+=this._getWidthOfChar(this.ctx,i[u],l,this.flipX?p-u:u)*this.scaleX,!(r<=n.y||o<=n.x))return this._getNewSelectionStartFromOffset(n,s,o,a+l,p);a++}if(n.y<r)return this._getNewSelectionStartFromOffset(n,s,o,a+l-1,p)}return"undefined"==typeof e?this.text.length:void 0},_getNewSelectionStartFromOffset:function(t,e,i,n,s){var o=t.x-e,r=i-t.x,a=r>o?0:1,l=n+a;return this.flipX&&(l=s-l),l>this.text.length&&(l=this.text.length),l}}),fabric.util.object.extend(fabric.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=fabric.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off");var t=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="white-space: nowrap; position: absolute; top: "+t.top+"; left: "+t.left+"; opacity: 0; width: 1px; height: 1px; z-index: -999;",fabric.document.body.appendChild(this.hiddenTextarea),fabric.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),fabric.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),fabric.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),fabric.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),fabric.util.addListener(this.hiddenTextarea,"cut",this.cut.bind(this)),fabric.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),
fabric.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(fabric.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},_keysMap:{8:"removeChars",9:"exitEditing",27:"exitEditing",13:"insertNewline",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown",46:"forwardDelete"},_ctrlKeysMapUp:{67:"copy",88:"cut"},_ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(t){if(this.isEditing){if(t.keyCode in this._keysMap)this[this._keysMap[t.keyCode]](t);else{if(!(t.keyCode in this._ctrlKeysMapDown&&(t.ctrlKey||t.metaKey)))return;this[this._ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),t.keyCode>=33&&t.keyCode<=40?(this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.renderAll()}},onKeyUp:function(t){return!this.isEditing||this._copyDone?void(this._copyDone=!1):void(t.keyCode in this._ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this._ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.renderAll()))},onInput:function(t){if(this.isEditing&&!this.inCompositionMode){var e,i,n,s=this.selectionStart||0,o=this.selectionEnd||0,r=this.text.length,a=this.hiddenTextarea.value.length;a>r?(n="left"===this._selectionDirection?o:s,e=a-r,i=this.hiddenTextarea.value.slice(n,n+e)):(e=a-r+o-s,i=this.hiddenTextarea.value.slice(s,s+e)),this.insertChars(i),t.stopPropagation()}},onCompositionStart:function(){this.inCompositionMode=!0,this.prevCompositionLength=0,this.compositionStart=this.selectionStart},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(t){var e=t.data;this.selectionStart=this.compositionStart,this.selectionEnd=this.selectionEnd===this.selectionStart?this.compositionStart+this.prevCompositionLength:this.selectionEnd,this.insertChars(e,!1),this.prevCompositionLength=e.length},forwardDelete:function(t){if(this.selectionStart===this.selectionEnd){if(this.selectionStart===this.text.length)return;this.moveCursorRight(t)}this.removeChars(t)},copy:function(t){if(this.selectionStart!==this.selectionEnd){var e=this.getSelectedText(),i=this._getClipboardData(t);i&&i.setData("text",e),fabric.copiedText=e,fabric.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd),t.stopImmediatePropagation(),t.preventDefault(),this._copyDone=!0}},paste:function(t){var e=null,i=this._getClipboardData(t),n=!0;i?(e=i.getData("text").replace(/\r/g,""),fabric.copiedTextStyle&&fabric.copiedText===e||(n=!1)):e=fabric.copiedText,e&&this.insertChars(e,n),t.stopImmediatePropagation(),t.preventDefault()},cut:function(t){this.selectionStart!==this.selectionEnd&&(this.copy(t),this.removeChars(t))},_getClipboardData:function(t){return t&&t.clipboardData||fabric.window.clipboardData},_getWidthBeforeCursor:function(t,e){for(var i,n=this._textLines[t].slice(0,e),s=this._getLineWidth(this.ctx,t),o=this._getLineLeftOffset(s),r=0,a=n.length;a>r;r++)i=n[r],o+=this._getWidthOfChar(this.ctx,i,t,r);return o},getDownCursorOffset:function(t,e){var i=this._getSelectionForOffset(t,e),n=this.get2DCursorLocation(i),s=n.lineIndex;if(s===this._textLines.length-1||t.metaKey||34===t.keyCode)return this.text.length-i;var o=n.charIndex,r=this._getWidthBeforeCursor(s,o),a=this._getIndexOnLine(s+1,r),l=this._textLines[s].slice(o);return l.length+a+2},_getSelectionForOffset:function(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(t,e){var i=this._getSelectionForOffset(t,e),n=this.get2DCursorLocation(i),s=n.lineIndex;if(0===s||t.metaKey||33===t.keyCode)return-i;var o=n.charIndex,r=this._getWidthBeforeCursor(s,o),a=this._getIndexOnLine(s-1,r),l=this._textLines[s].slice(0,o);return-this._textLines[s-1].length+a-l.length},_getIndexOnLine:function(t,e){for(var i,n=this._getLineWidth(this.ctx,t),s=this._textLines[t],o=this._getLineLeftOffset(n),r=o,a=0,l=0,c=s.length;c>l;l++){var d=s[l],h=this._getWidthOfChar(this.ctx,d,t,l);if(r+=h,r>e){i=!0;var u=r-h,p=r,f=Math.abs(u-e),g=Math.abs(p-e);a=f>g?l:l-1;break}}return i||(a=s.length-1),a},moveCursorDown:function(t){this.selectionStart>=this.text.length&&this.selectionEnd>=this.text.length||this._moveCursorUpOrDown("Down",t)},moveCursorUp:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",t)},_moveCursorUpOrDown:function(t,e){var i="get"+t+"CursorOffset",n=this[i](e,"right"===this._selectionDirection);e.shiftKey?this.moveCursorWithShift(n):this.moveCursorWithoutShift(n),0!==n&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(t){var e="left"===this._selectionDirection?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e),0!==t},moveCursorWithoutShift:function(t){return 0>t?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),0!==t},moveCursorLeft:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",t)},_move:function(t,e,i){var n;if(t.altKey)n=this["findWordBoundary"+i](this[e]);else{if(!t.metaKey&&35!==t.keyCode&&36!==t.keyCode)return this[e]+="Left"===i?-1:1,!0;n=this["findLineBoundary"+i](this[e])}return void 0!==typeof n&&this[e]!==n?(this[e]=n,!0):void 0},_moveLeft:function(t,e){return this._move(t,e,"Left")},_moveRight:function(t,e){return this._move(t,e,"Right")},moveCursorLeftWithoutShift:function(t){var e=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(e=this._moveLeft(t,"selectionStart")),this.selectionEnd=this.selectionStart,e},moveCursorLeftWithShift:function(t){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(t,"selectionStart")):void 0},moveCursorRight:function(t){this.selectionStart>=this.text.length&&this.selectionEnd>=this.text.length||this._moveCursorLeftOrRight("Right",t)},_moveCursorLeftOrRight:function(t,e){var i="moveCursor"+t+"With";this._currentCursorOpacity=1,i+=e.shiftKey?"Shift":"outShift",this[i](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(t){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):this.selectionEnd!==this.text.length?(this._selectionDirection="right",this._moveRight(t,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(t){var e=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(e=this._moveRight(t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e},removeChars:function(t){this.selectionStart===this.selectionEnd?this._removeCharsNearCursor(t):this._removeCharsFromTo(this.selectionStart,this.selectionEnd),this.set("dirty",!0),this.setSelectionEnd(this.selectionStart),this._removeExtraneousStyles(),this.canvas&&this.canvas.renderAll(),this.setCoords(),this.fire("changed"),this.canvas&&this.canvas.fire("text:changed",{target:this})},_removeCharsNearCursor:function(t){if(0!==this.selectionStart)if(t.metaKey){var e=this.findLineBoundaryLeft(this.selectionStart);this._removeCharsFromTo(e,this.selectionStart),this.setSelectionStart(e)}else if(t.altKey){var i=this.findWordBoundaryLeft(this.selectionStart);this._removeCharsFromTo(i,this.selectionStart),this.setSelectionStart(i)}else this._removeSingleCharAndStyle(this.selectionStart),this.setSelectionStart(this.selectionStart-1)}}),function(){var t=fabric.util.toFixed,e=fabric.Object.NUM_FRACTION_DIGITS;fabric.util.object.extend(fabric.IText.prototype,{_setSVGTextLineText:function(t,e,i,n,s,o){this._getLineStyle(t)?this._setSVGTextLineChars(t,e,i,n,o):fabric.Text.prototype._setSVGTextLineText.call(this,t,e,i,n,s)},_setSVGTextLineChars:function(t,e,i,n,s){for(var o=this._textLines[t],r=0,a=this._getLineLeftOffset(this._getLineWidth(this.ctx,t))-this.width/2,l=this._getSVGLineTopOffset(t),c=this._getHeightOfLine(this.ctx,t),d=0,h=o.length;h>d;d++){var u=this._getStyleDeclaration(t,d)||{};e.push(this._createTextCharSpan(o[d],u,a,l.lineTop+l.offset,r));var p=this._getWidthOfChar(this.ctx,o[d],t,d);u.textBackgroundColor&&s.push(this._createTextCharBg(u,a,l.lineTop,c,p,r)),r+=p}},_getSVGLineTopOffset:function(t){for(var e=0,i=0,n=0;t>n;n++)e+=this._getHeightOfLine(this.ctx,n);return i=this._getHeightOfLine(this.ctx,n),{lineTop:e,offset:(this._fontSizeMult-this._fontSizeFraction)*i/(this.lineHeight*this._fontSizeMult)}},_createTextCharBg:function(i,n,s,o,r,a){return['		<rect fill="',i.textBackgroundColor,'" x="',t(n+a,e),'" y="',t(s-this.height/2,e),'" width="',t(r,e),'" height="',t(o/this.lineHeight,e),'"></rect>\n'].join("")},_createTextCharSpan:function(i,n,s,o,r){var a=this.getSvgStyles.call(fabric.util.object.extend({visible:!0,fill:this.fill,stroke:this.stroke,type:"text",getSvgFilter:fabric.Object.prototype.getSvgFilter},n));return['			<tspan x="',t(s+r,e),'" y="',t(o-this.height/2,e),'" ',n.fontFamily?'font-family="'+n.fontFamily.replace(/"/g,"'")+'" ':"",n.fontSize?'font-size="'+n.fontSize+'" ':"",n.fontStyle?'font-style="'+n.fontStyle+'" ':"",n.fontWeight?'font-weight="'+n.fontWeight+'" ':"",n.textDecoration?'text-decoration="'+n.textDecoration+'" ':"",'style="',a,'">',fabric.util.string.escapeXml(i),"</tspan>\n"].join("")}})}(),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Textbox=e.util.createClass(e.IText,e.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingY:!0,lockScalingFlip:!0,noScaleCache:!1,initialize:function(t,i){this.callSuper("initialize",t,i),this.setControlsVisibility(e.Textbox.getTextboxControlVisibility()),this.ctx=this.objectCaching?this._cacheContext:e.util.createCanvasElement().getContext("2d"),this._dimensionAffectingProps.push("width")},_initDimensions:function(t){this.__skipDimension||(t||(t=e.util.createCanvasElement().getContext("2d"),this._setTextStyles(t),this.clearContextTop()),this.dynamicMinWidth=0,this._textLines=this._splitTextIntoLines(t),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this._clearCache(),this.height=this._getTextHeight(t))},_generateStyleMap:function(){for(var t=0,e=0,i=0,n={},s=0;s<this._textLines.length;s++)"\n"===this.text[i]&&s>0?(e=0,i++,t++):" "===this.text[i]&&s>0&&(e++,i++),n[s]={line:t,offset:e},i+=this._textLines[s].length,e+=this._textLines[s].length;return n},_getStyleDeclaration:function(t,e,i){if(this._styleMap){var n=this._styleMap[t];if(!n)return i?{}:null;t=n.line,e=n.offset+e}return this.callSuper("_getStyleDeclaration",t,e,i)},_setStyleDeclaration:function(t,e,i){var n=this._styleMap[t];t=n.line,e=n.offset+e,this.styles[t][e]=i},_deleteStyleDeclaration:function(t,e){var i=this._styleMap[t];t=i.line,e=i.offset+e,delete this.styles[t][e]},_getLineStyle:function(t){var e=this._styleMap[t];return this.styles[e.line]},_setLineStyle:function(t,e){var i=this._styleMap[t];this.styles[i.line]=e},_deleteLineStyle:function(t){var e=this._styleMap[t];delete this.styles[e.line]},_wrapText:function(t,e){var i,n=e.split(this._reNewline),s=[];for(i=0;i<n.length;i++)s=s.concat(this._wrapLine(t,n[i],i));return s},_measureText:function(t,e,i,n){var s=0;n=n||0;for(var o=0,r=e.length;r>o;o++)s+=this._getWidthOfChar(t,e[o],i,o+n);return s},_wrapLine:function(t,e,i){for(var n=0,s=[],o="",r=e.split(" "),a="",l=0,c=" ",d=0,h=0,u=0,p=!0,f=this._getWidthOfCharSpacing(),g=0;g<r.length;g++)a=r[g],d=this._measureText(t,a,i,l),l+=a.length,n+=h+d-f,n>=this.width&&!p?(s.push(o),o="",n=d,p=!0):n+=f,p||(o+=c),o+=a,h=this._measureText(t,c,i,l),l++,p=!1,d>u&&(u=d);return g&&s.push(o),u>this.dynamicMinWidth&&(this.dynamicMinWidth=u-f),s},_splitTextIntoLines:function(t){t=t||this.ctx;var e=this.textAlign;this._styleMap=null,t.save(),this._setTextStyles(t),this.textAlign="left";var i=this._wrapText(t,this.text);return this.textAlign=e,t.restore(),this._textLines=i,this._styleMap=this._generateStyleMap(),i},setOnGroup:function(t,e){"scaleX"===t&&(this.set("scaleX",Math.abs(1/e)),this.set("width",this.get("width")*e/("undefined"==typeof this.__oldScaleX?1:this.__oldScaleX)),this.__oldScaleX=e)},get2DCursorLocation:function(t){"undefined"==typeof t&&(t=this.selectionStart);for(var e=this._textLines.length,i=0,n=0;e>n;n++){var s=this._textLines[n],o=s.length;if(i+o>=t)return{lineIndex:n,charIndex:t-i};i+=o,"\n"!==this.text[i]&&" "!==this.text[i]||i++}return{lineIndex:e-1,charIndex:this._textLines[e-1].length}},_getCursorBoundariesOffsets:function(t,e){for(var i=0,n=0,s=this.get2DCursorLocation(),o=this._textLines[s.lineIndex].split(""),r=this._getLineLeftOffset(this._getLineWidth(this.ctx,s.lineIndex)),a=0;a<s.charIndex;a++)n+=this._getWidthOfChar(this.ctx,o[a],s.lineIndex,a);for(a=0;a<s.lineIndex;a++)i+=this._getHeightOfLine(this.ctx,a);return"cursor"===e&&(i+=(1-this._fontSizeFraction)*this._getHeightOfLine(this.ctx,s.lineIndex)/this.lineHeight-this.getCurrentCharFontSize(s.lineIndex,s.charIndex)*(1-this._fontSizeFraction)),{top:i,left:n,lineLeft:r}},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},toObject:function(t){return this.callSuper("toObject",["minWidth"].concat(t))}}),e.Textbox.fromObject=function(t,i,n){return e.Object._fromObject("Textbox",t,i,n,"text")},e.Textbox.getTextboxControlVisibility=function(){return{tl:!1,tr:!1,br:!1,bl:!1,ml:!0,mt:!1,mr:!0,mb:!1,mtr:!0}}}("undefined"!=typeof exports?exports:this),function(){var t=fabric.Canvas.prototype._setObjectScale;fabric.Canvas.prototype._setObjectScale=function(e,i,n,s,o,r,a){var l=i.target;if(!(l instanceof fabric.Textbox))return t.call(fabric.Canvas.prototype,e,i,n,s,o,r,a);var c=l.width*(e.x/i.scaleX/(l.width+l.strokeWidth));return c>=l.getMinWidth()?(l.set("width",c),!0):void 0},fabric.Group.prototype._refreshControlsVisibility=function(){if("undefined"!=typeof fabric.Textbox)for(var t=this._objects.length;t--;)if(this._objects[t]instanceof fabric.Textbox)return void this.setControlsVisibility(fabric.Textbox.getTextboxControlVisibility())},fabric.util.object.extend(fabric.Textbox.prototype,{_removeExtraneousStyles:function(){for(var t in this._styleMap)this._textLines[t]||delete this.styles[this._styleMap[t].line]},insertCharStyleObject:function(t,e,i){var n=this._styleMap[t];t=n.line,e=n.offset+e,fabric.IText.prototype.insertCharStyleObject.apply(this,[t,e,i])},insertNewlineStyleObject:function(t,e,i){var n=this._styleMap[t];t=n.line,e=n.offset+e,fabric.IText.prototype.insertNewlineStyleObject.apply(this,[t,e,i])},shiftLineStyles:function(t,e){var i=this._styleMap[t];t=i.line,fabric.IText.prototype.shiftLineStyles.call(this,t,e)},_getTextOnPreviousLine:function(t){for(var e=this._textLines[t-1];this._styleMap[t-2]&&this._styleMap[t-2].line===this._styleMap[t-1].line;)e=this._textLines[t-2]+e,t--;return e},removeStyleObject:function(t,e){var i=this.get2DCursorLocation(e),n=this._styleMap[i.lineIndex],s=n.line,o=n.offset+i.charIndex;this._removeStyleObject(t,i,s,o)}})}(),function(){var t=fabric.IText.prototype._getNewSelectionStartFromOffset;fabric.IText.prototype._getNewSelectionStartFromOffset=function(e,i,n,s,o){s=t.call(this,e,i,n,s,o);for(var r=0,a=0,l=0;l<this._textLines.length&&(r+=this._textLines[l].length,!(r+a>=s));l++)"\n"!==this.text[r+a]&&" "!==this.text[r+a]||a++;return s-l+a}}(),function(){function request(t,e,i){var n=URL.parse(t);n.port||(n.port=0===n.protocol.indexOf("https:")?443:80);var s=0===n.protocol.indexOf("https:")?HTTPS:HTTP,o=s.request({hostname:n.hostname,port:n.port,path:n.path,method:"GET"},function(t){var n="";e&&t.setEncoding(e),t.on("end",function(){i(n)}),t.on("data",function(e){200===t.statusCode&&(n+=e)})});o.on("error",function(t){t.errno===process.ECONNREFUSED?fabric.log("ECONNREFUSED: connection refused to "+n.hostname+":"+n.port):fabric.log(t.message),i(null)}),o.end()}function requestFs(t,e){var i=require("fs");i.readFile(t,function(t,i){if(t)throw fabric.log(t),t;e(i)})}if("undefined"==typeof document||"undefined"==typeof window){var DOMParser=require("xmldom").DOMParser,URL=require("url"),HTTP=require("http"),HTTPS=require("https"),Canvas=require("canvas"),Image=require("canvas").Image;fabric.util.loadImage=function(t,e,i){function n(n){n?(s.src=new Buffer(n,"binary"),s._src=t,e&&e.call(i,s)):(s=null,e&&e.call(i,null,!0))}var s=new Image;t&&(t instanceof Buffer||0===t.indexOf("data"))?(s.src=s._src=t,e&&e.call(i,s)):t&&0!==t.indexOf("http")?requestFs(t,n):t?request(t,"binary",n):e&&e.call(i,t)},fabric.loadSVGFromURL=function(t,e,i){t=t.replace(/^\n\s*/,"").replace(/\?.*$/,"").trim(),0!==t.indexOf("http")?requestFs(t,function(t){fabric.loadSVGFromString(t.toString(),e,i)}):request(t,"",function(t){fabric.loadSVGFromString(t,e,i)})},fabric.loadSVGFromString=function(t,e,i){var n=(new DOMParser).parseFromString(t);fabric.parseSVGDocument(n.documentElement,function(t,i){e&&e(t,i)},i)},fabric.util.getScript=function(url,callback){request(url,"",function(body){eval(body),callback&&callback()})},fabric.createCanvasForNode=function(t,e,i,n){n=n||i;var s=fabric.document.createElement("canvas"),o=new Canvas(t||600,e||600,n),r=new Canvas(t||600,e||600,n);s.style={},s.width=o.width,s.height=o.height,i=i||{},i.nodeCanvas=o,i.nodeCacheCanvas=r;var a=fabric.Canvas||fabric.StaticCanvas,l=new a(s,i);return l.nodeCanvas=o,l.nodeCacheCanvas=r,l.contextContainer=o.getContext("2d"),l.contextCache=r.getContext("2d"),l.Font=Canvas.Font,l};var originaInitStatic=fabric.StaticCanvas.prototype._initStatic;fabric.StaticCanvas.prototype._initStatic=function(t,e){t=t||fabric.document.createElement("canvas"),this.nodeCanvas=new Canvas(t.width,t.height),this.nodeCacheCanvas=new Canvas(t.width,t.height),originaInitStatic.call(this,t,e),this.contextContainer=this.nodeCanvas.getContext("2d"),this.contextCache=this.nodeCacheCanvas.getContext("2d"),this.Font=Canvas.Font},fabric.StaticCanvas.prototype.createPNGStream=function(){return this.nodeCanvas.createPNGStream()},fabric.StaticCanvas.prototype.createJPEGStream=function(t){return this.nodeCanvas.createJPEGStream(t)},fabric.StaticCanvas.prototype._initRetinaScaling=function(){return this._isRetinaScaling()?(this.lowerCanvasEl.setAttribute("width",this.width*fabric.devicePixelRatio),this.lowerCanvasEl.setAttribute("height",this.height*fabric.devicePixelRatio),this.nodeCanvas.width=this.width*fabric.devicePixelRatio,this.nodeCanvas.height=this.height*fabric.devicePixelRatio,this.contextContainer.scale(fabric.devicePixelRatio,fabric.devicePixelRatio),this):void 0},fabric.Canvas&&(fabric.Canvas.prototype._initRetinaScaling=fabric.StaticCanvas.prototype._initRetinaScaling);var origSetBackstoreDimension=fabric.StaticCanvas.prototype._setBackstoreDimension;fabric.StaticCanvas.prototype._setBackstoreDimension=function(t,e){return origSetBackstoreDimension.call(this,t,e),this.nodeCanvas[t]=e,this},fabric.Canvas&&(fabric.Canvas.prototype._setBackstoreDimension=fabric.StaticCanvas.prototype._setBackstoreDimension)}}(),define("fabric",["jquery"],function(){}),define("text!templates/private/partido/tplRowPartidoTorneoJugador.html",[],function(){return"<th><%= numeroJugador %></th>\n<td><%= jugadorNombre %></td>\n<td><%= posicionJugador %></td>"}),define("views/private/partido/RowPartidoTorneoJugadorView",["jquery","underscore","core/BaseView","text!templates/private/partido/tplRowPartidoTorneoJugador.html"],function(t,e,i,n){var s=i.extend({template:e.template(n),tagName:"tr",events:{},initialize:function(t){this.model=t},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}});return s}),define("text!templates/private/partido/tplPartidoEquipo.html",[],function(){return'<div class="panel panel-default">\n    <div class="panel-heading">\n        <h3 class="panel-title">Local</h3>\n    </div>\n    <div class="panel-body">\n        <table id="all-jugadores" class="table table-condensed">\n            <thead>\n            <tr>\n                <th>#</th>\n                <th>Jugador</th>\n                <th>Posicion</th>\n            </tr>\n            </thead>\n            <tbody>\n            </tbody>\n        </table>\n    </div>\n</div>'}),define("views/private/partido/PartidoEquipoView",["jquery","backbone","core/BaseView","models/TorneoPartidoModel","models/TorneoEquipoModel","collections/TorneoJugadoresCollection","views/private/partido/RowPartidoTorneoJugadorView","text!templates/private/partido/tplPartidoEquipo.html"],function(t,e,i,n,s,o,r,a){var l=i.extend({el:"#section-equipo",template:_.template(a),events:{},initialize:function(e){this.model=e.modelo,this.parent=e.parent,this.type=e.type,this.$el=t("#section-"+this.type),this.jugadores=new o,this.listenTo(this.jugadores,"add",this.agregarJugador),this.listenTo(this.jugadores,"sync",this.syncJugadores),this.render();var i=new s({id:this.model.get(this.type.toLowerCase()+"Id")});this.jugadores.setTorneoEquipo(i),this.jugadores.fetch()},render:function(){this.$el.html(this.template(this.model.toJSON()))},agregarJugador:function(t){var e=new r(t);this.$el.find("#all-jugadores").find("tbody:last").append(e.render().$el)},syncJugadores:function(){this.parent.addPlayers(this.jugadores,this.type)}});return l}),define("text!templates/private/partido/tplPartidoArbitros.html",[],function(){return'<div class="panel panel-default">\n    <div class="panel-heading">\n        <h3 class="panel-title">Arbitros</h3>\n    </div>\n    <div id="partido-arbitros" class="panel-body">\n        <table id="arbitros" class="table table-condensed">\n            <thead>\n            <tr>\n                <th>#</th>\n                <th>Arbitro</th>\n                <th>Tipo</th>\n            </tr>\n            </thead>\n            <tbody>\n            </tbody>\n        </table>\n    </div>\n</div>'}),define("views/private/partido/PartidoArbitrosView",["jquery","backbone","core/BaseView","text!templates/private/partido/tplPartidoArbitros.html"],function(t,e,i,n){var s=i.extend({el:"#section-arbitros",template:_.template(n),events:{},initialize:function(t){this.model=t,this.render()},render:function(){this.$el.html(this.template(this.model.toJSON()))}});return s}),define("text!templates/private/partido/tplPartidoEdit.html",[],function(){return'<div class="modal fade" id="partido-create-dialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n                <h4 class="modal-title">Partido</h4>\n            </div>\n            <div class="modal-body">\n                <p>Editar Partido.</p>\n                <div class="alert alert-danger" role="alert"></div>\n                <form id="form-torneo-partido" role="form">\n                    <input id="jornada-id" type="hidden" name="jornadaId" value="<%= jornadaId %>">\n                    <input type="hidden" name="localId" value="<%= localId %>">\n                    <input type="hidden" name="visitaId" value="<%= visitaId %>">\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Local</label>\n                                <h4><%= localNombre %></h4>\n                            </div>\n                        </div>\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Visita</label>\n                                <h4><%= visitaNombre %></h4>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Cancha</label>\n                                <select class="form-control" id="select-cancha" placeholder="Cancha..." name="canchaId" value="<%= canchaId %>">\n                                </select>\n                            </div>\n                        </div>\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Horario</label>\n                                <input id="dtp-horario" class="span2 form-control" size="16" type="text" name="horarioDes" value="<%= horarioDes %>">\n                            </div>\n                        </div>\n                    </div>\n                </form>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n                <button id="btn-aceptar" type="button" class="btn btn-success">Aceptar</button>\n            </div>\n        </div>\n    </div>\n</div>\n<style>\n    .ui-datepicker-partido{\n    z-index: 100000 !important;\n    display: block;\n    }\n</style>\n\n'}),define("views/private/partido/PartidoEditView",["jquery","backbone","bootstrap","datetimepicker","core/BaseView","models/TorneoModel","collections/TorneoCanchasCollection","views/private/util/ModalGenericView","text!templates/private/partido/tplPartidoEdit.html"],function(t,e,i,n,s,o,r,a,l){var c=s.extend({el:"#modal-partido",template:_.template(l),events:{"click #btn-aceptar":"clickAceptar"},initialize:function(t){this.model=t.modelo,this.callbackAceptar=t.callbackAceptar,this.render(),this.canchas=new r,this.listenTo(this.canchas,"add",this.agregarCancha),this.listenTo(this.canchas,"sync",this.syncCanchas);var i=new o({id:this.model.get("torneoId")});this.canchas.setTorneo(i),this.canchas.fetch(),e.Validation.bind(this)},render:function(){this.$el.html(this.template(this.model.toJSON())),this.$("#partido-create-dialog").modal("show"),this.$(".alert-danger").hide(),this.$el.find("#dtp-horario").datetimepicker({format:"mm/dd/yyyy hh:ii"}).on("show",function(e){t(".datepicker.dropdown-menu").addClass("ui-datepicker-partido")})},agregarCancha:function(e){t("#select-cancha").append(t("<option>",{value:e.get("id"),text:e.get("canchaNombre")}))},syncCanchas:function(e){t("#select-cancha").change()},clickAceptar:function(t){var e=this.$el.find("#form-torneo-partido").serializeObject();this.model.set(e);var i=new Date(this.model.get("horarioDes"));this.model.set({horario:i.getTime()}),that=this,this.model.isValid(!0)&&this.model.save({},{wait:!0,success:function(t,e){new a({message:"Partido registrado correctamente"}),that.callbackAceptar(t)},error:function(t,e){new a({message:"Se presento un error al registrar el partido"})}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this),t("<div id='modal-partido-parent'></div>").appendTo("#modal-partido")}});return c}),define("text!templates/private/estadistica/tplEstadisticaResumen.html",[],function(){return'<div class="row">\n    <div class="col-md-6">\n        <h2><%= localPuntos %></h2>\n    </div>\n    <div class="col-md-6">\n        <h2><%= visitaPuntos %></h2>\n    </div>\n</div>'}),define("views/private/estadistica/EstadisticaResumenView",["jquery","backbone","core/BaseView","text!templates/private/estadistica/tplEstadisticaResumen.html"],function(t,e,i,n){var s=i.extend({el:"#section-estadisticas-resumen",template:_.template(n),events:{},initialize:function(t){this.model=t,this.render()},render:function(){this.$el.html(this.template(this.model.toJSON()))}});return s}),define("models/estadistica/PuntoModel",["backbone"],function(t){var e=t.Model.extend({urlRoot:"punto",defaults:{partidoId:"",tiempoDes:"",minuto:"",segundo:"",tipo:"",tipoValor:"",origen:"",jugadorId:"",jugadorNombre:""},initialize:function(){},validation:{partidoId:{required:!0},tiempoDes:{required:!1},minuto:{required:!0},segundo:{required:!0},tipo:{required:!0},tipoValor:{required:!1},origen:{required:!0},jugadorId:{required:!0},jugadorNombre:{required:!1}}});return e}),define("collections/estadistica/PuntosCollection",["backbone","models/estadistica/PuntoModel"],function(t,e){var i=t.Collection.extend({model:e,url:function(){return"torneopartido/"+this.partido.get("id")+"/punto"},setTorneoPartido:function(t){this.partido=t}});return i}),define("text!templates/private/estadistica/tplRowEstadisticaPunto.html",[],function(){return'<th><%= id %></th>\n<td><%= tiempoDes %></td>\n<td><%= jugadorNombre %></td>\n<td><%= tipo %></td>\n<td>\n    <button id="eliminar-punto" class="btn btn-primary btn-xs" value="<%= id %>">\n        <span class="glyphicon glyphicon-trash" aria-hidden="true" value="<%= id %>"></span>\n    </button>\n</td>'}),define("views/private/estadistica/RowEstadisticaPuntoView",["jquery","underscore","core/BaseView","views/private/util/ModalGenericView","text!templates/private/estadistica/tplRowEstadisticaPunto.html"],function(t,e,i,n,s){var o=i.extend({template:e.template(s),tagName:"tr",events:{"click #eliminar-punto":"deletePunto"},initialize:function(t){this.model=t.modelo,this.parent=t.parent},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el.addClass(this.model.get("origenClass")),this},deletePunto:function(){that=this,this.model.destroy({contentType:"application/json",wait:!0,success:function(t,e){that.destroyView(),that.parent.successRemovePunto(t),new n({message:e.message})},error:function(t,e){new n({message:e.responseJSON.message})}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}});return o}),define("text!templates/private/estadistica/tplEstadisticaPuntos.html",[],function(){return'<div id="partido-puntos">\n    <table id="puntos" class="table table-condensed">\n        <thead>\n        <tr>\n            <th>#</th>\n            <th>Minuto</th>\n            <th>Jugador</th>\n            <th>Tipo</th>\n            <th></th>\n        </tr>\n        </thead>\n        <tbody>\n        </tbody>\n    </table>\n</div>'}),define("views/private/estadistica/EstadisticaPuntosView",["jquery","backbone","core/BaseView","collections/estadistica/PuntosCollection","views/private/estadistica/RowEstadisticaPuntoView","text!templates/private/estadistica/tplEstadisticaPuntos.html"],function(t,e,i,n,s,o){var r=i.extend({el:"#section-estadisticas-puntos",template:_.template(o),events:{},initialize:function(t){this.model=t.modelo,this.parent=t.parent,app.puntosPartido=new n,this.listenTo(app.puntosPartido,"add",this.agregarPunto),this.listenTo(app.puntosPartido,"sync",this.syncPuntos),this.render(),app.puntosPartido.setTorneoPartido(this.model),app.puntosPartido.fetch()},render:function(){this.$el.html(this.template(this.model.toJSON()))},agregarPunto:function(e){var i=this.generateClassByOrigenPunto(e.get("origen"));e.set({origenClass:i});var n=new s({modelo:e,parent:this.parent});t("#puntos").find("tbody:last").append(n.render().$el)},syncPuntos:function(){},generateClassByOrigenPunto:function(t){switch(t){case"LOCAL":
return"success";case"VISITA":return"info"}}});return r}),define("models/estadistica/FaltaModel",["backbone"],function(t){var e=t.Model.extend({urlRoot:"falta",defaults:{partidoId:"",tiempoDes:"",minuto:"",segundo:"",tipo:"",origen:"",infractorId:"",infractorNombre:"",receptorId:"",receptorNombre:""},initialize:function(){},validation:{partidoId:{required:!0},tiempoDes:{required:!1},minuto:{required:!0},segundo:{required:!0},tipo:{required:!0},origen:{required:!0},infractorId:{required:!0},infractorNombre:{required:!1},receptorId:{required:!1},receptorNombre:{required:!1}}});return e}),define("collections/estadistica/FaltasCollection",["backbone","models/estadistica/FaltaModel"],function(t,e){var i=t.Collection.extend({model:e,url:function(){return"torneopartido/"+this.partido.get("id")+"/falta"},setTorneoPartido:function(t){this.partido=t}});return i}),define("text!templates/private/estadistica/tplRowEstadisticaFalta.html",[],function(){return'<th><%= id %></th>\n<td><%= tiempoDes %></td>\n<td><%= infractorNombre %></td>\n<td><%= receptorNombre %></td>\n<td><%= tipo %></td>\n<td>\n    <button id="eliminar-falta" class="btn btn-primary btn-xs" value="<%= id %>">\n        <span class="glyphicon glyphicon-trash" aria-hidden="true" value="<%= id %>"></span>\n    </button>\n</td>'}),define("views/private/estadistica/RowEstadisticaFaltaView",["jquery","underscore","core/BaseView","views/private/util/ModalGenericView","text!templates/private/estadistica/tplRowEstadisticaFalta.html"],function(t,e,i,n,s){var o=i.extend({template:e.template(s),tagName:"tr",events:{"click #eliminar-falta":"deleteFalta"},initialize:function(t){this.model=t.modelo,this.parent=t.parent},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el.addClass(this.model.get("origenClass")),this},deleteFalta:function(){that=this,this.model.destroy({contentType:"application/json",wait:!0,success:function(t,e){that.destroyView(),that.parent.successRemoveFalta(t),new n({message:e.message})},error:function(t,e){new n({message:e.responseJSON.message})}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}});return o}),define("text!templates/private/estadistica/tplEstadisticaFaltas.html",[],function(){return'<div id="partido-puntos">\n    <table id="puntos" class="table table-condensed">\n        <thead>\n        <tr>\n            <th>#</th>\n            <th>Minuto</th>\n            <th>Infractor</th>\n            <th>Receptor</th>\n            <th>Tipo</th>\n            <th></th>\n        </tr>\n        </thead>\n        <tbody>\n        </tbody>\n    </table>\n</div>'}),define("views/private/estadistica/EstadisticaFaltasView",["jquery","backbone","core/BaseView","collections/estadistica/FaltasCollection","views/private/estadistica/RowEstadisticaFaltaView","text!templates/private/estadistica/tplEstadisticaFaltas.html"],function(t,e,i,n,s,o){var r=i.extend({el:"#section-estadisticas-faltas",template:_.template(o),events:{},initialize:function(t){this.model=t.modelo,this.parent=t.parent,app.faltasPartido=new n,this.listenTo(app.faltasPartido,"add",this.agregarFalta),this.listenTo(app.faltasPartido,"sync",this.syncFaltas),this.render(),app.faltasPartido.setTorneoPartido(this.model),app.faltasPartido.fetch()},render:function(){this.$el.html(this.template(this.model.toJSON()))},agregarFalta:function(e){var i=this.generateClassByOrigenPunto(e.get("origen"));e.set({origenClass:i});var n=new s({modelo:e,parent:this.parent});t("#faltas").find("tbody:last").append(n.render().$el)},syncFaltas:function(){},generateClassByOrigenPunto:function(t){switch(t){case"LOCAL":return"success";case"VISITA":return"info"}}});return r}),define("models/estadistica/MovimientoModel",["backbone"],function(t){var e=t.Model.extend({urlRoot:"movimiento",defaults:{partidoId:"",tiempoDes:"",minuto:"",segundo:"",tipo:"",origen:"",entraId:"",entraNombre:"",saleId:"",saleNombre:""},initialize:function(){},validation:{partidoId:{required:!0},tiempoDes:{required:!1},minuto:{required:!0},segundo:{required:!0},tipo:{required:!0},origen:{required:!0},entraId:{required:!0},entraNombre:{required:!1},saleId:{required:!1},saleNombre:{required:!1}}});return e}),define("collections/estadistica/MovimientosCollection",["backbone","models/estadistica/MovimientoModel"],function(t,e){var i=t.Collection.extend({model:e,url:function(){return"torneopartido/"+this.partido.get("id")+"/movimiento"},setTorneoPartido:function(t){this.partido=t}});return i}),define("text!templates/private/estadistica/tplRowEstadisticaMovimiento.html",[],function(){return'<th><%= id %></th>\n<td><%= tiempoDes %></td>\n<td><%= entraNombre %></td>\n<td><%= saleNombre %></td>\n<td><%= tipo %></td>\n<td>\n    <button id="eliminar-movimiento" class="btn btn-primary btn-xs" value="<%= id %>">\n        <span class="glyphicon glyphicon-trash" aria-hidden="true" value="<%= id %>"></span>\n    </button>\n</td>'}),define("views/private/estadistica/RowEstadisticaMovimientoView",["jquery","underscore","core/BaseView","views/private/util/ModalGenericView","text!templates/private/estadistica/tplRowEstadisticaMovimiento.html"],function(t,e,i,n,s){var o=i.extend({template:e.template(s),tagName:"tr",events:{"click #eliminar-movimiento":"deleteMovimiento"},initialize:function(t){this.model=t.modelo,this.parent=t.parent},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el.addClass(this.model.get("origenClass")),this},deleteMovimiento:function(){that=this,this.model.destroy({contentType:"application/json",wait:!0,success:function(t,e){that.destroyView(),that.parent.successRemoveMovimiento(t),new n({message:e.message})},error:function(t,e){new n({message:e.responseJSON.message})}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}});return o}),define("text!templates/private/estadistica/tplEstadisticaMovimientos.html",[],function(){return'<div id="partido-movimientos">\n    <table id="movimientos" class="table table-condensed">\n        <thead>\n        <tr>\n            <th>#</th>\n            <th>Minuto</th>\n            <th>Entra</th>\n            <th>Sale</th>\n            <th>Tipo</th>\n            <th></th>\n        </tr>\n        </thead>\n        <tbody>\n        </tbody>\n    </table>\n</div>'}),define("views/private/estadistica/EstadisticaMovimientosView",["jquery","backbone","core/BaseView","collections/estadistica/MovimientosCollection","views/private/estadistica/RowEstadisticaMovimientoView","text!templates/private/estadistica/tplEstadisticaMovimientos.html"],function(t,e,i,n,s,o){var r=i.extend({el:"#section-estadisticas-cambios",template:_.template(o),events:{},initialize:function(t){this.model=t.modelo,this.parent=t.parent,app.movimientosPartido=new n,this.listenTo(app.movimientosPartido,"add",this.agregarMovimiento),this.listenTo(app.movimientosPartido,"sync",this.syncMovimientos),this.render(),app.movimientosPartido.setTorneoPartido(this.model),app.movimientosPartido.fetch()},render:function(){this.$el.html(this.template(this.model.toJSON()))},agregarMovimiento:function(e){var i=this.generateClassByOrigenPunto(e.get("origen"));e.set({origenClass:i});var n=new s({modelo:e,parent:this.parent});t("#movimientos").find("tbody:last").append(n.render().$el)},syncMovimientos:function(){},generateClassByOrigenPunto:function(t){switch(t){case"LOCAL":return"success";case"VISITA":return"info"}}});return r}),define("models/estadistica/AsistenciaModel",["backbone"],function(t){var e=t.Model.extend({urlRoot:"asistencia",defaults:{partidoId:"",tiempoDes:"",minuto:"",segundo:"",origen:"",asisteId:"",asisteNombre:"",asistidoId:"",asistidoNombre:""},initialize:function(){_.each(this.attributes,function(t,e){this.set(e,_.escape(t))},this)},validation:{partidoId:{required:!0},tiempoDes:{required:!1},minuto:{required:!0},segundo:{required:!0},origen:{required:!0},asisteId:{required:!0},asisteNombre:{required:!1},asistidoId:{required:!0},asistidoNombre:{required:!1}}});return e}),define("collections/estadistica/AsistenciasCollection",["backbone","models/estadistica/AsistenciaModel"],function(t,e){var i=t.Collection.extend({model:e,url:function(){return"torneopartido/"+this.partido.get("id")+"/asistencia"},setTorneoPartido:function(t){this.partido=t}});return i}),define("text!templates/private/estadistica/tplRowEstadisticaAsistencia.html",[],function(){return'<th><%= id %></th>\n<td><%= tiempoDes %></td>\n<td><%= asisteNombre %></td>\n<td><%= asistidoNombre %></td>\n<td>\n    <button id="eliminar-asistencia" class="btn btn-primary btn-xs" value="<%= id %>">\n        <span class="glyphicon glyphicon-trash" aria-hidden="true" value="<%= id %>"></span>\n    </button>\n</td>'}),define("views/private/estadistica/RowEstadisticaAsistenciaView",["jquery","underscore","core/BaseView","views/private/util/ModalGenericView","text!templates/private/estadistica/tplRowEstadisticaAsistencia.html"],function(t,e,i,n,s){var o=i.extend({template:e.template(s),tagName:"tr",events:{"click #eliminar-asistencia":"deleteAsistencia"},initialize:function(t){this.model=t.modelo,this.parent=t.parent},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el.addClass(this.model.get("origenClass")),this},deleteAsistencia:function(){that=this,this.model.destroy({contentType:"application/json",wait:!0,success:function(t,e){that.destroyView(),that.parent.successRemoveAsistencia(t),new n({message:e.message})},error:function(t,e){new n({message:e.responseJSON.message})}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}});return o}),define("text!templates/private/estadistica/tplEstadisticaAsistencias.html",[],function(){return'<div id="partido-asistencias">\n    <table id="asistencias" class="table table-condensed">\n        <thead>\n        <tr>\n            <th>#</th>\n            <th>Minuto</th>\n            <th>Asistente</th>\n            <th>Encestador</th>\n            <th></th>\n        </tr>\n        </thead>\n        <tbody>\n        </tbody>\n    </table>\n</div>'}),define("views/private/estadistica/EstadisticaAsistenciasView",["jquery","backbone","core/BaseView","collections/estadistica/AsistenciasCollection","views/private/estadistica/RowEstadisticaAsistenciaView","text!templates/private/estadistica/tplEstadisticaAsistencias.html"],function(t,e,i,n,s,o){var r=i.extend({el:"#section-estadisticas-asistencias",template:_.template(o),events:{},initialize:function(t){this.model=t.modelo,this.parent=t.parent,app.asistenciasPartido=new n,this.listenTo(app.asistenciasPartido,"add",this.agregarAsistencia),this.listenTo(app.asistenciasPartido,"sync",this.syncAsistencias),this.render(),app.asistenciasPartido.setTorneoPartido(this.model),app.asistenciasPartido.fetch()},render:function(){this.$el.html(this.template(this.model.toJSON()))},agregarAsistencia:function(e){var i=this.generateClassByOrigenPunto(e.get("origen"));e.set({origenClass:i});var n=new s({modelo:e,parent:this.parent});t("#asistencias").find("tbody:last").append(n.render().$el)},syncAsistencias:function(){},generateClassByOrigenPunto:function(t){switch(t){case"LOCAL":return"success";case"VISITA":return"info"}}});return r}),define("models/estadistica/BloqueoModel",["backbone"],function(t){var e=t.Model.extend({urlRoot:"bloqueo",defaults:{partidoId:"",tiempoDes:"",minuto:"",segundo:"",origen:"",bloqueaId:"",bloqueaNombre:"",bloqueadoId:"",bloqueadoNombre:""},initialize:function(){},validation:{partidoId:{required:!0},tiempoDes:{required:!1},minuto:{required:!0},segundo:{required:!0},origen:{required:!0},bloqueaId:{required:!0},bloqueaNombre:{required:!1},bloqueadoId:{required:!0},bloqueadoNombre:{required:!1}}});return e}),define("collections/estadistica/BloqueosCollection",["backbone","models/estadistica/BloqueoModel"],function(t,e){var i=t.Collection.extend({model:e,url:function(){return"torneopartido/"+this.partido.get("id")+"/bloqueo"},setTorneoPartido:function(t){this.partido=t}});return i}),define("text!templates/private/estadistica/tplRowEstadisticaBloqueo.html",[],function(){return'<th><%= id %></th>\n<td><%= tiempoDes %></td>\n<td><%= bloqueaNombre %></td>\n<td><%= bloqueadoNombre %></td>\n<td>\n    <button id="eliminar-bloqueo" class="btn btn-primary btn-xs" value="<%= id %>">\n        <span class="glyphicon glyphicon-trash" aria-hidden="true" value="<%= id %>"></span>\n    </button>\n</td>'}),define("views/private/estadistica/RowEstadisticaBloqueoView",["jquery","underscore","core/BaseView","views/private/util/ModalGenericView","text!templates/private/estadistica/tplRowEstadisticaBloqueo.html"],function(t,e,i,n,s){var o=i.extend({template:e.template(s),tagName:"tr",events:{"click #eliminar-bloqueo":"deleteBloqueo"},initialize:function(t){this.model=t.modelo,this.parent=t.parent},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el.addClass(this.model.get("origenClass")),this},deleteBloqueo:function(){that=this,this.model.destroy({contentType:"application/json",wait:!0,success:function(t,e){that.destroyView(),that.parent.successRemoveBloqueo(t),new n({message:e.message})},error:function(t,e){new n({message:e.responseJSON.message})}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}});return o}),define("text!templates/private/estadistica/tplEstadisticaBloqueos.html",[],function(){return'<div id="partido-bloqueos">\n    <table id="bloqueos" class="table table-condensed">\n        <thead>\n        <tr>\n            <th>#</th>\n            <th>Minuto</th>\n            <th>Tapon</th>\n            <th>Sobre</th>\n            <th></th>\n        </tr>\n        </thead>\n        <tbody>\n        </tbody>\n    </table>\n</div>'}),define("views/private/estadistica/EstadisticaBloqueosView",["jquery","backbone","core/BaseView","collections/estadistica/BloqueosCollection","views/private/estadistica/RowEstadisticaBloqueoView","text!templates/private/estadistica/tplEstadisticaBloqueos.html"],function(t,e,i,n,s,o){var r=i.extend({el:"#section-estadisticas-bloqueos",template:_.template(o),events:{},initialize:function(t){this.model=t.modelo,this.parent=t.parent,app.bloqueosPartido=new n,this.listenTo(app.bloqueosPartido,"add",this.agregarBloqueo),this.listenTo(app.bloqueosPartido,"sync",this.syncBloqueos),this.render(),app.bloqueosPartido.setTorneoPartido(this.model),app.bloqueosPartido.fetch()},render:function(){this.$el.html(this.template(this.model.toJSON()))},agregarBloqueo:function(e){var i=this.generateClassByOrigenPunto(e.get("origen"));e.set({origenClass:i});var n=new s({modelo:e,parent:this.parent});t("#bloqueos").find("tbody:last").append(n.render().$el)},syncBloqueos:function(){},generateClassByOrigenPunto:function(t){switch(t){case"LOCAL":return"success";case"VISITA":return"info"}}});return r}),define("models/estadistica/ReboteModel",["backbone"],function(t){var e=t.Model.extend({urlRoot:"rebote",defaults:{partidoId:"",tiempoDes:"",minuto:"",segundo:"",tipo:"",origen:"",jugadorId:"",jugadorNombre:""},initialize:function(){},validation:{partidoId:{required:!0},tiempoDes:{required:!1},minuto:{required:!0},segundo:{required:!0},tipo:{required:!0},origen:{required:!0},jugadorId:{required:!0},jugadorNombre:{required:!1}}});return e}),define("collections/estadistica/RebotesCollection",["backbone","models/estadistica/ReboteModel"],function(t,e){var i=t.Collection.extend({model:e,url:function(){return"torneopartido/"+this.partido.get("id")+"/rebote"},setTorneoPartido:function(t){this.partido=t}});return i}),define("text!templates/private/estadistica/tplRowEstadisticaRebote.html",[],function(){return'<th><%= id %></th>\n<td><%= tiempoDes %></td>\n<td><%= jugadorNombre %></td>\n<td><%= tipo %></td>\n<td>\n    <button id="eliminar-rebote" class="btn btn-primary btn-xs" value="<%= id %>">\n        <span class="glyphicon glyphicon-trash" aria-hidden="true" value="<%= id %>"></span>\n    </button>\n</td>'}),define("views/private/estadistica/RowEstadisticaReboteView",["jquery","underscore","core/BaseView","views/private/util/ModalGenericView","text!templates/private/estadistica/tplRowEstadisticaRebote.html"],function(t,e,i,n,s){var o=i.extend({template:e.template(s),tagName:"tr",events:{"click #eliminar-rebote":"deleteRebote"},initialize:function(t){this.model=t.modelo,this.parent=t.parent},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el.addClass(this.model.get("origenClass")),this},deleteRebote:function(){that=this,this.model.destroy({contentType:"application/json",wait:!0,success:function(t,e){that.destroyView(),that.parent.successRemoveRebote(t),new n({message:e.message})},error:function(t,e){new n({message:e.responseJSON.message})}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}});return o}),define("text!templates/private/estadistica/tplEstadisticaRebotes.html",[],function(){return'<div id="partido-rebotes">\n    <table id="rebotes" class="table table-condensed">\n        <thead>\n        <tr>\n            <th>#</th>\n            <th>Minuto</th>\n            <th>Jugador</th>\n            <th>Tipo</th>\n            <th></th>\n        </tr>\n        </thead>\n        <tbody>\n        </tbody>\n    </table>\n</div>'}),define("views/private/estadistica/EstadisticaRebotesView",["jquery","backbone","core/BaseView","collections/estadistica/RebotesCollection","views/private/estadistica/RowEstadisticaReboteView","text!templates/private/estadistica/tplEstadisticaRebotes.html"],function(t,e,i,n,s,o){var r=i.extend({el:"#section-estadisticas-rebotes",template:_.template(o),events:{},initialize:function(t){this.model=t.modelo,this.parent=t.parent,app.rebotesPartido=new n,this.listenTo(app.rebotesPartido,"add",this.agregarRebote),this.listenTo(app.rebotesPartido,"sync",this.syncRebotes),this.render(),app.rebotesPartido.setTorneoPartido(this.model),app.rebotesPartido.fetch()},render:function(){this.$el.html(this.template(this.model.toJSON()))},agregarRebote:function(e){var i=this.generateClassByOrigenRebote(e.get("origen"));e.set({origenClass:i});var n=new s({modelo:e,parent:this.parent});t("#rebotes").find("tbody:last").append(n.render().$el)},syncRebotes:function(){},generateClassByOrigenRebote:function(t){switch(t){case"LOCAL":return"success";case"VISITA":return"info"}}});return r}),define("models/estadistica/RoboModel",["backbone"],function(t){var e=t.Model.extend({urlRoot:"robo",defaults:{partidoId:"",tiempoDes:"",minuto:"",segundo:"",origen:"",robadorId:"",robadorNombre:"",perdedorId:"",perdedorNombre:""},initialize:function(){},validation:{partidoId:{required:!0},tiempoDes:{required:!1},minuto:{required:!0},segundo:{required:!0},origen:{required:!0},robadorId:{required:!0},robadorNombre:{required:!1},perdedorId:{required:!1},perdedorNombre:{required:!1}}});return e}),define("collections/estadistica/RobosCollection",["backbone","models/estadistica/RoboModel"],function(t,e){var i=t.Collection.extend({model:e,url:function(){return"torneopartido/"+this.partido.get("id")+"/robo"},setTorneoPartido:function(t){this.partido=t}});return i}),define("text!templates/private/estadistica/tplRowEstadisticaRobo.html",[],function(){return'<th><%= id %></th>\n<td><%= tiempoDes %></td>\n<td><%= robadorNombre %></td>\n<td><%= perdedorNombre %></td>\n<td>\n    <button id="eliminar-robo" class="btn btn-primary btn-xs" value="<%= id %>">\n        <span class="glyphicon glyphicon-trash" aria-hidden="true" value="<%= id %>"></span>\n    </button>\n</td>'}),define("views/private/estadistica/RowEstadisticaRoboView",["jquery","underscore","core/BaseView","views/private/util/ModalGenericView","text!templates/private/estadistica/tplRowEstadisticaRobo.html"],function(t,e,i,n,s){var o=i.extend({template:e.template(s),tagName:"tr",events:{"click #eliminar-robo":"deleteRobo"},initialize:function(t){this.model=t.modelo,this.parent=t.parent},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el.addClass(this.model.get("origenClass")),this},deleteRobo:function(){that=this,this.model.destroy({contentType:"application/json",wait:!0,success:function(t,e){that.destroyView(),that.parent.successRemoveRobo(t),new n({message:e.message})},error:function(t,e){new n({message:e.responseJSON.message})}})},destroyView:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)}});return o}),define("text!templates/private/estadistica/tplEstadisticaRobos.html",[],function(){return'<div id="partido-robos">\n    <table id="robos" class="table table-condensed">\n        <thead>\n        <tr>\n            <th>#</th>\n            <th>Minuto</th>\n            <th>Robo</th>\n            <th>Perdedor</th>\n            <th></th>\n        </tr>\n        </thead>\n        <tbody>\n        </tbody>\n    </table>\n</div>'}),define("views/private/estadistica/EstadisticaRobosView",["jquery","backbone","core/BaseView","collections/estadistica/RobosCollection","views/private/estadistica/RowEstadisticaRoboView","text!templates/private/estadistica/tplEstadisticaRobos.html"],function(t,e,i,n,s,o){var r=i.extend({el:"#section-estadisticas-robos",template:_.template(o),events:{},initialize:function(t){this.model=t.modelo,this.parent=t.parent,app.robosPartido=new n,this.listenTo(app.robosPartido,"add",this.agregarRobo),this.listenTo(app.robosPartido,"sync",this.syncRobos),this.render(),app.robosPartido.setTorneoPartido(this.model),app.robosPartido.fetch()},render:function(){this.$el.html(this.template(this.model.toJSON()))},agregarRobo:function(e){var i=this.generateClassByOrigenPunto(e.get("origen"));e.set({origenClass:i});var n=new s({modelo:e,parent:this.parent});t("#robos").find("tbody:last").append(n.render().$el)},syncRobos:function(){},generateClassByOrigenPunto:function(t){switch(t){case"LOCAL":return"success";case"VISITA":return"info"}}});return r}),define("models/estadistica/TipoEncesteModel",["backbone"],function(t){var e=t.Model.extend({urlRoot:"tipoenceste",defaults:{clave:"",descripcion:""},initialize:function(){},validation:{clave:{required:!0},descripcion:{required:!0}}});return e}),define("collections/estadistica/TipoEncestesCollection",["backbone","models/estadistica/TipoEncesteModel"],function(t,e){var i=t.Collection.extend({model:e,url:"tipoenceste"});return i}),define("text!templates/private/estadistica/tplPuntoCreate.html",[],function(){return'<div class="modal fade" id="punto-create-dialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n                <h4 class="modal-title">Punto</h4>\n            </div>\n            <div class="modal-body">\n                <p>Crear Punto.</p>\n                <div class="alert alert-danger" role="alert"></div>\n                <form id="form-punto" role="form">\n                    <input id="partido-id" type="hidden" name="partidoId" value="<%= partidoId %>">\n                    <input id="origen-punto" type="hidden" name="origen" value="<%= origen %>">\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Jugador</label>\n                                <select class="form-control" id="select-tirador" placeholder="Jugador..." name="jugadorId" value="<%= jugadorId %>">\n                                </select>\n                            </div>\n                        </div>\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Tipo Punto</label>\n                                <select class="form-control" id="select-tipo-enceste" placeholder="Tipo Enceste..." name="tipo" value="<%= tipo %>">\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Minuto</label>\n                                <input class="form-control" type="text" name="minuto" value="<%= minuto %>">\n                                </select>\n                            </div>\n                        </div>\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Segundo</label>\n                                <input class="form-control" type="text" name="segundo" value="<%= segundo %>">\n                            </div>\n                        </div>\n                    </div>\n                </form>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n                <button id="btn-aceptar" type="button" class="btn btn-success">Aceptar</button>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("views/private/estadistica/PuntoCreateView",["jquery","backbone","bootstrap","core/BaseView","models/estadistica/PuntoModel","models/TorneoEquipoModel","collections/TorneoJugadoresCollection","collections/estadistica/TipoEncestesCollection","views/private/util/ModalGenericView","text!templates/private/estadistica/tplPuntoCreate.html"],function(t,e,i,n,s,o,r,a,l,c){var d=n.extend({el:"#modal-partido",template:_.template(c),events:{"click #btn-aceptar":"clickAceptar"},initialize:function(t){this.model=new s,this.modelPartido=t.modelo,this.callbackAceptar=t.callbackAceptar,this.parent=t.parent,this.model.set({origen:t.origen}),this.model.set({partidoId:t.modelo.get("id")}),this.render(),this.tipos=new a,this.listenTo(this.tipos,"add",this.agregarTipoEnceste),this.listenTo(this.tipos,"sync",this.syncTipoEncestes),this.tipos.fetch(),this.tiradores=new r,this.listenTo(this.tiradores,"add",this.agregarTirador),this.listenTo(this.tiradores,"sync",this.syncTiradores),this.fetchJugadoresByOrigen(t.origen),e.Validation.bind(this)},fetchJugadoresByOrigen:function(t){var e;"LOCAL"==t&&(e=new o({id:this.modelPartido.get("localId")})),"VISITA"==t&&(e=new o({id:this.modelPartido.get("visitaId")})),this.tiradores.setTorneoEquipo(e),this.tiradores.fetch()},render:function(){this.$el.html(this.template(this.model.toJSON())),this.$("#punto-create-dialog").modal("show"),this.$(".alert-danger").hide()},agregarTipoEnceste:function(e){t("#select-tipo-enceste").append(t("<option>",{value:e.get("clave"),text:e.get("descripcion")}))},syncTipoEncestes:function(e){t("#select-tipo-enceste").change()},agregarTirador:function(e){t("#select-tirador").append(t("<option>",{value:e.get("id"),text:e.get("jugadorNombre")}))},syncTiradores:function(e){t("#select-tirador").change()},clickAceptar:function(t){var e=this.$el.find("#form-punto").serializeObject();this.model.set(e),that=this,this.model.isValid(!0)&&this.model.save({},{wait:!0,success:function(t,e){new l({message:"Punto registrado correctamente"}),that.callbackAceptar(t)},error:function(t,e){new l({message:"Se presento un error al registrar el punto"})}})},destroyView:function(){t("body").removeClass("modal-open"),this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this),t("<div id='modal-partido'></div>").appendTo("#modal-partido-parent")}});return d}),define("models/estadistica/TipoFaltaModel",["backbone"],function(t){var e=t.Model.extend({urlRoot:"tipofalta",defaults:{clave:"",descripcion:""},initialize:function(){},validation:{clave:{required:!0},descripcion:{required:!0}}});return e}),define("collections/estadistica/TipoFaltasCollection",["backbone","models/estadistica/TipoFaltaModel"],function(t,e){var i=t.Collection.extend({model:e,url:"tipofalta"});return i}),define("text!templates/private/estadistica/tplFaltaCreate.html",[],function(){return'<div class="modal fade" id="falta-create-dialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n                <h4 class="modal-title">Falta</h4>\n            </div>\n            <div class="modal-body">\n                <p>Crear Falta.</p>\n                <div class="alert alert-danger" role="alert"></div>\n                <form id="form-falta" role="form">\n                    <input id="partido-id" type="hidden" name="partidoId" value="<%= partidoId %>">\n                    <input id="origen-falta" type="hidden" name="origen" value="<%= origen %>">\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Infractor</label>\n                                <select class="form-control" id="select-infractor" placeholder="Jugador..." name="infractorId" value="<%= infractorId %>">\n                                </select>\n                            </div>\n                        </div>\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Recibe</label>\n                                <select class="form-control" id="select-receptor" placeholder="Jugador..." name="receptorId" value="<%= receptorId %>">\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Tipo Falta</label>\n                                <select class="form-control" id="select-tipo-falta" placeholder="Tipo Falta..." name="tipo" value="<%= tipo %>">\n                                </select>\n                            </div>\n                        </div>\n                        <div class="col-xs-6">\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Minuto</label>\n                                <input class="form-control" type="text" name="minuto" value="<%= minuto %>">\n                                </select>\n                            </div>\n                        </div>\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Segundo</label>\n                                <input class="form-control" type="text" name="segundo" value="<%= segundo %>">\n                            </div>\n                        </div>\n                    </div>\n                </form>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n                <button id="btn-aceptar" type="button" class="btn btn-success">Aceptar</button>\n            </div>\n        </div>\n    </div>\n</div>\n\n'}),define("views/private/estadistica/FaltaCreateView",["jquery","backbone","bootstrap","core/BaseView","models/estadistica/FaltaModel","models/TorneoEquipoModel","collections/TorneoJugadoresCollection","collections/estadistica/TipoFaltasCollection","views/private/util/ModalGenericView","text!templates/private/estadistica/tplFaltaCreate.html"],function(t,e,i,n,s,o,r,a,l,c){
var d=n.extend({el:"#modal-partido",template:_.template(c),events:{"click #btn-aceptar":"clickAceptar"},initialize:function(t){this.model=new s,this.modelPartido=t.modelo,this.callbackAceptar=t.callbackAceptar,this.parent=t.parent,this.model.set({origen:t.origen}),this.model.set({partidoId:t.modelo.get("id")}),this.render(),this.tipos=new a,this.listenTo(this.tipos,"add",this.agregarTipoFalta),this.listenTo(this.tipos,"sync",this.syncTipoFaltas),this.tipos.fetch(),this.infractores=new r,this.listenTo(this.infractores,"add",this.agregarInfractor),this.listenTo(this.infractores,"sync",this.syncInfractores),this.fetchInfractoresByOrigen(t.origen),this.receptores=new r,this.listenTo(this.receptores,"add",this.agregarReceptor),this.listenTo(this.receptores,"sync",this.syncReceptores),this.fetchReceptoresByOrigen(t.origen),e.Validation.bind(this)},fetchInfractoresByOrigen:function(t){var e;"LOCAL"==t&&(e=new o({id:this.modelPartido.get("localId")})),"VISITA"==t&&(e=new o({id:this.modelPartido.get("visitaId")})),this.infractores.setTorneoEquipo(e),this.infractores.fetch()},fetchReceptoresByOrigen:function(t){var e;"VISITA"==t&&(e=new o({id:this.modelPartido.get("localId")})),"LOCAL"==t&&(e=new o({id:this.modelPartido.get("visitaId")})),this.receptores.setTorneoEquipo(e),this.receptores.fetch()},render:function(){this.$el.html(this.template(this.model.toJSON())),this.$("#falta-create-dialog").modal("show"),this.$(".alert-danger").hide()},agregarTipoFalta:function(e){t("#select-tipo-falta").append(t("<option>",{value:e.get("clave"),text:e.get("descripcion")}))},syncTipoFaltas:function(e){t("#select-tipo-falta").change()},agregarInfractor:function(e){t("#select-infractor").append(t("<option>",{value:e.get("id"),text:e.get("jugadorNombre")}))},syncInfractores:function(e){t("#select-infractor").change()},agregarReceptor:function(e){t("#select-receptor").append(t("<option>",{value:e.get("id"),text:e.get("jugadorNombre")}))},syncReceptores:function(e){t("#select-receptor").change()},clickAceptar:function(t){var e=this.$el.find("#form-falta").serializeObject();this.model.set(e),that=this,this.model.isValid(!0)&&this.model.save({},{wait:!0,success:function(t,e){new l({message:"Falta registrada correctamente"}),that.callbackAceptar(t)},error:function(t,e){new l({message:"Se presento un error al registrar la falta"})}})},destroyView:function(){t("body").removeClass("modal-open"),this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this),t("<div id='modal-partido'></div>").appendTo("#modal-partido-parent")}});return d}),define("models/estadistica/TipoMovimientoModel",["backbone"],function(t){var e=t.Model.extend({urlRoot:"tipomovimiento",defaults:{clave:"",descripcion:""},initialize:function(){},validation:{clave:{required:!0},descripcion:{required:!0}}});return e}),define("collections/estadistica/TipoMovimientosCollection",["backbone","models/estadistica/TipoMovimientoModel"],function(t,e){var i=t.Collection.extend({model:e,url:"tipomovimiento"});return i}),define("text!templates/private/estadistica/tplMovimientoCreate.html",[],function(){return'<div class="modal fade" id="movimiento-create-dialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n                <h4 class="modal-title">Movimiento</h4>\n            </div>\n            <div class="modal-body">\n                <p>Crear Movimiento.</p>\n                <div class="alert alert-danger" role="alert"></div>\n                <form id="form-movimiento" role="form">\n                    <input id="partido-id" type="hidden" name="partidoId" value="<%= partidoId %>">\n                    <input id="origen-movimiento" type="hidden" name="origen" value="<%= origen %>">\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Entra</label>\n                                <select class="form-control" id="select-entra" placeholder="Jugador..." name="entraId" value="<%= entraId %>">\n                                </select>\n                            </div>\n                        </div>\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Sale</label>\n                                <select class="form-control" id="select-sale" placeholder="Jugador..." name="saleId" value="<%= saleId %>">\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Tipo Movimiento</label>\n                                <select class="form-control" id="select-tipo-movimiento" placeholder="Tipo Movimiento..." name="tipo" value="<%= tipo %>">\n                                </select>\n                            </div>\n                        </div>\n                        <div class="col-xs-6">\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Minuto</label>\n                                <input class="form-control" type="text" name="minuto" value="<%= minuto %>">\n                                </select>\n                            </div>\n                        </div>\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Segundo</label>\n                                <input class="form-control" type="text" name="segundo" value="<%= segundo %>">\n                            </div>\n                        </div>\n                    </div>\n                </form>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n                <button id="btn-aceptar" type="button" class="btn btn-success">Aceptar</button>\n            </div>\n        </div>\n    </div>\n</div>\n\n'}),define("views/private/estadistica/MovimientoCreateView",["jquery","backbone","bootstrap","core/BaseView","models/estadistica/MovimientoModel","models/TorneoEquipoModel","collections/TorneoJugadoresCollection","collections/estadistica/TipoMovimientosCollection","views/private/util/ModalGenericView","text!templates/private/estadistica/tplMovimientoCreate.html"],function(t,e,i,n,s,o,r,a,l,c){var d=n.extend({el:"#modal-partido",template:_.template(c),events:{"click #btn-aceptar":"clickAceptar","change #select-entra":"changeEntra"},initialize:function(t){this.model=new s,this.modelPartido=t.modelo,this.callbackAceptar=t.callbackAceptar,this.parent=t.parent,this.origen=t.origen,this.tipo=t.tipo,this.model.set({origen:t.origen}),this.model.set({partidoId:t.modelo.get("id")}),this.render(),this.tipos=new a,this.listenTo(this.tipos,"add",this.agregarTipoMovimiento),this.listenTo(this.tipos,"sync",this.syncTipoMovimientos),this.tipos.fetch(),this.entran=new r,this.listenTo(this.entran,"add",this.agregarEntra),this.listenTo(this.entran,"sync",this.syncEntraes),this.salen=new r,this.listenTo(this.salen,"add",this.agregarSale),this.listenTo(this.salen,"sync",this.syncSalees),"DIRECT_INIT"!=this.tipo&&"DIRECT_OTHER"!=this.tipo?this.fetchSaleesByOrigen(this.origen):(this.entran.add(t.entra),"DIRECT_OTHER"==this.tipo?this.salen.add(t.sale):this.agregarSaleDefault()),e.Validation.bind(this)},fetchEntraesByOrigen:function(t){var e;"LOCAL"==t&&(e=new o({id:this.modelPartido.get("localId")})),"VISITA"==t&&(e=new o({id:this.modelPartido.get("visitaId")})),this.entran.setTorneoEquipo(e),this.entran.fetch()},fetchSaleesByOrigen:function(t){var e;"LOCAL"==t&&(e=new o({id:this.modelPartido.get("localId")})),"VISITA"==t&&(e=new o({id:this.modelPartido.get("visitaId")})),this.salen.setTorneoEquipo(e),this.salen.fetch()},render:function(){this.$el.html(this.template(this.model.toJSON())),this.$("#movimiento-create-dialog").modal("show"),this.$(".alert-danger").hide()},agregarTipoMovimiento:function(e){("DIRECT_INIT"!=this.tipo||"INICIO"==e.get("clave"))&&("DIRECT_OTHER"!=this.tipo||"INICIO"!=e.get("clave"))&&t("#select-tipo-movimiento").append(t("<option>",{value:e.get("clave"),text:e.get("descripcion")}))},syncTipoMovimientos:function(e){t("#select-tipo-movimiento").change()},agregarEntra:function(e){t("#select-entra").append(t("<option>",{value:e.get("id"),text:e.get("jugadorNombre")}))},syncEntraes:function(e){t("#select-entra").change()},changeEntra:function(e){var i=this.entran.get(t(e.target).val());t("#select-sale").html(""),that=this,this.salen.each(function(t){i.get("id")!=t.get("id")&&that.agregarSale(t)})},agregarSaleDefault:function(){t("#select-sale").append(t("<option>",{value:"",text:"Ninguno"}))},agregarSale:function(e){t("#select-sale").append(t("<option>",{value:e.get("id"),text:e.get("jugadorNombre")}))},syncSalees:function(e){t("#select-sale").change(),this.fetchEntraesByOrigen(this.origen)},clickAceptar:function(t){var e=this.$el.find("#form-movimiento").serializeObject();this.model.set(e),that=this,this.model.isValid(!0)&&this.model.save({},{wait:!0,success:function(t,e){new l({message:"Movimiento registrado correctamente"}),that.callbackAceptar(t)},error:function(t,e){new l({message:"Se presento un error al registrar el movimiento"})}})},destroyView:function(){t("body").removeClass("modal-open"),this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this),t("<div id='modal-partido'></div>").appendTo("#modal-partido-parent")}});return d}),define("text!templates/private/estadistica/tplAsistenciaCreate.html",[],function(){return'<div class="modal fade" id="asistencia-create-dialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n                <h4 class="modal-title">Asistencia</h4>\n            </div>\n            <div class="modal-body">\n                <p>Crear Asistencia.</p>\n                <div class="alert alert-danger" role="alert"></div>\n                <form id="form-asistencia" role="form">\n                    <input id="partido-id" type="hidden" name="partidoId" value="<%= partidoId %>">\n                    <input id="origen-asistencia" type="hidden" name="origen" value="<%= origen %>">\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Asistencia</label>\n                                <select class="form-control" id="select-asiste" placeholder="Jugador..." name="asisteId" value="<%= asisteId %>">\n                                </select>\n                            </div>\n                        </div>\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Asistido</label>\n                                <select class="form-control" id="select-asistido" placeholder="Jugador..." name="asistidoId" value="<%= asistidoId %>">\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Minuto</label>\n                                <input class="form-control" type="text" name="minuto" value="<%= minuto %>">\n                                </select>\n                            </div>\n                        </div>\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Segundo</label>\n                                <input class="form-control" type="text" name="segundo" value="<%= segundo %>">\n                            </div>\n                        </div>\n                    </div>\n                </form>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n                <button id="btn-aceptar" type="button" class="btn btn-success">Aceptar</button>\n            </div>\n        </div>\n    </div>\n</div>\n\n'}),define("views/private/estadistica/AsistenciaCreateView",["jquery","backbone","bootstrap","core/BaseView","models/estadistica/AsistenciaModel","models/TorneoEquipoModel","collections/TorneoJugadoresCollection","views/private/util/ModalGenericView","text!templates/private/estadistica/tplAsistenciaCreate.html"],function(t,e,i,n,s,o,r,a,l){var c=n.extend({el:"#modal-partido",template:_.template(l),events:{"click #btn-aceptar":"clickAceptar","change #select-asiste":"changeAsiste"},initialize:function(t){this.model=new s,this.modelPartido=t.modelo,this.callbackAceptar=t.callbackAceptar,this.parent=t.parent,this.origen=t.origen,this.model.set({origen:t.origen}),this.model.set({partidoId:t.modelo.get("id")}),this.render(),this.asisten=new r,this.listenTo(this.asisten,"add",this.agregarAsiste),this.listenTo(this.asisten,"sync",this.syncAsistees),this.asistidon=new r,this.listenTo(this.asistidon,"add",this.agregarAsistido),this.listenTo(this.asistidon,"sync",this.syncAsistidoes),this.fetchAsistidoesByOrigen(this.origen),e.Validation.bind(this)},fetchAsisteesByOrigen:function(t){var e;"LOCAL"==t&&(e=new o({id:this.modelPartido.get("localId")})),"VISITA"==t&&(e=new o({id:this.modelPartido.get("visitaId")})),this.asisten.setTorneoEquipo(e),this.asisten.fetch()},fetchAsistidoesByOrigen:function(t){var e;"LOCAL"==t&&(e=new o({id:this.modelPartido.get("localId")})),"VISITA"==t&&(e=new o({id:this.modelPartido.get("visitaId")})),this.asistidon.setTorneoEquipo(e),this.asistidon.fetch()},render:function(){this.$el.html(this.template(this.model.toJSON())),this.$("#asistencia-create-dialog").modal("show"),this.$(".alert-danger").hide()},agregarAsiste:function(e){t("#select-asiste").append(t("<option>",{value:e.get("id"),text:e.get("jugadorNombre")}))},syncAsistees:function(e){t("#select-asiste").change()},changeAsiste:function(e){var i=this.asisten.get(t(e.target).val());t("#select-asistido").html(""),that=this,this.asistidon.each(function(t){i.get("id")!=t.get("id")&&that.agregarAsistido(t)})},agregarAsistido:function(e){t("#select-asistido").append(t("<option>",{value:e.get("id"),text:e.get("jugadorNombre")}))},syncAsistidoes:function(e){t("#select-asistido").change(),this.fetchAsisteesByOrigen(this.origen)},clickAceptar:function(t){var e=this.$el.find("#form-asistencia").serializeObject();this.model.set(e),that=this,this.model.isValid(!0)&&this.model.save({},{wait:!0,success:function(t,e){new a({message:"Asistencia registrada correctamente"}),that.callbackAceptar(t)},error:function(t,e){new a({message:"Se presento un error al registrar la asistencia"})}})},destroyView:function(){t("body").removeClass("modal-open"),this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this),t("<div id='modal-partido'></div>").appendTo("#modal-partido-parent")}});return c}),define("text!templates/private/estadistica/tplBloqueoCreate.html",[],function(){return'<div class="modal fade" id="bloqueo-create-dialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n                <h4 class="modal-title">Bloqueo</h4>\n            </div>\n            <div class="modal-body">\n                <p>Crear Bloqueo.</p>\n                <div class="alert alert-danger" role="alert"></div>\n                <form id="form-bloqueo" role="form">\n                    <input id="partido-id" type="hidden" name="partidoId" value="<%= partidoId %>">\n                    <input id="origen-bloqueo" type="hidden" name="origen" value="<%= origen %>">\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Bloquea</label>\n                                <select class="form-control" id="select-bloquea" placeholder="Jugador..." name="bloqueaId" value="<%= bloqueaId %>">\n                                </select>\n                            </div>\n                        </div>\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Bloqueado</label>\n                                <select class="form-control" id="select-bloqueado" placeholder="Jugador..." name="bloqueadoId" value="<%= bloqueadoId %>">\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Minuto</label>\n                                <input class="form-control" type="number" placeholder="Minuto" min="0" max="120" name="minuto" value="<%= minuto %>">\n                                </select>\n                            </div>\n                        </div>\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Segundo</label>\n                                <input class="form-control" type="number" placeholder="Minuto" min="0" max="60" name="segundo" value="<%= segundo %>">\n                            </div>\n                        </div>\n                    </div>\n                </form>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n                <button id="btn-aceptar" type="button" class="btn btn-success">Aceptar</button>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("views/private/estadistica/BloqueoCreateView",["jquery","backbone","bootstrap","core/BaseView","models/estadistica/BloqueoModel","models/TorneoEquipoModel","collections/TorneoJugadoresCollection","views/private/util/ModalGenericView","text!templates/private/estadistica/tplBloqueoCreate.html"],function(t,e,i,n,s,o,r,a,l){var c=n.extend({el:"#modal-partido",template:_.template(l),events:{"click #btn-aceptar":"clickAceptar"},initialize:function(t){this.model=new s,this.modelPartido=t.modelo,this.callbackAceptar=t.callbackAceptar,this.parent=t.parent,this.model.set({origen:t.origen}),this.model.set({partidoId:t.modelo.get("id")}),this.render(),this.bloqueadores=new r,this.listenTo(this.bloqueadores,"add",this.agregarInfractor),this.listenTo(this.bloqueadores,"sync",this.syncBloqueadores),this.fetchBloqueadoresByOrigen(t.origen),this.bloqueados=new r,this.listenTo(this.bloqueados,"add",this.agregarReceptor),this.listenTo(this.bloqueados,"sync",this.syncBloqueados),this.fetchBloqueadosByOrigen(t.origen),e.Validation.bind(this)},fetchBloqueadoresByOrigen:function(t){var e;"LOCAL"==t&&(e=new o({id:this.modelPartido.get("localId")})),"VISITA"==t&&(e=new o({id:this.modelPartido.get("visitaId")})),this.bloqueadores.setTorneoEquipo(e),this.bloqueadores.fetch()},fetchBloqueadosByOrigen:function(t){var e;"VISITA"==t&&(e=new o({id:this.modelPartido.get("localId")})),"LOCAL"==t&&(e=new o({id:this.modelPartido.get("visitaId")})),this.bloqueados.setTorneoEquipo(e),this.bloqueados.fetch()},render:function(){this.$el.html(this.template(this.model.toJSON())),this.$("#bloqueo-create-dialog").modal("show"),this.$(".alert-danger").hide()},agregarInfractor:function(e){t("#select-bloquea").append(t("<option>",{value:e.get("id"),text:e.get("jugadorNombre")}))},syncBloqueadores:function(e){t("#select-bloquea").change()},agregarReceptor:function(e){t("#select-bloqueado").append(t("<option>",{value:e.get("id"),text:e.get("jugadorNombre")}))},syncBloqueados:function(e){t("#select-bloqueado").change()},clickAceptar:function(t){var e=this.$el.find("#form-bloqueo").serializeObject();this.model.set(e),that=this,this.model.isValid(!0)&&this.model.save({},{wait:!0,success:function(t,e){new a({message:"Bloqueo registrado correctamente"}),that.callbackAceptar(t)},error:function(t,e){new a({message:"Se presento un error al registrar el bloqueo"})}})},destroyView:function(){t("body").removeClass("modal-open"),this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this),t("<div id='modal-partido'></div>").appendTo("#modal-partido-parent")}});return c}),define("models/estadistica/TipoReboteModel",["backbone"],function(t){var e=t.Model.extend({urlRoot:"tiporebote",defaults:{clave:"",descripcion:""},initialize:function(){},validation:{clave:{required:!0},descripcion:{required:!0}}});return e}),define("collections/estadistica/TipoRebotesCollection",["backbone","models/estadistica/TipoReboteModel"],function(t,e){var i=t.Collection.extend({model:e,url:"tiporebote"});return i}),define("text!templates/private/estadistica/tplReboteCreate.html",[],function(){return'<div class="modal fade" id="rebote-create-dialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n                <h4 class="modal-title">Rebote</h4>\n            </div>\n            <div class="modal-body">\n                <p>Crear Rebote.</p>\n                <div class="alert alert-danger" role="alert"></div>\n                <form id="form-rebote" role="form">\n                    <input id="partido-id" type="hidden" name="partidoId" value="<%= partidoId %>">\n                    <input id="origen-rebote" type="hidden" name="origen" value="<%= origen %>">\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Jugador</label>\n                                <select class="form-control" id="select-jugador" placeholder="Jugador..." name="jugadorId" value="<%= jugadorId %>">\n                                </select>\n                            </div>\n                        </div>\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Tipo Rebote</label>\n                                <select class="form-control" id="select-tipo-rebote" placeholder="Tipo Rebote..." name="tipo" value="<%= tipo %>">\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Minuto</label>\n                                <input class="form-control" type="text" name="minuto" value="<%= minuto %>">\n                                </select>\n                            </div>\n                        </div>\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Segundo</label>\n                                <input class="form-control" type="text" name="segundo" value="<%= segundo %>">\n                            </div>\n                        </div>\n                    </div>\n                </form>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n                <button id="btn-aceptar" type="button" class="btn btn-success">Aceptar</button>\n            </div>\n        </div>\n    </div>\n</div>\n\n'}),define("views/private/estadistica/ReboteCreateView",["jquery","backbone","bootstrap","core/BaseView","models/estadistica/ReboteModel","models/TorneoEquipoModel","collections/TorneoJugadoresCollection","collections/estadistica/TipoRebotesCollection","views/private/util/ModalGenericView","text!templates/private/estadistica/tplReboteCreate.html"],function(t,e,i,n,s,o,r,a,l,c){var d=n.extend({el:"#modal-partido",template:_.template(c),events:{"click #btn-aceptar":"clickAceptar"},initialize:function(t){this.model=new s,this.modelPartido=t.modelo,this.callbackAceptar=t.callbackAceptar,this.parent=t.parent,this.model.set({origen:t.origen}),this.model.set({partidoId:t.modelo.get("id")}),this.render(),this.tipos=new a,this.listenTo(this.tipos,"add",this.agregarTipoRebote),this.listenTo(this.tipos,"sync",this.syncTipoRebotes),this.tipos.fetch(),this.jugadores=new r,this.listenTo(this.jugadores,"add",this.agregarJugador),this.listenTo(this.jugadores,"sync",this.syncJugadores),this.fetchJugadoresByOrigen(t.origen),e.Validation.bind(this)},fetchJugadoresByOrigen:function(t){var e;"LOCAL"==t&&(e=new o({id:this.modelPartido.get("localId")})),"VISITA"==t&&(e=new o({id:this.modelPartido.get("visitaId")})),this.jugadores.setTorneoEquipo(e),this.jugadores.fetch()},render:function(){this.$el.html(this.template(this.model.toJSON())),this.$("#rebote-create-dialog").modal("show"),this.$(".alert-danger").hide()},agregarTipoRebote:function(e){t("#select-tipo-rebote").append(t("<option>",{value:e.get("clave"),text:e.get("descripcion")}))},syncTipoRebotes:function(e){t("#select-tipo-rebote").change()},agregarJugador:function(e){t("#select-jugador").append(t("<option>",{value:e.get("id"),text:e.get("jugadorNombre")}))},syncJugadores:function(e){t("#select-jugador").change()},clickAceptar:function(t){var e=this.$el.find("#form-rebote").serializeObject();this.model.set(e),that=this,this.model.isValid(!0)&&this.model.save({},{wait:!0,success:function(t,e){new l({message:"Rebote registrado correctamente"}),that.callbackAceptar(t)},error:function(t,e){new l({message:"Se presento un error al registrar el rebote"})}})},destroyView:function(){t("body").removeClass("modal-open"),this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this),t("<div id='modal-partido'></div>").appendTo("#modal-partido-parent")}});return d}),define("text!templates/private/estadistica/tplRoboCreate.html",[],function(){return'B<div class="modal fade" id="robo-create-dialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n                <h4 class="modal-title">Robo</h4>\n            </div>\n            <div class="modal-body">\n                <p>Crear Robo.</p>\n                <div class="alert alert-danger" role="alert"></div>\n                <form id="form-robo" role="form">\n                    <input id="partido-id" type="hidden" name="partidoId" value="<%= partidoId %>">\n                    <input id="origen-robo" type="hidden" name="origen" value="<%= origen %>">\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Roba</label>\n                                <select class="form-control" id="select-robo" placeholder="Jugador..." name="robadorId" value="<%= robadorId %>">\n                                </select>\n                            </div>\n                        </div>\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Pierde</label>\n                                <select class="form-control" id="select-pierde" placeholder="Jugador..." name="perdedorId" value="<%= perdedorId %>">\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Minuto</label>\n                                <input class="form-control" type="text" name="minuto" value="<%= minuto %>">\n                                </select>\n                            </div>\n                        </div>\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <label>Segundo</label>\n                                <input class="form-control" type="text" name="segundo" value="<%= segundo %>">\n                            </div>\n                        </div>\n                    </div>\n                </form>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n                <button id="btn-aceptar" type="button" class="btn btn-success">Aceptar</button>\n            </div>\n        </div>\n    </div>\n</div>\n\n'}),define("views/private/estadistica/RoboCreateView",["jquery","backbone","bootstrap","core/BaseView","models/estadistica/RoboModel","models/TorneoEquipoModel","collections/TorneoJugadoresCollection","views/private/util/ModalGenericView","text!templates/private/estadistica/tplRoboCreate.html"],function(t,e,i,n,s,o,r,a,l){var c=n.extend({el:"#modal-partido",template:_.template(l),events:{"click #btn-aceptar":"clickAceptar"},initialize:function(t){this.model=new s,this.modelPartido=t.modelo,this.callbackAceptar=t.callbackAceptar,this.parent=t.parent,this.model.set({origen:t.origen}),this.model.set({partidoId:t.modelo.get("id")}),this.render(),this.robadores=new r,this.listenTo(this.robadores,"add",this.agregarRobador),this.listenTo(this.robadores,"sync",this.syncRobadores),this.fetchRobadoresByOrigen(t.origen),this.perdedores=new r,this.listenTo(this.perdedores,"add",this.agregarPerdedor),this.listenTo(this.perdedores,"sync",this.syncPerdedores),this.fetchPerdedoresByOrigen(t.origen),e.Validation.bind(this)},fetchRobadoresByOrigen:function(t){var e;"LOCAL"==t&&(e=new o({id:this.modelPartido.get("localId")})),"VISITA"==t&&(e=new o({id:this.modelPartido.get("visitaId")})),this.robadores.setTorneoEquipo(e),this.robadores.fetch()},fetchPerdedoresByOrigen:function(t){var e;"VISITA"==t&&(e=new o({id:this.modelPartido.get("localId")})),"LOCAL"==t&&(e=new o({id:this.modelPartido.get("visitaId")})),this.perdedores.setTorneoEquipo(e),this.perdedores.fetch()},render:function(){this.$el.html(this.template(this.model.toJSON())),this.$("#robo-create-dialog").modal("show"),this.$(".alert-danger").hide()},agregarRobador:function(e){t("#select-robo").append(t("<option>",{value:e.get("id"),text:e.get("jugadorNombre")}))},syncRobadores:function(e){t("#select-robo").change()},agregarPerdedor:function(e){
t("#select-pierde").append(t("<option>",{value:e.get("id"),text:e.get("jugadorNombre")}))},syncPerdedores:function(e){t("#select-pierde").change()},clickAceptar:function(t){var e=this.$el.find("#form-robo").serializeObject();this.model.set(e),that=this,this.model.isValid(!0)&&this.model.save({},{wait:!0,success:function(t,e){new a({message:"Robo registrado correctamente"}),that.callbackAceptar(t)},error:function(t,e){new a({message:"Se presento un error al registrar el robo"})}})},destroyView:function(){t("body").removeClass("modal-open"),this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),e.View.prototype.remove.call(this),t("<div id='modal-partido'></div>").appendTo("#modal-partido-parent")}});return c}),define("text!templates/private/partido/tplPartidoAdmin.html",[],function(){return'<div class="row">\n    <div class="col-md-12">\n        <div class="panel panel-success">\n            <div class="panel-heading">\n                <h3 class="panel-title">Partido Admin</h3>\n            </div>\n\n            <div class="panel-body">\n                <div class="row">\n                    <div class="col-md-6">\n                        <div class="panel panel-default">\n                            <div class="panel-body">\n                                <div class="row">\n                                    <div class="col-md-4">\n                                        <h4><%= localAlias %></h4>\n                                        <h6><%= localNombre %></h6>\n                                    </div>\n                                    <div id="section-estadisticas-resumen" class="col-md-4">\n                                    </div>\n                                    <div class="col-md-4">\n                                        <h4><%= visitaAlias %></h4>\n                                        <h6><%= visitaNombre %></h6>\n                                    </div>\n                                </div>\n                                <div class="row">\n                                    <div class="col-md-4">\n                                        <h4><%= horarioDes %></h4>\n                                    </div>\n                                    <div class="col-md-8">\n                                        <h4><%= canchaNombre %></h4>\n                                        <h6><%= canchaDomicilio %></h6>\n                                    </div>\n                                </div>\n                                <div class="row">\n                                    <div class="col-md-12">\n                                        <div class="btn-group btn-group" role="group" aria-label="...">\n                                            <% if (statusPartido==\'PROGRAMADO\') { %>\n                                            <button id="partido-editar" type="button" class="btn btn-primary"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></button>\n                                            <button id="agregar-arbitro" type="button" class="btn btn-primary"><span class="glyphicon glyphicon-bullhorn" aria-hidden="true"></span></button>\n                                            <button id="partido-comenzar" type="button" class="btn btn-success"><span class="glyphicon glyphicon-play" aria-hidden="true"></span></button>\n                                            <% } %>\n                                            <% if (statusPartido==\'ENPROCESO\') { %>\n                                            <button id="partido-finalizar" type="button" class="btn btn-warning"><span class="glyphicon glyphicon-stop" aria-hidden="true"></span></button>\n                                            <% } %>\n                                            <% if (statusPartido!==\'CANCELADO\') { %>\n                                            <button id="partido-cancelar" type="button" class="btn btn-danger"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></button>\n                                            <% } %>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="col-md-6">\n                        <div class="row">\n                            <div class="col-md-12">\n                                <div class="panel panel-default">\n                                    <div class="panel-body">\n                                        <div class="row">\n                                            <div class="col-md-6">\n                                                <div class="btn-group btn-group-sm" role="group" aria-label="...">\n                                                    <% if (statusPartido==\'ENPROCESO\') { %>\n                                                    <button id="partido-puntos-local" type="button" class="btn btn-success"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span></button>\n                                                    <button id="partido-faltas-local" type="button" class="btn btn-success"><span class="glyphicon glyphicon-bookmark" aria-hidden="true"></span></button>\n                                                    <button id="partido-cambios-local" type="button" class="btn btn-success"><span class="glyphicon glyphicon-transfer" aria-hidden="true"></span></button>\n                                                    <button id="partido-asistencias-local" type="button" class="btn btn-success"><span class="glyphicon glyphicon-saved" aria-hidden="true"></span></button>\n                                                    <button id="partido-bloqueos-local" type="button" class="btn btn-success"><span class="glyphicon glyphicon-flash" aria-hidden="true"></span></button>\n                                                    <button id="partido-rebotes-local" type="button" class="btn btn-success"><span class="glyphicon glyphicon-record" aria-hidden="true"></span></button>\n                                                    <button id="partido-robos-local" type="button" class="btn btn-success"><span class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span></button>\n                                                    <% } %>\n                                                </div>\n                                            </div>\n                                            <div class="col-md-6">\n                                                <div class="btn-group btn-group-sm" role="group" aria-label="...">\n                                                    <% if (statusPartido==\'ENPROCESO\') { %>\n                                                    <button id="partido-puntos-visita" type="button" class="btn btn-info"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span></button>\n                                                    <button id="partido-faltas-visita" type="button" class="btn btn-info"><span class="glyphicon glyphicon-bookmark" aria-hidden="true"></span></button>\n                                                    <button id="partido-cambios-visita" type="button" class="btn btn-info"><span class="glyphicon glyphicon-transfer" aria-hidden="true"></span></button>\n                                                    <button id="partido-asistencias-visita" type="button" class="btn btn-info"><span class="glyphicon glyphicon-saved" aria-hidden="true"></span></button>\n                                                    <button id="partido-bloqueos-visita" type="button" class="btn btn-info"><span class="glyphicon glyphicon-flash" aria-hidden="true"></span></button>\n                                                    <button id="partido-rebotes-visita" type="button" class="btn btn-info"><span class="glyphicon glyphicon-record" aria-hidden="true"></span></button>\n                                                    <button id="partido-robos-visita" type="button" class="btn btn-info"><span class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span></button>\n                                                    <% } %>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="row">\n                            <div id="section-arbitros" class="col-md-12"/>\n                        </div>\n                    </div>\n                </div>\n                <div class="row">\n                    <div id="section-local" class="col-md-6">\n\n                    </div>\n                    <div id="section-visita" class="col-md-6">\n\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="col-md-12">\n                        <canvas id="canvas" width="640" height="372"></canvas>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="col-md-12">\n                        <div class="panel panel-default">\n                            <div class="panel-heading">\n                                <h3 class="panel-title">Estadisticas</h3>\n                            </div>\n                            <div class="panel-body">\n                                <div class="row">\n                                    <div class="col-md-12">\n                                        <ul id="estadistica-tab" class="nav nav-tabs">\n                                            <li role="presentation"><a href="#puntos">Puntos</a></li>\n                                            <li role="presentation"><a href="#faltas">Faltas</a></li>\n                                            <li role="presentation"><a href="#cambios">Cambios</a></li>\n                                            <li role="presentation"><a href="#asistencias">Asistencias</a></li>\n                                            <li role="presentation"><a href="#bloqueos">Bloqueos</a></li>\n                                            <li role="presentation"><a href="#rebotes">Rebotes</a></li>\n                                            <li role="presentation"><a href="#robos">Robos</a></li>\n                                        </ul>\n                                    </div>\n                                </div>\n                                <div class="row">\n                                    <div class="col-md-12">\n                                        <div id="my-tab-content" class="tab-content">\n                                            <div class="tab-pane" id="puntos">\n                                                <div id="section-estadisticas-puntos">\n                                                </div>\n                                            </div>\n                                            <div class="tab-pane" id="faltas">\n                                                <div id="section-estadisticas-faltas">\n                                                </div>\n                                            </div>\n                                            <div class="tab-pane" id="cambios">\n                                                <div id="section-estadisticas-cambios">\n                                                </div>\n                                            </div>\n                                            <div class="tab-pane" id="asistencias">\n                                                <div id="section-estadisticas-asistencias">\n                                                </div>\n                                            </div>\n                                            <div class="tab-pane" id="bloqueos">\n                                                <div id="section-estadisticas-bloqueos">\n                                                </div>\n                                            </div>\n                                            <div class="tab-pane" id="rebotes">\n                                                <div id="section-estadisticas-rebotes">\n                                                </div>\n                                            </div>\n                                            <div class="tab-pane" id="robos">\n                                                <div id="section-estadisticas-robos">\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div id="modal-partido-parent">\n                    <div id="modal-partido"/>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("views/private/partido/PartidoAdminView",["jquery","backbone","bootstrap","selecter","fabric","core/BaseView","models/TorneoPartidoModel","views/private/partido/PartidoEquipoView","views/private/partido/PartidoArbitrosView","views/private/partido/PartidoEditView","views/private/estadistica/EstadisticaResumenView","views/private/estadistica/EstadisticaPuntosView","views/private/estadistica/EstadisticaFaltasView","views/private/estadistica/EstadisticaMovimientosView","views/private/estadistica/EstadisticaAsistenciasView","views/private/estadistica/EstadisticaBloqueosView","views/private/estadistica/EstadisticaRebotesView","views/private/estadistica/EstadisticaRobosView","views/private/estadistica/PuntoCreateView","views/private/estadistica/FaltaCreateView","views/private/estadistica/MovimientoCreateView","views/private/estadistica/AsistenciaCreateView","views/private/estadistica/BloqueoCreateView","views/private/estadistica/ReboteCreateView","views/private/estadistica/RoboCreateView","views/private/util/ModalGenericView","text!templates/private/partido/tplPartidoAdmin.html"],function(t,e,i,n,s,o,r,a,l,c,d,h,u,p,f,g,m,v,b,y,w,x,C,T,S,k,O){var A=o.extend({template:_.template(O),events:{"click #partido-editar":"partidoEditar","click #agregar-arbitro":"agregarArbitro","click #partido-comenzar":"partidoComenzar","click #partido-cancelar":"partidoCancelar","click #partido-finalizar":"partidoFinalizar","click #partido-puntos-local":"partidoPuntosLocal","click #partido-faltas-local":"partidoFaltasLocal","click #partido-cambios-local":"partidoCambiosLocal","click #partido-asistencias-local":"partidoAsistenciasLocal","click #partido-bloqueos-local":"partidoBloqueosLocal","click #partido-rebotes-local":"partidoRebotesLocal","click #partido-robos-local":"partidoRobosLocal","click #partido-puntos-visita":"partidoPuntosVisita","click #partido-faltas-visita":"partidoFaltasVisita","click #partido-cambios-visita":"partidoCambiosVisita","click #partido-asistencias-visita":"partidoAsistenciasVisita","click #partido-bloqueos-visita":"partidoBloqueosVisita","click #partido-rebotes-visita":"partidoRebotesVisita","click #partido-robos-visita":"partidoRobosVisita"},initialize:function(t){this.model=new r,this.listenTo(this.model,"sync",this.syncPartido)},render:function(){return this},syncPartido:function(){this.$el.html(this.template(this.model.toJSON())),t("#estadistica-tab a").click(function(e){e.preventDefault(),t(this).tab("show")}),this.strPath="M 192.3004,118.04878 H 196.63056 V 139.6996 C 196.63056,140.89553 197.59971,141.86468 198.79564,141.86468 H 216.1163 C 217.31223,141.86468 218.28137,140.89553 218.28137,139.6996 V 118.04878 H 222.61154 C 223.80747,118.04878 224.77662,117.07964 224.77662,115.88371 V 109.38846 C 224.77662,108.19252 223.80747,107.22338 222.61154,107.22338 H 213.95121 C 213.95121,110.81065 211.04324,113.71862 207.45597,113.71862 203.8687,113.71862 200.96072,110.81065 200.96072,107.22338 H 192.3004 C 191.10446,107.22338 190.13532,108.19252 190.13532,109.38846 V 115.88371 C 190.13532,117.07964 191.10446,118.04878 192.3004,118.04878 z",this.local=new a({modelo:this.model,parent:this,type:"LOCAL"}),this.visita=new a({modelo:this.model,parent:this,type:"VISITA"}),new l(this.model),new h({modelo:this.model,parent:this}),new u({modelo:this.model,parent:this}),new p({modelo:this.model,parent:this}),new f({modelo:this.model,parent:this}),new g({modelo:this.model,parent:this}),new m({modelo:this.model,parent:this}),new v({modelo:this.model,parent:this}),new d(this.model),this.setUpCourt()},setIdPartido:function(t){this.model.set("id",t),this.model.fetch()},partidoEditar:function(){new c({modelo:this.model,callbackAceptar:this.successSavePartido})},successSavePartido:function(t){},agregarArbitro:function(){},partidoPuntosLocal:function(){new b({modelo:this.model,callbackAceptar:this.successAddPunto,origen:"LOCAL",parent:this})},partidoPuntosVisita:function(){new b({modelo:this.model,callbackAceptar:this.successAddPunto,origen:"VISITA",parent:this})},successAddPunto:function(e){if("LOCAL"===e.get("origen")){var i=this.parent.model.get("localPuntos")+e.get("tipoValor");this.parent.model.set({localPuntos:i})}else{var n=this.parent.model.get("visitaPuntos")+e.get("tipoValor");this.parent.model.set({visitaPuntos:n})}t("#section-estadisticas-resumen").html(""),new d(this.parent.model),app.puntosPartido.add(e),this.destroyView()},successRemovePunto:function(e){if("LOCAL"===e.get("origen")){var i=this.model.get("localPuntos")-e.get("tipoValor");this.model.set({localPuntos:i})}else{var n=this.model.get("visitaPuntos")-e.get("tipoValor");this.model.set({visitaPuntos:n})}t("#section-estadisticas-resumen").html(""),new d(this.model),app.puntosPartido.remove(e)},partidoFaltasLocal:function(){new y({modelo:this.model,callbackAceptar:this.successAddFalta,origen:"LOCAL",parent:this})},partidoFaltasVisita:function(){new y({modelo:this.model,callbackAceptar:this.successAddFalta,origen:"VISITA",parent:this})},successAddFalta:function(t){app.faltasPartido.add(t),this.destroyView()},successRemoveFalta:function(t){app.faltasPartido.remove(t)},partidoCambiosLocal:function(){new w({modelo:this.model,callbackAceptar:this.successAddMovimiento,tipo:"MANUAL",origen:"LOCAL",parent:this})},partidoCambiosVisita:function(){new w({modelo:this.model,callbackAceptar:this.successAddMovimiento,tipo:"MANUAL",origen:"VISITA",parent:this})},partidoCambiosDirect:function(t,e,i,n){new w({modelo:this.model,callbackAceptar:this.successAddMovimiento,tipo:i,origen:n,parent:this,entra:t,sale:e})},successAddMovimiento:function(t){app.movimientosPartido.add(t),this.destroyView()},successRemoveMovimiento:function(t){app.movimientosPartido.remove(t)},partidoAsistenciasLocal:function(){new x({modelo:this.model,callbackAceptar:this.successAddAsistencia,origen:"LOCAL",parent:this})},partidoAsistenciasVisita:function(){new x({modelo:this.model,callbackAceptar:this.successAddAsistencia,origen:"VISITA",parent:this})},successAddAsistencia:function(t){app.asistenciasPartido.add(t),this.destroyView()},successRemoveAsistencia:function(t){app.asistenciasPartido.remove(t)},partidoBloqueosLocal:function(){new C({modelo:this.model,callbackAceptar:this.successAddBloqueo,origen:"LOCAL",parent:this})},partidoBloqueosVisita:function(){new C({modelo:this.model,callbackAceptar:this.successAddBloqueo,origen:"VISITA",parent:this})},successAddBloqueo:function(t){app.bloqueosPartido.add(t),this.destroyView()},successRemoveBloqueo:function(t){app.bloqueosPartido.remove(t)},partidoRebotesLocal:function(){new T({modelo:this.model,callbackAceptar:this.successAddRebote,origen:"LOCAL",parent:this})},partidoRebotesVisita:function(){new T({modelo:this.model,callbackAceptar:this.successAddRebote,origen:"VISITA",parent:this})},successAddRebote:function(t){app.rebotesPartido.add(t),this.destroyView()},successRemoveRebote:function(t){app.rebotesPartido.remove(t)},partidoRobosLocal:function(){new S({modelo:this.model,callbackAceptar:this.successAddRobo,origen:"LOCAL",parent:this})},partidoRobosVisita:function(){new S({modelo:this.model,callbackAceptar:this.successAddRobo,origen:"VISITA",parent:this})},successAddRobo:function(t){app.robosPartido.add(t),this.destroyView()},successRemoveRobo:function(t){app.robosPartido.remove(t)},partidoComenzar:function(){this.model.set({statusPartido:"ENPROCESO"}),this.saveModel()},partidoCancelar:function(){this.model.set({statusPartido:"CANCELADO"}),this.saveModel()},partidoFinalizar:function(){this.model.set({statusPartido:"FINALIZADO"}),this.saveModel()},saveModel:function(){that=this,this.model.isValid(!0)&&this.model.save({},{wait:!0,success:function(t,e){new k({message:"Partido registrado correctamente"})},error:function(t,e){new k({message:"Se presento un error al registrar el partido"})}})},setUpCourt:function(){var t=new fabric.Path(this.strPath,{});this.canvas=new fabric.Canvas("canvas");var e={left:0,top:0};this.isOver=!1;var i=20;this.canvas.setBackgroundImage("img/courtbasket.png",this.canvas.renderAll.bind(this.canvas),{backgroundImageOpacity:.5,backgroundImageStretch:!1});var n=[{left:200,top:140,label:"B",type:0},{left:160,top:120,label:"AP",type:0},{left:170,top:180,label:"E",type:0},{left:120,top:110,label:"A",type:0},{left:45,top:175,label:"P",type:0},{left:this.canvas.width-t.width-200,top:140,label:"B",type:1},{left:this.canvas.width-t.width-160,top:120,label:"AP",type:1},{left:this.canvas.width-t.width-170,top:180,label:"E",type:1},{left:this.canvas.width-t.width-120,top:110,label:"A",type:1},{left:this.canvas.width-t.width-45,top:175,label:"P",type:1}];this.paths=this.addPositionBase(n),this.addStatistics(),this.canvas.renderAll();var s=this;this.canvas.on("object:moving",function(t){var e=s.paths;s.isOver&&(e=[s.pathOver]);for(path in e)if(!(2===t.target.typePosition&&1===e[path].typePosition||3===t.target.typePosition&&0===e[path].typePosition)){if(s.pathOver=e[path],t.target.left>s.pathOver.left-i&&t.target.left<s.pathOver.left+i&&t.target.top>s.pathOver.top-i&&t.target.top<s.pathOver.top+i){s.pathOver.setOpacity(.5),s.pathOver.scale(1.2),s.isOver=!0,null!=s.pathOver.pathOver&&s.pathOver.pathOver.player===t.target.player&&(s.prevPathOver=s.pathOver);break}s.pathOver.setOpacity(1),s.pathOver.scale(1),s.isOver=!1}}),this.canvas.on("mouse:down",function(t){void 0!==t.target&&null!==t.target&&(e.left=t.target.left,e.top=t.target.top)});var s=this;this.canvas.on("mouse:up",function(t){if(void 0!==t.target&&null!==t.target){var i=null,n=null,o=null,r=null;s.isOver?(o="DIRECT_INIT",null!==s.pathOver.pathOver&&(void 0!=s.prevPathOver&&null!=s.prevPathOver?(s.pathOver.pathOver.left=s.prevPathOver.left,s.pathOver.pathOver.top=s.prevPathOver.top-15,s.prevPathOver.set("pathOver",s.pathOver.pathOver),s.prevPathOver=null,o=null):(s.pathOver.pathOver.left=s.pathOver.pathOver.originLeft,s.pathOver.pathOver.top=s.pathOver.pathOver.originTop,n=s.pathOver.pathOver.player,o="DIRECT_OTHER"),s.pathOver.pathOver.setCoords()),t.target.set("left",s.pathOver.left),t.target.set("top",s.pathOver.top-15),i=t.target.player,r=t.target.typeTeam,s.pathOver.setOpacity(1),s.pathOver.scale(1),s.pathOver.set("pathOver",t.target),s.isOver=!1):(t.target.set("left",e.left),t.target.set("top",e.top)),t.target.setCoords(),s.canvas.renderAll(),null!=o&&s.partidoCambiosDirect(i,n,o,r)}})},addPositionBase:function(t){var e=[];for(pos in t){var i=new fabric.Path(this.strPath,{fill:"rgba(0,0,0,0)",stroke:"black",strokeWidth:2,originX:"center",originY:"center"}),n=new fabric.Text(t[pos].label,{fontSize:15,fill:"#000",originX:"center",originY:"center"}),s=new fabric.Group([i,n],{left:t[pos].left,top:t[pos].top,height:i.height,width:i.width,hasRotatingPoint:!1,hasBorders:!1,hasControls:!1,selectable:!1});s.item(0).left=0,s.item(0).top=0,s.item(1).left=0,s.item(1).top=4,s.set("typePosition",t[pos].type),s.set("pathOver",null),this.canvas.add(s),e.push(s)}return e},addPlayers:function(t,e){var i=10,n=new fabric.Path(this.strPath,{}),s=Math.floor(this.canvas.width/2/(n.width+i)),o=(this.canvas.width/2-(s*n.width+(s-1)*i))/2,r=this.model.get(e.toLowerCase()+"Color"),a=10,l=2;"VISITA"===e&&(o+=this.canvas.width/2,l=3);var c=o;for(player in t.models){parseInt(player)>=s&&1===Math.floor((parseInt(player)+1)%s)&&(c=o,a=a+n.height+10);var d=new fabric.Path(this.strPath,{fill:r,stroke:"#000",strokeWidth:1,originX:"center",originY:"center"}),h=new fabric.Text(t.models[player].get("numeroJugador"),{fontSize:25,fill:"#000",stroke:"#fff",originX:"center",originY:"center"}),u=new fabric.Text(t.models[player].get("aliasJugador"),{fontSize:11,fill:"#000",originX:"center",originY:"bottom"}),p=new fabric.Group([d,h,u],{left:c,top:a,height:d.height+h.height,width:d.width,hasRotatingPoint:!1,hasBorders:!1,hasControls:!1});p.item(0).left=0,p.item(0).top=0,p.item(1).left=0,p.item(1).top=5,p.item(2).left=0,p.item(2).top=h.height+5,p.set("typePosition",l),p.set("typeTeam",e),p.set("originLeft",p.left),p.set("originTop",p.top),p.set("player",t.models[player]),this.canvas.add(p),c=c+d.width+i}},addStatistics:function(){var t=this;fabric.Image.fromURL("img/eceste.jpg",function(e){e.height=e.height/2,e.width=e.width/2,e.left=t.canvas.width/2-e.width,e.top=t.canvas.height-e.height,e.hasRotatingPoint=!1,e.hasBorders=!1,e.hasControls=!1,e.set("typeAction","ENCESTE"),t.canvas.add(e)}),fabric.Image.fromURL("img/eceste.jpg",function(e){e.height=e.height/2,e.width=e.width/2,e.left=t.canvas.width/2,e.top=t.canvas.height-e.height,e.hasRotatingPoint=!1,e.hasBorders=!1,e.hasControls=!1,e.set("typeAction","ENCESTE_FAIL"),t.canvas.add(e)})}});return A}),function(t,e){"function"==typeof define&&define.amd?define("bloodhound",["jquery"],function(i){return t.Bloodhound=e(i)}):"object"==typeof exports?module.exports=e(require("jquery")):t.Bloodhound=e(jQuery)}(this,function(t){var e=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return"undefined"==typeof t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,i){function n(t,e){return i(e,t)}t.each(e,n)},map:t.map,filter:t.grep,every:function(e,i){var n=!0;return e?(t.each(e,function(t,s){return(n=i.call(null,s,t,e))?void 0:!1}),!!n):n},some:function(e,i){var n=!1;return e?(t.each(e,function(t,s){return(n=i.call(null,s,t,e))?!1:void 0}),!!n):n},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(e){function i(){return String(e)}return t.isFunction(e)?e:i},defer:function(t){setTimeout(t,0)},debounce:function(t,e,i){var n,s;return function(){var o,r,a=this,l=arguments;return o=function(){n=null,i||(s=t.apply(a,l))},r=i&&!n,clearTimeout(n),n=setTimeout(o,e),r&&(s=t.apply(a,l)),s}},throttle:function(t,e){var i,n,s,o,r,a;return r=0,a=function(){r=new Date,s=null,o=t.apply(i,n)},function(){var l=new Date,c=e-(l-r);return i=this,n=arguments,0>=c?(clearTimeout(s),s=null,r=l,o=t.apply(i,n)):s||(s=setTimeout(a,c)),o}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},noop:function(){}}}(),i="0.11.1",n=function(){"use strict";function t(t){return t=e.toStr(t),t?t.split(/\s+/):[]}function i(t){return t=e.toStr(t),t?t.split(/\W+/):[]}function n(t){return function(i){return i=e.isArray(i)?i:[].slice.call(arguments,0),function(n){var s=[];return e.each(i,function(i){s=s.concat(t(e.toStr(n[i])))}),s}}}return{nonword:i,whitespace:t,obj:{nonword:n(i),whitespace:n(t)}}}(),s=function(){"use strict";function i(i){this.maxSize=e.isNumber(i)?i:100,this.reset(),this.maxSize<=0&&(this.set=this.get=t.noop)}function n(){this.head=this.tail=null}function s(t,e){this.key=t,this.val=e,this.prev=this.next=null}return e.mixin(i.prototype,{set:function(t,e){var i,n=this.list.tail;this.size>=this.maxSize&&(this.list.remove(n),delete this.hash[n.key],this.size--),(i=this.hash[t])?(i.val=e,this.list.moveToFront(i)):(i=new s(t,e),this.list.add(i),this.hash[t]=i,this.size++)},get:function(t){var e=this.hash[t];return e?(this.list.moveToFront(e),e.val):void 0},reset:function(){this.size=0,this.hash={},this.list=new n}}),e.mixin(n.prototype,{add:function(t){this.head&&(t.next=this.head,this.head.prev=t),this.head=t,this.tail=this.tail||t},remove:function(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev},moveToFront:function(t){this.remove(t),this.add(t)}}),i}(),o=function(){"use strict";function i(t,i){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+e.escapeRegExChars(this.prefix)),this.ls=i||a,!this.ls&&this._noop()}function n(){return(new Date).getTime()}function s(t){return JSON.stringify(e.isUndefined(t)?null:t)}function o(e){return t.parseJSON(e)}function r(t){var e,i,n=[],s=a.length;for(e=0;s>e;e++)(i=a.key(e)).match(t)&&n.push(i.replace(t,""));return n}var a;try{a=window.localStorage,a.setItem("~~~","!"),a.removeItem("~~~")}catch(l){a=null}return e.mixin(i.prototype,{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=e.noop},_safeSet:function(t,e){try{this.ls.setItem(t,e)}catch(i){"QuotaExceededError"===i.name&&(this.clear(),this._noop())}},get:function(t){return this.isExpired(t)&&this.remove(t),o(this.ls.getItem(this._prefix(t)))},set:function(t,i,o){return e.isNumber(o)?this._safeSet(this._ttlKey(t),s(n()+o)):this.ls.removeItem(this._ttlKey(t)),this._safeSet(this._prefix(t),s(i))},remove:function(t){return this.ls.removeItem(this._ttlKey(t)),this.ls.removeItem(this._prefix(t)),this},clear:function(){var t,e=r(this.keyMatcher);for(t=e.length;t--;)this.remove(e[t]);return this},isExpired:function(t){var i=o(this.ls.getItem(this._ttlKey(t)));return e.isNumber(i)&&n()>i?!0:!1}}),i}(),r=function(){"use strict";function i(t){t=t||{},this.cancelled=!1,this.lastReq=null,this._send=t.transport,this._get=t.limiter?t.limiter(this._get):this._get,this._cache=t.cache===!1?new s(0):a}var n=0,o={},r=6,a=new s(10);return i.setMaxPendingRequests=function(t){r=t},i.resetCache=function(){a.reset()},e.mixin(i.prototype,{_fingerprint:function(e){return e=e||{},e.url+e.type+t.param(e.data||{})},_get:function(t,e){function i(t){e(null,t),d._cache.set(l,t)}function s(){e(!0)}function a(){n--,delete o[l],d.onDeckRequestArgs&&(d._get.apply(d,d.onDeckRequestArgs),d.onDeckRequestArgs=null)}var l,c,d=this;l=this._fingerprint(t),this.cancelled||l!==this.lastReq||((c=o[l])?c.done(i).fail(s):r>n?(n++,o[l]=this._send(t).done(i).fail(s).always(a)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(i,n){var s,o;n=n||t.noop,i=e.isString(i)?{url:i}:i||{},o=this._fingerprint(i),this.cancelled=!1,this.lastReq=o,(s=this._cache.get(o))?n(null,s):this._get(i,n)},cancel:function(){this.cancelled=!0}}),i}(),a=window.SearchIndex=function(){"use strict";function i(i){i=i||{},i.datumTokenizer&&i.queryTokenizer||t.error("datumTokenizer and queryTokenizer are both required"),this.identify=i.identify||e.stringify,this.datumTokenizer=i.datumTokenizer,this.queryTokenizer=i.queryTokenizer,this.reset()}function n(t){return t=e.filter(t,function(t){return!!t}),t=e.map(t,function(t){return t.toLowerCase()})}function s(){var t={};return t[l]=[],t[a]={},t}function o(t){
for(var e={},i=[],n=0,s=t.length;s>n;n++)e[t[n]]||(e[t[n]]=!0,i.push(t[n]));return i}function r(t,e){var i=0,n=0,s=[];t=t.sort(),e=e.sort();for(var o=t.length,r=e.length;o>i&&r>n;)t[i]<e[n]?i++:t[i]>e[n]?n++:(s.push(t[i]),i++,n++);return s}var a="c",l="i";return e.mixin(i.prototype,{bootstrap:function(t){this.datums=t.datums,this.trie=t.trie},add:function(t){var i=this;t=e.isArray(t)?t:[t],e.each(t,function(t){var o,r;i.datums[o=i.identify(t)]=t,r=n(i.datumTokenizer(t)),e.each(r,function(t){var e,n,r;for(e=i.trie,n=t.split("");r=n.shift();)e=e[a][r]||(e[a][r]=s()),e[l].push(o)})})},get:function(t){var i=this;return e.map(t,function(t){return i.datums[t]})},search:function(t){var i,s,c=this;return i=n(this.queryTokenizer(t)),e.each(i,function(t){var e,i,n,o;if(s&&0===s.length)return!1;for(e=c.trie,i=t.split("");e&&(n=i.shift());)e=e[a][n];return e&&0===i.length?(o=e[l].slice(0),void(s=s?r(s,o):o)):(s=[],!1)}),s?e.map(o(s),function(t){return c.datums[t]}):[]},all:function(){var t=[];for(var e in this.datums)t.push(this.datums[e]);return t},reset:function(){this.datums={},this.trie=s()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),i}(),l=function(){"use strict";function t(t){this.url=t.url,this.ttl=t.ttl,this.cache=t.cache,this.prepare=t.prepare,this.transform=t.transform,this.transport=t.transport,this.thumbprint=t.thumbprint,this.storage=new o(t.cacheKey)}var i;return i={data:"data",protocol:"protocol",thumbprint:"thumbprint"},e.mixin(t.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(t){this.cache&&(this.storage.set(i.data,t,this.ttl),this.storage.set(i.protocol,location.protocol,this.ttl),this.storage.set(i.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var t,e={};return this.cache?(e.data=this.storage.get(i.data),e.protocol=this.storage.get(i.protocol),e.thumbprint=this.storage.get(i.thumbprint),t=e.thumbprint!==this.thumbprint||e.protocol!==location.protocol,e.data&&!t?e.data:null):null},fromNetwork:function(t){function e(){t(!0)}function i(e){t(null,s.transform(e))}var n,s=this;t&&(n=this.prepare(this._settings()),this.transport(n).fail(e).done(i))},clear:function(){return this.storage.clear(),this}}),t}(),c=function(){"use strict";function t(t){this.url=t.url,this.prepare=t.prepare,this.transform=t.transform,this.transport=new r({cache:t.cache,limiter:t.limiter,transport:t.transport})}return e.mixin(t.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(t,e){function i(t,i){e(t?[]:s.transform(i))}var n,s=this;if(e)return t=t||"",n=this.prepare(t,this._settings()),this.transport.get(n,i)},cancelLastRequest:function(){this.transport.cancel()}}),t}(),d=function(){"use strict";function n(n){var s;return n?(s={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:e.identity,transform:e.identity,transport:null},n=e.isString(n)?{url:n}:n,n=e.mixin(s,n),!n.url&&t.error("prefetch requires url to be set"),n.transform=n.filter||n.transform,n.cacheKey=n.cacheKey||n.url,n.thumbprint=i+n.thumbprint,n.transport=n.transport?a(n.transport):t.ajax,n):null}function s(i){var n;if(i)return n={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:e.identity,transport:null},i=e.isString(i)?{url:i}:i,i=e.mixin(n,i),!i.url&&t.error("remote requires url to be set"),i.transform=i.filter||i.transform,i.prepare=o(i),i.limiter=r(i),i.transport=i.transport?a(i.transport):t.ajax,delete i.replace,delete i.wildcard,delete i.rateLimitBy,delete i.rateLimitWait,i}function o(t){function e(t,e){return e.url=o(e.url,t),e}function i(t,e){return e.url=e.url.replace(r,encodeURIComponent(t)),e}function n(t,e){return e}var s,o,r;return s=t.prepare,o=t.replace,r=t.wildcard,s?s:s=o?e:t.wildcard?i:n}function r(t){function i(t){return function(i){return e.debounce(i,t)}}function n(t){return function(i){return e.throttle(i,t)}}var s,o,r;return s=t.limiter,o=t.rateLimitBy,r=t.rateLimitWait,s||(s=/^throttle$/i.test(o)?n(r):i(r)),s}function a(i){return function(n){function s(t){e.defer(function(){r.resolve(t)})}function o(t){e.defer(function(){r.reject(t)})}var r=t.Deferred();return i(n,s,o),r}}return function(i){var o,r;return o={initialize:!0,identify:e.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null},i=e.mixin(o,i||{}),!i.datumTokenizer&&t.error("datumTokenizer is required"),!i.queryTokenizer&&t.error("queryTokenizer is required"),r=i.sorter,i.sorter=r?function(t){return t.sort(r)}:e.identity,i.local=e.isFunction(i.local)?i.local():i.local,i.prefetch=n(i.prefetch),i.remote=s(i.remote),i}}(),h=function(){"use strict";function i(t){t=d(t),this.sorter=t.sorter,this.identify=t.identify,this.sufficient=t.sufficient,this.local=t.local,this.remote=t.remote?new c(t.remote):null,this.prefetch=t.prefetch?new l(t.prefetch):null,this.index=new a({identify:this.identify,datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),t.initialize!==!1&&this.initialize()}var s;return s=window&&window.Bloodhound,i.noConflict=function(){return window&&(window.Bloodhound=s),i},i.tokenizers=n,e.mixin(i.prototype,{__ttAdapter:function(){function t(t,e,n){return i.search(t,e,n)}function e(t,e){return i.search(t,e)}var i=this;return this.remote?t:e},_loadPrefetch:function(){function e(t,e){return t?i.reject():(s.add(e),s.prefetch.store(s.index.serialize()),void i.resolve())}var i,n,s=this;return i=t.Deferred(),this.prefetch?(n=this.prefetch.fromCache())?(this.index.bootstrap(n),i.resolve()):this.prefetch.fromNetwork(e):i.resolve(),i.promise()},_initialize:function(){function t(){e.add(e.local)}var e=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(t),this.initPromise},initialize:function(t){return!this.initPromise||t?this._initialize():this.initPromise},add:function(t){return this.index.add(t),this},get:function(t){return t=e.isArray(t)?t:[].slice.call(arguments),this.index.get(t)},search:function(t,i,n){function s(t){var i=[];e.each(t,function(t){!e.some(o,function(e){return r.identify(t)===r.identify(e)})&&i.push(t)}),n&&n(i)}var o,r=this;return o=this.sorter(this.index.search(t)),i(this.remote?o.slice():o),this.remote&&o.length<this.sufficient?this.remote.get(t,s):this.remote&&this.remote.cancelLastRequest(),this},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return r.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),i}();return h}),function(t,e){"function"==typeof define&&define.amd?define("typeahead",["jquery"],function(t){return e(t)}):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(this,function(t){var e=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return"undefined"==typeof t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,i){function n(t,e){return i(e,t)}t.each(e,n)},map:t.map,filter:t.grep,every:function(e,i){var n=!0;return e?(t.each(e,function(t,s){return(n=i.call(null,s,t,e))?void 0:!1}),!!n):n},some:function(e,i){var n=!1;return e?(t.each(e,function(t,s){return(n=i.call(null,s,t,e))?!1:void 0}),!!n):n},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(e){function i(){return String(e)}return t.isFunction(e)?e:i},defer:function(t){setTimeout(t,0)},debounce:function(t,e,i){var n,s;return function(){var o,r,a=this,l=arguments;return o=function(){n=null,i||(s=t.apply(a,l))},r=i&&!n,clearTimeout(n),n=setTimeout(o,e),r&&(s=t.apply(a,l)),s}},throttle:function(t,e){var i,n,s,o,r,a;return r=0,a=function(){r=new Date,s=null,o=t.apply(i,n)},function(){var l=new Date,c=e-(l-r);return i=this,n=arguments,0>=c?(clearTimeout(s),s=null,r=l,o=t.apply(i,n)):s||(s=setTimeout(a,c)),o}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},noop:function(){}}}(),i=function(){"use strict";function t(t){var r,a;return a=e.mixin({},o,t),r={css:s(),classes:a,html:i(a),selectors:n(a)},{css:r.css,html:r.html,classes:r.classes,selectors:r.selectors,mixin:function(t){e.mixin(t,r)}}}function i(t){return{wrapper:'<span class="'+t.wrapper+'"></span>',menu:'<div class="'+t.menu+'"></div>'}}function n(t){var i={};return e.each(t,function(t,e){i[e]="."+t}),i}function s(){var t={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return e.isMsie()&&e.mixin(t.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),t}var o={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return t}(),n=function(){"use strict";function i(e){e&&e.el||t.error("EventBus initialized without el"),this.$el=t(e.el)}var n,s;return n="typeahead:",s={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},e.mixin(i.prototype,{_trigger:function(e,i){var s;return s=t.Event(n+e),(i=i||[]).unshift(s),this.$el.trigger.apply(this.$el,i),s},before:function(t){var e,i;return e=[].slice.call(arguments,1),i=this._trigger("before"+t,e),i.isDefaultPrevented()},trigger:function(t){var e;this._trigger(t,[].slice.call(arguments,1)),(e=s[t])&&this._trigger(e,[].slice.call(arguments,1))}}),i}(),s=function(){"use strict";function t(t,e,i,n){var s;if(!i)return this;for(e=e.split(l),i=n?a(i,n):i,this._callbacks=this._callbacks||{};s=e.shift();)this._callbacks[s]=this._callbacks[s]||{sync:[],async:[]},this._callbacks[s][t].push(i);return this}function e(e,i,n){return t.call(this,"async",e,i,n)}function i(e,i,n){return t.call(this,"sync",e,i,n)}function n(t){var e;if(!this._callbacks)return this;for(t=t.split(l);e=t.shift();)delete this._callbacks[e];return this}function s(t){var e,i,n,s,r;if(!this._callbacks)return this;for(t=t.split(l),n=[].slice.call(arguments,1);(e=t.shift())&&(i=this._callbacks[e]);)s=o(i.sync,this,[e].concat(n)),r=o(i.async,this,[e].concat(n)),s()&&c(r);return this}function o(t,e,i){function n(){for(var n,s=0,o=t.length;!n&&o>s;s+=1)n=t[s].apply(e,i)===!1;return!n}return n}function r(){var t;return t=window.setImmediate?function(t){setImmediate(function(){t()})}:function(t){setTimeout(function(){t()},0)}}function a(t,e){return t.bind?t.bind(e):function(){t.apply(e,[].slice.call(arguments,0))}}var l=/\s+/,c=r();return{onSync:i,onAsync:e,off:n,trigger:s}}(),o=function(t){"use strict";function i(t,i,n){for(var s,o=[],r=0,a=t.length;a>r;r++)o.push(e.escapeRegExChars(t[r]));return s=n?"\\b("+o.join("|")+")\\b":"("+o.join("|")+")",i?new RegExp(s):new RegExp(s,"i")}var n={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(s){function o(e){var i,n,o;return(i=a.exec(e.data))&&(o=t.createElement(s.tagName),s.className&&(o.className=s.className),n=e.splitText(i.index),n.splitText(i[0].length),o.appendChild(n.cloneNode(!0)),e.parentNode.replaceChild(o,n)),!!i}function r(t,e){for(var i,n=3,s=0;s<t.childNodes.length;s++)i=t.childNodes[s],i.nodeType===n?s+=e(i)?1:0:r(i,e)}var a;s=e.mixin({},n,s),s.node&&s.pattern&&(s.pattern=e.isArray(s.pattern)?s.pattern:[s.pattern],a=i(s.pattern,s.caseSensitive,s.wordsOnly),r(s.node,o))}}(window.document),r=function(){"use strict";function i(i,s){i=i||{},i.input||t.error("input is missing"),s.mixin(this),this.$hint=t(i.hint),this.$input=t(i.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=n(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=e.noop)}function n(e){return t('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)}function o(t,e){return i.normalizeQuery(t)===i.normalizeQuery(e)}function r(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}var a;return a={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},i.normalizeQuery=function(t){return e.toStr(t).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},e.mixin(i.prototype,s,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(t){var e=a[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(t,e){var i;switch(t){case"up":case"down":i=!r(e);break;default:i=!1}i&&e.preventDefault()},_shouldTrigger:function(t,e){var i;switch(t){case"tab":i=!r(e);break;default:i=!0}return i},_checkLanguageDirection:function(){var t=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==t&&(this.dir=t,this.$hint.attr("dir",t),this.trigger("langDirChanged",t))},_setQuery:function(t,e){var i,n;i=o(t,this.query),n=i?this.query.length!==t.length:!1,this.query=t,e||i?!e&&n&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var t,i,n,s,o=this;return t=e.bind(this._onBlur,this),i=e.bind(this._onFocus,this),n=e.bind(this._onKeydown,this),s=e.bind(this._onInput,this),this.$input.on("blur.tt",t).on("focus.tt",i).on("keydown.tt",n),!e.isMsie()||e.isMsie()>9?this.$input.on("input.tt",s):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(t){a[t.which||t.keyCode]||e.defer(e.bind(o._onInput,o,t))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(t,e){this.setInputValue(t),this._setQuery(t,e)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(t){this.$input.val(t),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(t){this.$hint.val(t)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var t,e,i,n;t=this.getInputValue(),e=this.getHint(),i=t!==e&&0===e.indexOf(t),n=""!==t&&i&&!this.hasOverflow(),!n&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var t,i,n;return t=this.$input.val().length,i=this.$input[0].selectionStart,e.isNumber(i)?i===t:document.selection?(n=document.selection.createRange(),n.moveStart("character",-t),t===n.text.length):!0},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=t("<div>")}}),i}(),a=function(){"use strict";function i(i,s){i=i||{},i.templates=i.templates||{},i.templates.notFound=i.templates.notFound||i.templates.empty,i.source||t.error("missing source"),i.node||t.error("missing node"),i.name&&!a(i.name)&&t.error("invalid dataset name: "+i.name),s.mixin(this),this.highlight=!!i.highlight,this.name=i.name||c(),this.limit=i.limit||5,this.displayFn=n(i.display||i.displayKey),this.templates=r(i.templates,this.displayFn),this.source=i.source.__ttAdapter?i.source.__ttAdapter():i.source,this.async=e.isUndefined(i.async)?this.source.length>2:!!i.async,this._resetLastSuggestion(),this.$el=t(i.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}function n(t){function i(e){return e[t]}return t=t||e.stringify,e.isFunction(t)?t:i}function r(i,n){function s(e){return t("<div>").text(n(e))}return{notFound:i.notFound&&e.templatify(i.notFound),pending:i.pending&&e.templatify(i.pending),header:i.header&&e.templatify(i.header),footer:i.footer&&e.templatify(i.footer),suggestion:i.suggestion||s}}function a(t){return/^[_a-zA-Z0-9-]+$/.test(t)}var l,c;return l={val:"tt-selectable-display",obj:"tt-selectable-object"},c=e.getIdGenerator(),i.extractData=function(e){var i=t(e);return i.data(l.obj)?{val:i.data(l.val)||"",obj:i.data(l.obj)||null}:null},e.mixin(i.prototype,s,{_overwrite:function(t,e){e=e||[],e.length?this._renderSuggestions(t,e):this.async&&this.templates.pending?this._renderPending(t):!this.async&&this.templates.notFound?this._renderNotFound(t):this._empty(),this.trigger("rendered",this.name,e,!1)},_append:function(t,e){e=e||[],e.length&&this.$lastSuggestion.length?this._appendSuggestions(t,e):e.length?this._renderSuggestions(t,e):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(t),this.trigger("rendered",this.name,e,!0)},_renderSuggestions:function(t,e){var i;i=this._getSuggestionsFragment(t,e),this.$lastSuggestion=i.children().last(),this.$el.html(i).prepend(this._getHeader(t,e)).append(this._getFooter(t,e))},_appendSuggestions:function(t,e){var i,n;i=this._getSuggestionsFragment(t,e),n=i.children().last(),this.$lastSuggestion.after(i),this.$lastSuggestion=n},_renderPending:function(t){var e=this.templates.pending;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_renderNotFound:function(t){var e=this.templates.notFound;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(i,n){var s,r=this;return s=document.createDocumentFragment(),e.each(n,function(e){var n,o;o=r._injectQuery(i,e),n=t(r.templates.suggestion(o)).data(l.obj,e).data(l.val,r.displayFn(e)).addClass(r.classes.suggestion+" "+r.classes.selectable),s.appendChild(n[0])}),this.highlight&&o({className:this.classes.highlight,node:s,pattern:i}),t(s)},_getFooter:function(t,e){return this.templates.footer?this.templates.footer({query:t,suggestions:e,dataset:this.name}):null},_getHeader:function(t,e){return this.templates.header?this.templates.header({query:t,suggestions:e,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=t()},_injectQuery:function(t,i){return e.isObject(i)?e.mixin({_query:t},i):i},update:function(e){function i(t){r||(r=!0,t=(t||[]).slice(0,s.limit),a=t.length,s._overwrite(e,t),a<s.limit&&s.async&&s.trigger("asyncRequested",e))}function n(i){i=i||[],!o&&a<s.limit&&(s.cancel=t.noop,a+=i.length,s._append(e,i.slice(0,s.limit-a)),s.async&&s.trigger("asyncReceived",e))}var s=this,o=!1,r=!1,a=0;this.cancel(),this.cancel=function(){o=!0,s.cancel=t.noop,s.async&&s.trigger("asyncCanceled",e)},this.source(e,i,n),!r&&i([])},cancel:t.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=t("<div>")}}),i}(),l=function(){"use strict";function i(i,n){function s(e){var i=o.$node.find(e.node).first();return e.node=i.length?i:t("<div>").appendTo(o.$node),new a(e,n)}var o=this;i=i||{},i.node||t.error("node is required"),n.mixin(this),this.$node=t(i.node),this.query=null,this.datasets=e.map(i.datasets,s)}return e.mixin(i.prototype,s,{_onSelectableClick:function(e){this.trigger("selectableClicked",t(e.currentTarget))},_onRendered:function(t,e,i,n){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",e,i,n)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){function t(t){return t.isEmpty()}return e.every(this.datasets,t)},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var t=this.getActiveSelectable();t&&t.removeClass(this.classes.cursor)},_ensureVisible:function(t){var e,i,n,s;e=t.position().top,i=e+t.outerHeight(!0),n=this.$node.scrollTop(),s=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),0>e?this.$node.scrollTop(n+e):i>s&&this.$node.scrollTop(n+(i-s))},bind:function(){var t,i=this;return t=e.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,t),e.each(this.datasets,function(t){t.onSync("asyncRequested",i._propagate,i).onSync("asyncCanceled",i._propagate,i).onSync("asyncReceived",i._propagate,i).onSync("rendered",i._onRendered,i).onSync("cleared",i._onCleared,i)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.addClass(this.classes.open)},close:function(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(t){this.$node.attr("dir",t)},selectableRelativeToCursor:function(t){var e,i,n,s;return i=this.getActiveSelectable(),e=this._getSelectables(),n=i?e.index(i):-1,s=n+t,s=(s+1)%(e.length+1)-1,s=-1>s?e.length-1:s,-1===s?null:e.eq(s)},setCursor:function(t){this._removeCursor(),(t=t&&t.first())&&(t.addClass(this.classes.cursor),this._ensureVisible(t))},getSelectableData:function(t){return t&&t.length?a.extractData(t):null},getActiveSelectable:function(){var t=this._getSelectables().filter(this.selectors.cursor).first();return t.length?t:null},getTopSelectable:function(){var t=this._getSelectables().first();return t.length?t:null},update:function(t){function i(e){e.update(t)}var n=t!==this.query;return n&&(this.query=t,e.each(this.datasets,i)),n},empty:function(){function t(t){t.clear()}e.each(this.datasets,t),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){function i(t){t.destroy()}this.$node.off(".tt"),this.$node=t("<div>"),e.each(this.datasets,i)}}),i}(),c=function(){"use strict";function t(){l.apply(this,[].slice.call(arguments,0))}var i=l.prototype;return e.mixin(t.prototype,l.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),i.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),i.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),i._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),i._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(t){return this.$node.css("ltr"===t?this.css.ltr:this.css.rtl),i.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),t}(),d=function(){"use strict";function i(i,s){var o,r,a,l,c,d,h,u,p,f,g;i=i||{},i.input||t.error("missing input"),i.menu||t.error("missing menu"),i.eventBus||t.error("missing event bus"),s.mixin(this),this.eventBus=i.eventBus,this.minLength=e.isNumber(i.minLength)?i.minLength:1,this.input=i.input,this.menu=i.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),o=n(this,"activate","open","_onFocused"),r=n(this,"deactivate","_onBlurred"),a=n(this,"isActive","isOpen","_onEnterKeyed"),l=n(this,"isActive","isOpen","_onTabKeyed"),c=n(this,"isActive","_onEscKeyed"),d=n(this,"isActive","open","_onUpKeyed"),h=n(this,"isActive","open","_onDownKeyed"),u=n(this,"isActive","isOpen","_onLeftKeyed"),p=n(this,"isActive","isOpen","_onRightKeyed"),f=n(this,"_openIfActive","_onQueryChanged"),g=n(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",o,this).onSync("blurred",r,this).onSync("enterKeyed",a,this).onSync("tabKeyed",l,this).onSync("escKeyed",c,this).onSync("upKeyed",d,this).onSync("downKeyed",h,this).onSync("leftKeyed",u,this).onSync("rightKeyed",p,this).onSync("queryChanged",f,this).onSync("whitespaceChanged",g,this).onSync("langDirChanged",this._onLangDirChanged,this)}function n(t){var i=[].slice.call(arguments,1);return function(){var n=[].slice.call(arguments);e.each(i,function(e){return t[e].apply(t,n)})}}return e.mixin(i.prototype,{_hacks:function(){var i,n;i=this.input.$input||t("<div>"),n=this.menu.$node||t("<div>"),i.on("blur.tt",function(t){var s,o,r;s=document.activeElement,o=n.is(s),r=n.has(s).length>0,e.isMsie()&&(o||r)&&(t.preventDefault(),t.stopImmediatePropagation(),e.defer(function(){i.focus()}))}),n.on("mousedown.tt",function(t){t.preventDefault()})},_onSelectableClicked:function(t,e){this.select(e)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(t,e,i,n){this._updateHint(),this.eventBus.trigger("render",i,n,e)},_onAsyncRequested:function(t,e,i){this.eventBus.trigger("asyncrequest",i,e)},_onAsyncCanceled:function(t,e,i){this.eventBus.trigger("asynccancel",i,e)},_onAsyncReceived:function(t,e,i){this.eventBus.trigger("asyncreceive",i,e)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(t,e){var i;(i=this.menu.getActiveSelectable())&&this.select(i)&&e.preventDefault()},_onTabKeyed:function(t,e){var i;(i=this.menu.getActiveSelectable())?this.select(i)&&e.preventDefault():(i=this.menu.getTopSelectable())&&this.autocomplete(i)&&e.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function(t,e){this._minLengthMet(e)?this.menu.update(e):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(t,e){this.dir!==e&&(this.dir=e,this.menu.setLanguageDirection(e))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(t){return t=e.isString(t)?t:this.input.getQuery()||"",t.length>=this.minLength},_updateHint:function(){var t,i,n,s,o,a,l;t=this.menu.getTopSelectable(),i=this.menu.getSelectableData(t),n=this.input.getInputValue(),!i||e.isBlankString(n)||this.input.hasOverflow()?this.input.clearHint():(s=r.normalizeQuery(n),o=e.escapeRegExChars(s),a=new RegExp("^(?:"+o+")(.+$)","i"),l=a.exec(i.val),l&&this.input.setHint(n+l[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return this.isActive()?!0:!this.isEnabled()||this.eventBus.before("active")?!1:(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return this.isActive()?this.eventBus.before("idle")?!1:(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0):!0},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(t){this.input.setQuery(e.toStr(t))},getVal:function(){return this.input.getQuery()},select:function(t){var e=this.menu.getSelectableData(t);return e&&!this.eventBus.before("select",e.obj)?(this.input.setQuery(e.val,!0),this.eventBus.trigger("select",e.obj),this.close(),!0):!1},autocomplete:function(t){var e,i,n;return e=this.input.getQuery(),i=this.menu.getSelectableData(t),n=i&&e!==i.val,n&&!this.eventBus.before("autocomplete",i.obj)?(this.input.setQuery(i.val),this.eventBus.trigger("autocomplete",i.obj),!0):!1},moveCursor:function(t){var e,i,n,s,o;return e=this.input.getQuery(),i=this.menu.selectableRelativeToCursor(t),n=this.menu.getSelectableData(i),s=n?n.obj:null,o=this._minLengthMet()&&this.menu.update(e),o||this.eventBus.before("cursorchange",s)?!1:(this.menu.setCursor(i),n?this.input.setInputValue(n.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",s),!0)},destroy:function(){this.input.destroy(),this.menu.destroy()}}),i}();!function(){"use strict";function s(e,i){e.each(function(){var e,n=t(this);(e=n.data(g.typeahead))&&i(e,n)})}function o(t,e){return t.clone().addClass(e.classes.hint).removeData().css(e.css.hint).css(h(t)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})}function a(t,e){t.data(g.attrs,{dir:t.attr("dir"),autocomplete:t.attr("autocomplete"),spellcheck:t.attr("spellcheck"),style:t.attr("style")}),t.addClass(e.classes.input).attr({autocomplete:"off",spellcheck:!1});try{!t.attr("dir")&&t.attr("dir","auto")}catch(i){}return t}function h(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}function u(t){var i,n;i=t.data(g.www),n=t.parent().filter(i.selectors.wrapper),e.each(t.data(g.attrs),function(i,n){e.isUndefined(i)?t.removeAttr(n):t.attr(n,i)}),t.removeData(g.typeahead).removeData(g.www).removeData(g.attr).removeClass(i.classes.input),n.length&&(t.detach().insertAfter(n),n.remove())}function p(i){var n,s;return n=e.isJQuery(i)||e.isElement(i),s=n?t(i).first():[],s.length?s:null}var f,g,m;f=t.fn.typeahead,g={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},m={initialize:function(s,h){function u(){var i,u,m,v,b,y,w,x,C,_,T;e.each(h,function(t){t.highlight=!!s.highlight}),i=t(this),u=t(f.html.wrapper),m=p(s.hint),v=p(s.menu),b=s.hint!==!1&&!m,y=s.menu!==!1&&!v,b&&(m=o(i,f)),y&&(v=t(f.html.menu).css(f.css.menu)),m&&m.val(""),i=a(i,f),(b||y)&&(u.css(f.css.wrapper),i.css(b?f.css.input:f.css.inputWithNoHint),i.wrap(u).parent().prepend(b?m:null).append(y?v:null)),T=y?c:l,w=new n({el:i}),x=new r({hint:m,input:i},f),C=new T({node:v,datasets:h},f),_=new d({input:x,menu:C,eventBus:w,minLength:s.minLength},f),i.data(g.www,f),i.data(g.typeahead,_)}var f;return h=e.isArray(h)?h:[].slice.call(arguments,1),
s=s||{},f=i(s.classNames),this.each(u)},isEnabled:function(){var t;return s(this.first(),function(e){t=e.isEnabled()}),t},enable:function(){return s(this,function(t){t.enable()}),this},disable:function(){return s(this,function(t){t.disable()}),this},isActive:function(){var t;return s(this.first(),function(e){t=e.isActive()}),t},activate:function(){return s(this,function(t){t.activate()}),this},deactivate:function(){return s(this,function(t){t.deactivate()}),this},isOpen:function(){var t;return s(this.first(),function(e){t=e.isOpen()}),t},open:function(){return s(this,function(t){t.open()}),this},close:function(){return s(this,function(t){t.close()}),this},select:function(e){var i=!1,n=t(e);return s(this.first(),function(t){i=t.select(n)}),i},autocomplete:function(e){var i=!1,n=t(e);return s(this.first(),function(t){i=t.autocomplete(n)}),i},moveCursor:function(t){var e=!1;return s(this.first(),function(i){e=i.moveCursor(t)}),e},val:function(t){var e;return arguments.length?(s(this,function(e){e.setVal(t)}),this):(s(this.first(),function(t){e=t.getVal()}),e)},destroy:function(){return s(this,function(t,e){u(e),t.destroy()}),this}},t.fn.typeahead=function(t){return m[t]?m[t].apply(this,[].slice.call(arguments,1)):m.initialize.apply(this,arguments)},t.fn.typeahead.noConflict=function(){return t.fn.typeahead=f,this}}()}),define("text!templates/public/tplMain.html",[],function(){return'<div class="row">\n    <div class="col-md-12">\n      <div class="main-box">\n        <div class="panel panel-default">\n          <div class="panel-body">\n            <div class="row">\n              <div class="col-lg-4">\n\n              </div>\n              <div class="col-lg-4">\n                <div class="input-group">\n                  <input id="sel-torneo" type="text" class="form-control" placeholder="Escribe el nombre del torneo...">\n                  <span class="input-group-btn">\n                    <button id="go-torneo" class="btn btn-default" type="button">Ir</button>\n                  </span>\n                </div>\n              </div>\n              <div class="col-lg-4">\n\n              </div>\n            </div>\n          </div>\n        </div>\n\n      </div>\n    </div>\n</div>\n'}),define("views/public/MainView",["jquery","bootstrap","bloodhound","typeahead","core/BaseView","collections/TorneosCollection","text!templates/public/tplMain.html"],function(t,e,i,n,s,o,r){var a=s.extend({template:_.template(r),events:{"typeahead:select #sel-torneo":"selToreno","click #go-torneo":"goTorneo"},initialize:function(){this.torneos=new o,this.listenTo(this.torneos,"add",this.agregarTorneo),this.listenTo(this.torneos,"sync",this.syncTorneos),this.torneosDesc=[],this.torneo=null,this.torneos.fetch()},render:function(){return this.$el.html(this.template()),this},agregarTorneo:function(t){this.torneosDesc.push({clave:t.get("clave"),descripcion:t.get("descripcion")})},syncTorneos:function(){this.setUp()},setUp:function(){var e=new Bloodhound({datumTokenizer:function(t){return Bloodhound.tokenizers.whitespace(t.descripcion)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:this.torneosDesc});e.initialize(),t("#sel-torneo").typeahead(null,{displayKey:"descripcion",source:e.ttAdapter()})},selToreno:function(t,e){this.torneo=e},goTorneo:function(){this.torneo&&Backbone.history.navigate("torneo/"+this.torneo.clave,{trigger:!0})}});return a}),define("text!templates/public/tplMainNav.html",[],function(){return'<div class="row">\n  <div class="col-md-12">\n    <div class="container">\n      <div class="navbar-header">\n        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">\n          <span class="sr-only">Toggle navigation</span>\n          <span class="icon-bar"></span>\n        </button>\n        <a id="home" class="navbar-brand title-entuliga" href="#">entuliga</a>\n      </div>\n      <div id="navbar" class="collapse navbar-collapse">\n        <ul class="minus-right nav navbar-nav navbar-right">\n          <button id="signup" type="button" class="btn btn-default navbar-btn">Registrar</button>\n          <button id="signin" type="button" class="btn btn-success navbar-btn">Ingresar</button>\n        </ul>\n      </div>\n    </div>\n    \n  </div>\n</div>\n\n'}),define("views/public/MainNavView",["jquery","core/BaseView","text!templates/public/tplMainNav.html","Session"],function(t,e,i,n){var s=e.extend({el:t("#hotel-nav"),template:_.template(i),events:{"click #signin":"signin","click #signup":"signup","click #home":"home"},initialize:function(){this.render()},render:function(){return this.$el.html(this.template()),this},signin:function(){Backbone.history.navigate("admin",{trigger:!0})},signup:function(){Backbone.history.navigate("signup",{trigger:!0})},home:function(){Backbone.history.navigate("#",{trigger:!0})}});return s}),define("text!templates/public/torneo/tplRowJornadaPartido.html",[],function(){return'<td><%= localNombre %></td>\n<td><img class="avatar avatar-ss" src="<%= localLogo %>" /></td>\n<td><%= localPuntos %></td>\n<td> - </td>\n<td><%= visitaPuntos %></td>\n<td><img class="avatar avatar-ss" src="<%= visitaLogo %>" /></td>\n<td><%= visitaNombre %></td>\n<td><%= horarioDes %></td>\n<td><%= canchaNombre %></td>'}),define("views/public/torneo/RowJornadaPartidoView",["jquery","underscore","core/BaseView","text!templates/public/torneo/tplRowJornadaPartido.html"],function(t,e,i,n){var s=i.extend({template:e.template(n),tagName:"tr",events:{},initialize:function(t){this.model=t},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}});return s}),define("text!templates/public/torneo/tplTorneoJornada.html",[],function(){return'<div class="form-group">\n    <select class="form-control" id="select-torneo-jornada" placeholder="Jornada...">\n    </select>\n</div>\n<table id="torneo-partidos" class="table table-condensed">\n    <thead>\n    <tr>\n        <th>Local</th>\n        <th></th>\n        <th></th>\n        <th></th>\n        <th></th>\n        <th></th>\n        <th>Visita</th>\n        <th>Fecha</th>\n        <th>Lugar</th>\n    </tr>\n    </thead>\n    <tbody>\n    </tbody>\n</table>'}),define("views/public/torneo/TorneoJornadaView",["jquery","bootstrap","core/BaseView","collections/TorneoJornadasCollection","collections/TorneoPartidosCollection","views/public/torneo/RowJornadaPartidoView","text!templates/public/torneo/tplTorneoJornada.html"],function(t,e,i,n,s,o,r){var a=i.extend({el:"#torneo-jornadas",template:_.template(r),events:{"change #select-torneo-jornada":"changeJornada"},initialize:function(t){this.model=t,this.render(),this.torneojornadas=new n,this.torneojornadas.setTorneo(this.model),this.listenTo(this.torneojornadas,"add",this.agregarTorneoJornada),this.listenTo(this.torneojornadas,"sync",this.syncTorneoJornadas),this.torneojornadas.fetch(),this.torneopartidos=new s,this.listenTo(this.torneopartidos,"add",this.agregarTorneoPartido),this.listenTo(this.torneopartidos,"sync",this.syncTorneoPartidos)},render:function(){this.$el.html(this.template(this.model.toJSON()))},agregarTorneoJornada:function(e){t("#select-torneo-jornada").append(t("<option>",{value:e.get("id"),text:e.get("nombre")+" - "+e.get("fase")}))},syncTorneoJornadas:function(){t("#select-torneo-jornada").change()},changeJornada:function(e){var i=this.torneojornadas.get(t(e.target).val());"undefined"!=typeof i&&(this.torneoJornada=i,t("#torneo-partidos").find("tbody").html(""),this.torneopartidos.setTorneoJornada(this.torneoJornada),this.torneopartidos.fetch())},agregarTorneoPartido:function(e){var i=new o(e);t("#torneo-partidos").find("tbody:last").append(i.render().$el)},syncTorneoPartidos:function(){}});return a}),define("models/ClasificacionModel",["backbone"],function(t){var e=t.Model.extend({urlRoot:"clasificacion",defaults:{},initialize:function(){}});return e}),define("collections/ClasificacionesCollection",["backbone","models/ClasificacionModel"],function(t,e){var i=t.Collection.extend({model:e,url:function(){return"torneo/"+this.torneo.get("id")+"/clasificacion"},setTorneo:function(t){this.torneo=t}});return i}),define("text!templates/public/torneo/tplRowEstadisticaEquipo.html",[],function(){return'<td><img class="avatar avatar-ss" src="<%= equipoLogo %>"/></td>\n<td><%= equipoNombre %></td>\n<td><%= totalJugados %></td>\n<td><%= totalGanados %></td>\n<td><%= totalPerdidos %></td>\n<td><%= totalPuntosFavor %></td>\n<td><%= totalPuntosContra %></td>\n<td><%= diferenciaPuntos %></td>'}),define("views/public/torneo/RowEstadisticaEquipoView",["jquery","underscore","core/BaseView","text!templates/public/torneo/tplRowEstadisticaEquipo.html"],function(t,e,i,n){var s=i.extend({template:e.template(n),tagName:"tr",events:{},initialize:function(t){this.model=t},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}});return s}),define("text!templates/public/torneo/tplTorneoPosiciones.html",[],function(){return'<table id="torneo-tabla-posiciones" class="table table-condensed">\n    <thead>\n    <tr>\n        <th></th>\n        <th>Equipo</th>\n        <th>PJ</th>\n        <th>PG</th>\n        <th>PP</th>\n        <th>PF</th>\n        <th>PC</th>\n        <th>Dif</th>\n    </tr>\n    </thead>\n    <tbody>\n    </tbody>\n</table>'}),define("views/public/torneo/TorneoPosicionesView",["jquery","bootstrap","core/BaseView","collections/ClasificacionesCollection","views/public/torneo/RowEstadisticaEquipoView","text!templates/public/torneo/tplTorneoPosiciones.html"],function(t,e,i,n,s,o){var r=i.extend({el:"#torneo-posiciones",template:_.template(o),events:{},initialize:function(t){this.model=t,this.clasificaciones=new n,this.clasificaciones.setTorneo(this.model),this.listenTo(this.clasificaciones,"add",this.agregarClasificacion),this.listenTo(this.clasificaciones,"sync",this.syncClasificaciones),this.clasificaciones.fetch(),this.render()},render:function(){this.$el.html(this.template(this.model.toJSON()))},agregarClasificacion:function(e){var i=new s(e);t("#torneo-tabla-posiciones").find("tbody:last").append(i.render().$el)},syncClasificaciones:function(){}});return r}),define("models/EstadisticaModel",["backbone"],function(t){var e=t.Model.extend({urlRoot:"estadistica",defaults:{},initialize:function(){}});return e}),define("collections/EstadisticasCollection",["backbone","models/EstadisticaModel"],function(t,e){var i=t.Collection.extend({model:e,url:function(){return"torneo/"+this.torneo.get("id")+"/estadistica"},setTorneo:function(t){this.torneo=t}});return i}),define("text!templates/public/torneo/tplRowEstadisticaJugador.html",[],function(){return'<td><img class="avatar avatar-ss" src="<%= fotoJugador %>" /></td>\n<td><%= nombreJugador %></td>\n<td><img class="avatar avatar-ss" src="<%= logoEquipo %>"/></td>\n<td><%= nombreEquipo %></td>\n<td><%= valor %></td>'}),define("views/public/torneo/RowEstadisticaJugadorView",["jquery","underscore","core/BaseView","text!templates/public/torneo/tplRowEstadisticaJugador.html"],function(t,e,i,n){var s=i.extend({template:e.template(n),tagName:"tr",events:{},initialize:function(t){this.model=t},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}});return s}),define("text!templates/public/torneo/tplTorneoLideres.html",[],function(){return'<div class="row">\n    <div class="col-xs-12">\n        <table id="torneo-lideres-puntos" class="table table-condensed">\n            <thead>\n            <tr>\n                <th></th>\n                <th>Jugador</th>\n                <th></th>\n                <th>Equipo</th>\n                <th>Puntos</th>\n            </tr>\n            </thead>\n            <tbody>\n            </tbody>\n        </table>\n    </div>\n</div>\n<div class="row">\n    <div class="col-xs-12">\n        <table id="torneo-lideres-rebotes" class="table table-condensed">\n            <thead>\n            <tr>\n                <th></th>\n                <th>Jugador</th>\n                <th></th>\n                <th>Equipo</th>\n                <th>Rebotes</th>\n            </tr>\n            </thead>\n            <tbody>\n            </tbody>\n        </table>\n    </div>\n</div>\n<div class="row">\n    <div class="col-xs-12">\n        <table id="torneo-lideres-asistencias" class="table table-condensed">\n            <thead>\n            <tr>\n                <th></th>\n                <th>Jugador</th>\n                <th></th>\n                <th>Equipo</th>\n                <th>Asistencia</th>\n            </tr>\n            </thead>\n            <tbody>\n            </tbody>\n        </table>\n    </div>\n</div>\n<div class="row">\n    <div class="col-xs-12">\n        <table id="torneo-lideres-bloqueos" class="table table-condensed">\n            <thead>\n            <tr>\n                <th></th>\n                <th>Jugador</th>\n                <th></th>\n                <th>Equipo</th>\n                <th>Bloqueos</th>\n            </tr>\n            </thead>\n            <tbody>\n            </tbody>\n        </table>\n    </div>\n</div>\n<div class="row">\n    <div class="col-xs-12">\n        <table id="torneo-lideres-robos" class="table table-condensed">\n            <thead>\n            <tr>\n                <th></th>\n                <th>Jugador</th>\n                <th></th>\n                <th>Equipo</th>\n                <th>Robos</th>\n            </tr>\n            </thead>\n            <tbody>\n            </tbody>\n        </table>\n    </div>\n</div>'}),define("views/public/torneo/TorneoLideresView",["jquery","bootstrap","core/BaseView","collections/EstadisticasCollection","views/public/torneo/RowEstadisticaJugadorView","text!templates/public/torneo/tplTorneoLideres.html"],function(t,e,i,n,s,o){var r=i.extend({el:"#torneo-lideres",template:_.template(o),events:{},initialize:function(t){this.model=t,this.lideres=new n,this.lideres.setTorneo(this.model),this.listenTo(this.lideres,"add",this.agregarLider),this.listenTo(this.lideres,"sync",this.syncLideres),this.lideres.fetch(),this.render(),this.hideTables()},render:function(){this.$el.html(this.template(this.model.toJSON()))},agregarLider:function(e){var i=new s(e),n=this.getTableByTipoEstadistica(e.get("tipo"));t("#"+n).show(),t("#"+n).find("tbody:last").append(i.render().$el)},syncLideres:function(){},hideTables:function(){t("#torneo-lideres-puntos").hide(),t("#torneo-lideres-rebotes").hide(),t("#torneo-lideres-asistencias").hide(),t("#torneo-lideres-bloqueos").hide(),t("#torneo-lideres-robos").hide()},getTableByTipoEstadistica:function(t){switch(t){case 1:return"torneo-lideres-puntos";case 2:return"torneo-lideres-rebotes";case 3:return"torneo-lideres-asistencias";case 4:return"torneo-lideres-bloqueos";case 5:return"torneo-lideres-robos"}}});return r}),define("text!templates/public/torneo/tplTorneoLanding.html",[],function(){return'<div class="row">\n    <div class="col-md-12">\n      <div class="main-box">\n        <div class="panel panel-info">\n            <div class="panel-body">\n                <div class="row">\n                    <div class="col-md-6">\n                        <div class="panel panel-default">\n                            <div id="liga-detail" class="panel-body">\n                                <h4 class="list-group-item-heading"><%= nombre %></h4>\n                                <p class="list-group-item-text"><%= descripcion %></p>\n                                <p class="list-group-item-text"><%= fechaInicioDes %> - <%= fechaFinDes %></p>\n                                <p class="list-group-item-text"><%= status %></p>\n                            </div>\n                        </div>\n                        <div class="panel panel-default">\n                            <div class="panel-heading">\n                                <h3 class="panel-title">Lideres</h3>\n                            </div>\n                            <div id="torneo-lideres" class="panel-body">\n                            </div>\n                        </div>\n                    </div>\n                    <div class="col-md-6">\n                        <div class="panel panel-default">\n                            <div class="panel-heading">\n                                <h3 class="panel-title">Posiciones</h3>\n                            </div>\n                            <div id="torneo-posiciones" class="panel-body">\n                            </div>\n                        </div>\n                        <div class="panel panel-default">\n                            <div class="panel-heading">\n                                <h3 class="panel-title">Jornada</h3>\n                            </div>\n                            <div id="torneo-jornadas" class="panel-body">\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n      </div>\n    </div>\n</div>\n'}),define("views/public/torneo/TorneoLandingView",["jquery","bootstrap","core/BaseView","models/TorneoModel","views/public/torneo/TorneoJornadaView","views/public/torneo/TorneoPosicionesView","views/public/torneo/TorneoLideresView","text!templates/public/torneo/tplTorneoLanding.html"],function(t,e,i,n,s,o,r,a){var l=i.extend({template:_.template(a),events:{},initialize:function(t){console.log(t),this.model=new n,this.model.set({id:t.clave}),this.listenTo(this.model,"sync",this.syncTorneoSuccess),this.model.fetch()},render:function(){return this},syncTorneoSuccess:function(){this.$el.html(this.template(this.model.toJSON())),new s(this.model),new r(this.model),new o(this.model)}});return l}),define("router",["jquery","underscore","backbone","core/BaseRouter","views/LoginView","views/SignupView","views/TokenValidateView","views/TokenChangePassView","views/private/perfil/PerfilAdminView","views/private/MainAdminNavView","views/private/LigaAdminView","views/private/TorneoAdminView","views/private/EquipoAdminView","views/private/JugadorAdminView","views/private/ArbitroAdminView","views/private/CanchaAdminView","views/private/partido/PartidoAdminView","views/public/MainView","views/public/MainNavView","views/public/torneo/TorneoLandingView","Session"],function(t,e,i,n,s,o,r,a,l,c,d,h,u,p,f,g,m,v,b,y,w){var x=n.extend({routes:{"":"main","/":"main","/#":"main",login:"login",signup:"signup","token/:token":"token","change/:token":"changeToken",admin:"admin","admin/perfil":"adminPerfil","admin/ligas":"adminLigas","admin/torneos":"adminTorneos","admin/torneos/:liga":"adminTorneos","admin/equipos":"adminEquipos","admin/jugadores":"adminJugadores","admin/arbitros":"adminArbitros","admin/canchas":"adminCanchas","admin/partido/:partido":"adminPartido","torneo/:clave":"publicTorneo"},requresAuth:["#admin"],preventAccessWhenAuth:["#login"],before:function(t,n){var s=w.get("authenticated"),o=i.history.location.hash,r=o.indexOf(this.requresAuth)>-1,a=e.contains(this.preventAccessWhenAuth,o);if(r&&!s)i.history.navigate("login",{trigger:!0});else{if(!s||!a)return n();i.history.navigate("",{trigger:!0})}},after:function(){console.log("after router")},changeView:function(e){function i(e){this.currentView&&this.currentView.close(),this.currentView=e,t("#container-body").html(e.render().$el)}i(e)},initialize:function(){},main:function(){var t=new v;this.changeView(t),new b},login:function(){var t=new s;this.changeView(t)},signup:function(){var t=new o;this.changeView(t)},token:function(t){new b;var e=new r({token:t});this.changeView(e)},changeToken:function(t){new b;var e=new a({token:t});this.changeView(e)},admin:function(){var t=new l;this.changeView(t),new c},adminPerfil:function(){var t=new l;this.changeView(t),new c},adminLigas:function(){var t=new d;this.changeView(t),new c},adminTorneos:function(){var t=new h;this.changeView(t),new c},adminEquipos:function(){var t=new u;this.changeView(t),new c},adminJugadores:function(){var t=new p;this.changeView(t),new c},adminArbitros:function(){var t=new f;this.changeView(t),new c},adminCanchas:function(){var t=new g;this.changeView(t),new c},adminPartido:function(t){var e=new m;e.setIdPartido(t),this.changeView(e),new c},publicTorneo:function(t){console.log("Selection: "+t);var e=new y({clave:t});this.changeView(e)}});return x}),define("app",["jquery","backbone","backboneValidation","jquerycookie","jquerySerializeObject","router","Session"],function(t,e,i,n,s,o,r){var a=t('<div class="modal fade" data-keyboard="false" tabindex="-1"><div class="modal-base"><img src="img/basket.gif" height="150px" width="150px" style="display: block; margin: auto;"/></div></div>'),l=0,c=e.Model.extend({start:function(){if(void 0===t.cookie("auth_token"))t.ajaxSettings.headers=[],r.set("authenticated",!1);else{var i=JSON.parse(t.cookie("auth_token"));t.ajaxSetup({headers:{"X-Auth-Token":i.token}}),r.set("authenticated",!0),r.set("username",i.username)}new o;e.history.start(),t.ajaxSetup({cache:!1,beforeSend:function(){a.modal("show"),l+=1},complete:function(){1>=l&&a.modal("hide"),l-=1},statusCode:{401:function(){r.set("authenticated",!1),r.set("username",""),t.removeCookie("auth_token"),"undefined"!==t.ajaxSettings.headers["X-Auth-Token"]&&delete t.ajaxSettings.headers["X-Auth-Token"],e.history.navigate("login",{trigger:!0})},403:function(){r.set("authenticated",!1),r.set("username",""),t.removeCookie("auth_token"),"undefined"!==t.ajaxSettings.headers["X-Auth-Token"]&&delete t.ajaxSettings.headers["X-Auth-Token"],e.history.navigate("login",{trigger:!0})}}});new o;_.extend(e.Validation.callbacks,{valid:function(t,e,i){var n=t.$("[name="+e+"]"),s=n.closest(".form-group");s.removeClass("has-error"),s.find(".help-block").html("").addClass("hidden")},invalid:function(t,e,i,n){var s=t.$("[name="+e+"]"),o=s.closest(".form-group");o.addClass("has-error"),o.find(".help-block").html(i).removeClass("hidden")}}),t.fn.serializeObject=function(){"use strict";var e={},i=function(i,n){var s=e[n.name];"undefined"!=typeof s&&null!==s?t.isArray(s)?s.push(n.value):e[n.name]=[s,n.value]:e[n.name]=n.value};return t.each(this.serializeArray(),i),e}}});return c}),require.config({shim:{underscore:{exports:"_"},backbone:{deps:["underscore","jquery"],exports:"Backbone"},marionette:{deps:["radio","backbone"],exports:"Mn"},backboneValidation:{deps:["backbone"]},bootstrap:{deps:["jquery"]},selecter:{deps:["jquery"]},jquerycookie:{deps:["jquery"]},jquerySerializeObject:{deps:["jquery"]},datetimepicker:{deps:["jquery"]},bloodhound:{deps:["jquery"]},typeahead:{deps:["jquery"]},fabric:{deps:["jquery"]}},paths:{backbone:"vendor/backbone/backbone",marionette:"vendor/backbone/backbone-marionette/backbone.marionette",radio:"vendor/backbone/backbone.radio/backbone.radio",jquery:"vendor/jquery/jquery",jquerycookie:"vendor/jquery/cookie/jquery.cookie",jquerySerializeObject:"vendor/jquery/serializeObject/jquery.serializeObject.min",backboneValidation:"vendor/backbone/backbone-validation/backbone-validation",text:"vendor/requirejs-text/text",underscore:"vendor/underscore/underscore-min",bootstrap:"vendor/bootstrap/bootstrap",selecter:"vendor/bootstrap/select/bootstrap-select.min",datetimepicker:"vendor/bootstrap/datetimepicker/bootstrap-datetimepicker",dateformat:"vendor/date-format/date.format",bloodhound:"vendor/typeahead/bloodhound",typeahead:"vendor/typeahead/typeahead.jquery",fabric:"vendor/fabric/fabric.min"}}),require(["app"],function(t){var e=new t;e.start()}),define("main",function(){});